2025-09-10 00:00:18.648 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/6 - null null
2025-09-10 00:00:18.728 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:00:18.760 +03:00 [INF] No cached response available for this request.
2025-09-10 00:00:18.776 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-10 00:00:18.779 +03:00 [INF] Route matched with {action = "GetProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDetailDto]]] GetProduct(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-10 00:00:18.788 +03:00 [INF] Executing GetProduct for ID: 6
2025-09-10 00:00:18.791 +03:00 [INF] Fetching product details for Product ID: 6, IsActive: True, DeletedOnly: False
2025-09-10 00:00:18.793 +03:00 [INF] Retrieving product by id: 6, isActive: True, deletedOnly: False
2025-09-10 00:00:18.794 +03:00 [INF] Getting cache for key: Product:6_active:True_deleted:False
2025-09-10 00:00:19.029 +03:00 [WRN] Cache miss for key: Product:6_active:True_deleted:False
2025-09-10 00:00:19.043 +03:00 [INF] Execute GetAll for entity Product
2025-09-10 00:00:19.203 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE `p`.`Id` = @__id_0)
2025-09-10 00:00:19.387 +03:00 [INF] Executed DbCommand (88ms) [Parameters=[@__id_0='?' (DbType = Int32), @__isActive_1='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`fitType`, `t`.`IsActive`, `t`.`c`, `t`.`Price`, `t`.`SubCategoryId`, `t`.`c0`, `t`.`Id0`, `t`.`DiscountPercent`, `t`.`IsActive0`, `t`.`StartDate`, `t`.`EndDate`, `t`.`Name0`, `t`.`Description0`, `t0`.`Id`, `t0`.`Url`, `t1`.`Id`, `t1`.`Color`, `t1`.`Size`, `t1`.`Waist`, `t1`.`Length`, `t1`.`Quantity`, `t1`.`ProductId`
FROM (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`fitType`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `c`, `p`.`Price`, `p`.`SubCategoryId`, (`d`.`Id` IS NOT NULL AND (`d`.`DeletedAt` IS NULL)) AND (`d`.`EndDate` > UTC_TIMESTAMP()) AS `c0`, `d`.`Id` AS `Id0`, `d`.`DiscountPercent`, `d`.`IsActive` AS `IsActive0`, `d`.`StartDate`, `d`.`EndDate`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL) AND (`p`.`IsActive` = @__isActive_1)
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
LEFT JOIN (
    SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity`, `p0`.`ProductId`
    FROM `ProductVariants` AS `p0`
    WHERE `p0`.`DeletedAt` IS NULL AND (`p0`.`Quantity` <> 0)
) AS `t1` ON `t`.`Id` = `t1`.`ProductId`
ORDER BY `t`.`Id`, `t`.`Id0`, `t0`.`Id`
2025-09-10 00:00:19.422 +03:00 [INF] Product found: yA5TnXy1Gg (ID: 6)
2025-09-10 00:00:19.429 +03:00 [INF] Setting cache for key: Product:6_active:True_deleted:False
2025-09-10 00:00:19.484 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDetailDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 00:00:19.498 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProduct (E-Commerce) in 710.6907ms
2025-09-10 00:00:19.505 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-10 00:00:19.508 +03:00 [INF] The response could not be cached for this request.
2025-09-10 00:00:19.512 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/6 - 200 1213 application/json; charset=utf-8 864.2355ms
2025-09-10 00:00:19.769 +03:00 [INF] Cache set successfully for key: Product:6_active:True_deleted:False with tags: [Productwithdata]
2025-09-10 00:00:33.856 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/6?isActive=true&includeDeleted=true - null null
2025-09-10 00:00:33.864 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:00:33.868 +03:00 [INF] No cached response available for this request.
2025-09-10 00:00:33.870 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-10 00:00:33.874 +03:00 [INF] Route matched with {action = "GetProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDetailDto]]] GetProduct(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-10 00:00:33.880 +03:00 [INF] Executing GetProduct for ID: 6
2025-09-10 00:00:33.885 +03:00 [INF] Fetching product details for Product ID: 6, IsActive: True, DeletedOnly: False
2025-09-10 00:00:33.889 +03:00 [INF] Retrieving product by id: 6, isActive: True, deletedOnly: False
2025-09-10 00:00:33.892 +03:00 [INF] Getting cache for key: Product:6_active:True_deleted:False
2025-09-10 00:00:34.107 +03:00 [INF] Cache hit for key: Product:6_active:True_deleted:False
2025-09-10 00:00:34.135 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDetailDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 00:00:34.140 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProduct (E-Commerce) in 261.9238ms
2025-09-10 00:00:34.147 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-10 00:00:34.176 +03:00 [INF] The response could not be cached for this request.
2025-09-10 00:00:34.193 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/6?isActive=true&includeDeleted=true - 200 1211 application/json; charset=utf-8 337.548ms
2025-09-10 00:01:11.504 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/id?isActive=true&includeDeleted=true - null null
2025-09-10 00:01:11.786 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:01:11.941 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 00:01:11.952 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-10 00:01:11.956 +03:00 [INF] Route matched with {action = "GetProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDetailDto]]] GetProduct(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-10 00:01:11.981 +03:00 [INF] Executing GetProduct for ID: 0
2025-09-10 00:01:11.985 +03:00 [INF] Fetching product details for Product ID: 0, IsActive: True, DeletedOnly: True
2025-09-10 00:01:11.988 +03:00 [INF] Retrieving product by id: 0, isActive: True, deletedOnly: True
2025-09-10 00:01:11.994 +03:00 [INF] Getting cache for key: Product:0_active:True_deleted:True
2025-09-10 00:01:12.277 +03:00 [WRN] Cache miss for key: Product:0_active:True_deleted:True
2025-09-10 00:01:12.281 +03:00 [INF] Execute GetAll for entity Product
2025-09-10 00:01:12.434 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE `p`.`Id` = @__id_0)
2025-09-10 00:01:12.444 +03:00 [WRN] Product with id: 0 not found in database
2025-09-10 00:01:12.448 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDetailDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 00:01:12.454 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProduct (E-Commerce) in 485.6017ms
2025-09-10 00:01:12.457 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-10 00:01:12.463 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/id?isActive=true&includeDeleted=true - 404 196 application/json; charset=utf-8 959.3685ms
2025-09-10 00:02:00.412 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/6?isActive=true&includeDeleted=true - null null
2025-09-10 00:02:00.419 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:02:00.568 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 00:02:00.576 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-10 00:02:00.581 +03:00 [INF] Route matched with {action = "GetProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDetailDto]]] GetProduct(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-10 00:02:00.588 +03:00 [INF] Executing GetProduct for ID: 6
2025-09-10 00:02:00.591 +03:00 [INF] Fetching product details for Product ID: 6, IsActive: True, DeletedOnly: True
2025-09-10 00:02:00.593 +03:00 [INF] Retrieving product by id: 6, isActive: True, deletedOnly: True
2025-09-10 00:02:00.596 +03:00 [INF] Getting cache for key: Product:6_active:True_deleted:True
2025-09-10 00:02:00.809 +03:00 [WRN] Cache miss for key: Product:6_active:True_deleted:True
2025-09-10 00:02:00.818 +03:00 [INF] Execute GetAll for entity Product
2025-09-10 00:02:00.973 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE `p`.`Id` = @__id_0)
2025-09-10 00:02:00.998 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-10 00:02:01.165 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__id_0='?' (DbType = Int32), @__isActive_1='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`fitType`, `t`.`IsActive`, `t`.`c`, `t`.`Price`, `t`.`SubCategoryId`, `t`.`c0`, `t`.`Id0`, `t`.`DiscountPercent`, `t`.`IsActive0`, `t`.`StartDate`, `t`.`EndDate`, `t`.`Name0`, `t`.`Description0`, `t0`.`Id`, `t0`.`Url`, `t1`.`Id`, `t1`.`Color`, `t1`.`Size`, `t1`.`Waist`, `t1`.`Length`, `t1`.`Quantity`, `t1`.`ProductId`
FROM (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`fitType`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `c`, `p`.`Price`, `p`.`SubCategoryId`, (`d`.`Id` IS NOT NULL AND (`d`.`DeletedAt` IS NULL)) AND (`d`.`EndDate` > UTC_TIMESTAMP()) AS `c0`, `d`.`Id` AS `Id0`, `d`.`DiscountPercent`, `d`.`IsActive` AS `IsActive0`, `d`.`StartDate`, `d`.`EndDate`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NOT NULL) AND (`p`.`IsActive` = @__isActive_1)
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
LEFT JOIN (
    SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity`, `p0`.`ProductId`
    FROM `ProductVariants` AS `p0`
    WHERE `p0`.`DeletedAt` IS NULL AND (`p0`.`Quantity` <> 0)
) AS `t1` ON `t`.`Id` = `t1`.`ProductId`
ORDER BY `t`.`Id`, `t`.`Id0`, `t0`.`Id`
2025-09-10 00:02:01.179 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDetailDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 00:02:01.187 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProduct (E-Commerce) in 600.3167ms
2025-09-10 00:02:01.199 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-10 00:02:01.204 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/6?isActive=true&includeDeleted=true - 404 196 application/json; charset=utf-8 791.728ms
2025-09-10 00:02:14.279 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/6?isActive=true&includeDeleted=true - null null
2025-09-10 00:02:14.292 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:02:14.443 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 00:02:14.463 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-10 00:02:14.467 +03:00 [INF] Route matched with {action = "GetProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDetailDto]]] GetProduct(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-10 00:02:14.473 +03:00 [INF] Executing GetProduct for ID: 6
2025-09-10 00:02:14.475 +03:00 [INF] Fetching product details for Product ID: 6, IsActive: True, DeletedOnly: True
2025-09-10 00:02:14.477 +03:00 [INF] Retrieving product by id: 6, isActive: True, deletedOnly: True
2025-09-10 00:02:14.481 +03:00 [INF] Getting cache for key: Product:6_active:True_deleted:True
2025-09-10 00:02:14.741 +03:00 [WRN] Cache miss for key: Product:6_active:True_deleted:True
2025-09-10 00:02:14.745 +03:00 [INF] Execute GetAll for entity Product
2025-09-10 00:02:14.896 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE `p`.`Id` = @__id_0)
2025-09-10 00:02:15.061 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__id_0='?' (DbType = Int32), @__isActive_1='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`fitType`, `t`.`IsActive`, `t`.`c`, `t`.`Price`, `t`.`SubCategoryId`, `t`.`c0`, `t`.`Id0`, `t`.`DiscountPercent`, `t`.`IsActive0`, `t`.`StartDate`, `t`.`EndDate`, `t`.`Name0`, `t`.`Description0`, `t0`.`Id`, `t0`.`Url`, `t1`.`Id`, `t1`.`Color`, `t1`.`Size`, `t1`.`Waist`, `t1`.`Length`, `t1`.`Quantity`, `t1`.`ProductId`
FROM (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`fitType`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `c`, `p`.`Price`, `p`.`SubCategoryId`, (`d`.`Id` IS NOT NULL AND (`d`.`DeletedAt` IS NULL)) AND (`d`.`EndDate` > UTC_TIMESTAMP()) AS `c0`, `d`.`Id` AS `Id0`, `d`.`DiscountPercent`, `d`.`IsActive` AS `IsActive0`, `d`.`StartDate`, `d`.`EndDate`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NOT NULL) AND (`p`.`IsActive` = @__isActive_1)
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
LEFT JOIN (
    SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity`, `p0`.`ProductId`
    FROM `ProductVariants` AS `p0`
    WHERE `p0`.`DeletedAt` IS NULL AND (`p0`.`Quantity` <> 0)
) AS `t1` ON `t`.`Id` = `t1`.`ProductId`
ORDER BY `t`.`Id`, `t`.`Id0`, `t0`.`Id`
2025-09-10 00:02:15.069 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDetailDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 00:02:15.076 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProduct (E-Commerce) in 603.9707ms
2025-09-10 00:02:15.081 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-10 00:02:15.087 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/6?isActive=true&includeDeleted=true - 404 196 application/json; charset=utf-8 807.8598ms
2025-09-10 00:02:19.533 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/6 - null null
2025-09-10 00:02:19.580 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:02:19.744 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 00:02:19.752 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-10 00:02:19.757 +03:00 [INF] Route matched with {action = "GetProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDetailDto]]] GetProduct(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-10 00:02:19.763 +03:00 [INF] Executing GetProduct for ID: 6
2025-09-10 00:02:19.765 +03:00 [INF] Fetching product details for Product ID: 6, IsActive: , DeletedOnly: 
2025-09-10 00:02:19.767 +03:00 [INF] Retrieving product by id: 6, isActive: , deletedOnly: 
2025-09-10 00:02:19.771 +03:00 [INF] Getting cache for key: Product:6_active:_deleted:
2025-09-10 00:02:19.983 +03:00 [WRN] Cache miss for key: Product:6_active:_deleted:
2025-09-10 00:02:19.987 +03:00 [INF] Execute GetAll for entity Product
2025-09-10 00:02:20.137 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE `p`.`Id` = @__id_0)
2025-09-10 00:02:20.300 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`fitType`, `t`.`IsActive`, `t`.`c`, `t`.`Price`, `t`.`SubCategoryId`, `t`.`c0`, `t`.`Id0`, `t`.`DiscountPercent`, `t`.`IsActive0`, `t`.`StartDate`, `t`.`EndDate`, `t`.`Name0`, `t`.`Description0`, `t0`.`Id`, `t0`.`Url`, `t1`.`Id`, `t1`.`Color`, `t1`.`Size`, `t1`.`Waist`, `t1`.`Length`, `t1`.`Quantity`, `t1`.`ProductId`
FROM (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`fitType`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `c`, `p`.`Price`, `p`.`SubCategoryId`, (`d`.`Id` IS NOT NULL AND (`d`.`DeletedAt` IS NULL)) AND (`d`.`EndDate` > UTC_TIMESTAMP()) AS `c0`, `d`.`Id` AS `Id0`, `d`.`DiscountPercent`, `d`.`IsActive` AS `IsActive0`, `d`.`StartDate`, `d`.`EndDate`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE `p`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
LEFT JOIN (
    SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity`, `p0`.`ProductId`
    FROM `ProductVariants` AS `p0`
    WHERE `p0`.`DeletedAt` IS NULL AND (`p0`.`Quantity` <> 0)
) AS `t1` ON `t`.`Id` = `t1`.`ProductId`
ORDER BY `t`.`Id`, `t`.`Id0`, `t0`.`Id`
2025-09-10 00:02:20.311 +03:00 [INF] Product found: yA5TnXy1Gg (ID: 6)
2025-09-10 00:02:20.314 +03:00 [INF] Setting cache for key: Product:6_active:_deleted:
2025-09-10 00:02:20.318 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDetailDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 00:02:20.325 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProduct (E-Commerce) in 562.8258ms
2025-09-10 00:02:20.333 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-10 00:02:20.337 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/6 - 200 1213 application/json; charset=utf-8 804.0777ms
2025-09-10 00:02:20.541 +03:00 [INF] Cache set successfully for key: Product:6_active:_deleted: with tags: [Productwithdata]
2025-09-10 00:08:46.474 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Cart - null null
2025-09-10 00:08:46.485 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:08:46.639 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 00:08:46.647 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.GetCart (E-Commerce)'
2025-09-10 00:08:46.656 +03:00 [INF] Route matched with {action = "GetCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CartDtos.CartDto]]] GetCart() on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 00:08:46.671 +03:00 [INF] Executing GetCart
2025-09-10 00:08:46.698 +03:00 [INF] Getting cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:08:46.709 +03:00 [INF] Getting cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:08:46.923 +03:00 [WRN] Cache miss for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:08:47.100 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 00:08:47.110 +03:00 [INF] Execute GetAll for entity Cart
2025-09-10 00:08:47.400 +03:00 [INF] Executed DbCommand (101ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-09-10 00:08:47.454 +03:00 [INF] Setting cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:08:47.684 +03:00 [INF] Cache set successfully for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5 with tags: [cart]
2025-09-10 00:08:47.705 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CartDtos.CartDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 00:08:47.742 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.GetCart (E-Commerce) in 1077.5077ms
2025-09-10 00:08:47.806 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.GetCart (E-Commerce)'
2025-09-10 00:08:47.864 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Cart - 200 360 application/json; charset=utf-8 1389.1915ms
2025-09-10 00:09:10.754 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5069/api/Cart/items/clear - null null
2025-09-10 00:09:10.771 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:09:10.927 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 00:09:10.936 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.ClearCart (E-Commerce)'
2025-09-10 00:09:10.946 +03:00 [INF] Route matched with {action = "ClearCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] ClearCart() on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 00:09:10.958 +03:00 [INF] Executing ClearCart
2025-09-10 00:09:10.970 +03:00 [INF] Clearing cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:09:11.205 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:09:11.305 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 00:09:11.347 +03:00 [INF] Clearing cart: 1
2025-09-10 00:09:11.432 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__cartId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE `c`.`CartId` = @__cartId_0
2025-09-10 00:09:11.442 +03:00 [INF] No items to clear for cart 1
2025-09-10 00:09:11.450 +03:00 [INF] Execute AddUserOpreationAsync
2025-09-10 00:09:11.458 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-09-10 00:09:11.483 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-09-10 00:09:12.540 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime), @p7='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `userOperationsLogs` (`CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `userOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 00:09:12.706 +03:00 [INF] Removing cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:09:13.148 +03:00 [INF] Cache removed successfully for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:09:13.171 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 00:09:13.186 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.ClearCart (E-Commerce) in 2233.2383ms
2025-09-10 00:09:13.195 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.ClearCart (E-Commerce)'
2025-09-10 00:09:13.202 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5069/api/Cart/items/clear - 200 128 application/json; charset=utf-8 2447.8213ms
2025-09-10 00:09:13.718 +03:00 [INF] Executing GetByIdAsync for entity Cart with ID: 1
2025-09-10 00:09:13.892 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
FROM `Cart` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-09-10 00:09:14.048 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Cart` SET `CheckoutDate` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 00:09:16.710 +03:00 [INF] Removing cache by tag: cart
2025-09-10 00:09:16.966 +03:00 [WRN] No cache entries found for tag: cart
2025-09-10 00:11:18.266 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json 65
2025-09-10 00:11:18.296 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:11:18.461 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 00:11:18.471 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 00:11:18.481 +03:00 [INF] Route matched with {action = "AddItemToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] AddItemToCart(E_Commerce.DtoModels.CartDtos.CreateCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 00:11:18.502 +03:00 [INF] Executing AddItemToCart for product ID: 6
2025-09-10 00:11:18.521 +03:00 [INF] Adding item to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 6
2025-09-10 00:11:18.863 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 00:11:18.872 +03:00 [INF] Execute GetAll for entity Product
2025-09-10 00:11:18.994 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__8__locals1_itemDto_ProductId_0='?' (DbType = Int32), @__8__locals1_itemDto_ProductVariantId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Price`, `t`.`c`, `t`.`EndDate`, `t`.`StartDate`, `t`.`DiscountPercent`, `t`.`DeletedAt`, `t`.`IsActive`, `t0`.`Id`, `t0`.`Quantity`, `t0`.`c`
FROM (
    SELECT `p`.`Id`, `p`.`Price`, `d`.`Id` IS NOT NULL AS `c`, `d`.`EndDate`, `d`.`StartDate`, `d`.`DiscountPercent`, `d`.`DeletedAt`, `d`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__8__locals1_itemDto_ProductId_0) AND `p`.`DeletedAt` IS NULL) AND `p`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Quantity`, `t1`.`c`, `t1`.`ProductId`
    FROM (
        SELECT `p0`.`Id`, `p0`.`Quantity`, 1 AS `c`, `p0`.`ProductId`, ROW_NUMBER() OVER(PARTITION BY `p0`.`ProductId` ORDER BY `p0`.`Id`) AS `row`
        FROM `ProductVariants` AS `p0`
        WHERE (`p0`.`Id` = @__8__locals1_itemDto_ProductVariantId_1) AND `p0`.`IsActive`
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
2025-09-10 00:11:19.007 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:11:19.089 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 00:11:19.176 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 00:11:19.183 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce) in 694.5408ms
2025-09-10 00:11:19.189 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 00:11:19.194 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 400 253 application/json; charset=utf-8 927.6376ms
2025-09-10 00:20:31.497 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Account/register - application/json 196
2025-09-10 00:20:31.645 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:20:31.708 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.AccountController.RegisterAsync (E-Commerce)'
2025-09-10 00:20:31.771 +03:00 [INF] Route matched with {action = "RegisterAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.AccountDtos.RegisterResponse]]] RegisterAsync(E_Commerce.DtoModels.AccountDtos.RegisterDto) on controller E_Commerce.Controllers.AccountController (E-Commerce).
2025-09-10 00:20:32.051 +03:00 [INF] In RegisterAsync Method 
2025-09-10 00:20:32.158 +03:00 [INF] Executing RegisterAsync for email: user@example.com
2025-09-10 00:20:32.527 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-10 00:20:32.647 +03:00 [ERR] Failed to register user: Passwords must have at least one uppercase ('A'-'Z').
2025-09-10 00:20:32.751 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.AccountDtos.RegisterResponse, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 00:20:32.780 +03:00 [INF] Executed action E_Commerce.Controllers.AccountController.RegisterAsync (E-Commerce) in 987.4899ms
2025-09-10 00:20:32.937 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.AccountController.RegisterAsync (E-Commerce)'
2025-09-10 00:20:33.454 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Account/register - 400 770 application/json; charset=utf-8 1957.2002ms
2025-09-10 00:20:50.030 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Account/register - application/json 196
2025-09-10 00:20:51.132 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:20:51.206 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.AccountController.RegisterAsync (E-Commerce)'
2025-09-10 00:20:51.246 +03:00 [INF] Route matched with {action = "RegisterAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.AccountDtos.RegisterResponse]]] RegisterAsync(E_Commerce.DtoModels.AccountDtos.RegisterDto) on controller E_Commerce.Controllers.AccountController (E-Commerce).
2025-09-10 00:20:51.427 +03:00 [INF] In RegisterAsync Method 
2025-09-10 00:20:51.452 +03:00 [INF] Executing RegisterAsync for email: user@example.com
2025-09-10 00:20:51.784 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-10 00:20:52.586 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedUserName` = @__normalizedUserName_0)
LIMIT 1
2025-09-10 00:20:52.889 +03:00 [INF] Executed DbCommand (88ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-10 00:20:54.239 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (Size = 13), @p7='?' (Size = 256), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
INSERT INTO `AspNetUsers` (`Id`, `AccessFailedCount`, `Age`, `ConcurrencyStamp`, `CreateAt`, `DeletedAt`, `Discriminator`, `Email`, `EmailConfirmed`, `Gender`, `ImageId`, `ImageId1`, `LastVisit`, `LockoutEnabled`, `LockoutEnd`, `Name`, `NormalizedEmail`, `NormalizedUserName`, `PasswordHash`, `PhoneNumber`, `PhoneNumberConfirmed`, `SecurityStamp`, `TwoFactorEnabled`, `UserName`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
2025-09-10 00:20:55.141 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedRoleName_0
LIMIT 2
2025-09-10 00:20:55.325 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__p_0='?' (Size = 255), @__p_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`UserId`, `a`.`RoleId`
FROM `AspNetUserRoles` AS `a`
WHERE (`a`.`UserId` = @__p_0) AND (`a`.`RoleId` = @__p_1)
LIMIT 1
2025-09-10 00:20:55.470 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedRoleName_0
LIMIT 2
2025-09-10 00:20:55.635 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedUserName` = @__normalizedUserName_0)
LIMIT 1
2025-09-10 00:20:55.748 +03:00 [INF] Executed DbCommand (88ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-10 00:20:56.012 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (Size = 255), @p24='?' (Size = 255), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p25='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (DbType = DateTime), @p7='?' (Size = 256), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 256), @p17='?' (Size = 256), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `AspNetUserRoles` (`RoleId`, `UserId`)
VALUES (@p0, @p1);
UPDATE `AspNetUsers` SET `AccessFailedCount` = @p2, `Age` = @p3, `ConcurrencyStamp` = @p4, `CreateAt` = @p5, `DeletedAt` = @p6, `Email` = @p7, `EmailConfirmed` = @p8, `Gender` = @p9, `ImageId` = @p10, `ImageId1` = @p11, `LastVisit` = @p12, `LockoutEnabled` = @p13, `LockoutEnd` = @p14, `Name` = @p15, `NormalizedEmail` = @p16, `NormalizedUserName` = @p17, `PasswordHash` = @p18, `PhoneNumber` = @p19, `PhoneNumberConfirmed` = @p20, `SecurityStamp` = @p21, `TwoFactorEnabled` = @p22, `UserName` = @p23
WHERE `Id` = @p24 AND `ConcurrencyStamp` = @p25;
SELECT ROW_COUNT();
2025-09-10 00:20:56.217 +03:00 [INF] User registered successfully.
2025-09-10 00:20:58.245 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.AccountDtos.RegisterResponse, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 00:20:58.488 +03:00 [INF] Executed action E_Commerce.Controllers.AccountController.RegisterAsync (E-Commerce) in 7161.6896ms
2025-09-10 00:20:58.631 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.AccountController.RegisterAsync (E-Commerce)'
2025-09-10 00:20:58.676 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Account/register - 201 672 application/json; charset=utf-8 8645.9197ms
2025-09-10 00:21:00.222 +03:00 [ERR] Failed to send welcome email to strin11g: The specified string is not in the form required for an e-mail address.
2025-09-10 00:21:01.834 +03:00 [WRN] Failed to process the job '2213': an exception occurred. Retry attempt 1 of 10 will be performed in 00:00:37.
System.FormatException: The specified string is not in the form required for an e-mail address.
   at System.Net.Mail.MailAddressParser.TryReadCfwsAndThrowIfIncomplete(String data, Int32 index, Int32& outIndex, Boolean throwExceptionIfFail)
   at System.Net.Mail.MailAddressParser.TryParseDomain(String data, Int32& index, String& domain, Boolean throwExceptionIfFail)
   at System.Net.Mail.MailAddressParser.TryParseAddress(String data, Boolean expectMultipleAddresses, Int32& index, ParseAddressInfo& parseAddressInfo, Boolean throwExceptionIfFail)
   at System.Net.Mail.MailAddressParser.ParseMultipleAddresses(String data)
   at System.Net.Mail.MailAddressCollection.ParseValue(String addresses)
   at E_Commerce.Services.EmailServices.EmailSender.SendEmailAsync(String email, String subject, String htmlMessage)
   at E_Commerce.Services.EmailServices.AccountEmailService.SendWelcomeEmailAsync(String email, String username)
   at InvokeStub_TaskAwaiter.GetResult(Object, Object, IntPtr*)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
2025-09-10 00:21:04.504 +03:00 [INF] Validation email sent successfully to user@example.com
2025-09-10 00:22:13.329 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Account/login - application/json 60
2025-09-10 00:22:13.477 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:22:13.490 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-09-10 00:22:13.688 +03:00 [INF] Route matched with {action = "LoginAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.TokenDtos.TokensDto]]] LoginAsync(E_Commerce.DtoModels.AccountDtos.LoginDTo) on controller E_Commerce.Controllers.AccountController (E-Commerce).
2025-09-10 00:22:14.238 +03:00 [INF] In LoginAsync Method 
2025-09-10 00:22:14.458 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-10 00:22:14.857 +03:00 [INF]  Generating Access Token for User ID: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:22:14.870 +03:00 [INF]  Generating Access Token for User ID: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:22:15.031 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedUserName` = @__normalizedUserName_0)
LIMIT 1
2025-09-10 00:22:15.199 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-10 00:22:15.411 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@p22='?' (Size = 255), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p23='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 256), @p15='?' (Size = 256), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `AspNetUsers` SET `AccessFailedCount` = @p0, `Age` = @p1, `ConcurrencyStamp` = @p2, `CreateAt` = @p3, `DeletedAt` = @p4, `Email` = @p5, `EmailConfirmed` = @p6, `Gender` = @p7, `ImageId` = @p8, `ImageId1` = @p9, `LastVisit` = @p10, `LockoutEnabled` = @p11, `LockoutEnd` = @p12, `Name` = @p13, `NormalizedEmail` = @p14, `NormalizedUserName` = @p15, `PasswordHash` = @p16, `PhoneNumber` = @p17, `PhoneNumberConfirmed` = @p18, `SecurityStamp` = @p19, `TwoFactorEnabled` = @p20, `UserName` = @p21
WHERE `Id` = @p22 AND `ConcurrencyStamp` = @p23;
SELECT ROW_COUNT();
2025-09-10 00:22:15.592 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-09-10 00:22:15.621 +03:00 [INF]  Access Token generated successfully for User ID: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:22:15.625 +03:00 [INF]  Generating Refresh Token for User ID: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:22:15.861 +03:00 [INF]  RefreshToken generated and stored for User ID: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:22:15.917 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.TokenDtos.TokensDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 00:22:15.973 +03:00 [INF] Executed action E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce) in 1762.1518ms
2025-09-10 00:22:17.053 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-09-10 00:22:17.258 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Account/login - 200 1249 application/json; charset=utf-8 3928.5682ms
2025-09-10 00:23:49.202 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json 62
2025-09-10 00:23:49.340 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json 62
2025-09-10 00:23:49.614 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:23:49.645 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:23:49.843 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 00:23:49.876 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 00:23:49.996 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 00:23:50.051 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 00:23:50.075 +03:00 [INF] Route matched with {action = "AddItemToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] AddItemToCart(E_Commerce.DtoModels.CartDtos.CreateCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 00:23:50.147 +03:00 [INF] Route matched with {action = "AddItemToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] AddItemToCart(E_Commerce.DtoModels.CartDtos.CreateCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 00:23:50.235 +03:00 [INF] Executing AddItemToCart for product ID: 6
2025-09-10 00:23:50.298 +03:00 [INF] Adding item to cart for user: e682f183-1c61-400b-aa5a-171750f446b5, product: 6
2025-09-10 00:23:50.282 +03:00 [INF] Executing AddItemToCart for product ID: 6
2025-09-10 00:23:50.366 +03:00 [INF] Adding item to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 6
2025-09-10 00:23:50.642 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 00:23:50.708 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 00:23:50.762 +03:00 [INF] Execute GetAll for entity Product
2025-09-10 00:23:50.833 +03:00 [INF] Execute GetAll for entity Product
2025-09-10 00:23:50.975 +03:00 [INF] Executed DbCommand (89ms) [Parameters=[@__8__locals1_itemDto_ProductId_0='?' (DbType = Int32), @__8__locals1_itemDto_ProductVariantId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Price`, `t`.`c`, `t`.`EndDate`, `t`.`StartDate`, `t`.`DiscountPercent`, `t`.`DeletedAt`, `t`.`IsActive`, `t0`.`Id`, `t0`.`Quantity`, `t0`.`c`
FROM (
    SELECT `p`.`Id`, `p`.`Price`, `d`.`Id` IS NOT NULL AS `c`, `d`.`EndDate`, `d`.`StartDate`, `d`.`DiscountPercent`, `d`.`DeletedAt`, `d`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__8__locals1_itemDto_ProductId_0) AND `p`.`DeletedAt` IS NULL) AND `p`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Quantity`, `t1`.`c`, `t1`.`ProductId`
    FROM (
        SELECT `p0`.`Id`, `p0`.`Quantity`, 1 AS `c`, `p0`.`ProductId`, ROW_NUMBER() OVER(PARTITION BY `p0`.`ProductId` ORDER BY `p0`.`Id`) AS `row`
        FROM `ProductVariants` AS `p0`
        WHERE (`p0`.`Id` = @__8__locals1_itemDto_ProductVariantId_1) AND `p0`.`IsActive`
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
2025-09-10 00:23:51.166 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__8__locals1_itemDto_ProductId_0='?' (DbType = Int32), @__8__locals1_itemDto_ProductVariantId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Price`, `t`.`c`, `t`.`EndDate`, `t`.`StartDate`, `t`.`DiscountPercent`, `t`.`DeletedAt`, `t`.`IsActive`, `t0`.`Id`, `t0`.`Quantity`, `t0`.`c`
FROM (
    SELECT `p`.`Id`, `p`.`Price`, `d`.`Id` IS NOT NULL AS `c`, `d`.`EndDate`, `d`.`StartDate`, `d`.`DiscountPercent`, `d`.`DeletedAt`, `d`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__8__locals1_itemDto_ProductId_0) AND `p`.`DeletedAt` IS NULL) AND `p`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Quantity`, `t1`.`c`, `t1`.`ProductId`
    FROM (
        SELECT `p0`.`Id`, `p0`.`Quantity`, 1 AS `c`, `p0`.`ProductId`, ROW_NUMBER() OVER(PARTITION BY `p0`.`ProductId` ORDER BY `p0`.`Id`) AS `row`
        FROM `ProductVariants` AS `p0`
        WHERE (`p0`.`Id` = @__8__locals1_itemDto_ProductVariantId_1) AND `p0`.`IsActive`
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
2025-09-10 00:23:51.493 +03:00 [INF] Retrieving cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:23:52.082 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:23:52.229 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 00:23:52.361 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 00:23:53.719 +03:00 [INF] Executing CreateAsync for entity Cart
2025-09-10 00:23:53.847 +03:00 [INF] Cart added successfully (pending save)
2025-09-10 00:23:53.897 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 00:23:54.045 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce) in 3792.8745ms
2025-09-10 00:23:54.162 +03:00 [INF] Executed DbCommand (137ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 255), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Cart` (`CheckoutDate`, `CreatedAt`, `CustomerId`, `DeletedAt`, `ModifiedAt`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT `Id`
FROM `Cart`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 00:23:54.763 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 00:23:54.827 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 400 253 application/json; charset=utf-8 5486.657ms
2025-09-10 00:23:55.027 +03:00 [INF] Executing CreateAsync for entity CartItem
2025-09-10 00:23:55.180 +03:00 [INF] CartItem added successfully (pending save)
2025-09-10 00:23:55.195 +03:00 [INF] Execute AddUserOpreationAsync
2025-09-10 00:23:55.209 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-09-10 00:23:55.248 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-09-10 00:23:56.341 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (DbType = DateTime), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime), @p16='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `CartItems` (`AddedAt`, `CartId`, `CreatedAt`, `DeletedAt`, `ModifiedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `UnitPrice`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `CartItems`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `userOperationsLogs` (`CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`, `UserId`)
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `userOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 00:23:56.693 +03:00 [INF] Removing cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:23:57.476 +03:00 [INF] Cache removed successfully for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:23:57.587 +03:00 [INF] Item added to cart for user: e682f183-1c61-400b-aa5a-171750f446b5, product: 6
2025-09-10 00:23:57.613 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 00:23:57.663 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce) in 7438.5659ms
2025-09-10 00:23:57.878 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 00:23:57.981 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 200 134 application/json; charset=utf-8 8779.6881ms
2025-09-10 00:23:58.905 +03:00 [INF] Executing GetByIdAsync for entity Cart with ID: 3
2025-09-10 00:23:59.079 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
FROM `Cart` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-09-10 00:24:01.811 +03:00 [INF] Removing cache by tag: cart
2025-09-10 00:24:02.027 +03:00 [WRN] No cache entries found for tag: cart
2025-09-10 00:24:09.425 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json 62
2025-09-10 00:24:09.494 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:24:09.672 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 00:24:09.740 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 00:24:09.766 +03:00 [INF] Route matched with {action = "AddItemToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] AddItemToCart(E_Commerce.DtoModels.CartDtos.CreateCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 00:24:09.801 +03:00 [INF] Executing AddItemToCart for product ID: 6
2025-09-10 00:24:09.848 +03:00 [INF] Adding item to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 6
2025-09-10 00:24:10.179 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 00:24:10.200 +03:00 [INF] Execute GetAll for entity Product
2025-09-10 00:24:10.289 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__8__locals1_itemDto_ProductId_0='?' (DbType = Int32), @__8__locals1_itemDto_ProductVariantId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Price`, `t`.`c`, `t`.`EndDate`, `t`.`StartDate`, `t`.`DiscountPercent`, `t`.`DeletedAt`, `t`.`IsActive`, `t0`.`Id`, `t0`.`Quantity`, `t0`.`c`
FROM (
    SELECT `p`.`Id`, `p`.`Price`, `d`.`Id` IS NOT NULL AS `c`, `d`.`EndDate`, `d`.`StartDate`, `d`.`DiscountPercent`, `d`.`DeletedAt`, `d`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__8__locals1_itemDto_ProductId_0) AND `p`.`DeletedAt` IS NULL) AND `p`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Quantity`, `t1`.`c`, `t1`.`ProductId`
    FROM (
        SELECT `p0`.`Id`, `p0`.`Quantity`, 1 AS `c`, `p0`.`ProductId`, ROW_NUMBER() OVER(PARTITION BY `p0`.`ProductId` ORDER BY `p0`.`Id`) AS `row`
        FROM `ProductVariants` AS `p0`
        WHERE (`p0`.`Id` = @__8__locals1_itemDto_ProductVariantId_1) AND `p0`.`IsActive`
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
2025-09-10 00:24:10.307 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:24:10.393 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 00:24:10.413 +03:00 [INF] Executing CreateAsync for entity CartItem
2025-09-10 00:24:10.418 +03:00 [INF] CartItem added successfully (pending save)
2025-09-10 00:24:10.430 +03:00 [INF] Execute AddUserOpreationAsync
2025-09-10 00:24:10.449 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-09-10 00:24:10.463 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-09-10 00:24:11.502 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (DbType = DateTime), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime), @p16='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `CartItems` (`AddedAt`, `CartId`, `CreatedAt`, `DeletedAt`, `ModifiedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `UnitPrice`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `CartItems`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `userOperationsLogs` (`CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`, `UserId`)
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `userOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 00:24:11.695 +03:00 [INF] Removing cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:24:12.224 +03:00 [INF] Cache removed successfully for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:24:12.235 +03:00 [INF] Item added to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 6
2025-09-10 00:24:12.247 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 00:24:12.268 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce) in 2470.342ms
2025-09-10 00:24:12.294 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 00:24:12.368 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 200 134 application/json; charset=utf-8 2948.5771ms
2025-09-10 00:24:12.712 +03:00 [INF] Executing GetByIdAsync for entity Cart with ID: 1
2025-09-10 00:24:13.144 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
FROM `Cart` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-09-10 00:24:25.318 +03:00 [ERR] Failed to send welcome email to strin11g: The specified string is not in the form required for an e-mail address.
2025-09-10 00:24:25.948 +03:00 [WRN] Failed to process the job '2213': an exception occurred. Retry attempt 3 of 10 will be performed in 00:01:46.
System.FormatException: The specified string is not in the form required for an e-mail address.
   at System.Net.Mail.MailAddressParser.TryReadCfwsAndThrowIfIncomplete(String data, Int32 index, Int32& outIndex, Boolean throwExceptionIfFail)
   at System.Net.Mail.MailAddressParser.TryParseDomain(String data, Int32& index, String& domain, Boolean throwExceptionIfFail)
   at System.Net.Mail.MailAddressParser.TryParseAddress(String data, Boolean expectMultipleAddresses, Int32& index, ParseAddressInfo& parseAddressInfo, Boolean throwExceptionIfFail)
   at System.Net.Mail.MailAddressParser.ParseMultipleAddresses(String data)
   at System.Net.Mail.MailAddressCollection.ParseValue(String addresses)
   at E_Commerce.Services.EmailServices.EmailSender.SendEmailAsync(String email, String subject, String htmlMessage)
   at E_Commerce.Services.EmailServices.AccountEmailService.SendWelcomeEmailAsync(String email, String username)
   at InvokeStub_TaskAwaiter.GetResult(Object, Object, IntPtr*)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
2025-09-10 00:24:28.493 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - null 0
2025-09-10 00:24:28.514 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:24:28.671 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 00:24:28.697 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-09-10 00:24:28.727 +03:00 [INF] Route matched with {action = "CheckOut", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] CheckOut() on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 00:24:28.898 +03:00 [INF] Executing CheckOut
2025-09-10 00:24:28.936 +03:00 [INF] Checkout of cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:24:28.982 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:24:29.161 +03:00 [INF] Executed DbCommand (97ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 00:24:29.768 +03:00 [INF] Executed DbCommand (225ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Cart` SET `CheckoutDate` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 00:24:30.816 +03:00 [INF] Removing cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:24:30.834 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 00:24:30.900 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.CheckOut (E-Commerce) in 2052.8183ms
2025-09-10 00:24:31.032 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-09-10 00:24:31.086 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - 200 122 application/json; charset=utf-8 2593.4245ms
2025-09-10 00:24:31.259 +03:00 [INF] Cache removed successfully for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:24:36.114 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json 62
2025-09-10 00:24:36.196 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:24:36.378 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 00:24:36.463 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 00:24:36.561 +03:00 [INF] Route matched with {action = "AddItemToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] AddItemToCart(E_Commerce.DtoModels.CartDtos.CreateCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 00:24:36.738 +03:00 [INF] Executing AddItemToCart for product ID: 6
2025-09-10 00:24:36.969 +03:00 [INF] Adding item to cart for user: e682f183-1c61-400b-aa5a-171750f446b5, product: 6
2025-09-10 00:24:37.661 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 00:24:37.998 +03:00 [INF] Execute GetAll for entity Product
2025-09-10 00:24:38.099 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__8__locals1_itemDto_ProductId_0='?' (DbType = Int32), @__8__locals1_itemDto_ProductVariantId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Price`, `t`.`c`, `t`.`EndDate`, `t`.`StartDate`, `t`.`DiscountPercent`, `t`.`DeletedAt`, `t`.`IsActive`, `t0`.`Id`, `t0`.`Quantity`, `t0`.`c`
FROM (
    SELECT `p`.`Id`, `p`.`Price`, `d`.`Id` IS NOT NULL AS `c`, `d`.`EndDate`, `d`.`StartDate`, `d`.`DiscountPercent`, `d`.`DeletedAt`, `d`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__8__locals1_itemDto_ProductId_0) AND `p`.`DeletedAt` IS NULL) AND `p`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Quantity`, `t1`.`c`, `t1`.`ProductId`
    FROM (
        SELECT `p0`.`Id`, `p0`.`Quantity`, 1 AS `c`, `p0`.`ProductId`, ROW_NUMBER() OVER(PARTITION BY `p0`.`ProductId` ORDER BY `p0`.`Id`) AS `row`
        FROM `ProductVariants` AS `p0`
        WHERE (`p0`.`Id` = @__8__locals1_itemDto_ProductVariantId_1) AND `p0`.`IsActive`
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
2025-09-10 00:24:38.166 +03:00 [INF] Retrieving cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:24:38.280 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 00:24:38.383 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 00:24:38.408 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce) in 1672.5812ms
2025-09-10 00:24:38.546 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 00:24:38.567 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 400 253 application/json; charset=utf-8 2452.9868ms
2025-09-10 00:25:19.863 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json 62
2025-09-10 00:25:19.971 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:25:20.142 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 00:25:20.162 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 00:25:20.170 +03:00 [INF] Route matched with {action = "AddItemToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] AddItemToCart(E_Commerce.DtoModels.CartDtos.CreateCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 00:25:20.202 +03:00 [INF] Executing AddItemToCart for product ID: 6
2025-09-10 00:25:20.209 +03:00 [INF] Adding item to cart for user: e682f183-1c61-400b-aa5a-171750f446b5, product: 6
2025-09-10 00:25:20.509 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 00:25:20.525 +03:00 [INF] Execute GetAll for entity Product
2025-09-10 00:25:20.608 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__8__locals1_itemDto_ProductId_0='?' (DbType = Int32), @__8__locals1_itemDto_ProductVariantId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Price`, `t`.`c`, `t`.`EndDate`, `t`.`StartDate`, `t`.`DiscountPercent`, `t`.`DeletedAt`, `t`.`IsActive`, `t0`.`Id`, `t0`.`Quantity`, `t0`.`c`
FROM (
    SELECT `p`.`Id`, `p`.`Price`, `d`.`Id` IS NOT NULL AS `c`, `d`.`EndDate`, `d`.`StartDate`, `d`.`DiscountPercent`, `d`.`DeletedAt`, `d`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__8__locals1_itemDto_ProductId_0) AND `p`.`DeletedAt` IS NULL) AND `p`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Quantity`, `t1`.`c`, `t1`.`ProductId`
    FROM (
        SELECT `p0`.`Id`, `p0`.`Quantity`, 1 AS `c`, `p0`.`ProductId`, ROW_NUMBER() OVER(PARTITION BY `p0`.`ProductId` ORDER BY `p0`.`Id`) AS `row`
        FROM `ProductVariants` AS `p0`
        WHERE (`p0`.`Id` = @__8__locals1_itemDto_ProductVariantId_1) AND `p0`.`IsActive`
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
2025-09-10 00:25:20.623 +03:00 [INF] Retrieving cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:25:20.709 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 00:25:20.804 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 00:25:20.828 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce) in 643.0871ms
2025-09-10 00:25:21.309 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 00:25:21.615 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 400 253 application/json; charset=utf-8 1799.8798ms
2025-09-10 00:25:46.939 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - null 0
2025-09-10 00:25:47.954 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:25:48.388 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 00:25:48.799 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-09-10 00:25:48.851 +03:00 [INF] Route matched with {action = "CheckOut", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] CheckOut() on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 00:25:48.888 +03:00 [INF] Executing CheckOut
2025-09-10 00:25:48.904 +03:00 [INF] Checkout of cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:25:48.921 +03:00 [INF] Retrieving cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:25:49.105 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 00:25:49.282 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Cart` SET `CheckoutDate` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 00:25:49.305 +03:00 [INF] Removing cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:25:49.317 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 00:25:49.330 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.CheckOut (E-Commerce) in 444.3122ms
2025-09-10 00:25:49.382 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-09-10 00:25:49.396 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - 200 122 application/json; charset=utf-8 2457.4434ms
2025-09-10 00:25:49.916 +03:00 [INF] Cache removed successfully for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:26:30.254 +03:00 [ERR] Failed to send welcome email to strin11g: The specified string is not in the form required for an e-mail address.
2025-09-10 00:26:30.851 +03:00 [WRN] Failed to process the job '2213': an exception occurred. Retry attempt 4 of 10 will be performed in 00:02:32.
System.FormatException: The specified string is not in the form required for an e-mail address.
   at System.Net.Mail.MailAddressParser.TryReadCfwsAndThrowIfIncomplete(String data, Int32 index, Int32& outIndex, Boolean throwExceptionIfFail)
   at System.Net.Mail.MailAddressParser.TryParseDomain(String data, Int32& index, String& domain, Boolean throwExceptionIfFail)
   at System.Net.Mail.MailAddressParser.TryParseAddress(String data, Boolean expectMultipleAddresses, Int32& index, ParseAddressInfo& parseAddressInfo, Boolean throwExceptionIfFail)
   at System.Net.Mail.MailAddressParser.ParseMultipleAddresses(String data)
   at System.Net.Mail.MailAddressCollection.ParseValue(String addresses)
   at E_Commerce.Services.EmailServices.EmailSender.SendEmailAsync(String email, String subject, String htmlMessage)
   at E_Commerce.Services.EmailServices.AccountEmailService.SendWelcomeEmailAsync(String email, String username)
   at InvokeStub_TaskAwaiter.GetResult(Object, Object, IntPtr*)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
2025-09-10 00:26:39.162 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/CustomerAddress - application/json 210
2025-09-10 00:26:39.538 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:26:39.707 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 00:26:39.736 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CustomerAddressController.CreateAddress (E-Commerce)'
2025-09-10 00:26:39.814 +03:00 [INF] Route matched with {action = "CreateAddress", controller = "CustomerAddress"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CustomerAddressDtos.CustomerAddressDto]]] CreateAddress(E_Commerce.DtoModels.CustomerAddressDtos.CreateCustomerAddressDto) on controller E_Commerce.Controllers.CustomerAddressController (E-Commerce).
2025-09-10 00:26:40.252 +03:00 [INF] Executing CreateAddress
2025-09-10 00:26:40.771 +03:00 [WRN] ModelState errors: Invalid phone number format
2025-09-10 00:26:40.817 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CustomerAddressDtos.CustomerAddressDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 00:26:40.874 +03:00 [INF] Executed action E_Commerce.Controllers.CustomerAddressController.CreateAddress (E-Commerce) in 823.3755ms
2025-09-10 00:26:41.138 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CustomerAddressController.CreateAddress (E-Commerce)'
2025-09-10 00:26:41.183 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/CustomerAddress - 400 208 application/json; charset=utf-8 2021.4078ms
2025-09-10 00:26:59.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/CustomerAddress - application/json 214
2025-09-10 00:27:05.277 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:27:08.307 +03:00 [INF] Executed DbCommand (166ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 00:27:13.179 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CustomerAddressController.CreateAddress (E-Commerce)'
2025-09-10 00:27:15.163 +03:00 [INF] Route matched with {action = "CreateAddress", controller = "CustomerAddress"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CustomerAddressDtos.CustomerAddressDto]]] CreateAddress(E_Commerce.DtoModels.CustomerAddressDtos.CreateCustomerAddressDto) on controller E_Commerce.Controllers.CustomerAddressController (E-Commerce).
2025-09-10 00:27:16.423 +03:00 [INF] Executing CreateAddress
2025-09-10 00:27:16.585 +03:00 [INF] Creating new address for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:27:17.182 +03:00 [INF] Getting address count for customer: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:27:18.607 +03:00 [INF] Executed DbCommand (111ms) [Parameters=[@__customerId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM `CustomerAddresses` AS `c`
WHERE (`c`.`CustomerId` = @__customerId_0) AND `c`.`DeletedAt` IS NULL
2025-09-10 00:27:19.125 +03:00 [INF] Executing CreateAsync for entity CustomerAddress
2025-09-10 00:27:19.407 +03:00 [INF] CustomerAddress added successfully (pending save)
2025-09-10 00:27:19.487 +03:00 [INF] Removing default from other addresses for customer: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:27:19.849 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__customerId_0='?' (Size = 255), @__excludeAddressId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AdditionalNotes`, `c`.`AddressType`, `c`.`City`, `c`.`Country`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`IsDefault`, `c`.`ModifiedAt`, `c`.`PhoneNumber`, `c`.`PostalCode`, `c`.`State`, `c`.`StreetAddress`
FROM `CustomerAddresses` AS `c`
WHERE (((`c`.`CustomerId` = @__customerId_0) AND (`c`.`Id` <> @__excludeAddressId_1)) AND `c`.`IsDefault`) AND `c`.`DeletedAt` IS NULL
2025-09-10 00:27:19.945 +03:00 [INF] Execute AddAdminOpreationAsync
2025-09-10 00:27:19.951 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-09-10 00:27:20.001 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-09-10 00:27:20.230 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@p0='?' (Size = 500), @p1='?' (Size = 20), @p2='?' (Size = 50), @p3='?' (Size = 50), @p4='?' (DbType = DateTime), @p5='?' (Size = 255), @p6='?' (DbType = DateTime), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?' (Size = 20), @p10='?' (Size = 20), @p11='?' (Size = 50), @p12='?' (Size = 200), @p13='?' (Size = 255), @p14='?' (DbType = DateTime), @p15='?' (DbType = DateTime), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime), @p19='?' (DbType = Int32), @p20='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `CustomerAddresses` (`AdditionalNotes`, `AddressType`, `City`, `Country`, `CreatedAt`, `CustomerId`, `DeletedAt`, `IsDefault`, `ModifiedAt`, `PhoneNumber`, `PostalCode`, `State`, `StreetAddress`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
SELECT `Id`
FROM `CustomerAddresses`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 00:27:20.453 +03:00 [INF] Removing cache by tag: customer_address
2025-09-10 00:27:21.318 +03:00 [INF] Removed 2 cache entries for tag: customer_address
2025-09-10 00:27:21.441 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CustomerAddressDtos.CustomerAddressDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 00:27:21.522 +03:00 [INF] Executed action E_Commerce.Controllers.CustomerAddressController.CreateAddress (E-Commerce) in 5130.8287ms
2025-09-10 00:27:21.585 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CustomerAddressController.CreateAddress (E-Commerce)'
2025-09-10 00:27:21.598 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/CustomerAddress - 201 541 application/json; charset=utf-8 22449.2575ms
2025-09-10 00:28:08.788 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/CustomerAddress - null null
2025-09-10 00:28:08.821 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:28:08.985 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 00:28:09.014 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CustomerAddressController.GetCustomerAddresses (E-Commerce)'
2025-09-10 00:28:09.041 +03:00 [INF] Route matched with {action = "GetCustomerAddresses", controller = "CustomerAddress"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.CustomerAddressDtos.CustomerAddressDto]]]] GetCustomerAddresses() on controller E_Commerce.Controllers.CustomerAddressController (E-Commerce).
2025-09-10 00:28:09.081 +03:00 [INF] Executing GetCustomerAddresses
2025-09-10 00:28:09.103 +03:00 [INF] Getting addresses for customer: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:28:09.112 +03:00 [INF] Getting cache for key: customer_addresses_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:28:09.334 +03:00 [WRN] Cache miss for key: customer_addresses_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:28:09.369 +03:00 [INF] Getting addresses for customer: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:28:09.586 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__customerId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AdditionalNotes`, `c`.`AddressType`, `c`.`City`, `c`.`Country`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`IsDefault`, `c`.`ModifiedAt`, `c`.`PhoneNumber`, `c`.`PostalCode`, `c`.`State`, `c`.`StreetAddress`, `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Discriminator`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `t`.`Age`, `t`.`CreateAt`, `t`.`DeletedAt`, `t`.`Gender`, `t`.`ImageId`, `t`.`ImageId1`, `t`.`LastVisit`, `t`.`Name`
FROM `CustomerAddresses` AS `c`
INNER JOIN (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Discriminator` = 'Customer'
) AS `t` ON `c`.`CustomerId` = `t`.`Id`
WHERE (`c`.`CustomerId` = @__customerId_0) AND `c`.`DeletedAt` IS NULL
ORDER BY `c`.`IsDefault` DESC, `c`.`CreatedAt`
2025-09-10 00:28:09.745 +03:00 [INF] Setting cache for key: customer_addresses_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:28:10.004 +03:00 [INF] Cache set successfully for key: customer_addresses_ac03a6c3-9450-420a-9e6e-ea8902c018c5 with tags: [customer_address]
2025-09-10 00:28:11.810 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.CustomerAddressDtos.CustomerAddressDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 00:28:11.974 +03:00 [INF] Executed action E_Commerce.Controllers.CustomerAddressController.GetCustomerAddresses (E-Commerce) in 2910.261ms
2025-09-10 00:28:12.648 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CustomerAddressController.GetCustomerAddresses (E-Commerce)'
2025-09-10 00:28:13.055 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/CustomerAddress - 200 552 application/json; charset=utf-8 4267.4584ms
2025-09-10 00:28:27.968 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order - application/json 41
2025-09-10 00:28:28.509 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order - application/json 42
2025-09-10 00:28:28.599 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:28:28.680 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:28:28.875 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 00:28:28.950 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 00:28:31.983 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 00:28:41.918 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 00:28:42.440 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto]]] CreateOrder(E_Commerce.DtoModels.OrderDtos.CreateOrderDto) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 00:28:42.994 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto]]] CreateOrder(E_Commerce.DtoModels.OrderDtos.CreateOrderDto) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 00:28:43.535 +03:00 [INF] Executing CreateOrder
2025-09-10 00:28:43.749 +03:00 [INF] Executing CreateOrder
2025-09-10 00:28:43.890 +03:00 [INF] Creating order from cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:28:43.890 +03:00 [INF] Creating order from cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:28:44.272 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 00:28:44.292 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 00:28:44.467 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 00:28:44.525 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 00:28:44.574 +03:00 [INF] Checking if address 30 exists for customer: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:28:44.591 +03:00 [INF] Checking if address 1 exists for customer: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:28:44.701 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__addressId_0='?' (DbType = Int32), @__customerId_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `CustomerAddresses` AS `c`
    WHERE ((`c`.`Id` = @__addressId_0) AND (`c`.`CustomerId` = @__customerId_1)) AND `c`.`DeletedAt` IS NULL)
2025-09-10 00:28:44.702 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__addressId_0='?' (DbType = Int32), @__customerId_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `CustomerAddresses` AS `c`
    WHERE ((`c`.`Id` = @__addressId_0) AND (`c`.`CustomerId` = @__customerId_1)) AND `c`.`DeletedAt` IS NULL)
2025-09-10 00:28:44.776 +03:00 [INF] Getting cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:28:44.907 +03:00 [INF] Getting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:28:44.860 +03:00 [INF] Getting cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:28:44.971 +03:00 [INF] Getting cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:28:45.165 +03:00 [WRN] Cache miss for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:28:45.218 +03:00 [WRN] Cache miss for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:28:45.306 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 00:28:45.315 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 00:28:45.356 +03:00 [INF] Execute GetAll for entity Cart
2025-09-10 00:28:45.387 +03:00 [INF] Execute GetAll for entity Cart
2025-09-10 00:28:45.498 +03:00 [INF] Executed DbCommand (94ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-09-10 00:28:45.524 +03:00 [INF] Executed DbCommand (99ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-09-10 00:28:46.558 +03:00 [ERR] Error getting cart for user ac03a6c3-9450-420a-9e6e-ea8902c018c5: Only public methods can be invoked in the background. Ensure your method has the `public` access modifier, and you aren't using explicit interface implementation.
2025-09-10 00:28:46.558 +03:00 [ERR] Error getting cart for user e682f183-1c61-400b-aa5a-171750f446b5: Only public methods can be invoked in the background. Ensure your method has the `public` access modifier, and you aren't using explicit interface implementation.
2025-09-10 00:28:47.868 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 00:28:47.925 +03:00 [INF] Execute GetAll for entity CartItem
2025-09-10 00:28:47.934 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 00:28:48.336 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce) in 4968.2329ms
2025-09-10 00:28:49.441 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce) in 5699.9128ms
2025-09-10 00:28:49.539 +03:00 [INF] Executed DbCommand (146ms) [Parameters=[@__cartItemId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE (`c`.`Id` = @__cartItemId_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 00:28:49.764 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 00:28:49.783 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 00:28:49.808 +03:00 [INF] CartItem 32 price updated to 3374.08790000
2025-09-10 00:28:49.842 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order - 400 188 application/json; charset=utf-8 21874.0422ms
2025-09-10 00:28:49.889 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order - 400 188 application/json; charset=utf-8 21380.3495ms
2025-09-10 00:28:50.059 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `CartItems` SET `UnitPrice` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 00:29:23.507 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Cart - null null
2025-09-10 00:29:23.619 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:29:23.787 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 00:29:23.871 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.GetCart (E-Commerce)'
2025-09-10 00:29:23.878 +03:00 [INF] Route matched with {action = "GetCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CartDtos.CartDto]]] GetCart() on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 00:29:23.902 +03:00 [INF] Executing GetCart
2025-09-10 00:29:23.909 +03:00 [INF] Getting cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:29:23.925 +03:00 [INF] Getting cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:29:24.155 +03:00 [WRN] Cache miss for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:29:24.313 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 00:29:24.338 +03:00 [INF] Execute GetAll for entity Cart
2025-09-10 00:29:24.507 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-09-10 00:29:25.434 +03:00 [ERR] Error getting cart for user ac03a6c3-9450-420a-9e6e-ea8902c018c5: Only public methods can be invoked in the background. Ensure your method has the `public` access modifier, and you aren't using explicit interface implementation.
2025-09-10 00:29:26.833 +03:00 [INF] Execute GetAll for entity CartItem
2025-09-10 00:29:29.012 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CartDtos.CartDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 00:29:29.691 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__cartItemId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE (`c`.`Id` = @__cartItemId_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 00:29:29.695 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.GetCart (E-Commerce) in 5795.0756ms
2025-09-10 00:29:30.502 +03:00 [INF] CartItem 32 price updated to 3374.08790000
2025-09-10 00:29:30.685 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.GetCart (E-Commerce)'
2025-09-10 00:29:30.836 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Cart - 500 240 application/json; charset=utf-8 7329.2432ms
2025-09-10 00:29:30.927 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `CartItems` SET `UnitPrice` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 00:29:55.954 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Cart - null null
2025-09-10 00:29:56.003 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:29:56.167 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 00:29:56.188 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.GetCart (E-Commerce)'
2025-09-10 00:29:56.196 +03:00 [INF] Route matched with {action = "GetCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CartDtos.CartDto]]] GetCart() on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 00:29:56.215 +03:00 [INF] Executing GetCart
2025-09-10 00:29:56.222 +03:00 [INF] Getting cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:29:56.228 +03:00 [INF] Getting cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:29:56.454 +03:00 [WRN] Cache miss for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:29:56.606 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 00:29:56.655 +03:00 [INF] Execute GetAll for entity Cart
2025-09-10 00:29:56.857 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-09-10 00:29:57.998 +03:00 [ERR] Error getting cart for user ac03a6c3-9450-420a-9e6e-ea8902c018c5: Only public methods can be invoked in the background. Ensure your method has the `public` access modifier, and you aren't using explicit interface implementation.
2025-09-10 00:29:58.951 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CartDtos.CartDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 00:29:58.962 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.GetCart (E-Commerce) in 2750.8799ms
2025-09-10 00:29:58.987 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.GetCart (E-Commerce)'
2025-09-10 00:29:59.018 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Cart - 500 240 application/json; charset=utf-8 3063.703ms
2025-09-10 00:29:59.952 +03:00 [INF] Execute GetAll for entity CartItem
2025-09-10 00:30:00.160 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[@__cartItemId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE (`c`.`Id` = @__cartItemId_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 00:30:00.484 +03:00 [INF] CartItem 32 price updated to 3374.08790000
2025-09-10 00:30:00.674 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `CartItems` SET `UnitPrice` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 00:30:53.459 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order - application/json 42
2025-09-10 00:30:53.630 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:30:53.844 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 00:30:53.971 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 00:30:54.021 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto]]] CreateOrder(E_Commerce.DtoModels.OrderDtos.CreateOrderDto) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 00:30:54.452 +03:00 [INF] Executing CreateOrder
2025-09-10 00:30:54.497 +03:00 [INF] Creating order from cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:30:54.846 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 00:30:55.612 +03:00 [INF] Executed DbCommand (93ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 00:30:55.876 +03:00 [INF] Checking if address 30 exists for customer: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:30:56.117 +03:00 [INF] Executed DbCommand (88ms) [Parameters=[@__addressId_0='?' (DbType = Int32), @__customerId_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `CustomerAddresses` AS `c`
    WHERE ((`c`.`Id` = @__addressId_0) AND (`c`.`CustomerId` = @__customerId_1)) AND `c`.`DeletedAt` IS NULL)
2025-09-10 00:30:56.222 +03:00 [INF] Getting cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:30:56.242 +03:00 [INF] Getting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:30:56.503 +03:00 [WRN] Cache miss for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:30:56.598 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 00:30:56.626 +03:00 [INF] Execute GetAll for entity Cart
2025-09-10 00:30:56.722 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-09-10 00:30:57.642 +03:00 [ERR] Error getting cart for user e682f183-1c61-400b-aa5a-171750f446b5: Only public methods can be invoked in the background. Ensure your method has the `public` access modifier, and you aren't using explicit interface implementation.
2025-09-10 00:30:58.628 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 00:30:58.677 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce) in 4252.804ms
2025-09-10 00:30:59.078 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 00:30:59.523 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order - 400 188 application/json; charset=utf-8 6063.7047ms
2025-09-10 00:30:59.605 +03:00 [INF] Execute GetAll for entity CartItem
2025-09-10 00:30:59.871 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__cartItemId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE (`c`.`Id` = @__cartItemId_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 00:30:59.969 +03:00 [INF] CartItem 31 price updated to 3374.08790000
2025-09-10 00:31:00.203 +03:00 [INF] Executed DbCommand (143ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `CartItems` SET `UnitPrice` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 00:34:05.783 +03:00 [INF] DB tables already exist. Exit install
2025-09-10 00:34:08.571 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-10 00:34:09.885 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-10 00:34:10.571 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-10 00:34:10.759 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-09-10 00:34:10.785 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-10 00:34:10.821 +03:00 [INF] Starting data seeding...
2025-09-10 00:34:10.874 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-10 00:34:11.589 +03:00 [INF] Executed DbCommand (135ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-10 00:34:11.683 +03:00 [INF] Role 'Admin' already exists.
2025-09-10 00:34:11.969 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-10 00:34:11.978 +03:00 [INF] Role 'User' already exists.
2025-09-10 00:34:12.153 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-10 00:34:12.236 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-09-10 00:34:12.245 +03:00 [INF] Data seeding completed successfully.
2025-09-10 00:34:14.051 +03:00 [INF] Now listening on: http://localhost:5069
2025-09-10 00:34:14.243 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-09-10 00:34:14.245 +03:00 [INF] Using the following options for SQL Server job storage:
2025-09-10 00:34:14.249 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-09-10 00:34:14.251 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-09-10 00:34:14.306 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-10 00:34:14.341 +03:00 [INF] Hosting environment: Development
2025-09-10 00:34:14.344 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-09-10 00:34:14.505 +03:00 [INF] Server mrrobot:15740:75f0a667 successfully announced in 163.6002 ms
2025-09-10 00:34:14.534 +03:00 [INF] Server mrrobot:15740:75f0a667 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-09-10 00:34:15.498 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-09-10 00:34:15.948 +03:00 [INF] Server mrrobot:15740:75f0a667 all the dispatchers started
2025-09-10 00:34:16.450 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 979.0533ms
2025-09-10 00:34:16.502 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 00:34:16.508 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-09-10 00:34:16.514 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 00:34:16.581 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 78.9313ms
2025-09-10 00:34:16.661 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 153.0254ms
2025-09-10 00:34:16.778 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 263.3543ms
2025-09-10 00:34:16.853 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-09-10 00:34:17.216 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 363.5661ms
2025-09-10 00:35:23.865 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Cart - null null
2025-09-10 00:35:23.881 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-10 00:35:24.252 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:35:24.563 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 00:35:24.601 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.GetCart (E-Commerce)'
2025-09-10 00:35:24.645 +03:00 [INF] Route matched with {action = "GetCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CartDtos.CartDto]]] GetCart() on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 00:35:24.755 +03:00 [INF] Executing GetCart
2025-09-10 00:35:24.764 +03:00 [INF] Getting cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:35:24.769 +03:00 [INF] Getting cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:35:24.990 +03:00 [WRN] Cache miss for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:35:34.414 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 00:35:47.130 +03:00 [INF] Execute GetAll for entity Cart
2025-09-10 00:35:53.546 +03:00 [INF] Executed DbCommand (94ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-09-10 00:37:14.123 +03:00 [INF] Execution RecurringJobScheduler recovered from the Faulted state after 00:00:22.3623363 and is in the Running state now
2025-09-10 00:37:43.669 +03:00 [INF] DB tables already exist. Exit install
2025-09-10 00:37:46.533 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-10 00:37:47.982 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-10 00:37:49.092 +03:00 [INF] Executed DbCommand (193ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-10 00:37:49.344 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-09-10 00:37:49.434 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-10 00:37:49.492 +03:00 [INF] Starting data seeding...
2025-09-10 00:37:49.597 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-10 00:37:50.830 +03:00 [INF] Executed DbCommand (179ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-10 00:37:51.039 +03:00 [INF] Role 'Admin' already exists.
2025-09-10 00:37:51.353 +03:00 [INF] Executed DbCommand (135ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-10 00:37:51.372 +03:00 [INF] Role 'User' already exists.
2025-09-10 00:37:51.639 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-10 00:37:52.266 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-09-10 00:37:52.271 +03:00 [INF] Data seeding completed successfully.
2025-09-10 00:37:54.759 +03:00 [INF] Now listening on: http://localhost:5069
2025-09-10 00:37:54.955 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-09-10 00:37:54.969 +03:00 [INF] Using the following options for SQL Server job storage:
2025-09-10 00:37:54.983 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-09-10 00:37:55.007 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-09-10 00:37:55.226 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-10 00:37:55.363 +03:00 [INF] Hosting environment: Development
2025-09-10 00:37:55.390 +03:00 [INF] Server mrrobot:17436:d21cac62 successfully announced in 160.9879 ms
2025-09-10 00:37:55.461 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-09-10 00:37:55.506 +03:00 [INF] Server mrrobot:17436:d21cac62 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-09-10 00:37:56.687 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-09-10 00:37:57.805 +03:00 [INF] Server mrrobot:17436:d21cac62 all the dispatchers started
2025-09-10 00:37:57.908 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 1188.7265ms
2025-09-10 00:37:58.149 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 00:37:58.367 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 00:37:58.145 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-09-10 00:37:58.615 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 248.0593ms
2025-09-10 00:37:58.653 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 504.282ms
2025-09-10 00:37:58.689 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 545.3071ms
2025-09-10 00:37:59.002 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-09-10 00:37:59.316 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 314.0901ms
2025-09-10 00:38:10.763 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Cart - null null
2025-09-10 00:38:10.778 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-10 00:38:11.132 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:38:11.365 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 00:38:11.400 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.GetCart (E-Commerce)'
2025-09-10 00:38:11.446 +03:00 [INF] Route matched with {action = "GetCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CartDtos.CartDto]]] GetCart() on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 00:38:11.584 +03:00 [INF] Executing GetCart
2025-09-10 00:38:11.591 +03:00 [INF] Getting cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:38:11.602 +03:00 [INF] Getting cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:38:11.822 +03:00 [WRN] Cache miss for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:38:13.806 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 00:38:13.817 +03:00 [INF] Execute GetAll for entity Cart
2025-09-10 00:38:14.224 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-09-10 00:38:16.120 +03:00 [INF] Setting cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:38:16.409 +03:00 [INF] Cache set successfully for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5 with tags: [cart]
2025-09-10 00:38:16.474 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CartDtos.CartDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 00:38:16.555 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.GetCart (E-Commerce) in 5079.3234ms
2025-09-10 00:38:16.620 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.GetCart (E-Commerce)'
2025-09-10 00:38:16.631 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Cart - 200 1038 application/json; charset=utf-8 5868.1355ms
2025-09-10 00:38:19.830 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:38:20.021 +03:00 [INF] Execute GetAll for entity CartItem
2025-09-10 00:38:20.050 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 00:38:20.183 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__cartItemId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE (`c`.`Id` = @__cartItemId_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 00:38:20.241 +03:00 [INF] CartItem 32 price updated to 3374.08790000
2025-09-10 00:38:20.507 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `CartItems` SET `UnitPrice` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 00:38:20.511 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Cart` SET `CheckoutDate` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 00:38:20.875 +03:00 [INF] Checkout date removed for cart of user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:38:28.875 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order - application/json 42
2025-09-10 00:38:28.914 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:38:29.077 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 00:38:29.228 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 00:38:29.253 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto]]] CreateOrder(E_Commerce.DtoModels.OrderDtos.CreateOrderDto) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 00:38:29.632 +03:00 [INF] Executing CreateOrder
2025-09-10 00:38:29.646 +03:00 [INF] Creating order from cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:38:29.994 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 00:38:30.076 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 00:38:30.087 +03:00 [INF] Checking if address 30 exists for customer: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:38:30.171 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__addressId_0='?' (DbType = Int32), @__customerId_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `CustomerAddresses` AS `c`
    WHERE ((`c`.`Id` = @__addressId_0) AND (`c`.`CustomerId` = @__customerId_1)) AND `c`.`DeletedAt` IS NULL)
2025-09-10 00:38:30.181 +03:00 [INF] Getting cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:38:30.182 +03:00 [INF] Getting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:38:30.395 +03:00 [WRN] Cache miss for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:38:38.687 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Cart - null null
2025-09-10 00:38:38.763 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 00:38:38.795 +03:00 [INF] Execute GetAll for entity Cart
2025-09-10 00:38:38.776 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 00:38:38.904 +03:00 [INF] Executed DbCommand (92ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-09-10 00:38:38.975 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 00:38:38.992 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.GetCart (E-Commerce)'
2025-09-10 00:38:39.014 +03:00 [INF] Route matched with {action = "GetCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CartDtos.CartDto]]] GetCart() on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 00:38:39.022 +03:00 [INF] Executing GetCart
2025-09-10 00:38:39.025 +03:00 [INF] Getting cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:38:39.027 +03:00 [INF] Getting cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:38:39.241 +03:00 [INF] Cache hit for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:38:39.262 +03:00 [INF] Cache hit for cart user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 00:38:39.264 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CartDtos.CartDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 00:38:39.268 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.GetCart (E-Commerce) in 249.4354ms
2025-09-10 00:38:39.275 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.GetCart (E-Commerce)'
2025-09-10 00:38:39.278 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Cart - 200 1036 application/json; charset=utf-8 591.9156ms
2025-09-10 00:38:40.706 +03:00 [INF] Setting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:38:40.926 +03:00 [INF] Cache set successfully for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5 with tags: [cart]
2025-09-10 00:38:40.938 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 00:38:41.039 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = 4
2025-09-10 00:38:41.144 +03:00 [INF] Execute GetAll for entity CartItem
2025-09-10 00:38:41.153 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE `o`.`OrderNumber` = @__orderNumber_0)
2025-09-10 00:38:41.164 +03:00 [INF] Executing CreateAsync for entity Order
2025-09-10 00:38:41.281 +03:00 [INF] Order added successfully (pending save)
2025-09-10 00:38:41.296 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__cartItemId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE (`c`.`Id` = @__cartItemId_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 00:38:41.304 +03:00 [INF] CartItem 31 price updated to 3374.08790000
2025-09-10 00:38:41.454 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `CartItems` SET `UnitPrice` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 00:38:41.571 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime), @p8='?' (Size = 500), @p9='?' (Size = 50), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Orders` (`CancelledAt`, `CreatedAt`, `CustomerAddressId`, `CustomerId`, `DeletedAt`, `DeliveredAt`, `DiscountAmount`, `ModifiedAt`, `Notes`, `OrderNumber`, `RestockedAt`, `ShippedAt`, `ShippingCost`, `Status`, `Subtotal`, `TaxAmount`, `Total`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Orders`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 00:38:41.693 +03:00 [INF] Executing CreateRangeAsync for entity OrderItem
2025-09-10 00:38:41.813 +03:00 [INF] 1 OrderItem entities added successfully (pending save)
2025-09-10 00:38:41.938 +03:00 [INF] Removing 3 from variant: 4
2025-09-10 00:38:41.995 +03:00 [INF] Executing GetByIdAsync for entity ProductVariant with ID: 4
2025-09-10 00:38:42.086 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 00:38:42.411 +03:00 [ERR] Error in RemoveQuntityAfterOrder for id: 4
System.NotSupportedException: Only public methods can be invoked in the background. Ensure your method has the `public` access modifier, and you aren't using explicit interface implementation.
   at Hangfire.Common.Job.Validate(Type type, String typeParameterName, MethodInfo method, String methodParameterName, Int32 argumentCount, String argumentParameterName) in C:\projects\hangfire-525\src\Hangfire.Core\Common\Job.cs:line 477
   at Hangfire.Common.Job..ctor(Type type, MethodInfo method, IReadOnlyList`1 args, String queue) in C:\projects\hangfire-525\src\Hangfire.Core\Common\Job.cs:line 204
   at Hangfire.Common.Job.FromExpression(LambdaExpression methodCall, Type explicitType, String queue) in C:\projects\hangfire-525\src\Hangfire.Core\Common\Job.cs:line 457
   at Hangfire.Common.Job.FromExpression(Expression`1 methodCall, String queue) in C:\projects\hangfire-525\src\Hangfire.Core\Common\Job.cs:line 357
   at Hangfire.Common.Job.FromExpression(Expression`1 methodCall) in C:\projects\hangfire-525\src\Hangfire.Core\Common\Job.cs:line 352
   at Hangfire.BackgroundJobClientExtensions.Create(IBackgroundJobClient client, Expression`1 methodCall, IState state) in C:\projects\hangfire-525\src\Hangfire.Core\BackgroundJobClientExtensions.cs:line 541
   at Hangfire.BackgroundJobClientExtensions.Enqueue(IBackgroundJobClient client, Expression`1 methodCall) in C:\projects\hangfire-525\src\Hangfire.Core\BackgroundJobClientExtensions.cs:line 86
   at E_Commerce.Services.ProductVariantServices.ProductVariantCommandService.RemoveQuntityAfterOrder(Int32 id, Int32 quantity) in D:\project_fashion\E-Commerce-API-main\Services\ProductVariantServices\ProductVariantCommandService.cs:line 120
2025-09-10 00:38:43.604 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 00:38:43.615 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce) in 14353.6779ms
2025-09-10 00:38:43.628 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 00:38:43.633 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order - 500 300 application/json; charset=utf-8 14757.4056ms
2025-09-10 00:38:44.464 +03:00 [INF] Retrieving cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:38:44.647 +03:00 [INF] Executed DbCommand (100ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 00:38:45.412 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Cart` SET `CheckoutDate` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 00:38:45.490 +03:00 [INF] Checkout date removed for cart of user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 00:42:57.229 +03:00 [INF] 2 servers were removed due to timeout
2025-09-10 00:48:07.387 +03:00 [ERR] Failed to send welcome email to strin11g: The specified string is not in the form required for an e-mail address.
2025-09-10 00:48:08.013 +03:00 [WRN] Failed to process the job '2213': an exception occurred. Retry attempt 7 of 10 will be performed in 00:25:07.
System.FormatException: The specified string is not in the form required for an e-mail address.
   at System.Net.Mail.MailAddressParser.TryReadCfwsAndThrowIfIncomplete(String data, Int32 index, Int32& outIndex, Boolean throwExceptionIfFail)
   at System.Net.Mail.MailAddressParser.TryParseDomain(String data, Int32& index, String& domain, Boolean throwExceptionIfFail)
   at System.Net.Mail.MailAddressParser.TryParseAddress(String data, Boolean expectMultipleAddresses, Int32& index, ParseAddressInfo& parseAddressInfo, Boolean throwExceptionIfFail)
   at System.Net.Mail.MailAddressParser.ParseMultipleAddresses(String data)
   at System.Net.Mail.MailAddressCollection.ParseValue(String addresses)
   at E_Commerce.Services.EmailServices.EmailSender.SendEmailAsync(String email, String subject, String htmlMessage) in D:\project_fashion\E-Commerce-API-main\Services\EmailServices\EmailSender.cs:line 37
   at E_Commerce.Services.EmailServices.AccountEmailService.SendWelcomeEmailAsync(String email, String username) in D:\project_fashion\E-Commerce-API-main\Services\EmailServices\AccountEmailService.cs:line 258
   at InvokeStub_TaskAwaiter.GetResult(Object, Object, IntPtr*)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
2025-09-10 01:07:22.057 +03:00 [INF] Execute GetAll for entity CartItem
2025-09-10 01:07:22.213 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__cartItemId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE (`c`.`Id` = @__cartItemId_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 01:07:22.253 +03:00 [INF] CartItem 32 price updated to 3374.08790000
2025-09-10 01:07:23.894 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `CartItems` SET `UnitPrice` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 01:19:24.463 +03:00 [INF] DB tables already exist. Exit install
2025-09-10 01:19:25.771 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-10 01:19:26.786 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-10 01:19:27.472 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-10 01:19:27.651 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-09-10 01:19:27.679 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-10 01:19:27.691 +03:00 [INF] Starting data seeding...
2025-09-10 01:19:27.738 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-10 01:19:28.263 +03:00 [INF] Executed DbCommand (112ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-10 01:19:28.339 +03:00 [INF] Role 'Admin' already exists.
2025-09-10 01:19:28.496 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-10 01:19:28.514 +03:00 [INF] Role 'User' already exists.
2025-09-10 01:19:28.686 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-10 01:19:28.795 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-09-10 01:19:28.797 +03:00 [INF] Data seeding completed successfully.
2025-09-10 01:19:30.300 +03:00 [INF] Now listening on: http://localhost:5069
2025-09-10 01:19:30.385 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-09-10 01:19:30.388 +03:00 [INF] Using the following options for SQL Server job storage:
2025-09-10 01:19:30.390 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-09-10 01:19:30.392 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-09-10 01:19:30.408 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-10 01:19:30.411 +03:00 [INF] Hosting environment: Development
2025-09-10 01:19:30.413 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-09-10 01:19:30.603 +03:00 [INF] Server mrrobot:21292:95600a89 successfully announced in 183.7295 ms
2025-09-10 01:19:30.616 +03:00 [INF] Server mrrobot:21292:95600a89 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-09-10 01:19:31.390 +03:00 [INF] Server mrrobot:21292:95600a89 all the dispatchers started
2025-09-10 01:19:31.404 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-09-10 01:19:32.215 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 830.1577ms
2025-09-10 01:19:32.312 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:19:32.312 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-09-10 01:19:32.322 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:19:32.354 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 39.2501ms
2025-09-10 01:19:32.452 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 139.7806ms
2025-09-10 01:19:32.516 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 193.3368ms
2025-09-10 01:19:32.589 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-09-10 01:19:32.854 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 264.9278ms
2025-09-10 01:19:55.685 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order - application/json 42
2025-09-10 01:19:55.889 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-10 01:19:56.069 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:19:56.272 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:19:56.286 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 01:19:56.319 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto]]] CreateOrder(E_Commerce.DtoModels.OrderDtos.CreateOrderDto) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 01:19:56.710 +03:00 [INF] Executing CreateOrder
2025-09-10 01:19:56.720 +03:00 [INF] Creating order from cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 01:19:57.067 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 01:19:57.170 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 01:19:57.191 +03:00 [INF] Checking if address 30 exists for customer: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 01:19:57.287 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__addressId_0='?' (DbType = Int32), @__customerId_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `CustomerAddresses` AS `c`
    WHERE ((`c`.`Id` = @__addressId_0) AND (`c`.`CustomerId` = @__customerId_1)) AND `c`.`DeletedAt` IS NULL)
2025-09-10 01:19:57.318 +03:00 [INF] Getting cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 01:19:57.326 +03:00 [INF] Getting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 01:19:57.559 +03:00 [WRN] Cache miss for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 01:19:57.638 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 01:19:57.644 +03:00 [INF] Execute GetAll for entity Cart
2025-09-10 01:19:57.901 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-09-10 01:19:59.784 +03:00 [INF] Setting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 01:20:00.067 +03:00 [INF] Cache set successfully for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5 with tags: [cart]
2025-09-10 01:20:00.200 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 01:20:00.239 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce) in 3908.2956ms
2025-09-10 01:20:00.915 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 01:20:01.400 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order - 400 236 application/json; charset=utf-8 5714.7746ms
2025-09-10 01:20:03.727 +03:00 [INF] Execute GetAll for entity CartItem
2025-09-10 01:20:03.792 +03:00 [INF] Retrieving cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 01:20:03.910 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__cartItemId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE (`c`.`Id` = @__cartItemId_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 01:20:03.967 +03:00 [INF] CartItem 31 price updated to 3374.08790000
2025-09-10 01:20:04.007 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 01:20:04.310 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `CartItems` SET `UnitPrice` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 01:20:22.045 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - null 0
2025-09-10 01:20:22.146 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:20:22.317 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:20:22.324 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-09-10 01:20:22.333 +03:00 [INF] Route matched with {action = "CheckOut", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] CheckOut() on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 01:20:22.343 +03:00 [INF] Executing CheckOut
2025-09-10 01:20:22.351 +03:00 [INF] Checkout of cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 01:20:22.353 +03:00 [INF] Retrieving cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 01:20:22.509 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 01:20:22.675 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Cart` SET `CheckoutDate` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 01:20:22.686 +03:00 [INF] Removing cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 01:20:22.693 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 01:20:22.704 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.CheckOut (E-Commerce) in 366.6473ms
2025-09-10 01:20:22.708 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-09-10 01:20:22.711 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - 200 122 application/json; charset=utf-8 665.968ms
2025-09-10 01:20:23.136 +03:00 [INF] Cache removed successfully for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 01:20:33.515 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/CustomerAddress - application/json 214
2025-09-10 01:20:33.543 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:20:33.766 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:20:33.773 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CustomerAddressController.CreateAddress (E-Commerce)'
2025-09-10 01:20:33.788 +03:00 [INF] Route matched with {action = "CreateAddress", controller = "CustomerAddress"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CustomerAddressDtos.CustomerAddressDto]]] CreateAddress(E_Commerce.DtoModels.CustomerAddressDtos.CreateCustomerAddressDto) on controller E_Commerce.Controllers.CustomerAddressController (E-Commerce).
2025-09-10 01:20:33.892 +03:00 [INF] Executing CreateAddress
2025-09-10 01:20:33.911 +03:00 [INF] Creating new address for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 01:20:34.155 +03:00 [INF] Getting address count for customer: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 01:20:34.242 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__customerId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM `CustomerAddresses` AS `c`
WHERE (`c`.`CustomerId` = @__customerId_0) AND `c`.`DeletedAt` IS NULL
2025-09-10 01:20:34.262 +03:00 [INF] Executing CreateAsync for entity CustomerAddress
2025-09-10 01:20:34.374 +03:00 [INF] CustomerAddress added successfully (pending save)
2025-09-10 01:20:34.379 +03:00 [INF] Removing default from other addresses for customer: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 01:20:34.466 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__customerId_0='?' (Size = 255), @__excludeAddressId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AdditionalNotes`, `c`.`AddressType`, `c`.`City`, `c`.`Country`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`IsDefault`, `c`.`ModifiedAt`, `c`.`PhoneNumber`, `c`.`PostalCode`, `c`.`State`, `c`.`StreetAddress`
FROM `CustomerAddresses` AS `c`
WHERE (((`c`.`CustomerId` = @__customerId_0) AND (`c`.`Id` <> @__excludeAddressId_1)) AND `c`.`IsDefault`) AND `c`.`DeletedAt` IS NULL
2025-09-10 01:20:34.473 +03:00 [INF] Execute AddAdminOpreationAsync
2025-09-10 01:20:34.476 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-09-10 01:20:34.502 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-09-10 01:20:34.724 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@p13='?' (DbType = Int32), @p0='?' (Size = 500), @p1='?' (Size = 20), @p2='?' (Size = 50), @p3='?' (Size = 50), @p4='?' (DbType = DateTime), @p5='?' (Size = 255), @p6='?' (DbType = DateTime), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?' (Size = 20), @p10='?' (Size = 20), @p11='?' (Size = 50), @p12='?' (Size = 200), @p14='?' (Size = 500), @p15='?' (Size = 20), @p16='?' (Size = 50), @p17='?' (Size = 50), @p18='?' (DbType = DateTime), @p19='?' (Size = 255), @p20='?' (DbType = DateTime), @p21='?' (DbType = Boolean), @p22='?' (DbType = DateTime), @p23='?' (Size = 20), @p24='?' (Size = 20), @p25='?' (Size = 50), @p26='?' (Size = 200), @p27='?' (Size = 255), @p28='?' (DbType = DateTime), @p29='?' (DbType = DateTime), @p30='?' (Size = 4000), @p31='?' (Size = 4000), @p32='?' (DbType = DateTime), @p33='?' (DbType = Int32), @p34='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `CustomerAddresses` SET `AdditionalNotes` = @p0, `AddressType` = @p1, `City` = @p2, `Country` = @p3, `CreatedAt` = @p4, `CustomerId` = @p5, `DeletedAt` = @p6, `IsDefault` = @p7, `ModifiedAt` = @p8, `PhoneNumber` = @p9, `PostalCode` = @p10, `State` = @p11, `StreetAddress` = @p12
WHERE `Id` = @p13;
SELECT ROW_COUNT();

INSERT INTO `CustomerAddresses` (`AdditionalNotes`, `AddressType`, `City`, `Country`, `CreatedAt`, `CustomerId`, `DeletedAt`, `IsDefault`, `ModifiedAt`, `PhoneNumber`, `PostalCode`, `State`, `StreetAddress`)
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
SELECT `Id`
FROM `CustomerAddresses`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 01:20:34.923 +03:00 [INF] Removing cache by tag: customer_address
2025-09-10 01:20:35.566 +03:00 [INF] Removed 1 cache entries for tag: customer_address
2025-09-10 01:20:35.577 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CustomerAddressDtos.CustomerAddressDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 01:20:35.591 +03:00 [INF] Executed action E_Commerce.Controllers.CustomerAddressController.CreateAddress (E-Commerce) in 1798.0243ms
2025-09-10 01:20:35.610 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CustomerAddressController.CreateAddress (E-Commerce)'
2025-09-10 01:20:35.622 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/CustomerAddress - 201 541 application/json; charset=utf-8 2107.2834ms
2025-09-10 01:20:46.323 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order - application/json 42
2025-09-10 01:20:46.397 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:20:46.674 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:20:46.796 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 01:20:46.805 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto]]] CreateOrder(E_Commerce.DtoModels.OrderDtos.CreateOrderDto) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 01:20:46.822 +03:00 [INF] Executing CreateOrder
2025-09-10 01:20:46.829 +03:00 [INF] Creating order from cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 01:20:47.187 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 01:20:47.265 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 01:20:47.274 +03:00 [INF] Checking if address 30 exists for customer: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 01:20:47.350 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__addressId_0='?' (DbType = Int32), @__customerId_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `CustomerAddresses` AS `c`
    WHERE ((`c`.`Id` = @__addressId_0) AND (`c`.`CustomerId` = @__customerId_1)) AND `c`.`DeletedAt` IS NULL)
2025-09-10 01:20:47.360 +03:00 [INF] Getting cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 01:20:47.362 +03:00 [INF] Getting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 01:20:47.576 +03:00 [WRN] Cache miss for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 01:20:47.651 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 01:20:47.659 +03:00 [INF] Execute GetAll for entity Cart
2025-09-10 01:20:47.762 +03:00 [INF] Executed DbCommand (98ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-09-10 01:20:49.701 +03:00 [INF] Setting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 01:20:49.968 +03:00 [INF] Cache set successfully for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5 with tags: [cart]
2025-09-10 01:20:49.999 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 01:20:50.124 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`, `p0`.`Id`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`Description`, `p0`.`DiscountId`, `p0`.`Gender`, `p0`.`IsActive`, `p0`.`ModifiedAt`, `p0`.`Name`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`SubCategoryId`, `p0`.`fitType`
FROM `ProductVariants` AS `p`
INNER JOIN `Products` AS `p0` ON `p`.`ProductId` = `p0`.`Id`
WHERE `p`.`Id` = 4
2025-09-10 01:20:50.242 +03:00 [INF] Executed DbCommand (88ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE `o`.`OrderNumber` = @__orderNumber_0)
2025-09-10 01:20:50.252 +03:00 [INF] Executing CreateAsync for entity Order
2025-09-10 01:20:50.336 +03:00 [INF] Order added successfully (pending save)
2025-09-10 01:20:50.537 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime), @p8='?' (Size = 500), @p9='?' (Size = 50), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Orders` (`CancelledAt`, `CreatedAt`, `CustomerAddressId`, `CustomerId`, `DeletedAt`, `DeliveredAt`, `DiscountAmount`, `ModifiedAt`, `Notes`, `OrderNumber`, `RestockedAt`, `ShippedAt`, `ShippingCost`, `Status`, `Subtotal`, `TaxAmount`, `Total`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Orders`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 01:20:50.628 +03:00 [INF] Executing CreateRangeAsync for entity OrderItem
2025-09-10 01:20:50.661 +03:00 [INF] 1 OrderItem entities added successfully (pending save)
2025-09-10 01:20:50.673 +03:00 [INF] Removing 3 from variant: 4
2025-09-10 01:20:50.677 +03:00 [INF] Executing GetByIdAsync for entity ProductVariant with ID: 4
2025-09-10 01:20:50.790 +03:00 [INF] Executed DbCommand (105ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 01:20:50.849 +03:00 [ERR] Error in RemoveQuntityAfterOrder for id: 4
System.NotSupportedException: Only public methods can be invoked in the background. Ensure your method has the `public` access modifier, and you aren't using explicit interface implementation.
   at Hangfire.Common.Job.Validate(Type type, String typeParameterName, MethodInfo method, String methodParameterName, Int32 argumentCount, String argumentParameterName) in C:\projects\hangfire-525\src\Hangfire.Core\Common\Job.cs:line 477
   at Hangfire.Common.Job..ctor(Type type, MethodInfo method, IReadOnlyList`1 args, String queue) in C:\projects\hangfire-525\src\Hangfire.Core\Common\Job.cs:line 204
   at Hangfire.Common.Job.FromExpression(LambdaExpression methodCall, Type explicitType, String queue) in C:\projects\hangfire-525\src\Hangfire.Core\Common\Job.cs:line 457
   at Hangfire.Common.Job.FromExpression(Expression`1 methodCall, String queue) in C:\projects\hangfire-525\src\Hangfire.Core\Common\Job.cs:line 357
   at Hangfire.Common.Job.FromExpression(Expression`1 methodCall) in C:\projects\hangfire-525\src\Hangfire.Core\Common\Job.cs:line 352
   at Hangfire.BackgroundJobClientExtensions.Create(IBackgroundJobClient client, Expression`1 methodCall, IState state) in C:\projects\hangfire-525\src\Hangfire.Core\BackgroundJobClientExtensions.cs:line 541
   at Hangfire.BackgroundJobClientExtensions.Enqueue(IBackgroundJobClient client, Expression`1 methodCall) in C:\projects\hangfire-525\src\Hangfire.Core\BackgroundJobClientExtensions.cs:line 86
   at E_Commerce.Services.ProductVariantServices.ProductVariantCommandService.RemoveQuntityAfterOrder(Int32 id, Int32 quantity) in D:\project_fashion\E-Commerce-API-main\Services\ProductVariantServices\ProductVariantCommandService.cs:line 121
2025-09-10 01:20:51.895 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 01:20:51.900 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce) in 5087.0214ms
2025-09-10 01:20:51.907 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 01:20:51.909 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order - 500 306 application/json; charset=utf-8 5586.6407ms
2025-09-10 01:21:06.138 +03:00 [INF] Setting cache for key: advsearch__________False_1_100__
2025-09-10 01:21:06.436 +03:00 [INF] Cache set successfully for key: advsearch__________False_1_100__ with tags: [product_search]
2025-09-10 01:21:47.186 +03:00 [INF] Setting cache for key: advsearch__________False_1_100__
2025-09-10 01:21:47.450 +03:00 [INF] Cache set successfully for key: advsearch__________False_1_100__ with tags: [product_search]
2025-09-10 01:21:50.412 +03:00 [INF] Setting cache for key: advsearch__________False_1_100__
2025-09-10 01:21:50.707 +03:00 [INF] Cache set successfully for key: advsearch__________False_1_100__ with tags: [product_search]
2025-09-10 01:22:17.617 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-09-10 01:22:17.638 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 20.5281ms
2025-09-10 01:22:17.736 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-09-10 01:22:17.737 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:22:17.744 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 7.3425ms
2025-09-10 01:22:17.761 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:22:17.768 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.4686ms
2025-09-10 01:22:17.770 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 9.662ms
2025-09-10 01:22:18.130 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-09-10 01:22:18.302 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 172.3861ms
2025-09-10 01:22:25.241 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-09-10 01:22:25.268 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 26.3382ms
2025-09-10 01:22:25.583 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-09-10 01:22:25.613 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 29.73ms
2025-09-10 01:22:25.653 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:22:25.678 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.9638ms
2025-09-10 01:22:25.697 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:22:25.708 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 10.873ms
2025-09-10 01:22:25.941 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-09-10 01:22:26.143 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 201.6927ms
2025-09-10 01:22:29.269 +03:00 [INF] Execute GetAll for entity CartItem
2025-09-10 01:22:29.418 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__cartItemId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE (`c`.`Id` = @__cartItemId_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 01:22:29.425 +03:00 [INF] CartItem 32 price updated to 3374.08790000
2025-09-10 01:22:29.578 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `CartItems` SET `UnitPrice` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 01:22:31.404 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order - application/json 42
2025-09-10 01:22:31.455 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:22:31.609 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:22:31.614 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 01:22:31.622 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto]]] CreateOrder(E_Commerce.DtoModels.OrderDtos.CreateOrderDto) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 01:22:31.653 +03:00 [INF] Executing CreateOrder
2025-09-10 01:22:31.668 +03:00 [INF] Creating order from cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 01:22:31.965 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 01:22:32.050 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 01:22:32.057 +03:00 [INF] Checking if address 30 exists for customer: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 01:22:32.132 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__addressId_0='?' (DbType = Int32), @__customerId_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `CustomerAddresses` AS `c`
    WHERE ((`c`.`Id` = @__addressId_0) AND (`c`.`CustomerId` = @__customerId_1)) AND `c`.`DeletedAt` IS NULL)
2025-09-10 01:22:32.139 +03:00 [INF] Getting cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 01:22:32.141 +03:00 [INF] Getting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 01:22:32.355 +03:00 [INF] Cache hit for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 01:22:32.375 +03:00 [INF] Cache hit for cart user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 01:22:32.377 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 01:22:32.455 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`, `p0`.`Id`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`Description`, `p0`.`DiscountId`, `p0`.`Gender`, `p0`.`IsActive`, `p0`.`ModifiedAt`, `p0`.`Name`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`SubCategoryId`, `p0`.`fitType`
FROM `ProductVariants` AS `p`
INNER JOIN `Products` AS `p0` ON `p`.`ProductId` = `p0`.`Id`
WHERE `p`.`Id` = 4
2025-09-10 01:22:32.535 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE `o`.`OrderNumber` = @__orderNumber_0)
2025-09-10 01:22:32.539 +03:00 [INF] Executing CreateAsync for entity Order
2025-09-10 01:22:32.543 +03:00 [INF] Order added successfully (pending save)
2025-09-10 01:22:32.694 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime), @p8='?' (Size = 500), @p9='?' (Size = 50), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Orders` (`CancelledAt`, `CreatedAt`, `CustomerAddressId`, `CustomerId`, `DeletedAt`, `DeliveredAt`, `DiscountAmount`, `ModifiedAt`, `Notes`, `OrderNumber`, `RestockedAt`, `ShippedAt`, `ShippingCost`, `Status`, `Subtotal`, `TaxAmount`, `Total`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Orders`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 01:22:32.854 +03:00 [INF] Executing CreateRangeAsync for entity OrderItem
2025-09-10 01:22:32.894 +03:00 [INF] 1 OrderItem entities added successfully (pending save)
2025-09-10 01:22:32.899 +03:00 [INF] Removing 3 from variant: 4
2025-09-10 01:22:32.915 +03:00 [INF] Executing GetByIdAsync for entity ProductVariant with ID: 4
2025-09-10 01:22:33.020 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 01:22:33.026 +03:00 [ERR] Error in RemoveQuntityAfterOrder for id: 4
System.NotSupportedException: Only public methods can be invoked in the background. Ensure your method has the `public` access modifier, and you aren't using explicit interface implementation.
   at Hangfire.Common.Job.Validate(Type type, String typeParameterName, MethodInfo method, String methodParameterName, Int32 argumentCount, String argumentParameterName) in C:\projects\hangfire-525\src\Hangfire.Core\Common\Job.cs:line 477
   at Hangfire.Common.Job..ctor(Type type, MethodInfo method, IReadOnlyList`1 args, String queue) in C:\projects\hangfire-525\src\Hangfire.Core\Common\Job.cs:line 204
   at Hangfire.Common.Job.FromExpression(LambdaExpression methodCall, Type explicitType, String queue) in C:\projects\hangfire-525\src\Hangfire.Core\Common\Job.cs:line 457
   at Hangfire.Common.Job.FromExpression(Expression`1 methodCall, String queue) in C:\projects\hangfire-525\src\Hangfire.Core\Common\Job.cs:line 357
   at Hangfire.Common.Job.FromExpression(Expression`1 methodCall) in C:\projects\hangfire-525\src\Hangfire.Core\Common\Job.cs:line 352
   at Hangfire.BackgroundJobClientExtensions.Create(IBackgroundJobClient client, Expression`1 methodCall, IState state) in C:\projects\hangfire-525\src\Hangfire.Core\BackgroundJobClientExtensions.cs:line 541
   at Hangfire.BackgroundJobClientExtensions.Enqueue(IBackgroundJobClient client, Expression`1 methodCall) in C:\projects\hangfire-525\src\Hangfire.Core\BackgroundJobClientExtensions.cs:line 86
   at E_Commerce.Services.ProductVariantServices.ProductVariantCommandService.RemoveQuntityAfterOrder(Int32 id, Int32 quantity)
2025-09-10 01:22:34.006 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 01:22:34.011 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce) in 2383.6046ms
2025-09-10 01:22:34.015 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 01:22:34.116 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order - 409 306 application/json; charset=utf-8 2711.886ms
2025-09-10 01:23:20.659 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - null null
2025-09-10 01:23:20.670 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:23:20.824 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:23:20.834 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - 401 null application/json 175.6773ms
2025-09-10 01:23:30.029 +03:00 [INF] Execute GetAll for entity CartItem
2025-09-10 01:23:30.287 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__cartItemId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE (`c`.`Id` = @__cartItemId_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 01:23:30.301 +03:00 [INF] CartItem 32 price updated to 3374.08790000
2025-09-10 01:23:30.457 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `CartItems` SET `UnitPrice` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 01:23:41.380 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Account/login - application/json 70
2025-09-10 01:23:41.391 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:23:41.541 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:23:41.550 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Account/login - 401 null application/json 169.4263ms
2025-09-10 01:24:01.577 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Account/login - application/json 70
2025-09-10 01:24:01.592 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:24:01.594 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-09-10 01:24:01.602 +03:00 [INF] Route matched with {action = "LoginAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.TokenDtos.TokensDto]]] LoginAsync(E_Commerce.DtoModels.AccountDtos.LoginDTo) on controller E_Commerce.Controllers.AccountController (E-Commerce).
2025-09-10 01:24:01.627 +03:00 [INF] In LoginAsync Method 
2025-09-10 01:24:01.780 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-10 01:24:01.933 +03:00 [INF]  Generating Access Token for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:24:01.940 +03:00 [INF]  Generating Access Token for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:24:02.120 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedUserName` = @__normalizedUserName_0)
LIMIT 1
2025-09-10 01:24:02.282 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-10 01:24:02.465 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@p22='?' (Size = 255), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p23='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 256), @p15='?' (Size = 256), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `AspNetUsers` SET `AccessFailedCount` = @p0, `Age` = @p1, `ConcurrencyStamp` = @p2, `CreateAt` = @p3, `DeletedAt` = @p4, `Email` = @p5, `EmailConfirmed` = @p6, `Gender` = @p7, `ImageId` = @p8, `ImageId1` = @p9, `LastVisit` = @p10, `LockoutEnabled` = @p11, `LockoutEnd` = @p12, `Name` = @p13, `NormalizedEmail` = @p14, `NormalizedUserName` = @p15, `PasswordHash` = @p16, `PhoneNumber` = @p17, `PhoneNumberConfirmed` = @p18, `SecurityStamp` = @p19, `TwoFactorEnabled` = @p20, `UserName` = @p21
WHERE `Id` = @p22 AND `ConcurrencyStamp` = @p23;
SELECT ROW_COUNT();
2025-09-10 01:24:02.646 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-09-10 01:24:02.677 +03:00 [INF]  Access Token generated successfully for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:24:02.681 +03:00 [INF]  Generating Refresh Token for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:24:02.899 +03:00 [INF]  RefreshToken generated and stored for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:24:02.942 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.TokenDtos.TokensDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 01:24:02.957 +03:00 [INF] Executed action E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce) in 1346.6993ms
2025-09-10 01:24:02.962 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-09-10 01:24:02.967 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Account/login - 200 1251 application/json; charset=utf-8 1389.8248ms
2025-09-10 01:24:12.454 +03:00 [INF] Retrieving cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 01:24:12.606 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 01:24:12.764 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Cart` SET `CheckoutDate` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 01:24:12.772 +03:00 [INF] Checkout date removed for cart of user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 01:24:22.849 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - null null
2025-09-10 01:24:22.857 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:24:23.006 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:24:23.019 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.GetOrders (E-Commerce)'
2025-09-10 01:24:23.029 +03:00 [INF] Route matched with {action = "GetOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.OrderDtos.OrderListDto]]]] GetOrders(System.String, System.Nullable`1[System.Boolean], Int32, Int32, System.Nullable`1[E_Commerce.Enums.OrderStatus]) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 01:24:23.045 +03:00 [INF] Executing GetOrders: role: Admin, userId: , deleted: , page: 1, size: 10, status: 
2025-09-10 01:24:23.057 +03:00 [INF] Filtering orders - UserId: null, Deleted: null, Page: 1, PageSize: 10, Status: null
2025-09-10 01:24:23.065 +03:00 [INF] Getting cache for key: order:filter:user:all_deleted:all_page:1_size:10_status:all
2025-09-10 01:24:23.285 +03:00 [INF] Cache hit for key: order:filter:user:all_deleted:all_page:1_size:10_status:all
2025-09-10 01:24:23.292 +03:00 [INF] Cache hit for filtered orders
2025-09-10 01:24:23.297 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.OrderDtos.OrderListDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 01:24:23.309 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.GetOrders (E-Commerce) in 271.954ms
2025-09-10 01:24:23.314 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.GetOrders (E-Commerce)'
2025-09-10 01:24:23.318 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - 200 1729 application/json; charset=utf-8 469.1076ms
2025-09-10 01:24:56.184 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire - null null
2025-09-10 01:24:58.648 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire - 200 null text/html 2463.7007ms
2025-09-10 01:24:58.698 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/css-dark181801367208343 - null null
2025-09-10 01:24:58.699 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/css18180508018691 - null null
2025-09-10 01:24:58.701 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/js181801390740827 - null null
2025-09-10 01:24:58.701 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:24:58.702 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:24:58.717 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/css-dark181801367208343 - 200 null text/css 18.7739ms
2025-09-10 01:24:58.734 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/css18180508018691 - 200 null text/css 34.8415ms
2025-09-10 01:24:58.759 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/js181801390740827 - 200 null application/javascript 57.6816ms
2025-09-10 01:24:58.780 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 78.8489ms
2025-09-10 01:24:58.788 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 86.1828ms
2025-09-10 01:24:58.900 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/fonts/glyphicons-halflings-regular/woff2 - null null
2025-09-10 01:24:58.936 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:24:58.942 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/fonts/glyphicons-halflings-regular/woff2 - 200 null font/woff2 41.6887ms
2025-09-10 01:25:00.980 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 258
2025-09-10 01:25:00.990 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:25:01.641 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - null null
2025-09-10 01:25:02.268 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1288.2964ms
2025-09-10 01:25:03.211 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - 200 null text/html 1569.0885ms
2025-09-10 01:25:03.244 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:25:03.244 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:25:03.260 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 15.9353ms
2025-09-10 01:25:03.348 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 104.2273ms
2025-09-10 01:25:04.782 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/failed - null null
2025-09-10 01:25:05.309 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:25:05.318 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:25:06.713 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1404.0805ms
2025-09-10 01:25:07.181 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/failed - 200 null text/html 2398.8683ms
2025-09-10 01:25:07.206 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:25:07.207 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:25:07.281 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 74.8921ms
2025-09-10 01:25:07.300 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 93.1111ms
2025-09-10 01:25:09.331 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:25:09.339 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:25:10.745 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1413.772ms
2025-09-10 01:25:12.759 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:25:12.786 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:25:14.165 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.4791ms
2025-09-10 01:25:16.198 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:25:16.209 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:25:17.632 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1434.4848ms
2025-09-10 01:25:19.656 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:25:19.723 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:25:21.113 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1457.5039ms
2025-09-10 01:25:22.909 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 01:25:23.127 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:25:23.144 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:25:24.530 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1402.9191ms
2025-09-10 01:25:25.217 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2308.1935ms
2025-09-10 01:25:25.241 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:25:25.242 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:25:25.252 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 11.64ms
2025-09-10 01:25:25.310 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 69.469ms
2025-09-10 01:25:27.282 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:25:27.297 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:25:28.699 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1417.2589ms
2025-09-10 01:25:29.878 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - null null
2025-09-10 01:25:30.707 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:25:30.716 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:25:32.101 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1393.5924ms
2025-09-10 01:25:32.720 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - 200 null text/html 2841.9097ms
2025-09-10 01:25:32.763 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:25:32.764 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:25:32.780 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 16.9737ms
2025-09-10 01:25:32.815 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 50.833ms
2025-09-10 01:25:34.848 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:25:34.857 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:25:36.237 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.8253ms
2025-09-10 01:25:38.250 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:25:38.267 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:25:39.651 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1400.5801ms
2025-09-10 01:25:41.664 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:25:41.669 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:25:43.054 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1390.2892ms
2025-09-10 01:25:45.061 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:25:45.069 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:25:46.445 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1383.8654ms
2025-09-10 01:25:48.086 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded?from=20&count=20 - null null
2025-09-10 01:25:48.461 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:25:48.481 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:25:49.975 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1514.0145ms
2025-09-10 01:25:50.955 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded?from=20&count=20 - 200 null text/html 2869.2441ms
2025-09-10 01:25:51.016 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:25:51.116 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:25:51.128 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 11.9573ms
2025-09-10 01:25:51.128 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 111.9662ms
2025-09-10 01:25:53.186 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:25:53.196 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:25:54.581 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1394.5234ms
2025-09-10 01:25:56.592 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:25:56.604 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:25:57.995 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1402.8742ms
2025-09-10 01:26:00.013 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:26:00.032 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:26:00.197 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded?from=40&count=20 - null null
2025-09-10 01:26:01.405 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1391.826ms
2025-09-10 01:26:02.691 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded?from=40&count=20 - 200 null text/html 2494.5832ms
2025-09-10 01:26:02.719 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:26:02.779 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:26:02.815 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 95.6831ms
2025-09-10 01:26:02.838 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 58.2433ms
2025-09-10 01:26:04.882 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:26:04.894 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:26:06.270 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1387.4469ms
2025-09-10 01:26:07.713 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded?from=60&count=20 - null null
2025-09-10 01:26:08.289 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:26:08.319 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:26:09.731 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1442.5185ms
2025-09-10 01:26:10.362 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded?from=60&count=20 - 200 null text/html 2648.3555ms
2025-09-10 01:26:10.392 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:26:10.403 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:26:10.438 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 45.1408ms
2025-09-10 01:26:10.448 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 44.7291ms
2025-09-10 01:26:12.492 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:26:12.500 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:26:13.900 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1407.4396ms
2025-09-10 01:26:15.911 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:26:15.920 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:26:17.325 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1414.3258ms
2025-09-10 01:26:19.346 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:26:19.362 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:26:20.773 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1427.1909ms
2025-09-10 01:26:22.789 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:26:22.795 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:26:24.189 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1399.1859ms
2025-09-10 01:26:26.211 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:26:26.220 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:26:27.616 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.6066ms
2025-09-10 01:26:29.625 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:26:29.635 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:26:31.019 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1393.7996ms
2025-09-10 01:26:33.031 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:26:33.043 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:26:34.429 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1397.8291ms
2025-09-10 01:26:37.145 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:26:37.153 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:26:38.523 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1377.6618ms
2025-09-10 01:26:41.168 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:26:41.386 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:26:42.811 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1643.1273ms
2025-09-10 01:26:45.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:26:45.172 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:26:46.569 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1410.6362ms
2025-09-10 01:26:49.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:26:49.162 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:26:50.531 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1381.848ms
2025-09-10 01:26:53.163 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:26:53.171 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:26:54.577 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1413.6741ms
2025-09-10 01:26:57.190 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:26:57.205 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:26:58.584 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1393.8926ms
2025-09-10 01:27:01.152 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:27:01.160 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:27:02.535 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1383.0414ms
2025-09-10 01:27:05.148 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:27:05.156 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:27:06.530 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1382.0925ms
2025-09-10 01:27:08.237 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json 62
2025-09-10 01:27:08.263 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:27:08.421 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:27:08.428 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 01:27:08.440 +03:00 [INF] Route matched with {action = "AddItemToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] AddItemToCart(E_Commerce.DtoModels.CartDtos.CreateCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 01:27:08.467 +03:00 [INF] Executing AddItemToCart for product ID: 6
2025-09-10 01:27:08.489 +03:00 [INF] Adding item to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 6
2025-09-10 01:27:08.802 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 01:27:08.812 +03:00 [INF] Execute GetAll for entity Product
2025-09-10 01:27:08.924 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__8__locals1_itemDto_ProductId_0='?' (DbType = Int32), @__8__locals1_itemDto_ProductVariantId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Price`, `t`.`c`, `t`.`EndDate`, `t`.`StartDate`, `t`.`DiscountPercent`, `t`.`DeletedAt`, `t`.`IsActive`, `t0`.`Id`, `t0`.`Quantity`, `t0`.`c`
FROM (
    SELECT `p`.`Id`, `p`.`Price`, `d`.`Id` IS NOT NULL AS `c`, `d`.`EndDate`, `d`.`StartDate`, `d`.`DiscountPercent`, `d`.`DeletedAt`, `d`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__8__locals1_itemDto_ProductId_0) AND `p`.`DeletedAt` IS NULL) AND `p`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Quantity`, `t1`.`c`, `t1`.`ProductId`
    FROM (
        SELECT `p0`.`Id`, `p0`.`Quantity`, 1 AS `c`, `p0`.`ProductId`, ROW_NUMBER() OVER(PARTITION BY `p0`.`ProductId` ORDER BY `p0`.`Id`) AS `row`
        FROM `ProductVariants` AS `p0`
        WHERE (`p0`.`Id` = @__8__locals1_itemDto_ProductVariantId_1) AND `p0`.`IsActive`
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
2025-09-10 01:27:08.933 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:27:09.013 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 01:27:09.100 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 01:27:09.105 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce) in 657.6439ms
2025-09-10 01:27:09.112 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 01:27:09.115 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 400 253 application/json; charset=utf-8 878.4312ms
2025-09-10 01:27:09.166 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:27:09.183 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:27:10.549 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1382.8498ms
2025-09-10 01:27:13.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:27:13.167 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:27:14.551 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1393.9107ms
2025-09-10 01:27:16.799 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json 62
2025-09-10 01:27:16.812 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:27:16.992 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:27:17.003 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 01:27:17.005 +03:00 [INF] Route matched with {action = "AddItemToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] AddItemToCart(E_Commerce.DtoModels.CartDtos.CreateCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 01:27:17.015 +03:00 [INF] Executing AddItemToCart for product ID: 1
2025-09-10 01:27:17.017 +03:00 [INF] Adding item to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 1
2025-09-10 01:27:17.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:27:17.160 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:27:17.312 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 01:27:17.323 +03:00 [INF] Execute GetAll for entity Product
2025-09-10 01:27:17.405 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__8__locals1_itemDto_ProductId_0='?' (DbType = Int32), @__8__locals1_itemDto_ProductVariantId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Price`, `t`.`c`, `t`.`EndDate`, `t`.`StartDate`, `t`.`DiscountPercent`, `t`.`DeletedAt`, `t`.`IsActive`, `t0`.`Id`, `t0`.`Quantity`, `t0`.`c`
FROM (
    SELECT `p`.`Id`, `p`.`Price`, `d`.`Id` IS NOT NULL AS `c`, `d`.`EndDate`, `d`.`StartDate`, `d`.`DiscountPercent`, `d`.`DeletedAt`, `d`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__8__locals1_itemDto_ProductId_0) AND `p`.`DeletedAt` IS NULL) AND `p`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Quantity`, `t1`.`c`, `t1`.`ProductId`
    FROM (
        SELECT `p0`.`Id`, `p0`.`Quantity`, 1 AS `c`, `p0`.`ProductId`, ROW_NUMBER() OVER(PARTITION BY `p0`.`ProductId` ORDER BY `p0`.`Id`) AS `row`
        FROM `ProductVariants` AS `p0`
        WHERE (`p0`.`Id` = @__8__locals1_itemDto_ProductVariantId_1) AND `p0`.`IsActive`
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
2025-09-10 01:27:17.484 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 01:27:17.491 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce) in 477.3639ms
2025-09-10 01:27:17.500 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 01:27:17.503 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 404 239 application/json; charset=utf-8 704.4514ms
2025-09-10 01:27:18.851 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1696.1503ms
2025-09-10 01:27:21.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:27:21.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:27:22.547 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.6504ms
2025-09-10 01:27:23.485 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json 62
2025-09-10 01:27:23.498 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:27:23.662 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:27:23.669 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 01:27:23.672 +03:00 [INF] Route matched with {action = "AddItemToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] AddItemToCart(E_Commerce.DtoModels.CartDtos.CreateCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 01:27:23.678 +03:00 [INF] Executing AddItemToCart for product ID: 1
2025-09-10 01:27:23.680 +03:00 [INF] Adding item to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 1
2025-09-10 01:27:23.979 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 01:27:23.989 +03:00 [INF] Execute GetAll for entity Product
2025-09-10 01:27:24.069 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__8__locals1_itemDto_ProductId_0='?' (DbType = Int32), @__8__locals1_itemDto_ProductVariantId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Price`, `t`.`c`, `t`.`EndDate`, `t`.`StartDate`, `t`.`DiscountPercent`, `t`.`DeletedAt`, `t`.`IsActive`, `t0`.`Id`, `t0`.`Quantity`, `t0`.`c`
FROM (
    SELECT `p`.`Id`, `p`.`Price`, `d`.`Id` IS NOT NULL AS `c`, `d`.`EndDate`, `d`.`StartDate`, `d`.`DiscountPercent`, `d`.`DeletedAt`, `d`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__8__locals1_itemDto_ProductId_0) AND `p`.`DeletedAt` IS NULL) AND `p`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Quantity`, `t1`.`c`, `t1`.`ProductId`
    FROM (
        SELECT `p0`.`Id`, `p0`.`Quantity`, 1 AS `c`, `p0`.`ProductId`, ROW_NUMBER() OVER(PARTITION BY `p0`.`ProductId` ORDER BY `p0`.`Id`) AS `row`
        FROM `ProductVariants` AS `p0`
        WHERE (`p0`.`Id` = @__8__locals1_itemDto_ProductVariantId_1) AND `p0`.`IsActive`
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
2025-09-10 01:27:24.150 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 01:27:24.156 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce) in 479.2264ms
2025-09-10 01:27:24.166 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 01:27:24.181 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 404 239 application/json; charset=utf-8 695.5967ms
2025-09-10 01:27:25.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:27:25.168 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:27:26.563 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1403.5794ms
2025-09-10 01:27:29.152 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:27:29.163 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:27:30.584 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1431.8013ms
2025-09-10 01:27:33.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:27:33.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:27:34.545 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1387.9282ms
2025-09-10 01:27:37.167 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:27:37.186 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:27:38.563 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1396.1271ms
2025-09-10 01:27:41.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:27:41.161 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:27:42.575 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1425.2676ms
2025-09-10 01:27:45.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:27:45.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:27:46.625 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1468.0113ms
2025-09-10 01:27:49.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:27:49.167 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:27:49.539 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants?color=string&length=3799&waist=3799&size=0 - null null
2025-09-10 01:27:49.551 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:27:49.701 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:27:49.708 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.SearchVariants (E-Commerce)'
2025-09-10 01:27:49.726 +03:00 [INF] Route matched with {action = "SearchVariants", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]]] SearchVariants(Int32, System.String, System.Nullable`1[System.Int32], System.Nullable`1[System.Int32], System.Nullable`1[E_Commerce.Enums.VariantSize], System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-09-10 01:27:49.742 +03:00 [INF] Searching variants for product 1 with filters: color=string, length=3799, waist=3799, size=XS, isActive=, deletedOnly=
2025-09-10 01:27:49.746 +03:00 [INF] Getting cache for key: product:1:variants:search:color:string:length:3799:waist:3799:size:XS:active::deleted:
2025-09-10 01:27:49.964 +03:00 [WRN] Cache miss for key: product:1:variants:search:color:string:length:3799:waist:3799:size:XS:active::deleted:
2025-09-10 01:27:49.969 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 01:27:50.132 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__productId_0='?' (DbType = Int32), @__color_1='?' (Size = 4000), @__size_Value_2='?' (DbType = Int32), @__Length_Value_3='?' (DbType = Int32), @__wist_Value_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE ((((`p`.`ProductId` = @__productId_0) AND (`p`.`Color` = @__color_1)) AND (`p`.`Size` = @__size_Value_2)) AND (`p`.`Length` = @__Length_Value_3)) AND (`p`.`Waist` = @__wist_Value_4)
2025-09-10 01:27:50.150 +03:00 [WRN] No variants found matching the search criteria for product 1
2025-09-10 01:27:50.154 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 01:27:50.163 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.SearchVariants (E-Commerce) in 430.0901ms
2025-09-10 01:27:50.171 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.SearchVariants (E-Commerce)'
2025-09-10 01:27:50.186 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants?color=string&length=3799&waist=3799&size=0 - 404 254 application/json; charset=utf-8 646.6421ms
2025-09-10 01:27:50.568 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.2699ms
2025-09-10 01:27:53.162 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:27:53.191 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:27:54.576 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1414.1623ms
2025-09-10 01:27:57.145 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:27:57.155 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:27:58.569 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1424.1159ms
2025-09-10 01:27:59.853 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants - null null
2025-09-10 01:27:59.863 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:28:00.012 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:28:00.024 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.SearchVariants (E-Commerce)'
2025-09-10 01:28:00.028 +03:00 [INF] Route matched with {action = "SearchVariants", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]]] SearchVariants(Int32, System.String, System.Nullable`1[System.Int32], System.Nullable`1[System.Int32], System.Nullable`1[E_Commerce.Enums.VariantSize], System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-09-10 01:28:00.038 +03:00 [INF] Searching variants for product 1 with filters: color=, length=, waist=, size=, isActive=, deletedOnly=
2025-09-10 01:28:00.041 +03:00 [INF] Getting cache for key: product:1:variants:search:color::length::waist::size::active::deleted:
2025-09-10 01:28:00.256 +03:00 [WRN] Cache miss for key: product:1:variants:search:color::length::waist::size::active::deleted:
2025-09-10 01:28:00.261 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 01:28:00.415 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__productId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`ProductId` = @__productId_0
2025-09-10 01:28:00.428 +03:00 [INF] Caching search results for product 1
2025-09-10 01:28:01.148 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:28:01.159 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:28:01.343 +03:00 [INF] Successfully retrieved 10 variants for product 1
2025-09-10 01:28:01.350 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 01:28:01.358 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.SearchVariants (E-Commerce) in 1322.372ms
2025-09-10 01:28:01.374 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.SearchVariants (E-Commerce)'
2025-09-10 01:28:01.380 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants - 200 1951 application/json; charset=utf-8 1527.401ms
2025-09-10 01:28:02.541 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1393.2471ms
2025-09-10 01:28:02.989 +03:00 [INF] Setting cache for key: product:1:variants:search:color::length::waist::size::active::deleted:
2025-09-10 01:28:03.215 +03:00 [INF] Cache set successfully for key: product:1:variants:search:color::length::waist::size::active::deleted: with tags: [product:1, variantdata]
2025-09-10 01:28:05.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:28:05.157 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:28:06.389 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1240.8789ms
2025-09-10 01:28:09.168 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:28:09.179 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:28:10.561 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1393.3133ms
2025-09-10 01:28:13.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:28:13.158 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:28:14.612 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1461.6389ms
2025-09-10 01:28:17.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:28:17.168 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:28:18.596 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1441.6608ms
2025-09-10 01:28:21.148 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:28:21.155 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:28:22.577 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1428.7941ms
2025-09-10 01:28:24.667 +03:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5069/api/Products/1/Variants/1/activate - null 0
2025-09-10 01:28:24.676 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:28:24.839 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:28:24.848 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.ActivateVariant (E-Commerce)'
2025-09-10 01:28:24.860 +03:00 [INF] Route matched with {action = "ActivateVariant", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] ActivateVariant(Int32, Int32) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-09-10 01:28:24.880 +03:00 [INF] Activating variant: 1
2025-09-10 01:28:25.100 +03:00 [INF] Checking if variant 1 exists and is not deleted
2025-09-10 01:28:25.106 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 01:28:25.153 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:28:25.163 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:28:25.191 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Quantity` > 0 AS `hasquntity`, `p`.`DeletedAt` IS NOT NULL AS `isdeleted`, `p`.`Size` IS NOT NULL AS `hassize`, ((`p`.`Length` <> 0) OR `p`.`Length` IS NULL) AND ((`p`.`Waist` <> 0) OR `p`.`Waist` IS NULL) AS `haslengthandwaist`, `p`.`ProductId` AS `productid`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 01:28:25.280 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `ProductVariants` AS `p`
    WHERE (`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL)
2025-09-10 01:28:25.302 +03:00 [INF] Validating variant 1 has required properties for activation
2025-09-10 01:28:25.303 +03:00 [INF] Attempting to activate variant 1
2025-09-10 01:28:25.394 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE (`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 01:28:25.417 +03:00 [INF] Successfully activated variant 1
2025-09-10 01:28:25.440 +03:00 [INF] Updating product 1 quantity after activating variant 1
2025-09-10 01:28:25.481 +03:00 [INF] Recording admin operation for activating variant 1 by user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:28:25.487 +03:00 [INF] Execute AddAdminOpreationAsync
2025-09-10 01:28:25.490 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-09-10 01:28:25.493 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-09-10 01:28:25.496 +03:00 [INF] Committing unit of work for activating variant 1
2025-09-10 01:28:25.532 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'E_Commerce.Context.AppDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-09-10 01:28:25.540 +03:00 [ERR] Error in ActivateVariantAsync for id: 1. Rolling back transaction.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at UnitOfWork.CommitAsync()
   at E_Commerce.Services.ProductVariantServices.ProductVariantCommandService.ActivateVariantAsync(Int32 id, String userId)
2025-09-10 01:28:25.553 +03:00 [ERR] An error occurred using a transaction.
2025-09-10 01:28:25.557 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.ActivateVariant (E-Commerce) in 687.9736ms
2025-09-10 01:28:25.560 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.ActivateVariant (E-Commerce)'
2025-09-10 01:28:25.566 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: This MySqlConnection is already in use. See https://fl.vu/mysql-conn-reuse
   at MySqlConnector.Core.ServerSession.StartQuerying(ICancellableCommand command) in /_/src/MySqlConnector/Core/ServerSession.cs:line 289
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken)
   at MySqlConnector.MySqlCommand.ExecuteNonQueryAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 309
   at MySqlConnector.MySqlTransaction.DoRollback(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlTransaction.cs:line 269
   at MySqlConnector.MySqlTransaction.RollbackAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlTransaction.cs:line 67
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.RollbackAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.RollbackAsync(CancellationToken cancellationToken)
   at E_Commerce.Services.ProductVariantServices.ProductVariantCommandService.ActivateVariantAsync(Int32 id, String userId)
   at E_Commerce.Services.ProductVariantServices.ProductVariantService.ActivateVariantAsync(Int32 id, String userId)
   at E_Commerce.Controllers.ProductVariantController.ActivateVariant(Int32 productId, Int32 id)
   at lambda_method1530(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at SecurityStampMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-10 01:28:25.566 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-09-10 01:28:25.617 +03:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5069/api/Products/1/Variants/1/activate - 500 null text/plain; charset=utf-8 950.6227ms
2025-09-10 01:28:25.654 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'E_Commerce.Context.AppDbContext'.
System.InvalidOperationException: Can't call this method when MySqlDataReader is closed.
   at MySqlConnector.MySqlDataReader.GetResultSet() in /_/src/MySqlConnector/MySqlDataReader.cs:line 690
   at MySqlConnector.MySqlDataReader.GetInt32(Int32 ordinal) in /_/src/MySqlConnector/MySqlDataReader.cs:line 240
   at lambda_method1548(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: Can't call this method when MySqlDataReader is closed.
   at MySqlConnector.MySqlDataReader.GetResultSet() in /_/src/MySqlConnector/MySqlDataReader.cs:line 690
   at MySqlConnector.MySqlDataReader.GetInt32(Int32 ordinal) in /_/src/MySqlConnector/MySqlDataReader.cs:line 240
   at lambda_method1548(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-10 01:28:26.550 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1396.8546ms
2025-09-10 01:28:29.153 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:28:29.168 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:28:30.552 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1398.6908ms
2025-09-10 01:28:33.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:28:33.173 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:28:34.422 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1268.0156ms
2025-09-10 01:28:37.145 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:28:37.154 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:28:38.538 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1392.1263ms
2025-09-10 01:28:41.203 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:28:41.214 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:28:42.606 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1403.0986ms
2025-09-10 01:28:45.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:28:45.189 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:28:46.758 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1598.8153ms
2025-09-10 01:28:49.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:28:49.173 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:28:50.616 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1457.768ms
2025-09-10 01:28:53.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:28:53.182 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:28:54.632 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1475.6329ms
2025-09-10 01:28:57.153 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:28:57.181 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:28:58.596 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1442.7195ms
2025-09-10 01:29:01.147 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:29:01.175 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:29:02.748 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1600.9301ms
2025-09-10 01:29:05.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:29:05.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:29:06.598 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1443.758ms
2025-09-10 01:29:09.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:29:09.156 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:29:10.532 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1383.1424ms
2025-09-10 01:29:13.165 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:29:13.194 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:29:14.581 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1415.908ms
2025-09-10 01:29:17.147 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:29:17.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:29:18.549 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1401.4396ms
2025-09-10 01:29:21.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:29:21.158 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:29:22.551 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1400.4901ms
2025-09-10 01:29:25.147 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:29:25.157 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:29:26.579 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1431.8506ms
2025-09-10 01:29:29.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:29:29.168 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:29:30.552 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1393.0025ms
2025-09-10 01:29:33.222 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:29:33.227 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:29:34.598 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1376.9346ms
2025-09-10 01:29:37.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:29:37.178 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:29:38.568 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.357ms
2025-09-10 01:29:41.144 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:29:41.154 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:29:42.532 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.084ms
2025-09-10 01:29:45.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:29:45.170 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:29:46.568 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1408.6241ms
2025-09-10 01:29:49.153 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:29:49.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:29:50.559 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1406.7341ms
2025-09-10 01:29:53.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:29:53.161 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:29:54.560 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1410.8869ms
2025-09-10 01:29:57.163 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:29:57.192 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:29:58.573 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1410.2148ms
2025-09-10 01:30:01.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:30:01.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:30:02.562 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1406.4427ms
2025-09-10 01:30:05.148 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:30:05.156 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:30:06.623 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1474.0828ms
2025-09-10 01:30:09.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:30:09.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:30:10.672 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1515.7337ms
2025-09-10 01:30:11.091 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded?from=60&count=20 - null null
2025-09-10 01:30:13.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:30:13.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:30:13.977 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded?from=60&count=20 - 200 null text/html 2886.7457ms
2025-09-10 01:30:14.062 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:30:14.092 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:30:14.100 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 7.6884ms
2025-09-10 01:30:14.131 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 68.6037ms
2025-09-10 01:30:14.567 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.3798ms
2025-09-10 01:30:16.892 +03:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5069/api/Products/1/Variants/1/activate - null 0
2025-09-10 01:30:16.906 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:30:17.057 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:30:17.062 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.ActivateVariant (E-Commerce)'
2025-09-10 01:30:17.076 +03:00 [INF] Route matched with {action = "ActivateVariant", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] ActivateVariant(Int32, Int32) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-09-10 01:30:17.100 +03:00 [INF] Activating variant: 1
2025-09-10 01:30:17.152 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:30:17.158 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:30:17.335 +03:00 [INF] Checking if variant 1 exists and is not deleted
2025-09-10 01:30:17.337 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 01:30:17.418 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__8__locals1_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Quantity` > 0 AS `hasquntity`, `p`.`DeletedAt` IS NOT NULL AS `isdeleted`, `p`.`Size` IS NOT NULL AS `hassize`, ((`p`.`Length` <> 0) OR `p`.`Length` IS NULL) AND ((`p`.`Waist` <> 0) OR `p`.`Waist` IS NULL) AS `haslengthandwaist`, `p`.`ProductId` AS `productid`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__8__locals1_id_0
LIMIT 1
2025-09-10 01:30:17.496 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `ProductVariants` AS `p`
    WHERE (`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL)
2025-09-10 01:30:17.505 +03:00 [INF] Validating variant 1 has required properties for activation
2025-09-10 01:30:17.507 +03:00 [INF] Attempting to activate variant 1
2025-09-10 01:30:17.583 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE (`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 01:30:17.592 +03:00 [INF] Successfully activated variant 1
2025-09-10 01:30:17.594 +03:00 [INF] Updating product 1 quantity after activating variant 1
2025-09-10 01:30:17.596 +03:00 [INF] Recording admin operation for activating variant 1 by user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:30:17.599 +03:00 [INF] Execute AddAdminOpreationAsync
2025-09-10 01:30:17.601 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-09-10 01:30:17.605 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-09-10 01:30:17.607 +03:00 [INF] Committing unit of work for activating variant 1
2025-09-10 01:30:17.757 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p2='?' (Size = 255), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ProductVariants` SET `IsActive` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 01:30:17.842 +03:00 [INF] Committing transaction for activating variant 1
2025-09-10 01:30:18.527 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1375.384ms
2025-09-10 01:30:20.234 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-10 01:30:21.091 +03:00 [INF] Removed 1 cache entries for tags: [variantlist, variantdata]
2025-09-10 01:30:21.377 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:30:21.393 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:30:21.793 +03:00 [INF] Successfully completed all operations for activating variant 1
2025-09-10 01:30:22.437 +03:00 [INF] Removing cache by tag: subcategorywithdata
2025-09-10 01:30:22.656 +03:00 [WRN] No cache entries found for tag: subcategorywithdata
2025-09-10 01:30:22.679 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 01:30:22.793 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1416.0859ms
2025-09-10 01:30:22.857 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.ActivateVariant (E-Commerce) in 5773.0356ms
2025-09-10 01:30:23.113 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 01:30:23.168 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.ActivateVariant (E-Commerce)'
2025-09-10 01:30:23.178 +03:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5069/api/Products/1/Variants/1/activate - 200 120 application/json; charset=utf-8 6285.8958ms
2025-09-10 01:30:24.155 +03:00 [INF] Executed DbCommand (89ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-09-10 01:30:24.231 +03:00 [INF] Removed 2 cache entries for tags: [Product, Productwithdata]
2025-09-10 01:30:26.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:30:26.155 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:30:26.421 +03:00 [INF] Removing cache by tag: CollectionWithProduct
2025-09-10 01:30:26.640 +03:00 [WRN] No cache entries found for tag: CollectionWithProduct
2025-09-10 01:30:27.283 +03:00 [INF] Removing cache by tag: subcategorywithdata
2025-09-10 01:30:27.399 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1250.4139ms
2025-09-10 01:30:27.500 +03:00 [WRN] No cache entries found for tag: subcategorywithdata
2025-09-10 01:30:30.161 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:30:30.175 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:30:31.565 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1403.2437ms
2025-09-10 01:30:34.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:30:34.174 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:30:35.426 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1276.1376ms
2025-09-10 01:30:38.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:30:38.177 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:30:39.570 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1413.2461ms
2025-09-10 01:30:42.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:30:42.177 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:30:43.549 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1398.2481ms
2025-09-10 01:30:46.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:30:46.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:30:47.591 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1433.1542ms
2025-09-10 01:30:50.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:30:50.160 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:30:51.638 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1488.5871ms
2025-09-10 01:30:54.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:30:54.167 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:30:55.630 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1476.2373ms
2025-09-10 01:30:58.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:30:58.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:30:59.543 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1383.9847ms
2025-09-10 01:31:02.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:31:02.167 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:31:03.551 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1393.0301ms
2025-09-10 01:31:06.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:31:06.162 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:31:07.563 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1413.8519ms
2025-09-10 01:31:10.146 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:31:10.160 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:31:11.560 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1414.0811ms
2025-09-10 01:31:14.145 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:31:14.154 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:31:15.534 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.7584ms
2025-09-10 01:31:18.148 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:31:18.154 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:31:19.564 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1416.6668ms
2025-09-10 01:31:22.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:31:22.157 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:31:23.530 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1379.1764ms
2025-09-10 01:31:26.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:31:26.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:31:27.562 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.8356ms
2025-09-10 01:31:29.801 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json 62
2025-09-10 01:31:29.815 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:31:29.979 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:31:29.988 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 01:31:29.996 +03:00 [INF] Route matched with {action = "AddItemToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] AddItemToCart(E_Commerce.DtoModels.CartDtos.CreateCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 01:31:30.007 +03:00 [INF] Executing AddItemToCart for product ID: 1
2025-09-10 01:31:30.012 +03:00 [INF] Adding item to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 1
2025-09-10 01:31:30.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:31:30.168 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:31:30.305 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 01:31:30.318 +03:00 [INF] Execute GetAll for entity Product
2025-09-10 01:31:30.398 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__8__locals1_itemDto_ProductId_0='?' (DbType = Int32), @__8__locals1_itemDto_ProductVariantId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Price`, `t`.`c`, `t`.`EndDate`, `t`.`StartDate`, `t`.`DiscountPercent`, `t`.`DeletedAt`, `t`.`IsActive`, `t0`.`Id`, `t0`.`Quantity`, `t0`.`c`
FROM (
    SELECT `p`.`Id`, `p`.`Price`, `d`.`Id` IS NOT NULL AS `c`, `d`.`EndDate`, `d`.`StartDate`, `d`.`DiscountPercent`, `d`.`DeletedAt`, `d`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__8__locals1_itemDto_ProductId_0) AND `p`.`DeletedAt` IS NULL) AND `p`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Quantity`, `t1`.`c`, `t1`.`ProductId`
    FROM (
        SELECT `p0`.`Id`, `p0`.`Quantity`, 1 AS `c`, `p0`.`ProductId`, ROW_NUMBER() OVER(PARTITION BY `p0`.`ProductId` ORDER BY `p0`.`Id`) AS `row`
        FROM `ProductVariants` AS `p0`
        WHERE (`p0`.`Id` = @__8__locals1_itemDto_ProductVariantId_1) AND `p0`.`IsActive`
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
2025-09-10 01:31:30.405 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:31:30.487 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 01:31:30.504 +03:00 [INF] Executing CreateAsync for entity CartItem
2025-09-10 01:31:30.509 +03:00 [INF] CartItem added successfully (pending save)
2025-09-10 01:31:30.522 +03:00 [INF] Execute AddUserOpreationAsync
2025-09-10 01:31:30.528 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-09-10 01:31:30.556 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-09-10 01:31:31.560 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1403.1243ms
2025-09-10 01:31:31.588 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (DbType = DateTime), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime), @p16='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `CartItems` (`AddedAt`, `CartId`, `CreatedAt`, `DeletedAt`, `ModifiedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `UnitPrice`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `CartItems`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `userOperationsLogs` (`CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`, `UserId`)
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `userOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 01:31:31.754 +03:00 [INF] Removing cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:31:32.188 +03:00 [INF] Cache removed successfully for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:31:32.231 +03:00 [INF] Item added to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 1
2025-09-10 01:31:32.237 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 01:31:32.241 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce) in 2235.5556ms
2025-09-10 01:31:32.255 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 01:31:32.264 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 200 134 application/json; charset=utf-8 2462.7543ms
2025-09-10 01:31:34.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:31:34.159 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:31:34.576 +03:00 [INF] Executing GetByIdAsync for entity Cart with ID: 1
2025-09-10 01:31:34.739 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
FROM `Cart` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-09-10 01:31:34.893 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Cart` SET `CheckoutDate` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 01:31:35.532 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1381.0689ms
2025-09-10 01:31:37.348 +03:00 [INF] Removing cache by tag: cart
2025-09-10 01:31:38.193 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:31:38.228 +03:00 [INF] Removed 2 cache entries for tag: cart
2025-09-10 01:31:38.230 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:31:39.475 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1282.2088ms
2025-09-10 01:31:42.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:31:42.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:31:42.728 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - null 0
2025-09-10 01:31:42.738 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:31:42.900 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:31:42.905 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-09-10 01:31:42.910 +03:00 [INF] Route matched with {action = "CheckOut", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] CheckOut() on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 01:31:42.917 +03:00 [INF] Executing CheckOut
2025-09-10 01:31:42.919 +03:00 [INF] Checkout of cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:31:42.920 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:31:43.070 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 01:31:43.223 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Cart` SET `CheckoutDate` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 01:31:43.234 +03:00 [INF] Removing cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:31:43.238 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 01:31:43.242 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.CheckOut (E-Commerce) in 327.6749ms
2025-09-10 01:31:43.244 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-09-10 01:31:43.247 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - 200 122 application/json; charset=utf-8 519.276ms
2025-09-10 01:31:43.662 +03:00 [INF] Cache removed successfully for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:31:43.731 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1574.2316ms
2025-09-10 01:31:45.360 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order - application/json 41
2025-09-10 01:31:45.370 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:31:45.520 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:31:45.526 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 01:31:45.531 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto]]] CreateOrder(E_Commerce.DtoModels.OrderDtos.CreateOrderDto) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 01:31:45.541 +03:00 [INF] Executing CreateOrder
2025-09-10 01:31:45.572 +03:00 [INF] Creating order from cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:31:45.873 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 01:31:45.954 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 01:31:45.963 +03:00 [INF] Checking if address 1 exists for customer: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:31:46.042 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__addressId_0='?' (DbType = Int32), @__customerId_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `CustomerAddresses` AS `c`
    WHERE ((`c`.`Id` = @__addressId_0) AND (`c`.`CustomerId` = @__customerId_1)) AND `c`.`DeletedAt` IS NULL)
2025-09-10 01:31:46.053 +03:00 [INF] Getting cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:31:46.057 +03:00 [INF] Getting cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:31:46.146 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:31:46.156 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:31:46.283 +03:00 [WRN] Cache miss for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:31:46.361 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 01:31:46.372 +03:00 [INF] Execute GetAll for entity Cart
2025-09-10 01:31:46.483 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-09-10 01:31:47.569 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1422.4446ms
2025-09-10 01:31:48.234 +03:00 [INF] Setting cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:31:48.483 +03:00 [INF] Cache set successfully for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5 with tags: [cart]
2025-09-10 01:31:48.488 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 01:31:48.578 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`, `p0`.`Id`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`Description`, `p0`.`DiscountId`, `p0`.`Gender`, `p0`.`IsActive`, `p0`.`ModifiedAt`, `p0`.`Name`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`SubCategoryId`, `p0`.`fitType`
FROM `ProductVariants` AS `p`
INNER JOIN `Products` AS `p0` ON `p`.`ProductId` = `p0`.`Id`
WHERE `p`.`Id` IN (4, 1)
2025-09-10 01:31:48.660 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE `o`.`OrderNumber` = @__orderNumber_0)
2025-09-10 01:31:48.669 +03:00 [INF] Executing CreateAsync for entity Order
2025-09-10 01:31:48.672 +03:00 [INF] Order added successfully (pending save)
2025-09-10 01:31:48.676 +03:00 [INF] Execute GetAll for entity CartItem
2025-09-10 01:31:48.823 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime), @p8='?' (Size = 500), @p9='?' (Size = 50), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Orders` (`CancelledAt`, `CreatedAt`, `CustomerAddressId`, `CustomerId`, `DeletedAt`, `DeliveredAt`, `DiscountAmount`, `ModifiedAt`, `Notes`, `OrderNumber`, `RestockedAt`, `ShippedAt`, `ShippingCost`, `Status`, `Subtotal`, `TaxAmount`, `Total`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Orders`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 01:31:48.825 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__cartItemId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE (`c`.`Id` = @__cartItemId_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 01:31:48.839 +03:00 [INF] CartItem 32 price updated to 3374.08790000
2025-09-10 01:31:48.907 +03:00 [INF] Executing CreateRangeAsync for entity OrderItem
2025-09-10 01:31:48.912 +03:00 [INF] 2 OrderItem entities added successfully (pending save)
2025-09-10 01:31:48.916 +03:00 [INF] Removing 3 from variant: 4
2025-09-10 01:31:48.920 +03:00 [INF] Executing GetByIdAsync for entity ProductVariant with ID: 4
2025-09-10 01:31:48.990 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `CartItems` SET `UnitPrice` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 01:31:48.997 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 01:31:49.010 +03:00 [ERR] Error in RemoveQuntityAfterOrder for id: 4
System.NotSupportedException: Only public methods can be invoked in the background. Ensure your method has the `public` access modifier, and you aren't using explicit interface implementation.
   at Hangfire.Common.Job..ctor(Type type, MethodInfo method, IReadOnlyList`1 args, String queue) in C:\projects\hangfire-525\src\Hangfire.Core\Common\Job.cs:line 204
   at Hangfire.Common.Job.FromExpression(LambdaExpression methodCall, Type explicitType, String queue) in C:\projects\hangfire-525\src\Hangfire.Core\Common\Job.cs:line 457
   at Hangfire.Common.Job.FromExpression(Expression`1 methodCall, String queue) in C:\projects\hangfire-525\src\Hangfire.Core\Common\Job.cs:line 357
   at Hangfire.Common.Job.FromExpression(Expression`1 methodCall) in C:\projects\hangfire-525\src\Hangfire.Core\Common\Job.cs:line 352
   at Hangfire.BackgroundJobClientExtensions.Create(IBackgroundJobClient client, Expression`1 methodCall, IState state) in C:\projects\hangfire-525\src\Hangfire.Core\BackgroundJobClientExtensions.cs:line 541
   at Hangfire.BackgroundJobClientExtensions.Enqueue(IBackgroundJobClient client, Expression`1 methodCall) in C:\projects\hangfire-525\src\Hangfire.Core\BackgroundJobClientExtensions.cs:line 86
   at E_Commerce.Services.ProductVariantServices.ProductVariantCommandService.RemoveQuntityAfterOrder(Int32 id, Int32 quantity)
2025-09-10 01:31:49.542 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:31:49.695 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 01:31:49.850 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Cart` SET `CheckoutDate` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 01:31:49.873 +03:00 [INF] Checkout date removed for cart of user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:31:49.982 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 01:31:49.991 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce) in 4451.8862ms
2025-09-10 01:31:50.012 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 01:31:50.032 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order - 409 306 application/json; charset=utf-8 4671.6697ms
2025-09-10 01:31:50.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:31:50.170 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:31:51.540 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1380.2874ms
2025-09-10 01:31:54.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:31:54.159 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:31:55.401 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1250.4798ms
2025-09-10 01:31:58.152 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:31:58.168 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:31:59.552 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1399.4332ms
2025-09-10 01:32:02.162 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:32:02.183 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:32:03.569 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1407.5251ms
2025-09-10 01:32:06.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:32:06.185 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:32:07.569 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.9132ms
2025-09-10 01:32:10.147 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:32:10.167 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:32:11.549 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1401.4076ms
2025-09-10 01:32:14.367 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:32:14.376 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:32:15.746 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1379.1211ms
2025-09-10 01:32:17.294 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json 62
2025-09-10 01:32:17.304 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:32:17.452 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:32:17.460 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 01:32:17.464 +03:00 [INF] Route matched with {action = "AddItemToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] AddItemToCart(E_Commerce.DtoModels.CartDtos.CreateCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 01:32:17.475 +03:00 [INF] Executing AddItemToCart for product ID: 1
2025-09-10 01:32:17.479 +03:00 [INF] Adding item to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 1
2025-09-10 01:32:17.776 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 01:32:17.786 +03:00 [INF] Execute GetAll for entity Product
2025-09-10 01:32:17.867 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__8__locals1_itemDto_ProductId_0='?' (DbType = Int32), @__8__locals1_itemDto_ProductVariantId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Price`, `t`.`c`, `t`.`EndDate`, `t`.`StartDate`, `t`.`DiscountPercent`, `t`.`DeletedAt`, `t`.`IsActive`, `t0`.`Id`, `t0`.`Quantity`, `t0`.`c`
FROM (
    SELECT `p`.`Id`, `p`.`Price`, `d`.`Id` IS NOT NULL AS `c`, `d`.`EndDate`, `d`.`StartDate`, `d`.`DiscountPercent`, `d`.`DeletedAt`, `d`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__8__locals1_itemDto_ProductId_0) AND `p`.`DeletedAt` IS NULL) AND `p`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Quantity`, `t1`.`c`, `t1`.`ProductId`
    FROM (
        SELECT `p0`.`Id`, `p0`.`Quantity`, 1 AS `c`, `p0`.`ProductId`, ROW_NUMBER() OVER(PARTITION BY `p0`.`ProductId` ORDER BY `p0`.`Id`) AS `row`
        FROM `ProductVariants` AS `p0`
        WHERE (`p0`.`Id` = @__8__locals1_itemDto_ProductVariantId_1) AND `p0`.`IsActive`
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
2025-09-10 01:32:17.877 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:32:17.962 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 01:32:17.976 +03:00 [INF] Execute Update for entity CartItem
2025-09-10 01:32:17.985 +03:00 [INF] CartItem marked for update (pending save)
2025-09-10 01:32:17.996 +03:00 [INF] Execute AddUserOpreationAsync
2025-09-10 01:32:17.998 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-09-10 01:32:18.000 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-09-10 01:32:18.147 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:32:18.153 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:32:19.080 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (Size = 4000), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime), @p17='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
UPDATE `CartItems` SET `AddedAt` = @p0, `CartId` = @p1, `CreatedAt` = @p2, `DeletedAt` = @p3, `ModifiedAt` = @p4, `ProductId` = @p5, `ProductVariantId` = @p6, `Quantity` = @p7, `UnitPrice` = @p8
WHERE `Id` = @p9;
SELECT ROW_COUNT();

INSERT INTO `userOperationsLogs` (`CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`, `UserId`)
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
SELECT `Id`
FROM `userOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 01:32:19.236 +03:00 [INF] Removing cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:32:19.555 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1407.4864ms
2025-09-10 01:32:19.665 +03:00 [INF] Cache removed successfully for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:32:19.668 +03:00 [INF] Item added to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 1
2025-09-10 01:32:19.674 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 01:32:19.680 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce) in 2205.685ms
2025-09-10 01:32:19.683 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 01:32:19.685 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 200 134 application/json; charset=utf-8 2391.5258ms
2025-09-10 01:32:20.621 +03:00 [INF] Executing GetByIdAsync for entity Cart with ID: 1
2025-09-10 01:32:20.773 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
FROM `Cart` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-09-10 01:32:22.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:32:22.162 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:32:22.989 +03:00 [INF] Removing cache by tag: cart
2025-09-10 01:32:23.207 +03:00 [WRN] No cache entries found for tag: cart
2025-09-10 01:32:23.239 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Cart - null null
2025-09-10 01:32:23.248 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:32:23.387 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1236.4244ms
2025-09-10 01:32:23.397 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:32:23.404 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.GetCart (E-Commerce)'
2025-09-10 01:32:23.409 +03:00 [INF] Route matched with {action = "GetCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CartDtos.CartDto]]] GetCart() on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 01:32:23.423 +03:00 [INF] Executing GetCart
2025-09-10 01:32:23.427 +03:00 [INF] Getting cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:32:23.431 +03:00 [INF] Getting cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:32:23.647 +03:00 [WRN] Cache miss for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:32:23.797 +03:00 [INF] Executed DbCommand (71ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 01:32:23.832 +03:00 [INF] Execute GetAll for entity Cart
2025-09-10 01:32:24.002 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-09-10 01:32:25.751 +03:00 [INF] Setting cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:32:25.975 +03:00 [INF] Cache set successfully for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5 with tags: [cart]
2025-09-10 01:32:25.983 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CartDtos.CartDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 01:32:25.998 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.GetCart (E-Commerce) in 2579.2871ms
2025-09-10 01:32:26.002 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.GetCart (E-Commerce)'
2025-09-10 01:32:26.006 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Cart - 200 1650 application/json; charset=utf-8 2766.7679ms
2025-09-10 01:32:26.164 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:32:26.196 +03:00 [INF] Execute GetAll for entity CartItem
2025-09-10 01:32:26.197 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:32:26.347 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__cartItemId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE (`c`.`Id` = @__cartItemId_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 01:32:26.361 +03:00 [INF] CartItem 32 price updated to 3374.08790000
2025-09-10 01:32:26.509 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `CartItems` SET `UnitPrice` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 01:32:27.576 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.5572ms
2025-09-10 01:32:27.968 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:32:28.126 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 01:32:30.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:32:30.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:32:31.438 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1280.8398ms
2025-09-10 01:32:34.162 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:32:34.169 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:32:35.571 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1408.9646ms
2025-09-10 01:32:38.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:32:38.169 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:32:39.583 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1424.4433ms
2025-09-10 01:32:42.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:32:42.168 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:32:43.558 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1402.3515ms
2025-09-10 01:32:46.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:32:46.162 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:32:47.560 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1410.5545ms
2025-09-10 01:32:50.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:32:50.168 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:32:51.573 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1415.2802ms
2025-09-10 01:32:54.146 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:32:54.155 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:32:55.532 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1386.6342ms
2025-09-10 01:32:58.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:32:58.168 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:32:59.547 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.5206ms
2025-09-10 01:33:02.179 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:33:02.185 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:33:04.211 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2031.3615ms
2025-09-10 01:33:07.200 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:33:07.276 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:33:08.675 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1474.887ms
2025-09-10 01:33:11.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:33:11.157 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:33:12.533 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1382.0299ms
2025-09-10 01:33:15.176 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:33:15.192 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:33:16.565 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1389.1787ms
2025-09-10 01:33:17.224 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded?from=60&count=20 - null null
2025-09-10 01:33:19.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:33:19.169 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:33:19.751 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded?from=60&count=20 - 200 null text/html 2526.5977ms
2025-09-10 01:33:19.963 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:33:20.119 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 156.2429ms
2025-09-10 01:33:20.144 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:33:20.150 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 5.485ms
2025-09-10 01:33:20.587 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1430.0619ms
2025-09-10 01:33:23.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:33:23.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:33:24.561 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.6412ms
2025-09-10 01:33:27.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:33:27.178 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:33:28.580 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1424.6983ms
2025-09-10 01:33:31.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:33:31.177 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:33:32.596 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1437.0131ms
2025-09-10 01:33:35.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:33:35.160 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:33:36.551 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1401.1431ms
2025-09-10 01:33:39.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:33:39.161 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:33:40.544 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1393.7906ms
2025-09-10 01:33:43.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:33:43.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:33:44.588 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1428.9734ms
2025-09-10 01:33:47.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:33:47.158 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:33:48.870 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1720.899ms
2025-09-10 01:33:51.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:33:51.171 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:33:52.572 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1412.9747ms
2025-09-10 01:33:55.161 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:33:55.170 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:33:56.571 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.6526ms
2025-09-10 01:33:59.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:33:59.157 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:34:00.536 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1385.9873ms
2025-09-10 01:34:00.946 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5069/api/Cart/items - application/json 45
2025-09-10 01:34:00.964 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:34:01.120 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:34:01.131 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.RemoveItemFromCart (E-Commerce)'
2025-09-10 01:34:01.142 +03:00 [INF] Route matched with {action = "RemoveItemFromCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] RemoveItemFromCart(E_Commerce.DtoModels.CartDtos.RemoveCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 01:34:01.159 +03:00 [INF] Executing RemoveItemFromCart for product ID: 6
2025-09-10 01:34:01.173 +03:00 [INF] Removing item from cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 6
2025-09-10 01:34:01.396 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:34:01.492 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 01:34:01.507 +03:00 [INF] Removing item from cart: 1, product: 6, variant: 4
2025-09-10 01:34:01.603 +03:00 [INF] Executed DbCommand (88ms) [Parameters=[@__cartId_0='?' (DbType = Int32), @__productId_1='?' (DbType = Int32), @__productVariantId_Value_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE ((`c`.`CartId` = @__cartId_0) AND (`c`.`ProductId` = @__productId_1)) AND (`c`.`ProductVariantId` = @__productVariantId_Value_2)
LIMIT 1
2025-09-10 01:34:01.622 +03:00 [INF] Cart item removed successfully
2025-09-10 01:34:01.625 +03:00 [INF] Execute AddUserOpreationAsync
2025-09-10 01:34:01.629 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-09-10 01:34:01.631 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-09-10 01:34:01.786 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime), @p8='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM `CartItems`
WHERE `Id` = @p0;
SELECT ROW_COUNT();

INSERT INTO `userOperationsLogs` (`CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`, `UserId`)
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `userOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 01:34:02.831 +03:00 [INF] Removing cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:34:02.836 +03:00 [INF] Item removed from cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 6
2025-09-10 01:34:02.841 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 01:34:02.845 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.RemoveItemFromCart (E-Commerce) in 1697.8383ms
2025-09-10 01:34:02.848 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.RemoveItemFromCart (E-Commerce)'
2025-09-10 01:34:02.851 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5069/api/Cart/items - 200 138 application/json; charset=utf-8 1904.8992ms
2025-09-10 01:34:03.278 +03:00 [INF] Cache removed successfully for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:34:03.498 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:34:03.512 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:34:05.032 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1534.1805ms
2025-09-10 01:34:05.792 +03:00 [INF] Executing GetByIdAsync for entity Cart with ID: 1
2025-09-10 01:34:05.945 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
FROM `Cart` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-09-10 01:34:07.161 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:34:07.171 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:34:07.362 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - null 0
2025-09-10 01:34:07.370 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:34:07.519 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:34:07.536 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-09-10 01:34:07.552 +03:00 [INF] Route matched with {action = "CheckOut", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] CheckOut() on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 01:34:07.559 +03:00 [INF] Executing CheckOut
2025-09-10 01:34:07.565 +03:00 [INF] Checkout of cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:34:07.569 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:34:07.724 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 01:34:07.879 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Cart` SET `CheckoutDate` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 01:34:07.891 +03:00 [INF] Removing cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:34:07.898 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 01:34:07.902 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.CheckOut (E-Commerce) in 343.5585ms
2025-09-10 01:34:07.923 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-09-10 01:34:07.963 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - 200 122 application/json; charset=utf-8 601.3662ms
2025-09-10 01:34:08.323 +03:00 [INF] Cache removed successfully for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:34:08.421 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1259.8695ms
2025-09-10 01:34:11.153 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:34:11.161 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:34:12.565 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1412.0849ms
2025-09-10 01:34:14.400 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order - application/json 41
2025-09-10 01:34:14.414 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:34:14.560 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:34:14.569 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 01:34:14.578 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto]]] CreateOrder(E_Commerce.DtoModels.OrderDtos.CreateOrderDto) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 01:34:14.585 +03:00 [INF] Executing CreateOrder
2025-09-10 01:34:14.601 +03:00 [INF] Creating order from cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:34:14.896 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 01:34:14.981 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 01:34:14.988 +03:00 [INF] Checking if address 1 exists for customer: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:34:15.066 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__addressId_0='?' (DbType = Int32), @__customerId_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `CustomerAddresses` AS `c`
    WHERE ((`c`.`Id` = @__addressId_0) AND (`c`.`CustomerId` = @__customerId_1)) AND `c`.`DeletedAt` IS NULL)
2025-09-10 01:34:15.075 +03:00 [INF] Getting cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:34:15.078 +03:00 [INF] Getting cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:34:15.163 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:34:15.179 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:34:15.292 +03:00 [WRN] Cache miss for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:34:15.368 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 01:34:15.380 +03:00 [INF] Execute GetAll for entity Cart
2025-09-10 01:34:15.464 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-09-10 01:34:15.471 +03:00 [INF] Setting cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:34:15.700 +03:00 [INF] Cache set successfully for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5 with tags: [cart]
2025-09-10 01:34:15.708 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 01:34:15.787 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`, `p0`.`Id`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`Description`, `p0`.`DiscountId`, `p0`.`Gender`, `p0`.`IsActive`, `p0`.`ModifiedAt`, `p0`.`Name`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`SubCategoryId`, `p0`.`fitType`
FROM `ProductVariants` AS `p`
INNER JOIN `Products` AS `p0` ON `p`.`ProductId` = `p0`.`Id`
WHERE `p`.`Id` = 1
2025-09-10 01:34:15.870 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE `o`.`OrderNumber` = @__orderNumber_0)
2025-09-10 01:34:15.880 +03:00 [INF] Executing CreateAsync for entity Order
2025-09-10 01:34:15.882 +03:00 [INF] Order added successfully (pending save)
2025-09-10 01:34:16.032 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime), @p8='?' (Size = 500), @p9='?' (Size = 50), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Orders` (`CancelledAt`, `CreatedAt`, `CustomerAddressId`, `CustomerId`, `DeletedAt`, `DeliveredAt`, `DiscountAmount`, `ModifiedAt`, `Notes`, `OrderNumber`, `RestockedAt`, `ShippedAt`, `ShippingCost`, `Status`, `Subtotal`, `TaxAmount`, `Total`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Orders`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 01:34:16.113 +03:00 [INF] Executing CreateRangeAsync for entity OrderItem
2025-09-10 01:34:16.117 +03:00 [INF] 1 OrderItem entities added successfully (pending save)
2025-09-10 01:34:16.123 +03:00 [INF] Removing 6 from variant: 1
2025-09-10 01:34:16.126 +03:00 [INF] Executing GetByIdAsync for entity ProductVariant with ID: 1
2025-09-10 01:34:16.201 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 01:34:16.412 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1249.0682ms
2025-09-10 01:34:17.193 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE ProductVariants SET Quantity = Quantity - @p0 WHERE Id = @p1 AND Quantity >= @p0
2025-09-10 01:34:17.211 +03:00 [INF] Clearing cart: 1
2025-09-10 01:34:17.291 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__cartId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE `c`.`CartId` = @__cartId_0
2025-09-10 01:34:17.302 +03:00 [INF] Cart 1 cleared successfully
2025-09-10 01:34:17.462 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Decimal), @p10='?' (DbType = Decimal), @p12='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM `CartItems`
WHERE `Id` = @p0;
SELECT ROW_COUNT();

INSERT INTO `OrderItem` (`CreatedAt`, `DeletedAt`, `ModifiedAt`, `OrderId`, `OrderedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `TotalPrice`, `UnitPrice`)
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
SELECT `Id`
FROM `OrderItem`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

UPDATE `ProductVariants` SET `Quantity` = @p11
WHERE `Id` = @p12;
SELECT ROW_COUNT();
2025-09-10 01:34:17.623 +03:00 [INF] Execute AddUserOpreationAsync
2025-09-10 01:34:17.626 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-09-10 01:34:17.630 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-09-10 01:34:17.633 +03:00 [INF] Execute GetAll for entity Order
2025-09-10 01:34:17.841 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[@__createdOrder_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`ModifiedAt`, `t0`.`OrderNumber`, `t0`.`Status`, `t0`.`Subtotal`, `t0`.`TaxAmount`, `t0`.`ShippingCost`, `t0`.`DiscountAmount`, `t0`.`Total`, `t0`.`Notes`, `t0`.`DeletedAt`, `t0`.`ShippedAt`, `t0`.`DeliveredAt`, `t0`.`CancelledAt`, `t0`.`c`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Email`, `t0`.`PhoneNumber`, `t1`.`Id`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`Quantity`, `t1`.`UnitPrice`, `t1`.`TotalPrice`, `t1`.`OrderedAt`, `t1`.`Id0`, `t1`.`Name`, `t1`.`Price`, `t1`.`IsActive`, `t1`.`FinalPrice`, `t1`.`DiscountPrecentage`, `t1`.`MainImageUrl`, `t1`.`Id1`, `t1`.`Color`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`Size`, `t1`.`DeletedAt`, `t1`.`Length`, `t1`.`Waist`, `t1`.`Id2`, `t1`.`Id3`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`ModifiedAt`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`ShippingCost`, `o`.`DiscountAmount`, `o`.`Total`, `o`.`Notes`, `o`.`DeletedAt`, `o`.`ShippedAt`, `o`.`DeliveredAt`, `o`.`CancelledAt`, FALSE AS `c`, `t`.`Id` AS `Id0`, `t`.`Name`, `t`.`Email`, `t`.`PhoneNumber`
    FROM `Orders` AS `o`
    INNER JOIN (
        SELECT `a`.`Id`, `a`.`Email`, `a`.`PhoneNumber`, `a`.`Name`
        FROM `AspNetUsers` AS `a`
        WHERE `a`.`Discriminator` = 'Customer'
    ) AS `t` ON `o`.`CustomerId` = `t`.`Id`
    WHERE `o`.`Id` = @__createdOrder_Id_0
    LIMIT 1
) AS `t0`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`CreatedAt`, `o0`.`ModifiedAt`, `o0`.`Quantity`, `o0`.`UnitPrice`, `o0`.`TotalPrice`, `o0`.`OrderedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND `i`.`DeletedAt` IS NULL
        LIMIT 1), '') AS `MainImageUrl`, `o0`.`ProductVariantId` AS `Id1`, `p0`.`Color`, COALESCE(`p0`.`CreatedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `CreatedAt0`, COALESCE(`p0`.`ModifiedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `ModifiedAt0`, `p0`.`Size`, `p0`.`DeletedAt`, COALESCE(`p0`.`Length`, 0) AS `Length`, COALESCE(`p0`.`Waist`, 0) AS `Waist`, `d`.`Id` AS `Id2`, `p0`.`Id` AS `Id3`, `o0`.`OrderId`
    FROM `OrderItem` AS `o0`
    INNER JOIN `Products` AS `p` ON `o0`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    INNER JOIN `ProductVariants` AS `p0` ON `o0`.`ProductVariantId` = `p0`.`Id`
) AS `t1` ON `t0`.`Id` = `t1`.`OrderId`
ORDER BY `t0`.`Id`, `t0`.`Id0`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id2`
2025-09-10 01:34:19.146 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:34:19.158 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:34:20.263 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 01:34:20.304 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce) in 5719.6458ms
2025-09-10 01:34:20.309 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 01:34:20.315 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order - 201 1438 application/json; charset=utf-8 5914.5191ms
2025-09-10 01:34:20.525 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1379.1359ms
2025-09-10 01:34:22.571 +03:00 [INF] Removing cache by tags: [order]
2025-09-10 01:34:23.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:34:23.163 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:34:23.860 +03:00 [INF] Removed 4 cache entries for tags: [order]
2025-09-10 01:34:24.490 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1335.8758ms
2025-09-10 01:34:27.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:34:27.180 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:34:28.559 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1403.1844ms
2025-09-10 01:34:31.450 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:34:31.460 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:34:32.836 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1386.2493ms
2025-09-10 01:34:35.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:34:35.163 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:34:36.568 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1412.7105ms
2025-09-10 01:34:39.179 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:34:39.299 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:34:40.704 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1525.2747ms
2025-09-10 01:34:43.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:34:43.162 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:34:44.538 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1387.5917ms
2025-09-10 01:34:45.214 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - null null
2025-09-10 01:34:45.228 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:34:45.379 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:34:45.389 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.GetOrders (E-Commerce)'
2025-09-10 01:34:45.396 +03:00 [INF] Route matched with {action = "GetOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.OrderDtos.OrderListDto]]]] GetOrders(System.String, System.Nullable`1[System.Boolean], Int32, Int32, System.Nullable`1[E_Commerce.Enums.OrderStatus]) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 01:34:45.406 +03:00 [INF] Executing GetOrders: role: Admin, userId: , deleted: , page: 1, size: 10, status: 
2025-09-10 01:34:45.408 +03:00 [INF] Filtering orders - UserId: null, Deleted: null, Page: 1, PageSize: 10, Status: null
2025-09-10 01:34:45.415 +03:00 [INF] Getting cache for key: order:filter:user:all_deleted:all_page:1_size:10_status:all
2025-09-10 01:34:45.630 +03:00 [WRN] Cache miss for key: order:filter:user:all_deleted:all_page:1_size:10_status:all
2025-09-10 01:34:45.644 +03:00 [INF] Execute GetAll for entity Order
2025-09-10 01:34:45.805 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`OrderNumber`, `t0`.`Name`, `t`.`Status`, `t`.`Total`, `t`.`CreatedAt`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`CustomerId`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Total`
    FROM `Orders` AS `o`
    ORDER BY `o`.`CreatedAt` DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
INNER JOIN (
    SELECT `a`.`Id`, `a`.`Name`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Discriminator` = 'Customer'
) AS `t0` ON `t`.`CustomerId` = `t0`.`Id`
ORDER BY `t`.`CreatedAt` DESC
2025-09-10 01:34:46.709 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.OrderDtos.OrderListDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 01:34:46.752 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.GetOrders (E-Commerce) in 1348.668ms
2025-09-10 01:34:46.963 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.GetOrders (E-Commerce)'
2025-09-10 01:34:46.966 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - 200 1731 application/json; charset=utf-8 1752.1588ms
2025-09-10 01:34:47.161 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:34:47.249 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:34:48.333 +03:00 [INF] Setting cache for key: order:filter:user:all_deleted:all_page:1_size:10_status:all
2025-09-10 01:34:48.562 +03:00 [INF] Cache set successfully for key: order:filter:user:all_deleted:all_page:1_size:10_status:all with tags: [order]
2025-09-10 01:34:48.619 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1457.3117ms
2025-09-10 01:34:51.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:34:51.170 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:34:52.408 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1253.9372ms
2025-09-10 01:34:55.474 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:34:55.481 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:34:56.860 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1386.2424ms
2025-09-10 01:34:59.165 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:34:59.185 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:35:00.584 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1419.7514ms
2025-09-10 01:35:01.931 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded?from=60&count=20 - null null
2025-09-10 01:35:02.596 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:35:02.606 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:35:03.983 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1386.8154ms
2025-09-10 01:35:04.379 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded?from=60&count=20 - 200 null text/html 2447.1364ms
2025-09-10 01:35:04.412 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:35:04.406 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:35:04.459 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 47.5223ms
2025-09-10 01:35:04.496 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 90.1592ms
2025-09-10 01:35:05.034 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 01:35:06.501 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:35:06.528 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:35:07.303 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2269.104ms
2025-09-10 01:35:07.352 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:35:07.352 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:35:07.409 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 56.9748ms
2025-09-10 01:35:07.412 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 60.6573ms
2025-09-10 01:35:07.903 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1402.267ms
2025-09-10 01:35:09.441 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:35:09.451 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:35:11.122 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1680.7201ms
2025-09-10 01:35:13.137 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:35:13.149 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:35:14.838 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1701.0383ms
2025-09-10 01:35:20.962 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/delete - application/x-www-form-urlencoded; charset=UTF-8 45
2025-09-10 01:35:20.977 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:35:20.990 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:35:21.001 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:35:22.402 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1425.1253ms
2025-09-10 01:35:24.414 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:35:24.430 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:35:25.184 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/delete - 204 null null 4221.2355ms
2025-09-10 01:35:25.243 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 01:35:25.868 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1454.0022ms
2025-09-10 01:35:27.659 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2415.396ms
2025-09-10 01:35:27.683 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:35:27.684 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:35:27.714 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.5808ms
2025-09-10 01:35:27.718 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 33.8452ms
2025-09-10 01:35:29.750 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:35:29.764 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:35:31.145 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1394.9443ms
2025-09-10 01:35:33.173 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:35:33.183 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:35:34.593 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1420.8766ms
2025-09-10 01:35:36.628 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:35:36.638 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:35:38.035 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1407.426ms
2025-09-10 01:35:40.060 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:35:40.079 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:35:41.470 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.9748ms
2025-09-10 01:35:43.489 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:35:43.497 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:35:44.896 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1407.2851ms
2025-09-10 01:35:46.911 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:35:46.920 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:35:48.291 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1380.165ms
2025-09-10 01:35:50.310 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:35:50.321 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:35:51.698 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.3489ms
2025-09-10 01:35:53.720 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:35:53.748 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:35:55.144 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1424.2741ms
2025-09-10 01:35:56.703 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants/1 - null null
2025-09-10 01:35:56.716 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:35:56.866 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:35:56.876 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.GetVariantById (E-Commerce)'
2025-09-10 01:35:56.883 +03:00 [INF] Route matched with {action = "GetVariantById", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]] GetVariantById(Int32, Int32) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-09-10 01:35:56.898 +03:00 [INF] Getting variant by id: 1
2025-09-10 01:35:56.903 +03:00 [INF] Getting cache for key: variant:1
2025-09-10 01:35:57.120 +03:00 [WRN] Cache miss for key: variant:1
2025-09-10 01:35:57.146 +03:00 [INF] Getting variant by ID: 1
2025-09-10 01:35:57.178 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:35:57.186 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:35:57.318 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`, `p0`.`Id`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`Description`, `p0`.`DiscountId`, `p0`.`Gender`, `p0`.`IsActive`, `p0`.`ModifiedAt`, `p0`.`Name`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`SubCategoryId`, `p0`.`fitType`
FROM `ProductVariants` AS `p`
INNER JOIN `Products` AS `p0` ON `p`.`ProductId` = `p0`.`Id`
WHERE (`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 01:35:57.328 +03:00 [INF] Caching variant 1 data
2025-09-10 01:35:58.218 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 01:35:58.227 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.GetVariantById (E-Commerce) in 1339.5514ms
2025-09-10 01:35:58.230 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.GetVariantById (E-Commerce)'
2025-09-10 01:35:58.234 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants/1 - 200 308 application/json; charset=utf-8 1531.3878ms
2025-09-10 01:35:58.892 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1713.9196ms
2025-09-10 01:35:59.515 +03:00 [INF] Setting cache for key: variant:1
2025-09-10 01:35:59.736 +03:00 [INF] Cache set successfully for key: variant:1 with tags: [product:1, variantdata]
2025-09-10 01:36:00.910 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:36:00.930 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:36:02.180 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1269.8973ms
2025-09-10 01:36:04.204 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:36:04.222 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:36:05.621 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1417.3674ms
2025-09-10 01:36:07.646 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:36:07.658 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:36:09.052 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.8698ms
2025-09-10 01:36:11.064 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:36:11.075 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:36:12.472 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1407.5643ms
2025-09-10 01:36:14.500 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:36:14.520 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:36:15.912 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.9008ms
2025-09-10 01:36:17.958 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:36:18.076 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:36:19.469 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1510.8914ms
2025-09-10 01:36:21.498 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:36:21.517 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:36:22.919 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1420.8185ms
2025-09-10 01:36:24.943 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:36:24.956 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:36:26.357 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1413.2976ms
2025-09-10 01:36:28.386 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:36:28.460 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:36:29.835 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1449.7773ms
2025-09-10 01:36:31.846 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:36:31.856 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:36:33.230 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1384.6796ms
2025-09-10 01:36:35.253 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:36:35.268 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:36:36.660 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1407.1554ms
2025-09-10 01:36:38.675 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:36:38.684 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:36:40.057 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1382.2142ms
2025-09-10 01:36:42.079 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:36:42.090 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:36:43.469 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1389.4147ms
2025-09-10 01:36:45.492 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:36:45.508 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:36:46.905 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1413.2709ms
2025-09-10 01:36:48.929 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:36:48.964 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:36:50.360 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1430.3735ms
2025-09-10 01:36:52.372 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:36:52.382 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:36:53.770 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1397.6799ms
2025-09-10 01:36:55.796 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:36:55.813 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:36:57.192 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1395.9926ms
2025-09-10 01:36:59.213 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:36:59.240 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:37:00.642 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1429.1451ms
2025-09-10 01:37:02.656 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:37:02.664 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:37:04.064 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1407.9225ms
2025-09-10 01:37:06.077 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:37:06.094 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:37:07.489 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.5835ms
2025-09-10 01:37:09.511 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:37:09.522 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:37:10.921 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.605ms
2025-09-10 01:37:12.938 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:37:12.947 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:37:14.333 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1395.3079ms
2025-09-10 01:37:16.358 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:37:16.375 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:37:17.768 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.8936ms
2025-09-10 01:37:19.792 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:37:19.996 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:37:21.381 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1589.4353ms
2025-09-10 01:37:23.397 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:37:23.420 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:37:24.830 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1432.7144ms
2025-09-10 01:37:26.853 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:37:26.874 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:37:28.278 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1425.1276ms
2025-09-10 01:37:30.326 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:37:30.338 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:37:30.998 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Enums/PaymentMethods - null null
2025-09-10 01:37:31.018 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:37:31.166 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:37:31.187 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.EnumsController.GetPaymentMethod (E-Commerce)'
2025-09-10 01:37:31.190 +03:00 [INF] Route matched with {action = "GetPaymentMethod", controller = "Enums"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.EnumDtos.EnumDto]]] GetPaymentMethod() on controller E_Commerce.Controllers.EnumsController (E-Commerce).
2025-09-10 01:37:31.238 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.EnumDtos.EnumDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 01:37:31.258 +03:00 [INF] Executed action E_Commerce.Controllers.EnumsController.GetPaymentMethod (E-Commerce) in 55.4629ms
2025-09-10 01:37:31.399 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.EnumsController.GetPaymentMethod (E-Commerce)'
2025-09-10 01:37:31.405 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Enums/PaymentMethods - 200 221 application/json; charset=utf-8 406.5212ms
2025-09-10 01:37:31.751 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1424.4942ms
2025-09-10 01:37:33.766 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:37:33.775 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:37:35.151 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1385.1721ms
2025-09-10 01:37:37.175 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:37:37.180 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:37:38.585 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1410.4028ms
2025-09-10 01:37:40.597 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:37:40.617 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:37:42.016 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1418.7945ms
2025-09-10 01:37:44.040 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:37:44.050 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:37:45.427 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1386.8409ms
2025-09-10 01:37:47.451 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:37:47.463 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:37:48.860 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.018ms
2025-09-10 01:37:50.789 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Payment - application/json 115
2025-09-10 01:37:50.803 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:37:50.869 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:37:50.881 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:37:50.953 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:37:50.958 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.PaymentController.CreatePayment (E-Commerce)'
2025-09-10 01:37:50.966 +03:00 [INF] Route matched with {action = "CreatePayment", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto]]] CreatePayment(CreatePaymentRequest) on controller E_Commerce.Controllers.PaymentController (E-Commerce).
2025-09-10 01:37:50.999 +03:00 [INF] Executing CreatePayment for order: ORD-20250909223415-9337
2025-09-10 01:37:51.012 +03:00 [INF] Starting CreatePaymentMethod for order ORD-20250909223415-9337 by user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:37:51.247 +03:00 [INF] Getting order by number: ORD-20250909223415-9337
2025-09-10 01:37:51.331 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`OrderNumber` = @__orderNumber_0
LIMIT 1
2025-09-10 01:37:51.351 +03:00 [INF] Execute GetAll for entity Payment
2025-09-10 01:37:51.440 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__order_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Amount`, `p`.`CreatedAt`, `p`.`CustomerId`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`OrderId`, `p`.`PaymentDate`, `p`.`PaymentMethodId`, `p`.`PaymentProviderId`, `p`.`ProviderOrderId`, `p`.`Status`, `p`.`TransactionId`
FROM `Payments` AS `p`
WHERE (`p`.`OrderId` = @__order_Id_0) AND (`p`.`Status` = 1)
LIMIT 1
2025-09-10 01:37:51.462 +03:00 [INF] Getting payment method ID for enum "Visa"
2025-09-10 01:37:51.464 +03:00 [INF] Execute GetAll for entity PaymentMethod
2025-09-10 01:37:51.548 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__methodEnum_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`
FROM `PaymentMethods` AS `p`
WHERE ((`p`.`Method` = @__methodEnum_0) AND `p`.`IsActive`) AND `p`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 01:37:51.560 +03:00 [INF] Found payment method ID 1 for enum "Visa"
2025-09-10 01:37:51.572 +03:00 [INF] Executing GetByIdAsync for entity PaymentMethod with ID: 1
2025-09-10 01:37:51.657 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IntegrationId`, `p`.`IsActive`, `p`.`Method`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`PaymentProviderId`
FROM `PaymentMethods` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 01:37:51.741 +03:00 [INF] Execute GetAll for entity PaymentProvider
2025-09-10 01:37:51.827 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`PublicKey`
FROM `PaymentProviders` AS `p`
WHERE `p`.`Provider` = 1
LIMIT 1
2025-09-10 01:37:51.841 +03:00 [INF] Executing GetTokenAsync
2025-09-10 01:37:51.857 +03:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-09-10 01:37:51.867 +03:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-09-10 01:37:52.279 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1410.0796ms
2025-09-10 01:37:52.590 +03:00 [INF] Received HTTP response headers after 715.0306ms - 201
2025-09-10 01:37:52.596 +03:00 [INF] End processing HTTP request after 740.4609ms - 201
2025-09-10 01:37:52.604 +03:00 [INF] Successfully retrieved PayMob token
2025-09-10 01:37:52.686 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 01:37:52.701 +03:00 [INF] Getting address by ID: 1
2025-09-10 01:37:52.798 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__addressId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AdditionalNotes`, `c`.`AddressType`, `c`.`City`, `c`.`Country`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`IsDefault`, `c`.`ModifiedAt`, `c`.`PhoneNumber`, `c`.`PostalCode`, `c`.`State`, `c`.`StreetAddress`, `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Discriminator`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `t`.`Age`, `t`.`CreateAt`, `t`.`DeletedAt`, `t`.`Gender`, `t`.`ImageId`, `t`.`ImageId1`, `t`.`LastVisit`, `t`.`Name`
FROM `CustomerAddresses` AS `c`
INNER JOIN (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Discriminator` = 'Customer'
) AS `t` ON `c`.`CustomerId` = `t`.`Id`
WHERE (`c`.`Id` = @__addressId_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 01:37:52.824 +03:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/ecommerce/orders
2025-09-10 01:37:52.830 +03:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/ecommerce/orders
2025-09-10 01:37:53.042 +03:00 [INF] Received HTTP response headers after 206.1898ms - 201
2025-09-10 01:37:53.047 +03:00 [INF] End processing HTTP request after 223.0994ms - 201
2025-09-10 01:37:53.058 +03:00 [INF] Successfully created PayMob order: 383651205 for local order: ORD-20250909223415-9337
2025-09-10 01:37:53.063 +03:00 [INF] Execute GetAll for entity PaymentMethod
2025-09-10 01:37:53.144 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__dto_PaymentMethod_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`IntegrationId`
FROM `PaymentMethods` AS `p`
INNER JOIN `PaymentProviders` AS `p0` ON `p`.`PaymentProviderId` = `p0`.`Id`
WHERE ((`p`.`Method` = @__dto_PaymentMethod_0) AND `p`.`IsActive`) AND (`p0`.`Provider` = 1)
LIMIT 1
2025-09-10 01:37:53.152 +03:00 [INF] Using integration ID: 5221967 for payment method: "Visa"
2025-09-10 01:37:53.174 +03:00 [INF] Starting GeneratePaymentKeyAsync for Order ID: 383651205, Amount: 60000
2025-09-10 01:37:53.202 +03:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/acceptance/payment_keys
2025-09-10 01:37:53.207 +03:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/acceptance/payment_keys
2025-09-10 01:37:53.423 +03:00 [INF] Received HTTP response headers after 209.5145ms - 201
2025-09-10 01:37:53.439 +03:00 [INF] End processing HTTP request after 237.1063ms - 201
2025-09-10 01:37:53.453 +03:00 [INF] Request sent to Paymob payment_keys endpoint
2025-09-10 01:37:53.457 +03:00 [INF] Received response from Paymob payment_keys endpoint
2025-09-10 01:37:53.485 +03:00 [INF] Payment key generated successfully for Order ID: 383651205
2025-09-10 01:37:53.488 +03:00 [INF] Successfully generated payment key for order: ORD-20250909223415-9337
2025-09-10 01:37:53.497 +03:00 [INF] Execute GetAll for entity PaymentProvider
2025-09-10 01:37:53.577 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__paymentProvider_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`IframeId`
FROM `PaymentProviders` AS `p`
WHERE `p`.`Provider` = @__paymentProvider_0
LIMIT 1
2025-09-10 01:37:53.591 +03:00 [INF] Executing CreateAsync for entity Payment
2025-09-10 01:37:53.661 +03:00 [INF] Payment added successfully (pending save)
2025-09-10 01:37:53.665 +03:00 [INF] Execute AddUserOpreationAsync
2025-09-10 01:37:53.667 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-09-10 01:37:53.670 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-09-10 01:37:53.861 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?' (Size = 255), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int64), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime), @p17='?' (DbType = Int32), @p18='?' (DbType = DateTime), @p19='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Payments` (`Amount`, `CreatedAt`, `CustomerId`, `DeletedAt`, `ModifiedAt`, `OrderId`, `PaymentDate`, `PaymentMethodId`, `PaymentProviderId`, `ProviderOrderId`, `Status`, `TransactionId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
SELECT `Id`
FROM `Payments`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `userOperationsLogs` (`CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`, `UserId`)
VALUES (@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
SELECT `Id`
FROM `userOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 01:37:54.020 +03:00 [INF] Payment created successfully with ID 3
2025-09-10 01:37:54.297 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:37:54.320 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:37:54.921 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 01:37:54.935 +03:00 [INF] Executed action E_Commerce.Controllers.PaymentController.CreatePayment (E-Commerce) in 3964.6139ms
2025-09-10 01:37:54.938 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.PaymentController.CreatePayment (E-Commerce)'
2025-09-10 01:37:54.940 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Payment - 200 1397 application/json; charset=utf-8 4151.1658ms
2025-09-10 01:37:55.715 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1417.3226ms
2025-09-10 01:37:57.725 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:37:57.736 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:37:59.266 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1540.6531ms
2025-09-10 01:38:02.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:38:02.171 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:38:03.565 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1407.8701ms
2025-09-10 01:38:06.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:38:06.179 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:38:07.583 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1431.5445ms
2025-09-10 01:38:10.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:38:10.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:38:11.554 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1397.7775ms
2025-09-10 01:38:14.148 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:38:14.158 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:38:15.623 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1475.2283ms
2025-09-10 01:38:18.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:38:18.177 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:38:19.581 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1429.817ms
2025-09-10 01:38:22.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:38:22.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:38:23.566 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1415.8325ms
2025-09-10 01:38:26.148 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:38:26.157 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:38:27.553 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1404.614ms
2025-09-10 01:38:30.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:38:30.168 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:38:31.553 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1393.6496ms
2025-09-10 01:38:34.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:38:34.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:38:35.557 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1402.5004ms
2025-09-10 01:38:38.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:38:38.155 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:38:39.554 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.0327ms
2025-09-10 01:38:42.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:38:42.179 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:38:43.580 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1419.3891ms
2025-09-10 01:38:46.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:38:46.171 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:38:47.568 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1410.2036ms
2025-09-10 01:38:50.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:38:50.187 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:38:51.585 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1426.7769ms
2025-09-10 01:38:54.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:38:54.175 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:38:55.557 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1400.0547ms
2025-09-10 01:38:58.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:38:58.168 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:38:59.544 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1384.8658ms
2025-09-10 01:39:02.167 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:39:02.172 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:39:03.549 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1382.408ms
2025-09-10 01:39:06.168 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:39:06.177 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:39:07.551 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1382.7041ms
2025-09-10 01:39:10.146 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:39:10.156 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:39:11.555 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.1703ms
2025-09-10 01:39:14.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:39:14.182 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:39:15.586 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1429.8562ms
2025-09-10 01:39:18.163 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:39:18.196 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:39:19.575 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1412.4128ms
2025-09-10 01:39:22.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:39:22.158 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:39:23.605 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1455.4909ms
2025-09-10 01:39:26.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:39:26.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:39:27.567 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.1779ms
2025-09-10 01:39:30.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:39:30.172 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:39:31.569 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1413.0655ms
2025-09-10 01:39:34.203 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:39:34.213 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:39:35.657 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1454.6164ms
2025-09-10 01:39:38.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:39:38.184 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:39:39.567 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1412.4288ms
2025-09-10 01:39:42.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:39:42.182 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:39:43.586 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1429.1813ms
2025-09-10 01:39:46.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:39:46.159 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:39:47.554 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.0554ms
2025-09-10 01:39:50.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:39:50.163 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:39:51.564 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.1408ms
2025-09-10 01:39:54.161 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:39:54.173 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:39:55.564 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1402.9611ms
2025-09-10 01:39:58.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:39:58.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:39:59.543 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1387.2303ms
2025-09-10 01:40:02.152 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:40:02.161 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:40:03.527 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1375.4595ms
2025-09-10 01:40:05.537 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:40:05.546 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:40:06.922 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1385.2825ms
2025-09-10 01:40:07.749 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/details/2284 - null null
2025-09-10 01:40:08.942 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:40:08.952 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:40:09.633 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/details/2284 - 200 null text/html 1884ms
2025-09-10 01:40:09.665 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:40:09.676 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:40:09.684 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 18.983ms
2025-09-10 01:40:09.734 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 57.334ms
2025-09-10 01:40:10.327 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1385.3214ms
2025-09-10 01:40:11.722 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:40:11.731 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:40:13.109 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1387.2211ms
2025-09-10 01:40:15.130 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:40:15.168 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:40:16.545 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1415.0747ms
2025-09-10 01:40:18.556 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:40:18.588 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:40:19.251 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 01:40:19.955 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1399.0229ms
2025-09-10 01:40:21.506 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2255.4988ms
2025-09-10 01:40:21.590 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:40:21.533 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:40:21.606 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 16.0526ms
2025-09-10 01:40:21.642 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 108.9436ms
2025-09-10 01:40:23.629 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:40:23.651 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:40:25.034 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.016ms
2025-09-10 01:40:27.043 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:40:27.055 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:40:28.454 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.2647ms
2025-09-10 01:40:28.620 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - application/x-www-form-urlencoded; charset=UTF-8 15
2025-09-10 01:40:28.629 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:40:29.719 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - 204 null null 1099.7588ms
2025-09-10 01:40:29.758 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 01:40:30.478 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:40:30.490 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:40:30.974 +03:00 [INF] Starting CheckAndUpdatePaymentStatusAsync for payment 3
2025-09-10 01:40:31.202 +03:00 [INF] Executing GetByIdAsync for entity Payment with ID: 3
2025-09-10 01:40:31.287 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Amount`, `p`.`CreatedAt`, `p`.`CustomerId`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`OrderId`, `p`.`PaymentDate`, `p`.`PaymentMethodId`, `p`.`PaymentProviderId`, `p`.`ProviderOrderId`, `p`.`Status`, `p`.`TransactionId`
FROM `Payments` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 01:40:31.310 +03:00 [INF] Execute GetAll for entity PaymentProvider
2025-09-10 01:40:31.388 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`PublicKey`
FROM `PaymentProviders` AS `p`
WHERE `p`.`Provider` = 1
LIMIT 1
2025-09-10 01:40:31.396 +03:00 [INF] Executing GetTokenAsync
2025-09-10 01:40:31.409 +03:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-09-10 01:40:31.412 +03:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-09-10 01:40:31.886 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1408.1297ms
2025-09-10 01:40:31.893 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2134.3676ms
2025-09-10 01:40:31.921 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:40:31.928 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 6.8138ms
2025-09-10 01:40:31.918 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:40:31.975 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 57.7484ms
2025-09-10 01:40:32.006 +03:00 [INF] Received HTTP response headers after 588.3528ms - 201
2025-09-10 01:40:32.010 +03:00 [INF] End processing HTTP request after 600.9016ms - 201
2025-09-10 01:40:32.019 +03:00 [INF] Successfully retrieved PayMob token
2025-09-10 01:40:32.022 +03:00 [INF] Start processing HTTP request GET https://accept.paymob.com/api/ecommerce/orders/383651205
2025-09-10 01:40:32.025 +03:00 [INF] Sending HTTP request GET https://accept.paymob.com/api/ecommerce/orders/383651205
2025-09-10 01:40:32.238 +03:00 [INF] Received HTTP response headers after 209.1234ms - 200
2025-09-10 01:40:32.249 +03:00 [INF] End processing HTTP request after 226.6099ms - 200
2025-09-10 01:40:32.293 +03:00 [ERR] Error in CheckAndUpdatePaymentStatusAsync for payment 3
System.InvalidOperationException: The connection is already in a transaction and cannot participate in another transaction.
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.EnsureNoTransactions()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   at UnitOfWork.BeginTransactionAsync()
   at E_Commerce.Services.Order.OrderCommandService.UpdateOrderAfterPaid(Int32 orderId, OrderStatus orderStatus)
   at E_Commerce.Services.PaymentServices.PaymentServices.CheckAndUpdatePaymentStatusAsync(Int32 paymentId)
2025-09-10 01:40:33.950 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:40:33.961 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:40:35.211 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1260.4665ms
2025-09-10 01:40:37.232 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:40:37.240 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:40:38.632 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1399.4019ms
2025-09-10 01:40:40.680 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:40:40.690 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:40:42.090 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1410.1854ms
2025-09-10 01:40:44.115 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:40:44.125 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:40:45.518 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1402.5632ms
2025-09-10 01:40:47.532 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:40:47.541 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:40:48.213 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order/ORD-20250909223415-9337 - null null
2025-09-10 01:40:48.220 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:40:48.370 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:40:48.379 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.GetOrder (E-Commerce)'
2025-09-10 01:40:48.388 +03:00 [INF] Route matched with {action = "GetOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderDto]]] GetOrder(Int32) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 01:40:48.411 +03:00 [INF] Executing GetOrder for ID: 0
2025-09-10 01:40:48.424 +03:00 [INF] Getting order by ID: 0 for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, IsAdmin: false
2025-09-10 01:40:48.437 +03:00 [INF] Getting cache for key: order:id:0_user:ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin:False
2025-09-10 01:40:48.651 +03:00 [WRN] Cache miss for key: order:id:0_user:ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin:False
2025-09-10 01:40:48.660 +03:00 [INF] Checking if order 0 exists for user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:40:48.814 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__orderid_0='?' (DbType = Int32), @__userid_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE ((`o`.`Id` = @__orderid_0) AND (`o`.`CustomerId` = @__userid_1)) AND `o`.`DeletedAt` IS NULL)
2025-09-10 01:40:48.823 +03:00 [WRN] Order 0 not found or not authorized for user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 01:40:48.826 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 01:40:48.830 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.GetOrder (E-Commerce) in 436.3767ms
2025-09-10 01:40:48.841 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.GetOrder (E-Commerce)'
2025-09-10 01:40:48.845 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order/ORD-20250909223415-9337 - 404 226 application/json; charset=utf-8 631.8359ms
2025-09-10 01:40:48.940 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1407.9588ms
2025-09-10 01:40:50.967 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:40:50.976 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:40:52.353 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1386.3453ms
2025-09-10 01:40:54.373 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:40:54.385 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:40:55.767 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1393.5127ms
2025-09-10 01:40:57.775 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:40:57.791 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:40:59.183 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1408.0264ms
2025-09-10 01:41:01.196 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:41:01.210 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:41:02.605 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1408.7978ms
2025-09-10 01:41:04.645 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:41:04.697 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:41:06.074 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1428.3097ms
2025-09-10 01:41:08.090 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:41:08.096 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:41:09.114 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants/1 - null null
2025-09-10 01:41:09.125 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:41:09.274 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:41:09.292 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.GetVariantById (E-Commerce)'
2025-09-10 01:41:09.295 +03:00 [INF] Route matched with {action = "GetVariantById", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]] GetVariantById(Int32, Int32) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-09-10 01:41:09.304 +03:00 [INF] Getting variant by id: 1
2025-09-10 01:41:09.306 +03:00 [INF] Getting cache for key: variant:1
2025-09-10 01:41:09.475 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1384.3186ms
2025-09-10 01:41:09.521 +03:00 [INF] Cache hit for key: variant:1
2025-09-10 01:41:09.524 +03:00 [INF] Retrieved variant 1 from cache
2025-09-10 01:41:09.526 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 01:41:09.529 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.GetVariantById (E-Commerce) in 225.7444ms
2025-09-10 01:41:09.534 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.GetVariantById (E-Commerce)'
2025-09-10 01:41:09.538 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants/1 - 200 306 application/json; charset=utf-8 423.9194ms
2025-09-10 01:41:11.492 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:41:11.504 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:41:12.898 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1406.7735ms
2025-09-10 01:41:14.913 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:41:14.923 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:41:16.298 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1385.4117ms
2025-09-10 01:41:18.310 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:41:18.322 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:41:19.698 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.2905ms
2025-09-10 01:41:21.718 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:41:21.726 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:41:23.104 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1385.3677ms
2025-09-10 01:41:25.118 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:41:25.124 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:41:26.507 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.8494ms
2025-09-10 01:41:28.523 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:41:28.597 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:41:29.193 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - null null
2025-09-10 01:41:29.204 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:41:29.351 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:41:29.358 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.GetOrders (E-Commerce)'
2025-09-10 01:41:29.360 +03:00 [INF] Route matched with {action = "GetOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.OrderDtos.OrderListDto]]]] GetOrders(System.String, System.Nullable`1[System.Boolean], Int32, Int32, System.Nullable`1[E_Commerce.Enums.OrderStatus]) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 01:41:29.369 +03:00 [INF] Executing GetOrders: role: Admin, userId: , deleted: , page: 1, size: 10, status: 
2025-09-10 01:41:29.372 +03:00 [INF] Filtering orders - UserId: null, Deleted: null, Page: 1, PageSize: 10, Status: null
2025-09-10 01:41:29.377 +03:00 [INF] Getting cache for key: order:filter:user:all_deleted:all_page:1_size:10_status:all
2025-09-10 01:41:29.592 +03:00 [INF] Cache hit for key: order:filter:user:all_deleted:all_page:1_size:10_status:all
2025-09-10 01:41:29.612 +03:00 [INF] Cache hit for filtered orders
2025-09-10 01:41:29.621 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.OrderDtos.OrderListDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 01:41:29.624 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.GetOrders (E-Commerce) in 259.3784ms
2025-09-10 01:41:29.627 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.GetOrders (E-Commerce)'
2025-09-10 01:41:29.631 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - 200 1729 application/json; charset=utf-8 437.9593ms
2025-09-10 01:41:30.014 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1490.8783ms
2025-09-10 01:41:32.038 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:41:32.051 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:41:33.435 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1396.5285ms
2025-09-10 01:41:35.447 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:41:35.455 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:41:36.836 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.7629ms
2025-09-10 01:41:38.854 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:41:38.877 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:41:40.260 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.3847ms
2025-09-10 01:41:42.279 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:41:42.295 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:41:43.681 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1402.5732ms
2025-09-10 01:41:45.706 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:41:45.724 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:41:47.112 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1406.4473ms
2025-09-10 01:41:49.134 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:41:49.147 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:41:50.536 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1401.3578ms
2025-09-10 01:41:52.566 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:41:52.584 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:41:54.053 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1486.2907ms
2025-09-10 01:41:56.070 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:41:56.096 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:41:57.503 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1432.6707ms
2025-09-10 01:41:59.522 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:41:59.544 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:42:00.927 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.1836ms
2025-09-10 01:42:02.953 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:42:02.969 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:42:04.376 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1422.6371ms
2025-09-10 01:42:06.395 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:42:06.404 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:42:07.785 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1390.5546ms
2025-09-10 01:42:09.814 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:42:09.843 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:42:11.234 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1420.8153ms
2025-09-10 01:42:13.252 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:42:13.261 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:42:14.646 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1393.7818ms
2025-09-10 01:42:16.667 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:42:16.687 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:42:18.084 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1416.4976ms
2025-09-10 01:42:20.104 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:42:20.128 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:42:21.619 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1515.1902ms
2025-09-10 01:42:23.645 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:42:23.673 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:42:25.093 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1447.4697ms
2025-09-10 01:42:27.109 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:42:27.121 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:42:28.515 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1406.3191ms
2025-09-10 01:42:30.526 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:42:30.536 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:42:31.918 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1391.8264ms
2025-09-10 01:42:33.932 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:42:33.957 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:42:35.364 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1432.3149ms
2025-09-10 01:42:37.394 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:42:37.426 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:42:38.915 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1520.6208ms
2025-09-10 01:42:40.942 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:42:40.975 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:42:42.475 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1533.6405ms
2025-09-10 01:42:44.501 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:42:44.523 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:42:45.955 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1453.6249ms
2025-09-10 01:42:47.982 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:42:48.010 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:42:49.473 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1491.4474ms
2025-09-10 01:42:51.503 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:42:51.522 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:42:52.932 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1429.0476ms
2025-09-10 01:42:54.960 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:42:54.985 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:42:56.414 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1453.6546ms
2025-09-10 01:42:58.441 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:42:58.457 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:42:59.864 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1423.0398ms
2025-09-10 01:43:01.892 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:43:01.918 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:43:03.542 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1650.4297ms
2025-09-10 01:43:05.563 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:43:05.584 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:43:06.994 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1430.7878ms
2025-09-10 01:43:09.015 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:43:09.046 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:43:10.613 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1598.5594ms
2025-09-10 01:43:12.640 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:43:12.657 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:43:14.060 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1419.8708ms
2025-09-10 01:43:16.077 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:43:16.104 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:43:17.509 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1431.7067ms
2025-09-10 01:43:19.527 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:43:19.536 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:43:20.924 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1397.7785ms
2025-09-10 01:43:22.940 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:43:22.970 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:43:24.371 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1430.6274ms
2025-09-10 01:43:26.388 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:43:26.405 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:43:27.857 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1469.6413ms
2025-09-10 01:43:29.872 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:43:29.907 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:43:31.290 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1418.0214ms
2025-09-10 01:43:33.314 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:43:33.338 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:43:34.712 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1398.2891ms
2025-09-10 01:43:36.737 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:43:36.772 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:43:38.156 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1419.3946ms
2025-09-10 01:43:40.183 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:43:40.204 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:43:41.593 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.4415ms
2025-09-10 01:43:43.621 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:43:43.645 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:43:45.030 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.168ms
2025-09-10 01:43:47.062 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:43:47.077 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:43:48.482 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1420.9503ms
2025-09-10 01:43:50.498 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:43:50.510 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:43:51.901 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1402.8076ms
2025-09-10 01:43:53.925 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:43:53.951 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:43:55.361 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1436.8114ms
2025-09-10 01:43:57.384 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:43:57.395 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:43:58.776 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1391.7609ms
2025-09-10 01:44:00.796 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:44:00.822 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:44:02.220 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1423.6738ms
2025-09-10 01:44:04.234 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:44:04.250 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:44:05.648 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1414.5408ms
2025-09-10 01:44:07.670 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:44:07.699 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:44:09.102 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1431.8984ms
2025-09-10 01:44:11.127 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:44:11.135 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:44:12.531 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1403.7937ms
2025-09-10 01:44:14.544 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:44:14.560 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:44:15.978 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1434.7971ms
2025-09-10 01:44:17.995 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:44:18.005 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:44:19.432 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1437.0965ms
2025-09-10 01:44:21.455 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:44:21.478 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:44:22.958 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1502.8775ms
2025-09-10 01:44:24.982 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:44:24.992 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:44:26.400 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1418.4152ms
2025-09-10 01:44:28.426 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:44:28.443 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:44:29.852 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1427.065ms
2025-09-10 01:44:31.873 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:44:31.886 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:44:33.292 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1419.7113ms
2025-09-10 01:44:35.312 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:44:35.335 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:44:36.720 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1407.9271ms
2025-09-10 01:44:38.747 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:44:38.763 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:44:40.162 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1414.8928ms
2025-09-10 01:44:42.168 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:44:42.176 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:44:43.579 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1410.3718ms
2025-09-10 01:44:45.591 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:44:45.608 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:44:46.992 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1401.0618ms
2025-09-10 01:44:49.007 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:44:49.017 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:44:50.463 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1455.2729ms
2025-09-10 01:44:52.486 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:44:52.514 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:44:53.903 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1416.5446ms
2025-09-10 01:44:55.918 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:44:55.944 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:44:57.338 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1420.5689ms
2025-09-10 01:44:59.360 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:44:59.386 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:45:00.800 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1439.2006ms
2025-09-10 01:45:02.832 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:45:02.865 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:45:04.275 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1442.146ms
2025-09-10 01:45:06.300 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:45:06.318 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:45:07.724 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1424.4501ms
2025-09-10 01:45:09.758 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:45:09.781 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:45:11.188 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1429.5651ms
2025-09-10 01:45:13.215 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:45:13.238 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:45:14.770 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1554.2166ms
2025-09-10 01:45:16.790 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:45:16.820 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:45:18.225 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1434.0617ms
2025-09-10 01:45:20.242 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:45:20.251 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:45:21.944 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1702.6004ms
2025-09-10 01:45:23.977 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:45:23.992 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:45:25.399 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1421.8564ms
2025-09-10 01:45:27.417 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:45:27.450 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:45:28.992 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1574.68ms
2025-09-10 01:45:31.015 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:45:31.032 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:45:32.435 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1420.5909ms
2025-09-10 01:45:34.451 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:45:34.467 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:45:35.863 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1412.1923ms
2025-09-10 01:45:37.884 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:45:37.907 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:45:39.293 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.0891ms
2025-09-10 01:45:41.324 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:45:41.353 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:45:42.738 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1413.3492ms
2025-09-10 01:45:44.761 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:45:44.779 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:45:46.245 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1484.5319ms
2025-09-10 01:45:48.265 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:45:48.274 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:45:49.655 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1389.2451ms
2025-09-10 01:45:51.677 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:45:51.701 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:45:53.307 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1630.1141ms
2025-09-10 01:45:55.320 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:45:55.329 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:45:56.750 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1430.2114ms
2025-09-10 01:45:58.778 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:45:58.803 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:46:00.320 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1542.1174ms
2025-09-10 01:46:02.339 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:46:02.346 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:46:03.774 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1435.5485ms
2025-09-10 01:46:05.791 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:46:05.822 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:46:07.227 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1436.3122ms
2025-09-10 01:46:09.251 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:46:09.269 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:46:10.672 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1420.2853ms
2025-09-10 01:46:11.532 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - application/x-www-form-urlencoded; charset=UTF-8 15
2025-09-10 01:46:11.544 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:46:12.641 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - 204 null null 1109.4358ms
2025-09-10 01:46:12.666 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 01:46:12.686 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:46:12.710 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:46:14.106 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1419.5137ms
2025-09-10 01:46:14.137 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 16
2025-09-10 01:46:14.226 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-09-10 01:46:14.379 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Orders` SET `Status` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 01:46:14.827 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2160.6141ms
2025-09-10 01:46:14.878 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:46:14.894 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 16.038ms
2025-09-10 01:46:14.879 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:46:14.935 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 55.7477ms
2025-09-10 01:46:16.332 +03:00 [INF] Order 16 auto-expired and restock scheduled
2025-09-10 01:46:16.922 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:46:16.932 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:46:17.767 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 16
2025-09-10 01:46:17.917 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-09-10 01:46:17.960 +03:00 [INF] Execute GetAll for entity OrderItem
2025-09-10 01:46:18.112 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`ProductVariantId`, `o`.`Quantity`
FROM `OrderItem` AS `o`
WHERE `o`.`OrderId` = @__orderId_0
2025-09-10 01:46:18.139 +03:00 [INF] Adding quantity for variant: 1
2025-09-10 01:46:18.179 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1257.1161ms
2025-09-10 01:46:18.361 +03:00 [INF] Executing GetByIdAsync for entity ProductVariant with ID: 1
2025-09-10 01:46:18.442 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 01:46:18.607 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `ProductVariants` SET `Quantity` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 01:46:19.632 +03:00 [INF] Quantity for variant 1 restored to 19
2025-09-10 01:46:19.782 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Orders` SET `RestockedAt` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 01:46:20.186 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:46:20.199 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:46:20.730 +03:00 [INF] Restocked inventory for order 16
2025-09-10 01:46:21.297 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 01:46:21.316 +03:00 [INF] Removing cache by tags: [order]
2025-09-10 01:46:21.520 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-09-10 01:46:21.958 +03:00 [INF] Removed 1 cache entries for tags: [order]
2025-09-10 01:46:21.986 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1799.4358ms
2025-09-10 01:46:23.717 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2419.97ms
2025-09-10 01:46:23.745 +03:00 [INF] Removing cache by tag: CollectionWithProduct
2025-09-10 01:46:23.750 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:46:23.772 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:46:23.794 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.402ms
2025-09-10 01:46:23.809 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 37.3315ms
2025-09-10 01:46:23.987 +03:00 [WRN] No cache entries found for tag: CollectionWithProduct
2025-09-10 01:46:24.308 +03:00 [INF] Removing cache by tags: [order]
2025-09-10 01:46:24.539 +03:00 [WRN] No cache entries found for tags: [order]
2025-09-10 01:46:24.602 +03:00 [INF] Removing cache by tag: subcategorywithdata
2025-09-10 01:46:24.827 +03:00 [WRN] No cache entries found for tag: subcategorywithdata
2025-09-10 01:46:25.787 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 01:46:25.837 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:46:25.854 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:46:26.220 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 01:46:27.310 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1472.9623ms
2025-09-10 01:46:29.334 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:46:29.353 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:46:29.493 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - application/x-www-form-urlencoded; charset=UTF-8 15
2025-09-10 01:46:29.503 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:46:30.395 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/processing - null null
2025-09-10 01:46:30.585 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1251.0055ms
2025-09-10 01:46:30.597 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - 204 null null 1103.7025ms
2025-09-10 01:46:30.638 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 01:46:31.827 +03:00 [INF] Starting CheckAndUpdatePaymentStatusAsync for payment 3
2025-09-10 01:46:32.051 +03:00 [INF] Executing GetByIdAsync for entity Payment with ID: 3
2025-09-10 01:46:32.128 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Amount`, `p`.`CreatedAt`, `p`.`CustomerId`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`OrderId`, `p`.`PaymentDate`, `p`.`PaymentMethodId`, `p`.`PaymentProviderId`, `p`.`ProviderOrderId`, `p`.`Status`, `p`.`TransactionId`
FROM `Payments` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 01:46:32.140 +03:00 [INF] Execute GetAll for entity PaymentProvider
2025-09-10 01:46:32.217 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`PublicKey`
FROM `PaymentProviders` AS `p`
WHERE `p`.`Provider` = 1
LIMIT 1
2025-09-10 01:46:32.224 +03:00 [INF] Executing GetTokenAsync
2025-09-10 01:46:32.227 +03:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-09-10 01:46:32.230 +03:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-09-10 01:46:32.595 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:46:32.605 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:46:32.820 +03:00 [INF] Received HTTP response headers after 586.4265ms - 201
2025-09-10 01:46:32.828 +03:00 [INF] End processing HTTP request after 600.8916ms - 201
2025-09-10 01:46:32.833 +03:00 [INF] Successfully retrieved PayMob token
2025-09-10 01:46:32.835 +03:00 [INF] Start processing HTTP request GET https://accept.paymob.com/api/ecommerce/orders/383651205
2025-09-10 01:46:32.837 +03:00 [INF] Sending HTTP request GET https://accept.paymob.com/api/ecommerce/orders/383651205
2025-09-10 01:46:32.891 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2252.647ms
2025-09-10 01:46:32.915 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:46:32.917 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:46:32.934 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 18.2311ms
2025-09-10 01:46:32.953 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/processing - 200 null text/html 2558.5077ms
2025-09-10 01:46:32.961 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.3065ms
2025-09-10 01:46:33.049 +03:00 [INF] Received HTTP response headers after 210.0969ms - 200
2025-09-10 01:46:33.052 +03:00 [INF] End processing HTTP request after 217.3458ms - 200
2025-09-10 01:46:33.055 +03:00 [ERR] Error in CheckAndUpdatePaymentStatusAsync for payment 3
System.InvalidOperationException: The connection is already in a transaction and cannot participate in another transaction.
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.EnsureNoTransactions()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   at UnitOfWork.BeginTransactionAsync()
   at E_Commerce.Services.Order.OrderCommandService.UpdateOrderAfterPaid(Int32 orderId, OrderStatus orderStatus)
   at E_Commerce.Services.PaymentServices.PaymentServices.CheckAndUpdatePaymentStatusAsync(Int32 paymentId)
2025-09-10 01:46:33.839 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1243.9861ms
2025-09-10 01:46:33.959 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/processing - null null
2025-09-10 01:46:34.956 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:46:34.966 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:46:36.213 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1257.335ms
2025-09-10 01:46:36.506 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/processing - 200 null text/html 2546.7973ms
2025-09-10 01:46:36.529 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:46:36.538 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:46:36.566 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 36.4585ms
2025-09-10 01:46:36.583 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 45.1161ms
2025-09-10 01:46:37.260 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - null null
2025-09-10 01:46:38.593 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:46:38.622 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:46:39.684 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - 200 null text/html 2423.612ms
2025-09-10 01:46:39.715 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:46:39.715 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:46:39.721 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 5.6529ms
2025-09-10 01:46:39.783 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 67.9864ms
2025-09-10 01:46:40.095 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1502.0804ms
2025-09-10 01:46:41.766 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:46:41.775 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:46:43.154 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.1402ms
2025-09-10 01:46:45.168 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:46:45.177 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:46:46.580 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.7127ms
2025-09-10 01:46:48.589 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:46:48.597 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:46:50.102 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1513.0496ms
2025-09-10 01:46:52.123 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:46:52.129 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:46:53.512 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.762ms
2025-09-10 01:46:55.527 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:46:55.551 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:46:56.933 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.8368ms
2025-09-10 01:46:57.525 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - null null
2025-09-10 01:46:57.538 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:46:57.698 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:46:57.713 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.GetOrders (E-Commerce)'
2025-09-10 01:46:57.716 +03:00 [INF] Route matched with {action = "GetOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.OrderDtos.OrderListDto]]]] GetOrders(System.String, System.Nullable`1[System.Boolean], Int32, Int32, System.Nullable`1[E_Commerce.Enums.OrderStatus]) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 01:46:57.727 +03:00 [INF] Executing GetOrders: role: Admin, userId: , deleted: , page: 1, size: 10, status: 
2025-09-10 01:46:57.752 +03:00 [INF] Filtering orders - UserId: null, Deleted: null, Page: 1, PageSize: 10, Status: null
2025-09-10 01:46:57.767 +03:00 [INF] Getting cache for key: order:filter:user:all_deleted:all_page:1_size:10_status:all
2025-09-10 01:46:57.982 +03:00 [WRN] Cache miss for key: order:filter:user:all_deleted:all_page:1_size:10_status:all
2025-09-10 01:46:57.984 +03:00 [INF] Execute GetAll for entity Order
2025-09-10 01:46:58.134 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`OrderNumber`, `t0`.`Name`, `t`.`Status`, `t`.`Total`, `t`.`CreatedAt`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`CustomerId`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Total`
    FROM `Orders` AS `o`
    ORDER BY `o`.`CreatedAt` DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
INNER JOIN (
    SELECT `a`.`Id`, `a`.`Name`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Discriminator` = 'Customer'
) AS `t0` ON `t`.`CustomerId` = `t0`.`Id`
ORDER BY `t`.`CreatedAt` DESC
2025-09-10 01:46:58.961 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:46:58.970 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:46:59.028 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.OrderDtos.OrderListDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 01:46:59.034 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.GetOrders (E-Commerce) in 1310.1354ms
2025-09-10 01:46:59.040 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.GetOrders (E-Commerce)'
2025-09-10 01:46:59.047 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - 200 1731 application/json; charset=utf-8 1521.6378ms
2025-09-10 01:47:00.343 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1381.571ms
2025-09-10 01:47:00.464 +03:00 [INF] Setting cache for key: order:filter:user:all_deleted:all_page:1_size:10_status:all
2025-09-10 01:47:00.691 +03:00 [INF] Cache set successfully for key: order:filter:user:all_deleted:all_page:1_size:10_status:all with tags: [order]
2025-09-10 01:47:02.367 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:47:02.381 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:47:03.626 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1259.5037ms
2025-09-10 01:47:05.640 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:47:05.648 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:47:07.019 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1379.3825ms
2025-09-10 01:47:09.037 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:47:09.066 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:47:10.449 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1412.4183ms
2025-09-10 01:47:12.464 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:47:12.471 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:47:13.855 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1390.6677ms
2025-09-10 01:47:15.868 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:47:15.900 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:47:17.287 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1419.5843ms
2025-09-10 01:47:19.309 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:47:19.320 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:47:20.739 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1429.9234ms
2025-09-10 01:47:22.750 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:47:22.769 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:47:24.154 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1403.523ms
2025-09-10 01:47:26.187 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:47:26.207 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:47:27.629 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1441.3274ms
2025-09-10 01:47:29.660 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:47:29.686 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:47:31.093 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1433.2049ms
2025-09-10 01:47:33.110 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:47:33.129 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:47:33.870 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 01:47:34.510 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1399.7617ms
2025-09-10 01:47:36.131 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2260.9206ms
2025-09-10 01:47:36.189 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:47:36.203 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 14.1496ms
2025-09-10 01:47:36.160 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:47:36.247 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 86.8144ms
2025-09-10 01:47:38.217 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:47:38.226 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:47:39.699 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1482.6838ms
2025-09-10 01:47:41.716 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:47:41.741 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:47:41.804 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - application/x-www-form-urlencoded; charset=UTF-8 15
2025-09-10 01:47:41.816 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:47:42.906 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - 204 null null 1101.9736ms
2025-09-10 01:47:42.955 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 01:47:43.122 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.3847ms
2025-09-10 01:47:44.427 +03:00 [INF] Starting CheckAndUpdatePaymentStatusAsync for payment 3
2025-09-10 01:47:44.653 +03:00 [INF] Executing GetByIdAsync for entity Payment with ID: 3
2025-09-10 01:47:44.729 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Amount`, `p`.`CreatedAt`, `p`.`CustomerId`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`OrderId`, `p`.`PaymentDate`, `p`.`PaymentMethodId`, `p`.`PaymentProviderId`, `p`.`ProviderOrderId`, `p`.`Status`, `p`.`TransactionId`
FROM `Payments` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 01:47:44.744 +03:00 [INF] Execute GetAll for entity PaymentProvider
2025-09-10 01:47:44.820 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`PublicKey`
FROM `PaymentProviders` AS `p`
WHERE `p`.`Provider` = 1
LIMIT 1
2025-09-10 01:47:44.825 +03:00 [INF] Executing GetTokenAsync
2025-09-10 01:47:44.827 +03:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-09-10 01:47:44.830 +03:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-09-10 01:47:45.131 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:47:45.139 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:47:45.364 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2409.3016ms
2025-09-10 01:47:45.414 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:47:45.420 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:47:45.454 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 34.3691ms
2025-09-10 01:47:45.451 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.7142ms
2025-09-10 01:47:45.604 +03:00 [INF] Received HTTP response headers after 769.1918ms - 201
2025-09-10 01:47:45.609 +03:00 [INF] End processing HTTP request after 781.5019ms - 201
2025-09-10 01:47:45.614 +03:00 [INF] Successfully retrieved PayMob token
2025-09-10 01:47:45.620 +03:00 [INF] Start processing HTTP request GET https://accept.paymob.com/api/ecommerce/orders/383651205
2025-09-10 01:47:45.626 +03:00 [INF] Sending HTTP request GET https://accept.paymob.com/api/ecommerce/orders/383651205
2025-09-10 01:47:45.835 +03:00 [INF] Received HTTP response headers after 204.9479ms - 200
2025-09-10 01:47:45.847 +03:00 [INF] End processing HTTP request after 227.5219ms - 200
2025-09-10 01:47:45.861 +03:00 [ERR] Error in CheckAndUpdatePaymentStatusAsync for payment 3
System.InvalidOperationException: The connection is already in a transaction and cannot participate in another transaction.
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.EnsureNoTransactions()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   at UnitOfWork.BeginTransactionAsync()
   at E_Commerce.Services.Order.OrderCommandService.UpdateOrderAfterPaid(Int32 orderId, OrderStatus orderStatus)
   at E_Commerce.Services.PaymentServices.PaymentServices.CheckAndUpdatePaymentStatusAsync(Int32 paymentId)
2025-09-10 01:47:46.388 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1257.1117ms
2025-09-10 01:47:47.468 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:47:47.480 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:47:48.571 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - null null
2025-09-10 01:47:48.859 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1391.2788ms
2025-09-10 01:47:50.519 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 01:47:50.875 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:47:50.883 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:47:50.961 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - 200 null text/html 2389.9792ms
2025-09-10 01:47:52.276 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1401.2726ms
2025-09-10 01:47:52.795 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2275.9206ms
2025-09-10 01:47:52.841 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:47:52.854 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 13.1154ms
2025-09-10 01:47:52.837 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:47:52.893 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 55.7543ms
2025-09-10 01:47:54.878 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:47:54.885 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:47:56.282 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1403.3102ms
2025-09-10 01:47:58.293 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:47:58.304 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:47:59.738 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1444.4465ms
2025-09-10 01:48:01.395 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - null null
2025-09-10 01:48:01.405 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:48:01.553 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:48:01.562 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.GetOrders (E-Commerce)'
2025-09-10 01:48:01.568 +03:00 [INF] Route matched with {action = "GetOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.OrderDtos.OrderListDto]]]] GetOrders(System.String, System.Nullable`1[System.Boolean], Int32, Int32, System.Nullable`1[E_Commerce.Enums.OrderStatus]) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 01:48:01.577 +03:00 [INF] Executing GetOrders: role: Admin, userId: , deleted: , page: 1, size: 10, status: 
2025-09-10 01:48:01.584 +03:00 [INF] Filtering orders - UserId: null, Deleted: null, Page: 1, PageSize: 10, Status: null
2025-09-10 01:48:01.593 +03:00 [INF] Getting cache for key: order:filter:user:all_deleted:all_page:1_size:10_status:all
2025-09-10 01:48:01.761 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:48:01.775 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:48:01.815 +03:00 [INF] Cache hit for key: order:filter:user:all_deleted:all_page:1_size:10_status:all
2025-09-10 01:48:01.817 +03:00 [INF] Cache hit for filtered orders
2025-09-10 01:48:01.821 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.OrderDtos.OrderListDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 01:48:01.824 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.GetOrders (E-Commerce) in 247.844ms
2025-09-10 01:48:01.827 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.GetOrders (E-Commerce)'
2025-09-10 01:48:01.830 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - 200 1729 application/json; charset=utf-8 435.388ms
2025-09-10 01:48:03.500 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1738.7433ms
2025-09-10 01:48:05.523 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:48:05.533 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:48:06.962 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1439.4961ms
2025-09-10 01:48:08.979 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:48:08.989 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:48:10.392 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1412.8612ms
2025-09-10 01:48:12.408 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:48:12.434 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:48:13.835 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1427.6532ms
2025-09-10 01:48:15.865 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:48:15.886 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:48:17.265 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1399.9267ms
2025-09-10 01:48:19.286 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:48:19.297 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:48:20.674 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.574ms
2025-09-10 01:48:22.684 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:48:22.693 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:48:24.152 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1468.3451ms
2025-09-10 01:48:26.176 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:48:26.187 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:48:27.584 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1407.5505ms
2025-09-10 01:48:29.600 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:48:29.610 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:48:31.004 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1404.6205ms
2025-09-10 01:48:33.020 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:48:33.031 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:48:34.518 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1497.8472ms
2025-09-10 01:48:36.536 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:48:36.555 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:48:37.939 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1403.5003ms
2025-09-10 01:48:39.951 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:48:39.961 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:48:41.379 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1428.0638ms
2025-09-10 01:48:43.392 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:48:43.407 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:48:44.779 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1386.9764ms
2025-09-10 01:48:46.789 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:48:46.801 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:48:48.200 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1410.7088ms
2025-09-10 01:48:50.228 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:48:50.258 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:48:51.640 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.2399ms
2025-09-10 01:48:53.668 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:48:53.692 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:48:55.089 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1420.894ms
2025-09-10 01:48:57.108 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:48:57.119 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:48:58.667 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1558.8598ms
2025-09-10 01:49:00.682 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:49:00.688 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:49:02.099 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1417.1214ms
2025-09-10 01:49:04.161 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:49:04.993 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:49:06.977 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2816.6848ms
2025-09-10 01:49:08.998 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:49:09.071 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:49:10.567 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1568.9877ms
2025-09-10 01:49:12.592 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:49:13.140 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:49:14.853 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2260.5484ms
2025-09-10 01:49:16.910 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:49:17.542 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:49:18.600 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 01:49:19.097 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2187.497ms
2025-09-10 01:49:20.878 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2278.2296ms
2025-09-10 01:49:20.911 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:49:20.912 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:49:20.921 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 9.2216ms
2025-09-10 01:49:20.959 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 47.6899ms
2025-09-10 01:49:22.949 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:49:22.975 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:49:24.356 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1406.4ms
2025-09-10 01:49:26.368 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:49:26.375 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:49:27.755 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1387.1937ms
2025-09-10 01:49:29.784 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:49:30.020 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:49:32.075 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2290.8183ms
2025-09-10 01:49:34.139 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:49:34.149 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:49:36.273 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2133.5732ms
2025-09-10 01:49:38.334 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:49:38.344 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:49:39.844 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1510.2657ms
2025-09-10 01:49:41.865 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:49:41.871 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:49:43.259 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1394.1735ms
2025-09-10 01:49:45.284 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:49:45.295 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:49:46.676 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1391.6676ms
2025-09-10 01:49:48.151 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 01:49:48.701 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:49:48.718 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:49:50.183 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1482.9066ms
2025-09-10 01:49:50.545 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2393.3101ms
2025-09-10 01:49:50.623 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:49:50.623 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:49:50.637 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 14.6153ms
2025-09-10 01:49:50.641 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 17.8694ms
2025-09-10 01:49:52.680 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:49:52.694 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:49:54.250 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1569.7535ms
2025-09-10 01:49:56.279 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:49:56.297 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:49:57.697 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1418.3713ms
2025-09-10 01:49:59.709 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:49:59.723 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:50:01.098 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.8038ms
2025-09-10 01:50:03.121 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:50:03.134 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:50:04.698 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1576.7708ms
2025-09-10 01:50:06.715 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:50:06.725 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:50:08.094 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1378.436ms
2025-09-10 01:50:10.107 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:50:10.116 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:50:11.494 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1387.3466ms
2025-09-10 01:50:13.518 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:50:13.544 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:50:14.923 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1404.3064ms
2025-09-10 01:50:16.950 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:50:16.972 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:50:18.537 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1587.5786ms
2025-09-10 01:50:20.551 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:50:20.568 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:50:21.959 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1407.2941ms
2025-09-10 01:50:23.971 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:50:23.998 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:50:25.461 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1489.8058ms
2025-09-10 01:50:27.482 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:50:27.501 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:50:28.904 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1422.3453ms
2025-09-10 01:50:30.932 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:50:30.959 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:50:32.342 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.1974ms
2025-09-10 01:50:34.361 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:50:34.380 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:50:35.766 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.5257ms
2025-09-10 01:50:37.781 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:50:37.790 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:50:39.160 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1379.1032ms
2025-09-10 01:50:41.171 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:50:41.188 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:50:42.561 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1390.1331ms
2025-09-10 01:50:44.577 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:50:44.583 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:50:45.951 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1374.1087ms
2025-09-10 01:50:47.973 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:50:47.999 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:50:49.457 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1483.63ms
2025-09-10 01:50:51.478 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:50:51.486 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:50:52.859 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1381.0488ms
2025-09-10 01:50:54.885 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:50:54.918 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:50:56.384 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1499.2126ms
2025-09-10 01:50:58.400 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:50:58.412 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:50:59.794 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1393.9416ms
2025-09-10 01:51:00.863 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 01:51:01.877 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:51:01.908 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:51:03.251 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2388.3855ms
2025-09-10 01:51:03.280 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:51:03.285 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:51:03.307 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 26.8097ms
2025-09-10 01:51:03.340 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 54.8659ms
2025-09-10 01:51:03.399 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1522.8663ms
2025-09-10 01:51:05.336 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:51:05.343 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:51:05.580 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - application/x-www-form-urlencoded; charset=UTF-8 15
2025-09-10 01:51:05.588 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:51:06.686 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - 204 null null 1105.9111ms
2025-09-10 01:51:06.710 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 01:51:06.713 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1376.7792ms
2025-09-10 01:51:08.041 +03:00 [INF] Starting CheckAndUpdatePaymentStatusAsync for payment 3
2025-09-10 01:51:08.310 +03:00 [INF] Executing GetByIdAsync for entity Payment with ID: 3
2025-09-10 01:51:08.386 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Amount`, `p`.`CreatedAt`, `p`.`CustomerId`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`OrderId`, `p`.`PaymentDate`, `p`.`PaymentMethodId`, `p`.`PaymentProviderId`, `p`.`ProviderOrderId`, `p`.`Status`, `p`.`TransactionId`
FROM `Payments` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 01:51:08.392 +03:00 [INF] Execute GetAll for entity PaymentProvider
2025-09-10 01:51:08.466 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`PublicKey`
FROM `PaymentProviders` AS `p`
WHERE `p`.`Provider` = 1
LIMIT 1
2025-09-10 01:51:08.473 +03:00 [INF] Executing GetTokenAsync
2025-09-10 01:51:08.477 +03:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-09-10 01:51:08.479 +03:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-09-10 01:51:08.730 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:51:08.751 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:51:08.957 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2247.5362ms
2025-09-10 01:51:08.994 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:51:08.994 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:51:09.020 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 25.8481ms
2025-09-10 01:51:09.037 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 42.5524ms
2025-09-10 01:51:09.215 +03:00 [INF] Received HTTP response headers after 732.3713ms - 201
2025-09-10 01:51:09.223 +03:00 [INF] End processing HTTP request after 746.0607ms - 201
2025-09-10 01:51:09.229 +03:00 [INF] Successfully retrieved PayMob token
2025-09-10 01:51:09.232 +03:00 [INF] Start processing HTTP request GET https://accept.paymob.com/api/ecommerce/orders/383651205
2025-09-10 01:51:09.235 +03:00 [INF] Sending HTTP request GET https://accept.paymob.com/api/ecommerce/orders/383651205
2025-09-10 01:51:09.444 +03:00 [INF] Received HTTP response headers after 205.9873ms - 200
2025-09-10 01:51:09.454 +03:00 [INF] End processing HTTP request after 222.08ms - 200
2025-09-10 01:51:09.457 +03:00 [ERR] Error in CheckAndUpdatePaymentStatusAsync for payment 3
System.InvalidOperationException: The connection is already in a transaction and cannot participate in another transaction.
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.EnsureNoTransactions()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   at UnitOfWork.BeginTransactionAsync()
   at E_Commerce.Services.Order.OrderCommandService.UpdateOrderAfterPaid(Int32 orderId, OrderStatus orderStatus)
   at E_Commerce.Services.PaymentServices.PaymentServices.CheckAndUpdatePaymentStatusAsync(Int32 paymentId)
2025-09-10 01:51:09.985 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1254.8722ms
2025-09-10 01:51:11.061 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:51:11.069 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:51:12.291 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1230.5227ms
2025-09-10 01:51:14.302 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:51:14.313 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:51:15.757 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1455.2079ms
2025-09-10 01:51:17.771 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:51:17.780 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:51:19.177 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.2768ms
2025-09-10 01:51:21.192 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:51:21.200 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:51:22.579 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1387.5034ms
2025-09-10 01:51:24.594 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:51:24.605 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:51:25.977 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1382.7868ms
2025-09-10 01:51:28.006 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:51:28.090 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:51:29.466 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1459.2366ms
2025-09-10 01:51:31.488 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:51:31.495 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:51:32.879 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1391.1807ms
2025-09-10 01:51:34.899 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:51:34.913 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:51:36.285 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1386.3334ms
2025-09-10 01:51:38.300 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:51:38.311 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:51:39.815 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1515.6805ms
2025-09-10 01:51:41.837 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:51:41.843 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:51:43.217 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1379.7057ms
2025-09-10 01:51:45.238 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:51:45.267 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:51:46.651 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1413.8003ms
2025-09-10 01:51:48.663 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:51:48.673 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:51:50.185 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1521.924ms
2025-09-10 01:51:52.199 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:51:52.206 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:51:53.583 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1384.375ms
2025-09-10 01:51:55.606 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:51:55.617 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:51:56.992 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1385.6086ms
2025-09-10 01:51:59.003 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:51:59.010 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:52:00.475 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1472.1602ms
2025-09-10 01:52:02.492 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:52:02.504 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:52:03.880 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1387.6808ms
2025-09-10 01:52:05.890 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:52:05.905 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:52:07.298 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1408.1598ms
2025-09-10 01:52:09.309 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:52:09.319 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:52:10.699 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1389.9658ms
2025-09-10 01:52:12.717 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:52:12.728 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:52:14.110 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1392.7497ms
2025-09-10 01:52:16.124 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:52:16.143 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:52:17.516 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1391.4088ms
2025-09-10 01:52:19.528 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:52:19.540 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:52:20.912 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1383.9493ms
2025-09-10 01:52:22.935 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:52:22.981 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:52:24.478 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1543.6749ms
2025-09-10 01:52:26.498 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:52:26.527 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:52:28.022 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1524.1766ms
2025-09-10 01:52:30.040 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:52:30.085 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:52:31.473 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1433.0583ms
2025-09-10 01:52:33.487 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:52:33.498 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:52:34.881 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1393.3142ms
2025-09-10 01:52:36.891 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:52:36.901 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:52:38.442 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1551.3743ms
2025-09-10 01:52:40.463 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:52:40.476 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:52:41.862 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1399.0186ms
2025-09-10 01:52:43.877 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:52:43.886 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:52:45.281 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1403.6383ms
2025-09-10 01:52:47.295 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:52:47.305 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:52:48.685 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1389.873ms
2025-09-10 01:52:50.702 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:52:50.712 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:52:52.109 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1406.1083ms
2025-09-10 01:52:54.122 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:52:54.133 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:52:55.532 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1410.1145ms
2025-09-10 01:52:57.552 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:52:57.562 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:52:58.937 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1384.6841ms
2025-09-10 01:53:00.952 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:53:00.960 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:53:02.353 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1400.9332ms
2025-09-10 01:53:04.376 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:53:04.393 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:53:05.766 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1390.1771ms
2025-09-10 01:53:07.784 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:53:07.797 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:53:09.174 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1389.4704ms
2025-09-10 01:53:11.196 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:53:11.208 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:53:12.578 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1382.1694ms
2025-09-10 01:53:14.592 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:53:14.601 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:53:16.044 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1451.3852ms
2025-09-10 01:53:18.066 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:53:18.076 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:53:19.911 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1844.6963ms
2025-09-10 01:53:21.921 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:53:21.957 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:53:23.357 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1435.3403ms
2025-09-10 01:53:25.372 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:53:25.384 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:53:26.801 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1429.1585ms
2025-09-10 01:53:28.823 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:53:28.835 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:53:30.513 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1690.6205ms
2025-09-10 01:53:32.538 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:53:32.547 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:53:33.956 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1417.3252ms
2025-09-10 01:53:35.975 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:53:35.985 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:53:37.360 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1384.7707ms
2025-09-10 01:53:39.379 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:53:39.398 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:53:40.779 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1400.3592ms
2025-09-10 01:53:42.798 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:53:42.807 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:53:44.195 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1396.7903ms
2025-09-10 01:53:46.212 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:53:46.221 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:53:47.594 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1382.2606ms
2025-09-10 01:53:49.607 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:53:49.621 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:53:50.994 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1387.6817ms
2025-09-10 01:53:53.018 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:53:53.048 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:53:54.426 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1408.2456ms
2025-09-10 01:53:56.443 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:53:56.454 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:53:57.864 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1420.783ms
2025-09-10 01:53:59.874 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:53:59.914 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:54:01.308 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1433.6812ms
2025-09-10 01:54:03.330 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:54:03.409 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:54:04.849 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1518.807ms
2025-09-10 01:54:06.874 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:54:06.881 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:54:08.375 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1500.6949ms
2025-09-10 01:54:10.384 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:54:10.391 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:54:11.767 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1383.1207ms
2025-09-10 01:54:13.781 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:54:13.789 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:54:15.162 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1380.4899ms
2025-09-10 01:54:17.178 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:54:17.190 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:54:18.577 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1398.9145ms
2025-09-10 01:54:20.588 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:54:20.596 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:54:21.996 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1408.1582ms
2025-09-10 01:54:24.018 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:54:24.044 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:54:25.457 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1438.9009ms
2025-09-10 01:54:27.484 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:54:27.516 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:54:28.903 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1418.8518ms
2025-09-10 01:54:30.919 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:54:30.928 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:54:32.418 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1498.7463ms
2025-09-10 01:54:34.431 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:54:34.447 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:54:35.840 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1408.5229ms
2025-09-10 01:54:37.863 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:54:37.897 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:54:39.292 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1429.4885ms
2025-09-10 01:54:41.314 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:54:41.335 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:54:42.718 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1403.8328ms
2025-09-10 01:54:44.735 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:54:44.746 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:54:46.121 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1386.0599ms
2025-09-10 01:54:48.148 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:54:48.184 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:54:49.567 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1419.4541ms
2025-09-10 01:54:51.593 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:54:51.601 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:54:53.008 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1414.6976ms
2025-09-10 01:54:55.022 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:54:55.032 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:54:56.412 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1389.8345ms
2025-09-10 01:54:58.427 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:54:58.442 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:54:59.834 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1406.7287ms
2025-09-10 01:55:01.852 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:55:01.884 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:55:03.274 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1422.1035ms
2025-09-10 01:55:05.301 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:55:05.331 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:55:06.722 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1421.0465ms
2025-09-10 01:55:08.744 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:55:08.769 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:55:10.485 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1741.5136ms
2025-09-10 01:55:12.508 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:55:12.518 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:55:13.896 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.059ms
2025-09-10 01:55:15.919 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:55:15.948 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:55:17.348 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1428.5125ms
2025-09-10 01:55:19.366 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:55:19.388 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:55:20.806 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1440.79ms
2025-09-10 01:55:22.832 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:55:22.861 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:55:24.253 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1420.8959ms
2025-09-10 01:55:26.277 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:55:26.310 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:55:27.727 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1449.4115ms
2025-09-10 01:55:29.740 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:55:29.749 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:55:31.137 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1396.3454ms
2025-09-10 01:55:33.170 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:55:33.194 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:55:34.582 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.905ms
2025-09-10 01:55:36.610 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:55:36.625 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:55:38.059 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1448.8141ms
2025-09-10 01:55:40.086 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:55:40.096 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:55:41.478 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1391.3499ms
2025-09-10 01:55:43.502 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:55:43.510 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:55:44.898 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1395.5357ms
2025-09-10 01:55:46.926 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:55:46.956 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:55:48.418 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1491.2928ms
2025-09-10 01:55:50.444 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:55:50.452 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:55:51.847 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1402.4012ms
2025-09-10 01:55:53.862 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:55:53.882 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:55:55.265 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1402.8997ms
2025-09-10 01:55:57.294 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:55:57.326 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:55:58.705 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.4429ms
2025-09-10 01:56:00.725 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:56:00.751 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:56:02.136 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.1419ms
2025-09-10 01:56:04.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:56:04.181 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:56:05.585 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1425.3767ms
2025-09-10 01:56:07.604 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:56:07.610 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:56:09.037 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1432.6002ms
2025-09-10 01:56:11.051 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:56:11.076 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:56:12.465 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1414.3162ms
2025-09-10 01:56:14.488 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:56:14.509 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:56:15.892 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1404.4796ms
2025-09-10 01:56:17.919 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:56:17.944 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:56:19.332 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1412.8049ms
2025-09-10 01:56:21.359 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:56:21.390 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:56:22.775 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1416.348ms
2025-09-10 01:56:24.800 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:56:24.828 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:56:26.214 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1413.9371ms
2025-09-10 01:56:28.241 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:56:28.267 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:56:29.712 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1471.0452ms
2025-09-10 01:56:31.735 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:56:31.766 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:56:33.154 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1418.9629ms
2025-09-10 01:56:35.173 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:56:35.198 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:56:36.598 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1424.8149ms
2025-09-10 01:56:38.613 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:56:38.625 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:56:40.007 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1393.8236ms
2025-09-10 01:56:42.030 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:56:42.060 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:56:43.719 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1689.0319ms
2025-09-10 01:56:45.738 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:56:45.746 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:56:47.377 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1638.8118ms
2025-09-10 01:56:49.394 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:56:49.411 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:56:50.793 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1399.5984ms
2025-09-10 01:56:52.827 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:56:52.844 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:56:54.227 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1400.0244ms
2025-09-10 01:56:56.254 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:56:56.285 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:56:57.729 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1474.9149ms
2025-09-10 01:56:59.749 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:56:59.770 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:57:01.165 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1415.8606ms
2025-09-10 01:57:03.188 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:57:03.215 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:57:04.756 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1568.0239ms
2025-09-10 01:57:06.776 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:57:06.789 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:57:08.180 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1404.4093ms
2025-09-10 01:57:10.196 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:57:10.211 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:57:11.610 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1414.2737ms
2025-09-10 01:57:13.620 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:57:13.629 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:57:15.019 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1399.1349ms
2025-09-10 01:57:17.040 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:57:17.064 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:57:18.460 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1420.339ms
2025-09-10 01:57:20.477 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:57:20.487 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:57:21.878 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1400.5657ms
2025-09-10 01:57:23.892 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:57:23.921 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:57:25.381 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1488.601ms
2025-09-10 01:57:27.398 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:57:27.409 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:57:28.800 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1401.6703ms
2025-09-10 01:57:30.828 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:57:30.856 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:57:32.233 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1404.7318ms
2025-09-10 01:57:34.261 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:57:34.268 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:57:35.650 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1389.1247ms
2025-09-10 01:57:37.672 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:57:37.702 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:57:39.085 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1412.2123ms
2025-09-10 01:57:41.095 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:57:41.118 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:57:42.516 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1420.7359ms
2025-09-10 01:57:44.535 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:57:44.541 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:57:45.906 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1370.7197ms
2025-09-10 01:57:47.927 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:57:47.935 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:57:49.321 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1394.8662ms
2025-09-10 01:57:51.357 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:57:51.436 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:57:52.807 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1449.6962ms
2025-09-10 01:57:54.828 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:57:54.839 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:57:56.219 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1390.9792ms
2025-09-10 01:57:58.258 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:57:58.395 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:57:59.786 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1528.7191ms
2025-09-10 01:58:01.818 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:58:01.830 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:58:03.222 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1404.5294ms
2025-09-10 01:58:05.230 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:58:05.265 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:58:06.758 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1527.6443ms
2025-09-10 01:58:08.778 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:58:08.793 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:58:10.185 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1406.8735ms
2025-09-10 01:58:12.199 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:58:12.205 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:58:13.220 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 01:58:13.595 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1395.5724ms
2025-09-10 01:58:15.484 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2264.795ms
2025-09-10 01:58:15.555 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:58:15.561 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:58:15.581 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.492ms
2025-09-10 01:58:15.589 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 28.0637ms
2025-09-10 01:58:17.620 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:58:17.628 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:58:19.016 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1395.8803ms
2025-09-10 01:58:19.499 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - application/x-www-form-urlencoded; charset=UTF-8 15
2025-09-10 01:58:19.506 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:58:20.599 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - 204 null null 1099.8317ms
2025-09-10 01:58:20.624 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 01:58:21.035 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:58:21.042 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:58:22.427 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1391.0732ms
2025-09-10 01:58:22.740 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2116.2378ms
2025-09-10 01:58:22.763 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:58:22.784 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:58:22.790 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 27.0349ms
2025-09-10 01:58:22.826 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 42.028ms
2025-09-10 01:58:22.866 +03:00 [INF] Starting CheckAndUpdatePaymentStatusAsync for payment 3
2025-09-10 01:58:23.086 +03:00 [INF] Executing GetByIdAsync for entity Payment with ID: 3
2025-09-10 01:58:23.169 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Amount`, `p`.`CreatedAt`, `p`.`CustomerId`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`OrderId`, `p`.`PaymentDate`, `p`.`PaymentMethodId`, `p`.`PaymentProviderId`, `p`.`ProviderOrderId`, `p`.`Status`, `p`.`TransactionId`
FROM `Payments` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 01:58:23.178 +03:00 [INF] Execute GetAll for entity PaymentProvider
2025-09-10 01:58:23.268 +03:00 [INF] Executed DbCommand (88ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`PublicKey`
FROM `PaymentProviders` AS `p`
WHERE `p`.`Provider` = 1
LIMIT 1
2025-09-10 01:58:23.274 +03:00 [INF] Executing GetTokenAsync
2025-09-10 01:58:23.278 +03:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-09-10 01:58:23.281 +03:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-09-10 01:58:23.851 +03:00 [INF] Received HTTP response headers after 567.3422ms - 201
2025-09-10 01:58:23.857 +03:00 [INF] End processing HTTP request after 579.7874ms - 201
2025-09-10 01:58:23.862 +03:00 [INF] Successfully retrieved PayMob token
2025-09-10 01:58:23.865 +03:00 [INF] Start processing HTTP request GET https://accept.paymob.com/api/ecommerce/orders/383651205
2025-09-10 01:58:23.867 +03:00 [INF] Sending HTTP request GET https://accept.paymob.com/api/ecommerce/orders/383651205
2025-09-10 01:58:24.086 +03:00 [INF] Received HTTP response headers after 216.1167ms - 200
2025-09-10 01:58:24.092 +03:00 [INF] End processing HTTP request after 227.3297ms - 200
2025-09-10 01:58:24.809 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:58:24.825 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:58:25.122 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Payments` SET `ModifiedAt` = @p0, `Status` = @p1
WHERE `Id` = @p2;
SELECT ROW_COUNT();
2025-09-10 01:58:26.082 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1272.8178ms
2025-09-10 01:58:26.146 +03:00 [INF] Payment 3 updated to "Failed"
2025-09-10 01:58:26.501 +03:00 [INF] Execute GetAll for entity Order
2025-09-10 01:58:26.654 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__8__locals1_orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CancelledAt`, `t`.`CreatedAt`, `t`.`CustomerAddressId`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`DeliveredAt`, `t`.`DiscountAmount`, `t`.`ModifiedAt`, `t`.`Notes`, `t`.`OrderNumber`, `t`.`RestockedAt`, `t`.`ShippedAt`, `t`.`ShippingCost`, `t`.`Status`, `t`.`Subtotal`, `t`.`TaxAmount`, `t`.`Total`, `o0`.`Id`, `o0`.`CreatedAt`, `o0`.`DeletedAt`, `o0`.`ModifiedAt`, `o0`.`OrderId`, `o0`.`OrderedAt`, `o0`.`ProductId`, `o0`.`ProductVariantId`, `o0`.`Quantity`, `o0`.`TotalPrice`, `o0`.`UnitPrice`
FROM (
    SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
    FROM `Orders` AS `o`
    WHERE `o`.`Id` = @__8__locals1_orderId_0
    LIMIT 1
) AS `t`
LEFT JOIN `OrderItem` AS `o0` ON `t`.`Id` = `o0`.`OrderId`
ORDER BY `t`.`Id`
2025-09-10 01:58:27.569 +03:00 [INF] Removing cache by tags: [order]
2025-09-10 01:58:27.771 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - null null
2025-09-10 01:58:28.101 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:58:28.107 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:58:28.218 +03:00 [INF] Removed 1 cache entries for tags: [order]
2025-09-10 01:58:29.357 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1256.2152ms
2025-09-10 01:58:29.903 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - 200 null text/html 2131.791ms
2025-09-10 01:58:29.967 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 01:58:29.961 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 01:58:29.978 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 11.318ms
2025-09-10 01:58:30.005 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.7628ms
2025-09-10 01:58:32.021 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:58:32.047 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:58:33.502 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1481.0228ms
2025-09-10 01:58:35.518 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:58:35.544 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:58:36.928 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1410.1767ms
2025-09-10 01:58:38.944 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:58:38.961 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:58:40.339 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1395.6798ms
2025-09-10 01:58:42.283 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - null null
2025-09-10 01:58:42.297 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:58:42.359 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:58:42.430 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:58:42.446 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:58:42.463 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.GetOrders (E-Commerce)'
2025-09-10 01:58:42.538 +03:00 [INF] Route matched with {action = "GetOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.OrderDtos.OrderListDto]]]] GetOrders(System.String, System.Nullable`1[System.Boolean], Int32, Int32, System.Nullable`1[E_Commerce.Enums.OrderStatus]) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 01:58:42.556 +03:00 [INF] Executing GetOrders: role: Admin, userId: , deleted: , page: 1, size: 10, status: 
2025-09-10 01:58:42.571 +03:00 [INF] Filtering orders - UserId: null, Deleted: null, Page: 1, PageSize: 10, Status: null
2025-09-10 01:58:42.598 +03:00 [INF] Getting cache for key: order:filter:user:all_deleted:all_page:1_size:10_status:all
2025-09-10 01:58:42.812 +03:00 [WRN] Cache miss for key: order:filter:user:all_deleted:all_page:1_size:10_status:all
2025-09-10 01:58:42.814 +03:00 [INF] Execute GetAll for entity Order
2025-09-10 01:58:42.964 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`OrderNumber`, `t0`.`Name`, `t`.`Status`, `t`.`Total`, `t`.`CreatedAt`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`CustomerId`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Total`
    FROM `Orders` AS `o`
    ORDER BY `o`.`CreatedAt` DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
INNER JOIN (
    SELECT `a`.`Id`, `a`.`Name`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Discriminator` = 'Customer'
) AS `t0` ON `t`.`CustomerId` = `t0`.`Id`
ORDER BY `t`.`CreatedAt` DESC
2025-09-10 01:58:43.799 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1439.0905ms
2025-09-10 01:58:43.862 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.OrderDtos.OrderListDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 01:58:43.885 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.GetOrders (E-Commerce) in 1330.0381ms
2025-09-10 01:58:43.912 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.GetOrders (E-Commerce)'
2025-09-10 01:58:43.920 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - 200 1731 application/json; charset=utf-8 1637.2801ms
2025-09-10 01:58:45.166 +03:00 [INF] Setting cache for key: order:filter:user:all_deleted:all_page:1_size:10_status:all
2025-09-10 01:58:45.395 +03:00 [INF] Cache set successfully for key: order:filter:user:all_deleted:all_page:1_size:10_status:all with tags: [order]
2025-09-10 01:58:45.808 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:58:45.820 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:58:47.205 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1396.527ms
2025-09-10 01:58:49.220 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:58:49.243 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:58:50.654 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1433.5268ms
2025-09-10 01:58:52.675 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:58:52.693 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:58:54.124 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1449.1974ms
2025-09-10 01:58:56.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:58:56.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:58:57.537 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1381.3707ms
2025-09-10 01:58:59.552 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:58:59.559 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:59:00.927 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1375.012ms
2025-09-10 01:59:02.939 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:59:02.945 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:59:04.320 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1380.4768ms
2025-09-10 01:59:06.347 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:59:06.368 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:59:07.777 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1430.5119ms
2025-09-10 01:59:09.791 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:59:09.810 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:59:11.222 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1430.8653ms
2025-09-10 01:59:13.244 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:59:13.258 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:59:14.645 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1401.0114ms
2025-09-10 01:59:16.667 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:59:16.686 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:59:18.128 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1460.6495ms
2025-09-10 01:59:20.146 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:59:20.172 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:59:21.582 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1436.4017ms
2025-09-10 01:59:23.610 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:59:23.624 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:59:24.998 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.3459ms
2025-09-10 01:59:27.008 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:59:27.021 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:59:28.392 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1384.1859ms
2025-09-10 01:59:30.409 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:59:30.428 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:59:31.836 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1426.6272ms
2025-09-10 01:59:33.853 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:59:33.860 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:59:34.426 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants/1 - null null
2025-09-10 01:59:34.488 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 01:59:34.656 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 01:59:34.664 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.GetVariantById (E-Commerce)'
2025-09-10 01:59:34.671 +03:00 [INF] Route matched with {action = "GetVariantById", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]] GetVariantById(Int32, Int32) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-09-10 01:59:34.677 +03:00 [INF] Getting variant by id: 1
2025-09-10 01:59:34.678 +03:00 [INF] Getting cache for key: variant:1
2025-09-10 01:59:34.891 +03:00 [INF] Cache hit for key: variant:1
2025-09-10 01:59:34.899 +03:00 [INF] Retrieved variant 1 from cache
2025-09-10 01:59:34.902 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 01:59:34.907 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.GetVariantById (E-Commerce) in 231.2689ms
2025-09-10 01:59:34.911 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.GetVariantById (E-Commerce)'
2025-09-10 01:59:34.915 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants/1 - 200 306 application/json; charset=utf-8 488.6568ms
2025-09-10 01:59:35.233 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1379.7919ms
2025-09-10 01:59:37.242 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:59:37.248 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:59:38.628 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1386.4805ms
2025-09-10 01:59:40.723 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:59:40.734 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:59:42.109 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1385.3687ms
2025-09-10 01:59:44.131 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:59:44.148 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:59:45.521 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1390.8319ms
2025-09-10 01:59:47.542 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:59:47.554 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:59:48.948 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.9848ms
2025-09-10 01:59:50.966 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:59:50.978 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:59:52.366 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1400.2461ms
2025-09-10 01:59:54.387 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:59:54.400 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:59:55.784 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1397.3433ms
2025-09-10 01:59:57.794 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 01:59:57.805 +03:00 [INF] CORS policy execution successful.
2025-09-10 01:59:59.297 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1502.6491ms
2025-09-10 02:00:01.315 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:00:01.325 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:00:02.700 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1385.5185ms
2025-09-10 02:00:04.717 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:00:04.727 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:00:06.095 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1378.8947ms
2025-09-10 02:00:08.113 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:00:08.123 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:00:09.503 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1389.2325ms
2025-09-10 02:00:11.518 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:00:11.541 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:00:12.929 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.0648ms
2025-09-10 02:00:14.947 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:00:14.957 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:00:16.346 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1399.2231ms
2025-09-10 02:00:18.359 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:00:18.381 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:00:19.770 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.1701ms
2025-09-10 02:00:21.786 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:00:21.819 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:00:23.204 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1418.5149ms
2025-09-10 02:00:25.229 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:00:25.253 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:00:26.638 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.0142ms
2025-09-10 02:00:28.654 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:00:28.677 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:00:30.061 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1406.2387ms
2025-09-10 02:00:32.075 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:00:32.085 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:00:33.466 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1391.2642ms
2025-09-10 02:00:35.557 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:00:35.756 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:00:37.395 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1838.5676ms
2025-09-10 02:00:39.424 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:00:39.822 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:00:41.569 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2145.1994ms
2025-09-10 02:00:43.590 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:00:43.605 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:00:44.985 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1395.1241ms
2025-09-10 02:00:46.999 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:00:47.008 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:00:48.418 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1419.4732ms
2025-09-10 02:00:50.436 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:00:50.451 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:00:51.818 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1382.2205ms
2025-09-10 02:00:53.828 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:00:54.115 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:00:55.878 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2049.6186ms
2025-09-10 02:00:57.901 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:00:57.995 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:01:00.405 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2504.4409ms
2025-09-10 02:01:02.420 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:01:02.428 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:01:04.307 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1887.0629ms
2025-09-10 02:01:06.355 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:01:06.712 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:01:08.406 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2051.0731ms
2025-09-10 02:01:10.475 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:01:10.538 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - null null
2025-09-10 02:01:10.605 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:01:12.269 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1794.1131ms
2025-09-10 02:01:12.410 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - 200 null text/html 1871.6793ms
2025-09-10 02:01:12.504 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:01:12.537 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:01:12.576 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 71.5753ms
2025-09-10 02:01:12.590 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 53.111ms
2025-09-10 02:01:14.618 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:01:14.661 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:01:16.031 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1413.3329ms
2025-09-10 02:01:18.057 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:01:18.067 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:01:19.459 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1401.7822ms
2025-09-10 02:01:21.501 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:01:21.677 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:01:23.188 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1687.3207ms
2025-09-10 02:01:25.211 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:01:25.233 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:01:26.742 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1531.9397ms
2025-09-10 02:01:28.756 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:01:28.791 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:01:30.297 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1541.8568ms
2025-09-10 02:01:32.316 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:01:32.344 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:01:33.727 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1410.6724ms
2025-09-10 02:01:35.754 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:01:35.828 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:01:37.240 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1485.8675ms
2025-09-10 02:01:39.256 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:01:39.285 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:01:40.677 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1420.8035ms
2025-09-10 02:01:42.692 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:01:42.709 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:01:44.085 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1392.8042ms
2025-09-10 02:01:46.119 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:01:46.138 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:01:47.517 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1398.2552ms
2025-09-10 02:01:49.526 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:01:49.538 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:01:50.910 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1383.436ms
2025-09-10 02:01:52.934 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:01:52.943 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:01:54.319 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1385.3101ms
2025-09-10 02:01:56.351 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:01:56.363 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:01:58.027 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1675.3106ms
2025-09-10 02:02:00.050 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:02:00.056 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:02:01.563 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1512.6979ms
2025-09-10 02:02:03.590 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:02:03.624 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:02:05.929 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2339.5772ms
2025-09-10 02:02:07.952 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:02:08.509 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:02:10.299 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2346.8743ms
2025-09-10 02:02:12.326 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:02:12.350 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:02:13.925 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1598.6067ms
2025-09-10 02:02:15.940 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:02:15.948 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:02:17.342 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1402.1251ms
2025-09-10 02:02:19.365 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:02:19.377 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:02:20.778 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1412.2232ms
2025-09-10 02:02:22.795 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:02:22.805 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:02:24.181 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1385.8647ms
2025-09-10 02:02:26.229 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:02:26.260 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:02:27.762 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1533.8853ms
2025-09-10 02:02:29.905 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:02:30.937 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:02:32.507 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2601.8804ms
2025-09-10 02:02:34.548 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:02:35.149 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:02:36.656 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2107.6641ms
2025-09-10 02:02:38.717 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:02:39.411 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:02:40.867 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2150.3472ms
2025-09-10 02:02:42.885 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:02:42.891 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:02:44.532 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1647.5547ms
2025-09-10 02:02:46.607 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:02:46.910 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:02:48.314 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1706.2499ms
2025-09-10 02:02:50.380 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:02:51.134 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:02:52.690 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2309.9821ms
2025-09-10 02:02:54.722 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:02:54.872 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:02:56.406 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1683.7197ms
2025-09-10 02:02:58.426 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:02:58.432 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:02:59.820 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1393.7975ms
2025-09-10 02:03:01.832 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:03:01.838 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:03:03.237 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1404.7016ms
2025-09-10 02:03:05.263 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:03:05.280 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:03:06.741 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1478.4084ms
2025-09-10 02:03:08.755 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:03:08.776 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:03:10.154 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1398.9241ms
2025-09-10 02:03:12.168 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:03:12.176 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:03:13.570 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1401.7428ms
2025-09-10 02:03:15.631 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:03:15.640 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:03:17.032 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1400.5594ms
2025-09-10 02:03:19.055 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:03:19.067 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:03:20.485 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1430.2484ms
2025-09-10 02:03:22.503 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:03:22.514 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:03:23.891 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1387.5452ms
2025-09-10 02:03:25.911 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:03:25.929 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:03:27.303 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1392.2947ms
2025-09-10 02:03:29.315 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:03:29.324 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:03:30.699 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1384.7943ms
2025-09-10 02:03:32.727 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:03:32.912 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:03:34.310 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1583.0201ms
2025-09-10 02:03:36.362 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:03:36.406 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:03:37.933 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1571.7539ms
2025-09-10 02:03:39.957 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:03:40.657 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:03:42.322 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2364.4218ms
2025-09-10 02:03:44.394 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:03:44.463 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:03:45.835 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1441.1142ms
2025-09-10 02:03:47.854 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:03:48.551 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:03:50.043 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2188.9861ms
2025-09-10 02:03:52.077 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:03:52.146 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:03:53.541 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1464.0663ms
2025-09-10 02:03:55.559 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:03:56.155 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:03:57.527 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1967.4921ms
2025-09-10 02:03:59.541 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:03:59.627 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:04:01.025 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1484.175ms
2025-09-10 02:04:03.035 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:04:03.041 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:04:04.435 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1399.5435ms
2025-09-10 02:04:06.443 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:04:06.453 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:04:07.823 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1380.2392ms
2025-09-10 02:04:09.865 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:04:10.125 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:04:11.620 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1755.0865ms
2025-09-10 02:04:13.674 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:04:13.694 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:04:15.086 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.3673ms
2025-09-10 02:04:17.108 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:04:17.121 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:04:18.490 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1382.1294ms
2025-09-10 02:04:20.507 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:04:20.529 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:04:21.906 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1399.1472ms
2025-09-10 02:04:23.917 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:04:24.063 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:04:25.473 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1555.8663ms
2025-09-10 02:04:27.502 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:04:27.514 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:04:29.064 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1562.7493ms
2025-09-10 02:04:31.118 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:04:31.139 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:04:32.792 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1673.9661ms
2025-09-10 02:04:34.849 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:04:35.216 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:04:36.657 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1808.8158ms
2025-09-10 02:04:38.679 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:04:38.709 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:04:40.178 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1498.5291ms
2025-09-10 02:04:42.203 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:04:42.585 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:04:44.047 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1843.9828ms
2025-09-10 02:04:46.066 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:04:46.082 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:04:47.501 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1434.957ms
2025-09-10 02:04:49.538 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:04:49.651 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:04:51.046 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1508.6847ms
2025-09-10 02:04:53.064 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:04:53.080 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:04:54.708 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1643.9948ms
2025-09-10 02:04:56.744 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:04:56.838 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:04:58.246 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1501.8616ms
2025-09-10 02:05:00.340 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:05:00.382 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:05:02.030 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1690.0531ms
2025-09-10 02:05:04.043 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:05:05.074 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:05:06.532 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2488.8307ms
2025-09-10 02:05:08.559 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:05:08.707 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:05:10.096 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1536.7942ms
2025-09-10 02:05:12.113 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:05:12.222 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:05:13.619 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1505.622ms
2025-09-10 02:05:15.692 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:05:15.849 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:05:17.286 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1594.0914ms
2025-09-10 02:05:19.302 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:05:19.319 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:05:20.691 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1389.0649ms
2025-09-10 02:05:22.700 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:05:22.715 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:05:24.091 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1390.6744ms
2025-09-10 02:05:26.103 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:05:26.110 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:05:27.485 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1382.249ms
2025-09-10 02:05:29.505 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:05:29.523 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:05:30.924 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1418.3825ms
2025-09-10 02:05:32.953 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:05:32.964 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:05:34.402 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1449.4504ms
2025-09-10 02:05:36.450 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:05:36.496 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:05:37.899 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1448.8384ms
2025-09-10 02:05:39.955 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:05:39.961 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:05:41.423 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1467.3602ms
2025-09-10 02:05:43.462 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:05:43.699 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:05:45.315 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1853.5352ms
2025-09-10 02:05:47.365 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:05:47.537 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:05:48.626 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - null null
2025-09-10 02:05:48.960 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1594.8191ms
2025-09-10 02:05:50.192 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - 200 null text/html 1565.4844ms
2025-09-10 02:05:50.267 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:05:50.270 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:05:50.283 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 15.5947ms
2025-09-10 02:05:50.331 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 61.1646ms
2025-09-10 02:05:52.303 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:05:52.311 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:05:53.703 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1400.2918ms
2025-09-10 02:05:55.714 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:05:55.721 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:05:57.095 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1380.2155ms
2025-09-10 02:05:59.106 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:05:59.122 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:06:00.511 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.311ms
2025-09-10 02:06:02.527 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:06:02.779 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:06:04.767 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2239.562ms
2025-09-10 02:06:06.828 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:06:07.129 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:06:07.979 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - null null
2025-09-10 02:06:08.603 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1774.7348ms
2025-09-10 02:06:09.593 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - 200 null text/html 1613.2806ms
2025-09-10 02:06:09.635 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:06:09.638 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:06:09.702 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 66.5993ms
2025-09-10 02:06:09.761 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 122.4058ms
2025-09-10 02:06:11.721 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:06:11.742 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:06:13.271 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1550.322ms
2025-09-10 02:06:15.292 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:06:15.430 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:06:16.825 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1532.5684ms
2025-09-10 02:06:18.843 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:06:18.853 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:06:20.495 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1651.2011ms
2025-09-10 02:06:22.602 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:06:22.609 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:06:24.333 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1731.447ms
2025-09-10 02:06:26.389 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:06:26.645 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:06:28.265 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1876.2905ms
2025-09-10 02:06:30.392 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:06:31.544 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:06:33.189 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2797.0817ms
2025-09-10 02:06:33.550 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - null null
2025-09-10 02:06:35.116 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - 200 null text/html 1565.6502ms
2025-09-10 02:06:35.181 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:06:35.202 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:06:35.217 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.7682ms
2025-09-10 02:06:35.232 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 29.8789ms
2025-09-10 02:06:37.250 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:06:37.275 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:06:38.696 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1445.5172ms
2025-09-10 02:06:40.713 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:06:40.725 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:06:42.120 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1406.7859ms
2025-09-10 02:06:44.139 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:06:44.152 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:06:45.561 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1422.3428ms
2025-09-10 02:06:47.580 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:06:47.635 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:06:49.020 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1439.9434ms
2025-09-10 02:06:51.040 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:06:51.235 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:06:52.608 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1568.5019ms
2025-09-10 02:06:54.633 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:06:54.648 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:06:56.037 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1403.4795ms
2025-09-10 02:06:58.068 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:06:58.077 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:06:59.482 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1413.918ms
2025-09-10 02:07:01.514 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:07:01.522 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:07:02.967 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1453.2038ms
2025-09-10 02:07:04.999 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:07:05.056 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:07:05.928 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - null null
2025-09-10 02:07:06.534 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1535.4864ms
2025-09-10 02:07:07.473 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - 200 null text/html 1544.9136ms
2025-09-10 02:07:07.535 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:07:07.535 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:07:07.553 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 17.4669ms
2025-09-10 02:07:07.604 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 68.2978ms
2025-09-10 02:07:09.581 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:07:09.587 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:07:10.962 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1381.1367ms
2025-09-10 02:07:12.974 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:07:12.985 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:07:14.379 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.3522ms
2025-09-10 02:07:16.395 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:07:16.404 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:07:17.819 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1423.7372ms
2025-09-10 02:07:19.827 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:07:19.833 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:07:21.240 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1412.8704ms
2025-09-10 02:07:23.260 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:07:23.268 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:07:24.657 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1396.5568ms
2025-09-10 02:07:26.676 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:07:26.819 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:07:28.194 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1518.5046ms
2025-09-10 02:07:30.208 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:07:30.216 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:07:31.584 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1376.2688ms
2025-09-10 02:07:33.594 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:07:33.604 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:07:34.977 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1383.5129ms
2025-09-10 02:07:36.991 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:07:37.003 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:07:38.711 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1720.2403ms
2025-09-10 02:07:40.723 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:07:40.738 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:07:42.114 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1390.3158ms
2025-09-10 02:07:44.132 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:07:44.151 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:07:45.527 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1395.2042ms
2025-09-10 02:07:47.557 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:07:47.567 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:07:48.947 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1389.9454ms
2025-09-10 02:07:50.974 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:07:50.989 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:07:52.381 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1406.8427ms
2025-09-10 02:07:54.400 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:07:55.055 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:07:56.426 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2025.7007ms
2025-09-10 02:07:58.442 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:07:58.458 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:07:59.823 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1380.9527ms
2025-09-10 02:08:01.850 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:08:01.904 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:08:03.280 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1429.9819ms
2025-09-10 02:08:05.304 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:08:05.314 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:08:07.178 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1873.4116ms
2025-09-10 02:08:09.189 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:08:09.199 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:08:10.634 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1445.4944ms
2025-09-10 02:08:12.643 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:08:12.648 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:08:14.021 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1377.2755ms
2025-09-10 02:08:16.040 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:08:16.046 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:08:17.489 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1448.9586ms
2025-09-10 02:08:19.523 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:08:19.561 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:08:20.979 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1456.0267ms
2025-09-10 02:08:23.005 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:08:23.038 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:08:24.411 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1406.1378ms
2025-09-10 02:08:26.419 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:08:26.428 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:08:27.820 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1401.2227ms
2025-09-10 02:08:29.847 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:08:29.931 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:08:31.307 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1459.8761ms
2025-09-10 02:08:33.350 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:08:33.363 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:08:34.760 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.9078ms
2025-09-10 02:08:36.770 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:08:36.796 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:08:38.158 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1387.1948ms
2025-09-10 02:08:40.195 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:08:40.389 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:08:41.781 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1586.0783ms
2025-09-10 02:11:21.339 +03:00 [INF] DB tables already exist. Exit install
2025-09-10 02:11:23.222 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-10 02:11:25.206 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-10 02:11:25.885 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-10 02:11:26.062 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-09-10 02:11:26.380 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-10 02:11:26.466 +03:00 [INF] Starting data seeding...
2025-09-10 02:11:26.550 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-10 02:11:27.202 +03:00 [INF] Executed DbCommand (115ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-10 02:11:27.309 +03:00 [INF] Role 'Admin' already exists.
2025-09-10 02:11:27.573 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-10 02:11:27.584 +03:00 [INF] Role 'User' already exists.
2025-09-10 02:11:27.758 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-10 02:11:27.859 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-09-10 02:11:27.863 +03:00 [INF] Data seeding completed successfully.
2025-09-10 02:11:29.233 +03:00 [INF] Now listening on: http://localhost:5069
2025-09-10 02:11:29.334 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-09-10 02:11:29.344 +03:00 [INF] Using the following options for SQL Server job storage:
2025-09-10 02:11:29.348 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-09-10 02:11:29.353 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-09-10 02:11:29.370 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-10 02:11:29.373 +03:00 [INF] Hosting environment: Development
2025-09-10 02:11:29.376 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-09-10 02:11:29.571 +03:00 [INF] Server mrrobot:600:17fafee7 successfully announced in 179.0437 ms
2025-09-10 02:11:29.578 +03:00 [INF] Server mrrobot:600:17fafee7 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-09-10 02:11:29.666 +03:00 [INF] Server mrrobot:600:17fafee7 all the dispatchers started
2025-09-10 02:11:29.978 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-09-10 02:11:30.343 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 369.0313ms
2025-09-10 02:11:30.398 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-09-10 02:11:30.398 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:11:30.408 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:11:30.446 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 47.3351ms
2025-09-10 02:11:30.628 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 219.4304ms
2025-09-10 02:11:30.649 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 250.8635ms
2025-09-10 02:11:31.469 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-09-10 02:11:31.693 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 223.9438ms
2025-09-10 02:12:46.614 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Cart - null null
2025-09-10 02:12:46.653 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-10 02:12:47.089 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:12:47.315 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:12:47.363 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.GetCart (E-Commerce)'
2025-09-10 02:12:47.388 +03:00 [INF] Route matched with {action = "GetCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CartDtos.CartDto]]] GetCart() on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 02:12:47.577 +03:00 [INF] Executing GetCart
2025-09-10 02:12:47.602 +03:00 [INF] Getting cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:12:47.606 +03:00 [INF] Getting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:12:47.826 +03:00 [WRN] Cache miss for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:12:47.988 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 02:12:48.012 +03:00 [INF] Execute GetAll for entity Cart
2025-09-10 02:12:48.416 +03:00 [INF] Executed DbCommand (94ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-09-10 02:12:50.261 +03:00 [INF] Setting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:12:50.581 +03:00 [INF] Cache set successfully for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5 with tags: [cart]
2025-09-10 02:12:50.611 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CartDtos.CartDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 02:12:50.660 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.GetCart (E-Commerce) in 3260.6501ms
2025-09-10 02:12:50.679 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.GetCart (E-Commerce)'
2025-09-10 02:12:50.694 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Cart - 200 1015 application/json; charset=utf-8 4080.332ms
2025-09-10 02:12:54.148 +03:00 [INF] Execute GetAll for entity CartItem
2025-09-10 02:12:54.149 +03:00 [INF] Retrieving cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:12:54.314 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__cartItemId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE (`c`.`Id` = @__cartItemId_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 02:12:54.344 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 02:12:54.361 +03:00 [INF] CartItem 31 price updated to 3374.08790000
2025-09-10 02:12:54.638 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `CartItems` SET `UnitPrice` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 02:13:14.803 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5069/api/Cart/items - application/json 45
2025-09-10 02:13:14.828 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:13:14.983 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:13:14.998 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.RemoveItemFromCart (E-Commerce)'
2025-09-10 02:13:15.020 +03:00 [INF] Route matched with {action = "RemoveItemFromCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] RemoveItemFromCart(E_Commerce.DtoModels.CartDtos.RemoveCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 02:13:15.072 +03:00 [INF] Executing RemoveItemFromCart for product ID: 6
2025-09-10 02:13:15.083 +03:00 [INF] Removing item from cart for user: e682f183-1c61-400b-aa5a-171750f446b5, product: 6
2025-09-10 02:13:15.335 +03:00 [INF] Retrieving cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:13:15.419 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 02:13:15.436 +03:00 [INF] Removing item from cart: 3, product: 6, variant: 4
2025-09-10 02:13:15.520 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__cartId_0='?' (DbType = Int32), @__productId_1='?' (DbType = Int32), @__productVariantId_Value_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE ((`c`.`CartId` = @__cartId_0) AND (`c`.`ProductId` = @__productId_1)) AND (`c`.`ProductVariantId` = @__productVariantId_Value_2)
LIMIT 1
2025-09-10 02:13:15.540 +03:00 [INF] Cart item removed successfully
2025-09-10 02:13:15.547 +03:00 [INF] Execute AddUserOpreationAsync
2025-09-10 02:13:15.557 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-09-10 02:13:15.610 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-09-10 02:13:15.828 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime), @p8='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM `CartItems`
WHERE `Id` = @p0;
SELECT ROW_COUNT();

INSERT INTO `userOperationsLogs` (`CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`, `UserId`)
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `userOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 02:13:16.895 +03:00 [INF] Removing cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:13:16.902 +03:00 [INF] Item removed from cart for user: e682f183-1c61-400b-aa5a-171750f446b5, product: 6
2025-09-10 02:13:16.909 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 02:13:16.915 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.RemoveItemFromCart (E-Commerce) in 1883.869ms
2025-09-10 02:13:16.918 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.RemoveItemFromCart (E-Commerce)'
2025-09-10 02:13:16.928 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5069/api/Cart/items - 200 138 application/json; charset=utf-8 2124.0384ms
2025-09-10 02:13:17.329 +03:00 [INF] Cache removed successfully for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:13:18.230 +03:00 [INF] Executing GetByIdAsync for entity Cart with ID: 3
2025-09-10 02:13:18.382 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
FROM `Cart` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-09-10 02:13:22.087 +03:00 [INF] Removing cache by tag: cart
2025-09-10 02:13:22.736 +03:00 [INF] Removed 1 cache entries for tag: cart
2025-09-10 02:13:23.545 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Cart - null null
2025-09-10 02:13:23.687 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:13:23.853 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:13:23.861 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.GetCart (E-Commerce)'
2025-09-10 02:13:23.864 +03:00 [INF] Route matched with {action = "GetCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CartDtos.CartDto]]] GetCart() on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 02:13:23.875 +03:00 [INF] Executing GetCart
2025-09-10 02:13:23.877 +03:00 [INF] Getting cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:13:23.878 +03:00 [INF] Getting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:13:24.093 +03:00 [WRN] Cache miss for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:13:24.242 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 02:13:24.253 +03:00 [INF] Execute GetAll for entity Cart
2025-09-10 02:13:24.415 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-09-10 02:13:24.434 +03:00 [INF] Setting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:13:24.658 +03:00 [INF] Cache set successfully for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5 with tags: [cart]
2025-09-10 02:13:24.667 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CartDtos.CartDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 02:13:24.685 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.GetCart (E-Commerce) in 817.3053ms
2025-09-10 02:13:24.694 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.GetCart (E-Commerce)'
2025-09-10 02:13:24.696 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Cart - 200 336 application/json; charset=utf-8 1150.9698ms
2025-09-10 02:14:05.083 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants/1 - null null
2025-09-10 02:14:05.095 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:14:05.242 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:14:05.251 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.GetVariantById (E-Commerce)'
2025-09-10 02:14:05.266 +03:00 [INF] Route matched with {action = "GetVariantById", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]] GetVariantById(Int32, Int32) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-09-10 02:14:05.536 +03:00 [INF] Getting variant by id: 1
2025-09-10 02:14:05.541 +03:00 [INF] Getting cache for key: variant:1
2025-09-10 02:14:05.757 +03:00 [WRN] Cache miss for key: variant:1
2025-09-10 02:14:05.769 +03:00 [INF] Getting variant by ID: 1
2025-09-10 02:14:05.930 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`, `p0`.`Id`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`Description`, `p0`.`DiscountId`, `p0`.`Gender`, `p0`.`IsActive`, `p0`.`ModifiedAt`, `p0`.`Name`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`SubCategoryId`, `p0`.`fitType`
FROM `ProductVariants` AS `p`
INNER JOIN `Products` AS `p0` ON `p`.`ProductId` = `p0`.`Id`
WHERE (`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 02:14:06.011 +03:00 [INF] Caching variant 1 data
2025-09-10 02:14:06.900 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 02:14:06.914 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.GetVariantById (E-Commerce) in 1640.9405ms
2025-09-10 02:14:06.925 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.GetVariantById (E-Commerce)'
2025-09-10 02:14:06.927 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants/1 - 200 308 application/json; charset=utf-8 1843.6834ms
2025-09-10 02:14:09.411 +03:00 [INF] Setting cache for key: variant:1
2025-09-10 02:14:09.645 +03:00 [INF] Cache set successfully for key: variant:1 with tags: [product:1, variantdata]
2025-09-10 02:14:57.789 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json 63
2025-09-10 02:14:57.797 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:14:57.945 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:14:57.951 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 02:14:57.959 +03:00 [INF] Route matched with {action = "AddItemToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] AddItemToCart(E_Commerce.DtoModels.CartDtos.CreateCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 02:14:57.981 +03:00 [INF] Executing AddItemToCart for product ID: 1
2025-09-10 02:14:57.998 +03:00 [INF] Adding item to cart for user: e682f183-1c61-400b-aa5a-171750f446b5, product: 1
2025-09-10 02:14:58.327 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 02:14:58.333 +03:00 [INF] Execute GetAll for entity Product
2025-09-10 02:14:58.452 +03:00 [INF] Executed DbCommand (95ms) [Parameters=[@__8__locals1_itemDto_ProductId_0='?' (DbType = Int32), @__8__locals1_itemDto_ProductVariantId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Price`, `t`.`c`, `t`.`EndDate`, `t`.`StartDate`, `t`.`DiscountPercent`, `t`.`DeletedAt`, `t`.`IsActive`, `t0`.`Id`, `t0`.`Quantity`, `t0`.`c`
FROM (
    SELECT `p`.`Id`, `p`.`Price`, `d`.`Id` IS NOT NULL AS `c`, `d`.`EndDate`, `d`.`StartDate`, `d`.`DiscountPercent`, `d`.`DeletedAt`, `d`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__8__locals1_itemDto_ProductId_0) AND `p`.`DeletedAt` IS NULL) AND `p`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Quantity`, `t1`.`c`, `t1`.`ProductId`
    FROM (
        SELECT `p0`.`Id`, `p0`.`Quantity`, 1 AS `c`, `p0`.`ProductId`, ROW_NUMBER() OVER(PARTITION BY `p0`.`ProductId` ORDER BY `p0`.`Id`) AS `row`
        FROM `ProductVariants` AS `p0`
        WHERE (`p0`.`Id` = @__8__locals1_itemDto_ProductVariantId_1) AND `p0`.`IsActive`
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
2025-09-10 02:14:58.463 +03:00 [INF] Retrieving cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:14:58.543 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 02:14:58.555 +03:00 [INF] Executing CreateAsync for entity CartItem
2025-09-10 02:14:58.562 +03:00 [INF] CartItem added successfully (pending save)
2025-09-10 02:14:58.566 +03:00 [INF] Execute AddUserOpreationAsync
2025-09-10 02:14:58.567 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-09-10 02:14:58.573 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-09-10 02:14:59.627 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (DbType = DateTime), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime), @p16='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `CartItems` (`AddedAt`, `CartId`, `CreatedAt`, `DeletedAt`, `ModifiedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `UnitPrice`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `CartItems`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `userOperationsLogs` (`CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`, `UserId`)
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `userOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 02:14:59.781 +03:00 [INF] Removing cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:15:00.208 +03:00 [INF] Cache removed successfully for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:15:00.211 +03:00 [INF] Item added to cart for user: e682f183-1c61-400b-aa5a-171750f446b5, product: 1
2025-09-10 02:15:00.216 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 02:15:00.219 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce) in 2247.5149ms
2025-09-10 02:15:00.242 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 02:15:00.247 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 200 134 application/json; charset=utf-8 2458.5064ms
2025-09-10 02:15:04.014 +03:00 [INF] Executing GetByIdAsync for entity Cart with ID: 3
2025-09-10 02:15:04.316 +03:00 [INF] Executed DbCommand (174ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
FROM `Cart` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-09-10 02:15:04.433 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Cart - null null
2025-09-10 02:15:04.443 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:15:04.593 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:15:04.599 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.GetCart (E-Commerce)'
2025-09-10 02:15:04.602 +03:00 [INF] Route matched with {action = "GetCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CartDtos.CartDto]]] GetCart() on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 02:15:04.611 +03:00 [INF] Executing GetCart
2025-09-10 02:15:04.612 +03:00 [INF] Getting cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:15:04.614 +03:00 [INF] Getting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:15:04.828 +03:00 [WRN] Cache miss for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:15:04.980 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 02:15:04.989 +03:00 [INF] Execute GetAll for entity Cart
2025-09-10 02:15:05.151 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-09-10 02:15:05.162 +03:00 [INF] Setting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:15:05.383 +03:00 [INF] Cache set successfully for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5 with tags: [cart]
2025-09-10 02:15:05.393 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CartDtos.CartDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 02:15:05.401 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.GetCart (E-Commerce) in 791.334ms
2025-09-10 02:15:05.413 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.GetCart (E-Commerce)'
2025-09-10 02:15:05.417 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Cart - 200 982 application/json; charset=utf-8 984.4886ms
2025-09-10 02:15:08.107 +03:00 [INF] Removing cache by tag: cart
2025-09-10 02:15:08.752 +03:00 [INF] Removed 1 cache entries for tag: cart
2025-09-10 02:15:40.306 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json 62
2025-09-10 02:15:40.313 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:15:40.463 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:15:40.473 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 02:15:40.477 +03:00 [INF] Route matched with {action = "AddItemToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] AddItemToCart(E_Commerce.DtoModels.CartDtos.CreateCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 02:15:40.485 +03:00 [INF] Executing AddItemToCart for product ID: 1
2025-09-10 02:15:40.487 +03:00 [INF] Adding item to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 1
2025-09-10 02:15:40.786 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 02:15:40.797 +03:00 [INF] Execute GetAll for entity Product
2025-09-10 02:15:40.878 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__8__locals1_itemDto_ProductId_0='?' (DbType = Int32), @__8__locals1_itemDto_ProductVariantId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Price`, `t`.`c`, `t`.`EndDate`, `t`.`StartDate`, `t`.`DiscountPercent`, `t`.`DeletedAt`, `t`.`IsActive`, `t0`.`Id`, `t0`.`Quantity`, `t0`.`c`
FROM (
    SELECT `p`.`Id`, `p`.`Price`, `d`.`Id` IS NOT NULL AS `c`, `d`.`EndDate`, `d`.`StartDate`, `d`.`DiscountPercent`, `d`.`DeletedAt`, `d`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__8__locals1_itemDto_ProductId_0) AND `p`.`DeletedAt` IS NULL) AND `p`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Quantity`, `t1`.`c`, `t1`.`ProductId`
    FROM (
        SELECT `p0`.`Id`, `p0`.`Quantity`, 1 AS `c`, `p0`.`ProductId`, ROW_NUMBER() OVER(PARTITION BY `p0`.`ProductId` ORDER BY `p0`.`Id`) AS `row`
        FROM `ProductVariants` AS `p0`
        WHERE (`p0`.`Id` = @__8__locals1_itemDto_ProductVariantId_1) AND `p0`.`IsActive`
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
2025-09-10 02:15:40.898 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:15:40.979 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 02:15:41.001 +03:00 [INF] Executing CreateAsync for entity CartItem
2025-09-10 02:15:41.003 +03:00 [INF] CartItem added successfully (pending save)
2025-09-10 02:15:41.013 +03:00 [INF] Execute AddUserOpreationAsync
2025-09-10 02:15:41.015 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-09-10 02:15:41.017 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-09-10 02:15:42.038 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (DbType = DateTime), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime), @p16='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `CartItems` (`AddedAt`, `CartId`, `CreatedAt`, `DeletedAt`, `ModifiedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `UnitPrice`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `CartItems`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `userOperationsLogs` (`CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`, `UserId`)
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `userOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 02:15:42.191 +03:00 [INF] Removing cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:15:42.621 +03:00 [INF] Cache removed successfully for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:15:42.627 +03:00 [INF] Item added to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 1
2025-09-10 02:15:42.629 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 02:15:42.633 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce) in 2149.0035ms
2025-09-10 02:15:42.635 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 02:15:42.637 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 200 134 application/json; charset=utf-8 2331.5053ms
2025-09-10 02:15:49.382 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - null 0
2025-09-10 02:15:49.392 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:15:49.487 +03:00 [INF] Executing GetByIdAsync for entity Cart with ID: 1
2025-09-10 02:15:49.541 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:15:49.550 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-09-10 02:15:49.555 +03:00 [INF] Route matched with {action = "CheckOut", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] CheckOut() on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 02:15:49.566 +03:00 [INF] Executing CheckOut
2025-09-10 02:15:49.569 +03:00 [INF] Checkout of cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:15:49.571 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:15:49.639 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
FROM `Cart` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-09-10 02:15:49.724 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 02:15:49.796 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Cart` SET `CheckoutDate` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 02:15:49.881 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Cart` SET `CheckoutDate` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 02:15:49.890 +03:00 [INF] Removing cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:15:49.892 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 02:15:49.897 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.CheckOut (E-Commerce) in 332.4007ms
2025-09-10 02:15:49.900 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-09-10 02:15:49.902 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - 200 122 application/json; charset=utf-8 520.2045ms
2025-09-10 02:15:50.315 +03:00 [INF] Cache removed successfully for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:15:52.806 +03:00 [INF] Removing cache by tag: cart
2025-09-10 02:15:53.029 +03:00 [WRN] No cache entries found for tag: cart
2025-09-10 02:16:14.714 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order - application/json 42
2025-09-10 02:16:14.736 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:16:14.910 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:16:14.916 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 02:16:14.935 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto]]] CreateOrder(E_Commerce.DtoModels.OrderDtos.CreateOrderDto) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 02:16:14.955 +03:00 [INF] Executing CreateOrder
2025-09-10 02:16:14.971 +03:00 [INF] Creating order from cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:16:15.272 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 02:16:15.275 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order - application/json 41
2025-09-10 02:16:15.296 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:16:15.363 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 02:16:15.379 +03:00 [INF] Checking if address 30 exists for customer: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:16:15.444 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:16:15.464 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__addressId_0='?' (DbType = Int32), @__customerId_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `CustomerAddresses` AS `c`
    WHERE ((`c`.`Id` = @__addressId_0) AND (`c`.`CustomerId` = @__customerId_1)) AND `c`.`DeletedAt` IS NULL)
2025-09-10 02:16:15.466 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 02:16:15.477 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto]]] CreateOrder(E_Commerce.DtoModels.OrderDtos.CreateOrderDto) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 02:16:15.471 +03:00 [INF] Getting cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:16:15.485 +03:00 [INF] Getting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:16:15.485 +03:00 [INF] Executing CreateOrder
2025-09-10 02:16:15.488 +03:00 [INF] Creating order from cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:16:15.699 +03:00 [WRN] Cache miss for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:16:15.794 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 02:16:15.851 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 02:16:15.869 +03:00 [INF] Execute GetAll for entity Cart
2025-09-10 02:16:15.933 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 02:16:15.938 +03:00 [INF] Checking if address 1 exists for customer: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:16:15.952 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-09-10 02:16:15.966 +03:00 [INF] Setting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:16:16.021 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__addressId_0='?' (DbType = Int32), @__customerId_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `CustomerAddresses` AS `c`
    WHERE ((`c`.`Id` = @__addressId_0) AND (`c`.`CustomerId` = @__customerId_1)) AND `c`.`DeletedAt` IS NULL)
2025-09-10 02:16:16.031 +03:00 [INF] Getting cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:16:16.033 +03:00 [INF] Getting cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:16:16.184 +03:00 [INF] Cache set successfully for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5 with tags: [cart]
2025-09-10 02:16:16.247 +03:00 [WRN] Cache miss for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:16:16.275 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 02:16:16.283 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce) in 1337.4473ms
2025-09-10 02:16:16.289 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 02:16:16.320 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order - 400 236 application/json; charset=utf-8 1605.941ms
2025-09-10 02:16:16.322 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 02:16:16.339 +03:00 [INF] Execute GetAll for entity Cart
2025-09-10 02:16:16.430 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-09-10 02:16:16.437 +03:00 [INF] Setting cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:16:16.660 +03:00 [INF] Cache set successfully for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5 with tags: [cart]
2025-09-10 02:16:16.672 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 02:16:16.803 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`, `p0`.`Id`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`Description`, `p0`.`DiscountId`, `p0`.`Gender`, `p0`.`IsActive`, `p0`.`ModifiedAt`, `p0`.`Name`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`SubCategoryId`, `p0`.`fitType`
FROM `ProductVariants` AS `p`
INNER JOIN `Products` AS `p0` ON `p`.`ProductId` = `p0`.`Id`
WHERE `p`.`Id` = 1
2025-09-10 02:16:16.932 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE `o`.`OrderNumber` = @__orderNumber_0)
2025-09-10 02:16:17.349 +03:00 [INF] Executing CreateAsync for entity Order
2025-09-10 02:16:17.534 +03:00 [INF] Order added successfully (pending save)
2025-09-10 02:16:17.809 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime), @p8='?' (Size = 500), @p9='?' (Size = 50), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Orders` (`CancelledAt`, `CreatedAt`, `CustomerAddressId`, `CustomerId`, `DeletedAt`, `DeliveredAt`, `DiscountAmount`, `ModifiedAt`, `Notes`, `OrderNumber`, `RestockedAt`, `ShippedAt`, `ShippingCost`, `Status`, `Subtotal`, `TaxAmount`, `Total`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Orders`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 02:16:17.897 +03:00 [INF] Executing CreateRangeAsync for entity OrderItem
2025-09-10 02:16:17.933 +03:00 [INF] 1 OrderItem entities added successfully (pending save)
2025-09-10 02:16:17.945 +03:00 [INF] Removing 3 from variant: 1
2025-09-10 02:16:17.947 +03:00 [INF] Executing GetByIdAsync for entity ProductVariant with ID: 1
2025-09-10 02:16:18.028 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 02:16:18.989 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE ProductVariants SET Quantity = Quantity - @p0 WHERE Id = @p1 AND Quantity >= @p0
2025-09-10 02:16:18.998 +03:00 [INF] Clearing cart: 1
2025-09-10 02:16:19.086 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__cartId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE `c`.`CartId` = @__cartId_0
2025-09-10 02:16:19.118 +03:00 [INF] Cart 1 cleared successfully
2025-09-10 02:16:19.302 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Decimal), @p10='?' (DbType = Decimal), @p12='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM `CartItems`
WHERE `Id` = @p0;
SELECT ROW_COUNT();

INSERT INTO `OrderItem` (`CreatedAt`, `DeletedAt`, `ModifiedAt`, `OrderId`, `OrderedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `TotalPrice`, `UnitPrice`)
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
SELECT `Id`
FROM `OrderItem`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

UPDATE `ProductVariants` SET `Quantity` = @p11
WHERE `Id` = @p12;
SELECT ROW_COUNT();
2025-09-10 02:16:19.460 +03:00 [INF] Execute AddUserOpreationAsync
2025-09-10 02:16:19.463 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-09-10 02:16:19.466 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-09-10 02:16:19.468 +03:00 [INF] Execute GetAll for entity Order
2025-09-10 02:16:19.719 +03:00 [INF] Executed DbCommand (95ms) [Parameters=[@__createdOrder_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`ModifiedAt`, `t0`.`OrderNumber`, `t0`.`Status`, `t0`.`Subtotal`, `t0`.`TaxAmount`, `t0`.`ShippingCost`, `t0`.`DiscountAmount`, `t0`.`Total`, `t0`.`Notes`, `t0`.`DeletedAt`, `t0`.`ShippedAt`, `t0`.`DeliveredAt`, `t0`.`CancelledAt`, `t0`.`c`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Email`, `t0`.`PhoneNumber`, `t1`.`Id`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`Quantity`, `t1`.`UnitPrice`, `t1`.`TotalPrice`, `t1`.`OrderedAt`, `t1`.`Id0`, `t1`.`Name`, `t1`.`Price`, `t1`.`IsActive`, `t1`.`FinalPrice`, `t1`.`DiscountPrecentage`, `t1`.`MainImageUrl`, `t1`.`Id1`, `t1`.`Color`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`Size`, `t1`.`DeletedAt`, `t1`.`Length`, `t1`.`Waist`, `t1`.`Id2`, `t1`.`Id3`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`ModifiedAt`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`ShippingCost`, `o`.`DiscountAmount`, `o`.`Total`, `o`.`Notes`, `o`.`DeletedAt`, `o`.`ShippedAt`, `o`.`DeliveredAt`, `o`.`CancelledAt`, FALSE AS `c`, `t`.`Id` AS `Id0`, `t`.`Name`, `t`.`Email`, `t`.`PhoneNumber`
    FROM `Orders` AS `o`
    INNER JOIN (
        SELECT `a`.`Id`, `a`.`Email`, `a`.`PhoneNumber`, `a`.`Name`
        FROM `AspNetUsers` AS `a`
        WHERE `a`.`Discriminator` = 'Customer'
    ) AS `t` ON `o`.`CustomerId` = `t`.`Id`
    WHERE `o`.`Id` = @__createdOrder_Id_0
    LIMIT 1
) AS `t0`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`CreatedAt`, `o0`.`ModifiedAt`, `o0`.`Quantity`, `o0`.`UnitPrice`, `o0`.`TotalPrice`, `o0`.`OrderedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND `i`.`DeletedAt` IS NULL
        LIMIT 1), '') AS `MainImageUrl`, `o0`.`ProductVariantId` AS `Id1`, `p0`.`Color`, COALESCE(`p0`.`CreatedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `CreatedAt0`, COALESCE(`p0`.`ModifiedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `ModifiedAt0`, `p0`.`Size`, `p0`.`DeletedAt`, COALESCE(`p0`.`Length`, 0) AS `Length`, COALESCE(`p0`.`Waist`, 0) AS `Waist`, `d`.`Id` AS `Id2`, `p0`.`Id` AS `Id3`, `o0`.`OrderId`
    FROM `OrderItem` AS `o0`
    INNER JOIN `Products` AS `p` ON `o0`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    INNER JOIN `ProductVariants` AS `p0` ON `o0`.`ProductVariantId` = `p0`.`Id`
) AS `t1` ON `t0`.`Id` = `t1`.`OrderId`
ORDER BY `t0`.`Id`, `t0`.`Id0`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id2`
2025-09-10 02:16:20.553 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-09-10 02:16:20.748 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Products` SET `Quantity` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 02:16:24.386 +03:00 [INF] Removing cache by tags: [order]
2025-09-10 02:16:25.029 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 02:16:25.030 +03:00 [INF] Removed 1 cache entries for tags: [order]
2025-09-10 02:16:25.082 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce) in 9598.7599ms
2025-09-10 02:16:25.113 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 02:16:25.116 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order - 201 1439 application/json; charset=utf-8 9841.4196ms
2025-09-10 02:16:26.265 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-10 02:16:26.762 +03:00 [INF] Removing cache by tag: CollectionWithProduct
2025-09-10 02:16:26.983 +03:00 [WRN] No cache entries found for tag: CollectionWithProduct
2025-09-10 02:16:27.122 +03:00 [INF] Removed 1 cache entries for tags: [variantlist, variantdata]
2025-09-10 02:16:27.862 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 02:16:28.293 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 02:16:29.981 +03:00 [INF] Removing cache by tags: [collection, CollectionWithProduct]
2025-09-10 02:16:30.133 +03:00 [INF] Removing cache by tag: subcategorywithdata
2025-09-10 02:16:30.249 +03:00 [INF] 1 servers were removed due to timeout
2025-09-10 02:16:30.354 +03:00 [WRN] No cache entries found for tag: subcategorywithdata
2025-09-10 02:16:30.413 +03:00 [WRN] No cache entries found for tags: [collection, CollectionWithProduct]
2025-09-10 02:16:30.698 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 02:16:30.726 +03:00 [INF] Removing cache by tags: [subcategory, subcategorywithdata]
2025-09-10 02:16:31.128 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 02:16:31.582 +03:00 [INF] Removed 1 cache entries for tags: [subcategory, subcategorywithdata]
2025-09-10 02:16:44.530 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - null 0
2025-09-10 02:16:44.547 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:16:44.711 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:16:44.722 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-09-10 02:16:44.727 +03:00 [INF] Route matched with {action = "CheckOut", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] CheckOut() on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 02:16:44.732 +03:00 [INF] Executing CheckOut
2025-09-10 02:16:44.734 +03:00 [INF] Checkout of cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:16:44.736 +03:00 [INF] Retrieving cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:16:44.890 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 02:16:45.052 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Cart` SET `CheckoutDate` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 02:16:45.058 +03:00 [INF] Removing cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:16:45.060 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 02:16:45.064 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.CheckOut (E-Commerce) in 332.458ms
2025-09-10 02:16:45.067 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-09-10 02:16:45.074 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - 200 122 application/json; charset=utf-8 543.143ms
2025-09-10 02:16:45.487 +03:00 [INF] Cache removed successfully for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:16:58.826 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order - application/json 42
2025-09-10 02:16:58.913 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:16:59.063 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:16:59.069 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 02:16:59.072 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto]]] CreateOrder(E_Commerce.DtoModels.OrderDtos.CreateOrderDto) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 02:16:59.100 +03:00 [INF] Executing CreateOrder
2025-09-10 02:16:59.102 +03:00 [INF] Creating order from cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:16:59.400 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 02:16:59.492 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 02:16:59.497 +03:00 [INF] Checking if address 30 exists for customer: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:16:59.575 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__addressId_0='?' (DbType = Int32), @__customerId_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `CustomerAddresses` AS `c`
    WHERE ((`c`.`Id` = @__addressId_0) AND (`c`.`CustomerId` = @__customerId_1)) AND `c`.`DeletedAt` IS NULL)
2025-09-10 02:16:59.580 +03:00 [INF] Getting cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:16:59.582 +03:00 [INF] Getting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:16:59.800 +03:00 [WRN] Cache miss for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:16:59.878 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 02:16:59.888 +03:00 [INF] Execute GetAll for entity Cart
2025-09-10 02:16:59.974 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-09-10 02:16:59.985 +03:00 [INF] Setting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:17:00.205 +03:00 [INF] Cache set successfully for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5 with tags: [cart]
2025-09-10 02:17:00.211 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 02:17:00.288 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`, `p0`.`Id`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`Description`, `p0`.`DiscountId`, `p0`.`Gender`, `p0`.`IsActive`, `p0`.`ModifiedAt`, `p0`.`Name`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`SubCategoryId`, `p0`.`fitType`
FROM `ProductVariants` AS `p`
INNER JOIN `Products` AS `p0` ON `p`.`ProductId` = `p0`.`Id`
WHERE `p`.`Id` = 1
2025-09-10 02:17:00.376 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 02:17:00.383 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce) in 1307.1714ms
2025-09-10 02:17:00.387 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 02:17:00.390 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order - 400 358 application/json; charset=utf-8 1564.6946ms
2025-09-10 02:17:35.687 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire - null null
2025-09-10 02:17:38.065 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire - 200 null text/html 2377.9265ms
2025-09-10 02:17:38.119 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/css18180713068129 - null null
2025-09-10 02:17:38.119 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/css-dark181801213149341 - null null
2025-09-10 02:17:38.119 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/js18180849677682 - null null
2025-09-10 02:17:38.120 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:17:38.121 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:17:38.139 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/css-dark181801213149341 - 200 null text/css 20.2457ms
2025-09-10 02:17:38.150 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/css18180713068129 - 200 null text/css 30.7072ms
2025-09-10 02:17:38.163 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 43.3202ms
2025-09-10 02:17:38.167 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/js18180849677682 - 200 null application/javascript 47.8674ms
2025-09-10 02:17:38.193 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 71.6292ms
2025-09-10 02:17:39.722 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - null null
2025-09-10 02:17:40.388 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 258
2025-09-10 02:17:40.404 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:17:41.273 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - 200 null text/html 1551.1553ms
2025-09-10 02:17:41.299 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:17:41.304 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:17:41.324 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 19.6447ms
2025-09-10 02:17:41.359 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 60.1365ms
2025-09-10 02:17:41.667 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1279.3144ms
2025-09-10 02:17:43.346 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:17:43.352 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:17:43.794 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/failed - null null
2025-09-10 02:17:44.746 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1400.2707ms
2025-09-10 02:17:46.152 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/failed - 200 null text/html 2358.7678ms
2025-09-10 02:17:46.200 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:17:46.200 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:17:46.210 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 10.4883ms
2025-09-10 02:17:46.228 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.4829ms
2025-09-10 02:17:48.294 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:17:48.303 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:17:49.684 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1390.2096ms
2025-09-10 02:17:50.874 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/jobs/failed/delete - application/x-www-form-urlencoded; charset=UTF-8 60
2025-09-10 02:17:50.888 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:17:51.702 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:17:51.712 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:17:51.830 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 02:17:53.126 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1423.5445ms
2025-09-10 02:17:54.477 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2647.5556ms
2025-09-10 02:17:54.505 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:17:54.505 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:17:54.531 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 26.1116ms
2025-09-10 02:17:54.554 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 49.0158ms
2025-09-10 02:17:56.199 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/jobs/failed/delete - 499 null null 5324.7558ms
2025-09-10 02:17:56.545 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:17:56.560 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:17:57.943 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1397.5505ms
2025-09-10 02:17:59.956 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:17:59.967 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:18:01.353 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1397.3366ms
2025-09-10 02:18:03.377 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:18:03.398 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:18:04.777 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1399.9091ms
2025-09-10 02:18:06.794 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:18:06.805 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:18:08.812 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2017.8223ms
2025-09-10 02:18:10.837 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:18:10.848 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:18:12.219 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1382.5773ms
2025-09-10 02:18:14.240 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:18:14.252 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:18:15.626 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1386.1563ms
2025-09-10 02:18:17.640 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:18:17.648 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:18:19.046 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.8418ms
2025-09-10 02:18:21.065 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:18:21.083 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:18:22.486 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1421.0622ms
2025-09-10 02:18:24.501 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:18:24.519 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:18:25.925 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1424.081ms
2025-09-10 02:18:27.942 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:18:27.954 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:18:29.331 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.5247ms
2025-09-10 02:18:31.344 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:18:31.365 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:18:32.770 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1425.1981ms
2025-09-10 02:18:34.797 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:18:34.818 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:18:36.209 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1412.293ms
2025-09-10 02:18:38.221 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:18:38.238 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:18:39.638 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1417.502ms
2025-09-10 02:18:41.656 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:18:41.666 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:18:43.051 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1394.708ms
2025-09-10 02:18:45.073 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:18:45.096 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:18:46.479 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.7929ms
2025-09-10 02:18:48.493 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:18:48.500 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:18:49.876 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1383.0315ms
2025-09-10 02:18:51.898 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:18:51.929 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:18:53.312 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1414.6154ms
2025-09-10 02:18:55.353 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:18:55.366 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:18:56.751 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1397.9014ms
2025-09-10 02:18:58.782 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:18:58.805 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:19:00.190 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1408.1443ms
2025-09-10 02:19:02.216 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:19:02.250 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:19:03.634 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1417.4302ms
2025-09-10 02:19:05.660 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:19:05.669 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:19:07.072 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.8986ms
2025-09-10 02:19:09.081 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:19:09.092 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:19:10.497 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1416.0216ms
2025-09-10 02:19:12.513 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:19:12.521 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:19:13.905 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1391.6531ms
2025-09-10 02:19:15.933 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:19:15.953 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:19:17.374 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1441.2132ms
2025-09-10 02:19:19.397 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:19:19.408 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:19:20.804 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1406.3416ms
2025-09-10 02:19:22.829 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:19:22.848 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:19:24.254 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1424.9441ms
2025-09-10 02:19:26.282 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:19:26.314 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:19:27.668 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - application/x-www-form-urlencoded; charset=UTF-8 15
2025-09-10 02:19:27.692 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:19:27.712 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1429.9542ms
2025-09-10 02:19:28.785 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - 204 null null 1117.0173ms
2025-09-10 02:19:28.818 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 02:19:29.722 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:19:29.737 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:19:31.104 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1382.2101ms
2025-09-10 02:19:31.106 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2287.944ms
2025-09-10 02:19:31.171 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:19:31.176 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:19:31.206 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.4766ms
2025-09-10 02:19:31.219 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 42.5696ms
2025-09-10 02:19:33.232 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:19:33.247 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:19:34.502 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1270.3559ms
2025-09-10 02:19:36.315 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 17
2025-09-10 02:19:36.398 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-09-10 02:19:36.525 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:19:36.537 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:19:36.556 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Orders` SET `Status` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 02:19:37.934 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1408.8425ms
2025-09-10 02:19:39.558 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 17
2025-09-10 02:19:39.709 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-09-10 02:19:39.717 +03:00 [INF] Execute GetAll for entity OrderItem
2025-09-10 02:19:39.875 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`ProductVariantId`, `o`.`Quantity`
FROM `OrderItem` AS `o`
WHERE `o`.`OrderId` = @__orderId_0
2025-09-10 02:19:39.894 +03:00 [INF] Adding quantity for variant: 1
2025-09-10 02:19:39.928 +03:00 [INF] Removing cache by tags: [order]
2025-09-10 02:19:39.951 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:19:39.959 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:19:40.113 +03:00 [INF] Executing GetByIdAsync for entity ProductVariant with ID: 1
2025-09-10 02:19:40.144 +03:00 [WRN] No cache entries found for tags: [order]
2025-09-10 02:19:40.190 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 02:19:40.343 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `ProductVariants` SET `Quantity` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 02:19:41.188 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1236.7155ms
2025-09-10 02:19:41.365 +03:00 [INF] Quantity for variant 1 restored to 19
2025-09-10 02:19:41.513 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Orders` SET `RestockedAt` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 02:19:41.928 +03:00 [INF] Order 17 auto-expired and restock scheduled
2025-09-10 02:19:42.939 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order - application/json 42
2025-09-10 02:19:42.949 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:19:43.097 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:19:43.105 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 02:19:43.107 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto]]] CreateOrder(E_Commerce.DtoModels.OrderDtos.CreateOrderDto) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 02:19:43.116 +03:00 [INF] Executing CreateOrder
2025-09-10 02:19:43.120 +03:00 [INF] Creating order from cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:19:43.269 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-10 02:19:43.412 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 02:19:43.495 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 02:19:43.506 +03:00 [INF] Checking if address 30 exists for customer: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:19:43.583 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__addressId_0='?' (DbType = Int32), @__customerId_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `CustomerAddresses` AS `c`
    WHERE ((`c`.`Id` = @__addressId_0) AND (`c`.`CustomerId` = @__customerId_1)) AND `c`.`DeletedAt` IS NULL)
2025-09-10 02:19:43.592 +03:00 [INF] Getting cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:19:43.594 +03:00 [INF] Getting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:19:43.695 +03:00 [WRN] No cache entries found for tags: [variantlist, variantdata]
2025-09-10 02:19:43.809 +03:00 [INF] Cache hit for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:19:43.833 +03:00 [INF] Cache hit for cart user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:19:43.838 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 02:19:43.915 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`, `p0`.`Id`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`Description`, `p0`.`DiscountId`, `p0`.`Gender`, `p0`.`IsActive`, `p0`.`ModifiedAt`, `p0`.`Name`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`SubCategoryId`, `p0`.`fitType`
FROM `ProductVariants` AS `p`
INNER JOIN `Products` AS `p0` ON `p`.`ProductId` = `p0`.`Id`
WHERE `p`.`Id` = 1
2025-09-10 02:19:44.008 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE `o`.`OrderNumber` = @__orderNumber_0)
2025-09-10 02:19:44.032 +03:00 [INF] Executing CreateAsync for entity Order
2025-09-10 02:19:44.057 +03:00 [INF] Order added successfully (pending save)
2025-09-10 02:19:44.147 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:19:44.153 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:19:44.213 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime), @p8='?' (Size = 500), @p9='?' (Size = 50), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Orders` (`CancelledAt`, `CreatedAt`, `CustomerAddressId`, `CustomerId`, `DeletedAt`, `DeliveredAt`, `DiscountAmount`, `ModifiedAt`, `Notes`, `OrderNumber`, `RestockedAt`, `ShippedAt`, `ShippingCost`, `Status`, `Subtotal`, `TaxAmount`, `Total`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Orders`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 02:19:44.302 +03:00 [INF] Executing CreateRangeAsync for entity OrderItem
2025-09-10 02:19:44.305 +03:00 [INF] 1 OrderItem entities added successfully (pending save)
2025-09-10 02:19:44.308 +03:00 [INF] Removing 19 from variant: 1
2025-09-10 02:19:44.309 +03:00 [INF] Executing GetByIdAsync for entity ProductVariant with ID: 1
2025-09-10 02:19:44.384 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 02:19:44.399 +03:00 [ERR] Error in RemoveQuntityAfterOrder for id: 1
System.NotSupportedException: Only public methods can be invoked in the background. Ensure your method has the `public` access modifier, and you aren't using explicit interface implementation.
   at Hangfire.Common.Job..ctor(Type type, MethodInfo method, IReadOnlyList`1 args, String queue) in C:\projects\hangfire-525\src\Hangfire.Core\Common\Job.cs:line 204
   at Hangfire.Common.Job.FromExpression(LambdaExpression methodCall, Type explicitType, String queue) in C:\projects\hangfire-525\src\Hangfire.Core\Common\Job.cs:line 457
   at Hangfire.Common.Job.FromExpression(Expression`1 methodCall, String queue) in C:\projects\hangfire-525\src\Hangfire.Core\Common\Job.cs:line 357
   at Hangfire.Common.Job.FromExpression(Expression`1 methodCall) in C:\projects\hangfire-525\src\Hangfire.Core\Common\Job.cs:line 352
   at Hangfire.BackgroundJobClientExtensions.Create(IBackgroundJobClient client, Expression`1 methodCall, IState state) in C:\projects\hangfire-525\src\Hangfire.Core\BackgroundJobClientExtensions.cs:line 541
   at Hangfire.BackgroundJobClientExtensions.Enqueue(IBackgroundJobClient client, Expression`1 methodCall) in C:\projects\hangfire-525\src\Hangfire.Core\BackgroundJobClientExtensions.cs:line 86
   at E_Commerce.Services.ProductVariantServices.ProductVariantCommandService.RemoveQuntityAfterOrder(Int32 id, Int32 quantity) in D:\project_fashion\E-Commerce-API-main\Services\ProductVariantServices\ProductVariantCommandService.cs:line 121
2025-09-10 02:19:44.754 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 02:19:45.179 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 02:19:45.514 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 02:19:45.519 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce) in 2403.7398ms
2025-09-10 02:19:45.537 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 02:19:45.538 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1390.8057ms
2025-09-10 02:19:45.571 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order - 409 314 application/json; charset=utf-8 2632.1505ms
2025-09-10 02:19:45.862 +03:00 [INF] Restocked inventory for order 17
2025-09-10 02:19:46.511 +03:00 [INF] Removing cache by tags: [collection, CollectionWithProduct]
2025-09-10 02:19:46.625 +03:00 [INF] Removing cache by tags: [subcategory, subcategorywithdata]
2025-09-10 02:19:46.655 +03:00 [INF] Removing cache by tags: [order]
2025-09-10 02:19:46.684 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-09-10 02:19:46.686 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-10 02:19:46.769 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 02:19:46.839 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Products` SET `Quantity` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 02:19:46.867 +03:00 [WRN] No cache entries found for tags: [order]
2025-09-10 02:19:46.939 +03:00 [WRN] No cache entries found for tags: [collection, CollectionWithProduct]
2025-09-10 02:19:47.055 +03:00 [WRN] No cache entries found for tags: [subcategory, subcategorywithdata]
2025-09-10 02:19:47.122 +03:00 [WRN] No cache entries found for tags: [variantlist, variantdata]
2025-09-10 02:19:47.194 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 02:19:47.200 +03:00 [INF] Removing cache by tags: [subcategory, subcategorywithdata]
2025-09-10 02:19:47.418 +03:00 [INF] Removing cache by tags: [collection, CollectionWithProduct]
2025-09-10 02:19:47.625 +03:00 [WRN] No cache entries found for tags: [subcategory, subcategorywithdata]
2025-09-10 02:19:47.855 +03:00 [WRN] No cache entries found for tags: [collection, CollectionWithProduct]
2025-09-10 02:19:48.211 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:19:48.221 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:19:49.024 +03:00 [INF] Removing cache by tag: CollectionWithProduct
2025-09-10 02:19:49.241 +03:00 [WRN] No cache entries found for tag: CollectionWithProduct
2025-09-10 02:19:49.449 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1238.1382ms
2025-09-10 02:19:49.904 +03:00 [INF] Removing cache by tag: subcategorywithdata
2025-09-10 02:19:50.132 +03:00 [WRN] No cache entries found for tag: subcategorywithdata
2025-09-10 02:19:50.761 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 02:19:51.199 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 02:19:52.162 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:19:52.182 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:19:53.602 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1440.6488ms
2025-09-10 02:19:56.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:19:56.158 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:19:57.534 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1382.7339ms
2025-09-10 02:19:57.803 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order - application/json 42
2025-09-10 02:19:57.817 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:19:57.966 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:19:57.970 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 02:19:57.973 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto]]] CreateOrder(E_Commerce.DtoModels.OrderDtos.CreateOrderDto) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 02:19:57.978 +03:00 [INF] Executing CreateOrder
2025-09-10 02:19:57.980 +03:00 [INF] Creating order from cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:19:58.273 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 02:19:58.355 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 02:19:58.365 +03:00 [INF] Checking if address 30 exists for customer: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:19:58.440 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__addressId_0='?' (DbType = Int32), @__customerId_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `CustomerAddresses` AS `c`
    WHERE ((`c`.`Id` = @__addressId_0) AND (`c`.`CustomerId` = @__customerId_1)) AND `c`.`DeletedAt` IS NULL)
2025-09-10 02:19:58.447 +03:00 [INF] Getting cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:19:58.449 +03:00 [INF] Getting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:19:58.662 +03:00 [INF] Cache hit for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:19:58.667 +03:00 [INF] Cache hit for cart user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:19:58.669 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 02:19:58.750 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`, `p0`.`Id`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`Description`, `p0`.`DiscountId`, `p0`.`Gender`, `p0`.`IsActive`, `p0`.`ModifiedAt`, `p0`.`Name`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`SubCategoryId`, `p0`.`fitType`
FROM `ProductVariants` AS `p`
INNER JOIN `Products` AS `p0` ON `p`.`ProductId` = `p0`.`Id`
WHERE `p`.`Id` = 1
2025-09-10 02:19:58.832 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE `o`.`OrderNumber` = @__orderNumber_0)
2025-09-10 02:19:58.844 +03:00 [INF] Executing CreateAsync for entity Order
2025-09-10 02:19:58.847 +03:00 [INF] Order added successfully (pending save)
2025-09-10 02:19:58.997 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime), @p8='?' (Size = 500), @p9='?' (Size = 50), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Orders` (`CancelledAt`, `CreatedAt`, `CustomerAddressId`, `CustomerId`, `DeletedAt`, `DeliveredAt`, `DiscountAmount`, `ModifiedAt`, `Notes`, `OrderNumber`, `RestockedAt`, `ShippedAt`, `ShippingCost`, `Status`, `Subtotal`, `TaxAmount`, `Total`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Orders`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 02:19:59.086 +03:00 [INF] Executing CreateRangeAsync for entity OrderItem
2025-09-10 02:19:59.090 +03:00 [INF] 1 OrderItem entities added successfully (pending save)
2025-09-10 02:19:59.114 +03:00 [INF] Removing 19 from variant: 1
2025-09-10 02:19:59.130 +03:00 [INF] Executing GetByIdAsync for entity ProductVariant with ID: 1
2025-09-10 02:19:59.206 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 02:19:59.218 +03:00 [ERR] Error in RemoveQuntityAfterOrder for id: 1
System.NotSupportedException: Only public methods can be invoked in the background. Ensure your method has the `public` access modifier, and you aren't using explicit interface implementation.
   at Hangfire.Common.Job..ctor(Type type, MethodInfo method, IReadOnlyList`1 args, String queue) in C:\projects\hangfire-525\src\Hangfire.Core\Common\Job.cs:line 204
   at Hangfire.Common.Job.FromExpression(LambdaExpression methodCall, Type explicitType, String queue) in C:\projects\hangfire-525\src\Hangfire.Core\Common\Job.cs:line 457
   at Hangfire.Common.Job.FromExpression(Expression`1 methodCall, String queue) in C:\projects\hangfire-525\src\Hangfire.Core\Common\Job.cs:line 357
   at Hangfire.Common.Job.FromExpression(Expression`1 methodCall) in C:\projects\hangfire-525\src\Hangfire.Core\Common\Job.cs:line 352
   at Hangfire.BackgroundJobClientExtensions.Create(IBackgroundJobClient client, Expression`1 methodCall, IState state) in C:\projects\hangfire-525\src\Hangfire.Core\BackgroundJobClientExtensions.cs:line 541
   at Hangfire.BackgroundJobClientExtensions.Enqueue(IBackgroundJobClient client, Expression`1 methodCall) in C:\projects\hangfire-525\src\Hangfire.Core\BackgroundJobClientExtensions.cs:line 86
   at E_Commerce.Services.ProductVariantServices.ProductVariantCommandService.RemoveQuntityAfterOrder(Int32 id, Int32 quantity) in D:\project_fashion\E-Commerce-API-main\Services\ProductVariantServices\ProductVariantCommandService.cs:line 121
2025-09-10 02:20:00.147 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:20:00.156 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:20:00.191 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 02:20:00.197 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce) in 2219.9049ms
2025-09-10 02:20:00.202 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 02:20:00.219 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order - 409 314 application/json; charset=utf-8 2415.448ms
2025-09-10 02:20:01.559 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.4743ms
2025-09-10 02:20:04.152 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:20:04.171 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:20:05.416 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1264.489ms
2025-09-10 02:20:08.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:20:08.162 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:20:09.563 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.1867ms
2025-09-10 02:20:11.571 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:20:11.591 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:20:11.971 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - null null
2025-09-10 02:20:12.969 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1398.0282ms
2025-09-10 02:20:14.369 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - 200 null text/html 2398.2979ms
2025-09-10 02:20:14.425 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:20:14.425 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:20:14.434 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 8.5014ms
2025-09-10 02:20:14.507 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 81.7817ms
2025-09-10 02:20:16.499 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:20:16.516 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:20:17.895 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1395.9568ms
2025-09-10 02:20:19.919 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:20:19.934 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:20:21.320 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1400.9792ms
2025-09-10 02:20:23.345 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:20:23.375 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:20:24.759 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1413.6807ms
2025-09-10 02:20:26.780 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:20:26.800 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:20:28.181 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1400.9845ms
2025-09-10 02:20:30.194 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:20:30.211 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:20:31.592 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1398.6536ms
2025-09-10 02:20:33.609 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:20:33.620 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:20:35.002 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1392.5001ms
2025-09-10 02:20:37.021 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:20:37.053 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:20:38.434 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1412.8447ms
2025-09-10 02:20:40.450 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:20:40.461 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:20:41.855 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.4142ms
2025-09-10 02:20:44.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:20:44.167 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:20:45.545 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1391.5026ms
2025-09-10 02:20:47.561 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:20:47.590 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:20:48.886 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/details/2341 - null null
2025-09-10 02:20:48.972 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.4474ms
2025-09-10 02:20:50.790 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/details/2341 - 200 null text/html 1903.8327ms
2025-09-10 02:20:50.821 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:20:50.827 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:20:50.903 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 81.604ms
2025-09-10 02:20:50.954 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 126.9771ms
2025-09-10 02:20:52.925 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:20:52.956 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:20:54.335 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.2659ms
2025-09-10 02:20:56.353 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:20:56.382 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:20:57.768 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1415.6203ms
2025-09-10 02:20:59.794 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:20:59.805 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:21:01.196 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1401.442ms
2025-09-10 02:21:03.224 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:21:03.234 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:21:04.654 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1430.2712ms
2025-09-10 02:21:06.678 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:21:06.687 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:21:08.064 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1386.619ms
2025-09-10 02:21:10.075 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:21:10.087 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:21:11.492 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1416.8811ms
2025-09-10 02:21:13.502 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:21:13.513 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:21:14.933 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1431.029ms
2025-09-10 02:21:16.947 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:21:16.957 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:21:18.364 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1416.7186ms
2025-09-10 02:21:19.912 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:21:19.967 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 54.1608ms
2025-09-10 02:21:22.006 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:21:22.029 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:21:22.821 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/details/2336 - null null
2025-09-10 02:21:23.441 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1434.8752ms
2025-09-10 02:21:24.677 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/details/2336 - 200 null text/html 1855.5925ms
2025-09-10 02:21:24.707 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:21:24.726 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:21:24.759 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 32.9954ms
2025-09-10 02:21:24.754 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 47.038ms
2025-09-10 02:21:26.806 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:21:26.814 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:21:28.190 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1383.6514ms
2025-09-10 02:21:28.262 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:21:28.308 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 45.5583ms
2025-09-10 02:21:30.341 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:21:30.349 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:21:31.720 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1379.7454ms
2025-09-10 02:21:33.483 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/details/2324 - null null
2025-09-10 02:21:33.736 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:21:33.743 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:21:35.116 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1380.9421ms
2025-09-10 02:21:35.320 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/details/2324 - 200 null text/html 1837.422ms
2025-09-10 02:21:35.343 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:21:35.353 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:21:35.359 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 15.4492ms
2025-09-10 02:21:35.401 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 48.3249ms
2025-09-10 02:21:37.376 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:21:37.392 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:21:38.573 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:21:38.588 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 14.5572ms
2025-09-10 02:21:38.803 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1426.8235ms
2025-09-10 02:21:40.489 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/details/2325 - null null
2025-09-10 02:21:40.636 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:21:40.645 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:21:42.021 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1384.3468ms
2025-09-10 02:21:42.334 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/details/2325 - 200 null text/html 1845.2094ms
2025-09-10 02:21:42.358 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:21:42.379 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:21:42.405 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 47.3068ms
2025-09-10 02:21:42.423 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 43.3196ms
2025-09-10 02:21:44.316 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:21:44.330 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 14.3418ms
2025-09-10 02:21:46.378 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:21:46.394 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:21:47.794 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1415.7488ms
2025-09-10 02:21:49.821 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:21:49.842 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:21:51.386 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1565.4744ms
2025-09-10 02:21:53.410 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:21:53.424 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:21:54.809 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1398.987ms
2025-09-10 02:21:56.824 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:21:56.839 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:21:58.224 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1399.4582ms
2025-09-10 02:22:00.244 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:22:00.273 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:22:01.683 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1439.4338ms
2025-09-10 02:22:03.709 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:22:03.731 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:22:05.130 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1421.1423ms
2025-09-10 02:22:07.137 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:22:07.146 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:22:08.522 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1384.5702ms
2025-09-10 02:22:10.542 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:22:10.550 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:22:11.943 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1401.3817ms
2025-09-10 02:22:13.953 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:22:13.965 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:22:15.346 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1392.9662ms
2025-09-10 02:22:17.363 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:22:17.383 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:22:18.754 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1390.679ms
2025-09-10 02:22:20.762 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:22:20.771 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:22:22.140 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1378.0244ms
2025-09-10 02:22:24.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:22:24.187 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:22:25.566 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.6991ms
2025-09-10 02:22:27.583 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:22:27.608 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:22:28.991 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1407.8133ms
2025-09-10 02:22:31.005 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:22:31.021 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:22:32.396 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1390.9383ms
2025-09-10 02:22:34.412 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:22:34.422 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:22:35.805 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1393.5441ms
2025-09-10 02:22:37.823 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:22:37.855 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:22:39.243 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1419.9393ms
2025-09-10 02:22:41.263 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:22:41.278 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:22:42.658 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1395.4766ms
2025-09-10 02:22:44.681 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:22:44.707 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:22:46.110 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1429.2612ms
2025-09-10 02:22:48.125 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:22:48.137 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:22:49.513 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1387.357ms
2025-09-10 02:22:51.534 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:22:51.552 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:22:52.954 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1420.0131ms
2025-09-10 02:22:54.976 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:22:54.991 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:22:56.375 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1398.8862ms
2025-09-10 02:22:58.392 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:22:58.417 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:22:59.797 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1404.9685ms
2025-09-10 02:23:01.809 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:23:01.816 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:23:03.191 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1381.4135ms
2025-09-10 02:24:16.486 +03:00 [INF] DB tables already exist. Exit install
2025-09-10 02:24:17.835 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-10 02:24:18.801 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-10 02:24:19.480 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-10 02:24:19.653 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-09-10 02:24:19.674 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-10 02:24:19.699 +03:00 [INF] Starting data seeding...
2025-09-10 02:24:19.729 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-10 02:24:20.401 +03:00 [INF] Executed DbCommand (154ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-10 02:24:20.532 +03:00 [INF] Role 'Admin' already exists.
2025-09-10 02:24:20.689 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-10 02:24:20.696 +03:00 [INF] Role 'User' already exists.
2025-09-10 02:24:20.865 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-10 02:24:21.013 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-09-10 02:24:21.024 +03:00 [INF] Data seeding completed successfully.
2025-09-10 02:24:22.686 +03:00 [INF] Now listening on: http://localhost:5069
2025-09-10 02:24:22.783 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-09-10 02:24:22.807 +03:00 [INF] Using the following options for SQL Server job storage:
2025-09-10 02:24:22.822 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-09-10 02:24:22.824 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-09-10 02:24:22.851 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-10 02:24:22.859 +03:00 [INF] Hosting environment: Development
2025-09-10 02:24:22.863 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-09-10 02:24:23.021 +03:00 [INF] Server mrrobot:6592:d8c4f5ce successfully announced in 153.1008 ms
2025-09-10 02:24:23.033 +03:00 [INF] Server mrrobot:6592:d8c4f5ce is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-09-10 02:24:23.354 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-09-10 02:24:23.435 +03:00 [INF] Server mrrobot:6592:d8c4f5ce all the dispatchers started
2025-09-10 02:24:24.378 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 1025.0014ms
2025-09-10 02:24:24.937 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-09-10 02:24:24.947 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 10.0756ms
2025-09-10 02:24:24.972 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:24:24.979 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 7.151ms
2025-09-10 02:24:25.001 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:24:25.090 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 88.9924ms
2025-09-10 02:24:25.166 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-09-10 02:24:25.455 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 288.4058ms
2025-09-10 02:24:30.338 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - null null
2025-09-10 02:24:30.513 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-10 02:24:30.707 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:24:30.914 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:24:30.935 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.GetOrders (E-Commerce)'
2025-09-10 02:24:30.967 +03:00 [INF] Route matched with {action = "GetOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.OrderDtos.OrderListDto]]]] GetOrders(System.String, System.Nullable`1[System.Boolean], Int32, Int32, System.Nullable`1[E_Commerce.Enums.OrderStatus]) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 02:24:31.375 +03:00 [INF] Executing GetOrders: role: Admin, userId: , deleted: , page: 1, size: 10, status: 
2025-09-10 02:24:31.384 +03:00 [INF] Filtering orders - UserId: null, Deleted: null, Page: 1, PageSize: 10, Status: null
2025-09-10 02:24:31.393 +03:00 [INF] Getting cache for key: order:filter:user:all_deleted:all_page:1_size:10_status:all
2025-09-10 02:24:31.614 +03:00 [WRN] Cache miss for key: order:filter:user:all_deleted:all_page:1_size:10_status:all
2025-09-10 02:24:31.626 +03:00 [INF] Execute GetAll for entity Order
2025-09-10 02:24:31.908 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`OrderNumber`, `t0`.`Name`, `t`.`Status`, `t`.`Total`, `t`.`CreatedAt`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`CustomerId`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Total`
    FROM `Orders` AS `o`
    ORDER BY `o`.`CreatedAt` DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
INNER JOIN (
    SELECT `a`.`Id`, `a`.`Name`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Discriminator` = 'Customer'
) AS `t0` ON `t`.`CustomerId` = `t0`.`Id`
ORDER BY `t`.`CreatedAt` DESC
2025-09-10 02:24:33.009 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.OrderDtos.OrderListDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 02:24:33.034 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.GetOrders (E-Commerce) in 2050.4636ms
2025-09-10 02:24:33.039 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.GetOrders (E-Commerce)'
2025-09-10 02:24:33.046 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - 200 1731 application/json; charset=utf-8 2708.0549ms
2025-09-10 02:24:35.501 +03:00 [INF] Setting cache for key: order:filter:user:all_deleted:all_page:1_size:10_status:all
2025-09-10 02:24:35.768 +03:00 [INF] Cache set successfully for key: order:filter:user:all_deleted:all_page:1_size:10_status:all with tags: [order]
2025-09-10 02:25:03.807 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants - null null
2025-09-10 02:25:04.056 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:25:04.209 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:25:04.213 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.SearchVariants (E-Commerce)'
2025-09-10 02:25:04.228 +03:00 [INF] Route matched with {action = "SearchVariants", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]]] SearchVariants(Int32, System.String, System.Nullable`1[System.Int32], System.Nullable`1[System.Int32], System.Nullable`1[E_Commerce.Enums.VariantSize], System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-09-10 02:25:04.259 +03:00 [INF] Searching variants for product 1 with filters: color=, length=, waist=, size=, isActive=, deletedOnly=
2025-09-10 02:25:04.262 +03:00 [INF] Getting cache for key: product:1:variants:search:color::length::waist::size::active::deleted:
2025-09-10 02:25:04.480 +03:00 [WRN] Cache miss for key: product:1:variants:search:color::length::waist::size::active::deleted:
2025-09-10 02:25:04.483 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 02:25:04.649 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__productId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`ProductId` = @__productId_0
2025-09-10 02:25:04.691 +03:00 [INF] Caching search results for product 1
2025-09-10 02:25:05.656 +03:00 [INF] Successfully retrieved 10 variants for product 1
2025-09-10 02:25:05.665 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 02:25:05.680 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.SearchVariants (E-Commerce) in 1443.3241ms
2025-09-10 02:25:05.694 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.SearchVariants (E-Commerce)'
2025-09-10 02:25:05.760 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants - 200 1950 application/json; charset=utf-8 1953.0018ms
2025-09-10 02:25:06.986 +03:00 [INF] Setting cache for key: product:1:variants:search:color::length::waist::size::active::deleted:
2025-09-10 02:25:07.250 +03:00 [INF] Cache set successfully for key: product:1:variants:search:color::length::waist::size::active::deleted: with tags: [product:1, variantdata]
2025-09-10 02:25:28.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order - application/json 42
2025-09-10 02:25:28.256 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:25:28.413 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:25:28.418 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 02:25:28.425 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto]]] CreateOrder(E_Commerce.DtoModels.OrderDtos.CreateOrderDto) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 02:25:28.467 +03:00 [INF] Executing CreateOrder
2025-09-10 02:25:28.482 +03:00 [INF] Creating order from cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:25:29.322 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 02:25:29.489 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 02:25:29.729 +03:00 [INF] Checking if address 30 exists for customer: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:25:29.811 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__addressId_0='?' (DbType = Int32), @__customerId_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `CustomerAddresses` AS `c`
    WHERE ((`c`.`Id` = @__addressId_0) AND (`c`.`CustomerId` = @__customerId_1)) AND `c`.`DeletedAt` IS NULL)
2025-09-10 02:25:29.833 +03:00 [INF] Getting cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:25:29.837 +03:00 [INF] Getting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:25:30.063 +03:00 [INF] Cache hit for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:25:30.091 +03:00 [INF] Cache hit for cart user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:25:30.097 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 02:25:30.225 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`, `p0`.`Id`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`Description`, `p0`.`DiscountId`, `p0`.`Gender`, `p0`.`IsActive`, `p0`.`ModifiedAt`, `p0`.`Name`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`SubCategoryId`, `p0`.`fitType`
FROM `ProductVariants` AS `p`
INNER JOIN `Products` AS `p0` ON `p`.`ProductId` = `p0`.`Id`
WHERE `p`.`Id` = 1
2025-09-10 02:25:30.327 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE `o`.`OrderNumber` = @__orderNumber_0)
2025-09-10 02:25:30.344 +03:00 [INF] Executing CreateAsync for entity Order
2025-09-10 02:25:30.494 +03:00 [INF] Order added successfully (pending save)
2025-09-10 02:25:30.793 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime), @p8='?' (Size = 500), @p9='?' (Size = 50), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Orders` (`CancelledAt`, `CreatedAt`, `CustomerAddressId`, `CustomerId`, `DeletedAt`, `DeliveredAt`, `DiscountAmount`, `ModifiedAt`, `Notes`, `OrderNumber`, `RestockedAt`, `ShippedAt`, `ShippingCost`, `Status`, `Subtotal`, `TaxAmount`, `Total`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Orders`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 02:25:30.911 +03:00 [INF] Executing CreateRangeAsync for entity OrderItem
2025-09-10 02:25:30.941 +03:00 [INF] 1 OrderItem entities added successfully (pending save)
2025-09-10 02:25:30.953 +03:00 [INF] Removing 19 from variant: 1
2025-09-10 02:25:30.958 +03:00 [INF] Executing GetByIdAsync for entity ProductVariant with ID: 1
2025-09-10 02:25:31.044 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 02:25:32.960 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE ProductVariants SET Quantity = Quantity - @p0 WHERE Id = @p1 AND Quantity >= @p0
2025-09-10 02:25:32.976 +03:00 [INF] Clearing cart: 3
2025-09-10 02:25:33.060 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__cartId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE `c`.`CartId` = @__cartId_0
2025-09-10 02:25:33.104 +03:00 [INF] Cart 3 cleared successfully
2025-09-10 02:25:33.297 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Decimal), @p10='?' (DbType = Decimal), @p13='?' (DbType = Int32), @p11='?' (DbType = Boolean), @p12='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM `CartItems`
WHERE `Id` = @p0;
SELECT ROW_COUNT();

INSERT INTO `OrderItem` (`CreatedAt`, `DeletedAt`, `ModifiedAt`, `OrderId`, `OrderedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `TotalPrice`, `UnitPrice`)
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
SELECT `Id`
FROM `OrderItem`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

UPDATE `ProductVariants` SET `IsActive` = @p11, `Quantity` = @p12
WHERE `Id` = @p13;
SELECT ROW_COUNT();
2025-09-10 02:25:33.473 +03:00 [INF] Execute AddUserOpreationAsync
2025-09-10 02:25:33.476 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-09-10 02:25:33.498 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-09-10 02:25:33.502 +03:00 [INF] Execute GetAll for entity Order
2025-09-10 02:25:33.745 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__createdOrder_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`ModifiedAt`, `t0`.`OrderNumber`, `t0`.`Status`, `t0`.`Subtotal`, `t0`.`TaxAmount`, `t0`.`ShippingCost`, `t0`.`DiscountAmount`, `t0`.`Total`, `t0`.`Notes`, `t0`.`DeletedAt`, `t0`.`ShippedAt`, `t0`.`DeliveredAt`, `t0`.`CancelledAt`, `t0`.`c`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Email`, `t0`.`PhoneNumber`, `t1`.`Id`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`Quantity`, `t1`.`UnitPrice`, `t1`.`TotalPrice`, `t1`.`OrderedAt`, `t1`.`Id0`, `t1`.`Name`, `t1`.`Price`, `t1`.`IsActive`, `t1`.`FinalPrice`, `t1`.`DiscountPrecentage`, `t1`.`MainImageUrl`, `t1`.`Id1`, `t1`.`Color`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`Size`, `t1`.`DeletedAt`, `t1`.`Length`, `t1`.`Waist`, `t1`.`Id2`, `t1`.`Id3`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`ModifiedAt`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`ShippingCost`, `o`.`DiscountAmount`, `o`.`Total`, `o`.`Notes`, `o`.`DeletedAt`, `o`.`ShippedAt`, `o`.`DeliveredAt`, `o`.`CancelledAt`, FALSE AS `c`, `t`.`Id` AS `Id0`, `t`.`Name`, `t`.`Email`, `t`.`PhoneNumber`
    FROM `Orders` AS `o`
    INNER JOIN (
        SELECT `a`.`Id`, `a`.`Email`, `a`.`PhoneNumber`, `a`.`Name`
        FROM `AspNetUsers` AS `a`
        WHERE `a`.`Discriminator` = 'Customer'
    ) AS `t` ON `o`.`CustomerId` = `t`.`Id`
    WHERE `o`.`Id` = @__createdOrder_Id_0
    LIMIT 1
) AS `t0`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`CreatedAt`, `o0`.`ModifiedAt`, `o0`.`Quantity`, `o0`.`UnitPrice`, `o0`.`TotalPrice`, `o0`.`OrderedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND `i`.`DeletedAt` IS NULL
        LIMIT 1), '') AS `MainImageUrl`, `o0`.`ProductVariantId` AS `Id1`, `p0`.`Color`, COALESCE(`p0`.`CreatedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `CreatedAt0`, COALESCE(`p0`.`ModifiedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `ModifiedAt0`, `p0`.`Size`, `p0`.`DeletedAt`, COALESCE(`p0`.`Length`, 0) AS `Length`, COALESCE(`p0`.`Waist`, 0) AS `Waist`, `d`.`Id` AS `Id2`, `p0`.`Id` AS `Id3`, `o0`.`OrderId`
    FROM `OrderItem` AS `o0`
    INNER JOIN `Products` AS `p` ON `o0`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    INNER JOIN `ProductVariants` AS `p0` ON `o0`.`ProductVariantId` = `p0`.`Id`
) AS `t1` ON `t0`.`Id` = `t1`.`OrderId`
ORDER BY `t0`.`Id`, `t0`.`Id0`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id2`
2025-09-10 02:25:37.442 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 02:25:37.476 +03:00 [INF] Removing cache by tags: [order]
2025-09-10 02:25:37.541 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-10 02:25:37.593 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__productId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE (`p`.`ProductId` = @__productId_0) AND `p`.`DeletedAt` IS NULL
2025-09-10 02:25:37.629 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-09-10 02:25:37.690 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 02:25:37.860 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Products` SET `Quantity` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 02:25:38.128 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 02:25:38.128 +03:00 [INF] Removed 1 cache entries for tags: [order]
2025-09-10 02:25:38.400 +03:00 [INF] Removed 1 cache entries for tags: [variantlist, variantdata]
2025-09-10 02:25:38.557 +03:00 [INF] Removing cache by tags: [collection, CollectionWithProduct]
2025-09-10 02:25:38.986 +03:00 [WRN] No cache entries found for tags: [collection, CollectionWithProduct]
2025-09-10 02:25:38.993 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 02:25:39.033 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce) in 10604.471ms
2025-09-10 02:25:39.036 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 02:25:39.044 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order - 201 1433 application/json; charset=utf-8 10895.1696ms
2025-09-10 02:25:40.449 +03:00 [INF] Removing cache by tags: [subcategory, subcategorywithdata]
2025-09-10 02:25:40.469 +03:00 [INF] Removing cache by tag: CollectionWithProduct
2025-09-10 02:25:40.703 +03:00 [WRN] No cache entries found for tag: CollectionWithProduct
2025-09-10 02:25:40.911 +03:00 [WRN] No cache entries found for tags: [subcategory, subcategorywithdata]
2025-09-10 02:25:41.002 +03:00 [INF] Removing cache by tag: subcategorywithdata
2025-09-10 02:25:41.215 +03:00 [WRN] No cache entries found for tag: subcategorywithdata
2025-09-10 02:25:41.842 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 02:25:42.286 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 02:25:50.842 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants - null null
2025-09-10 02:25:50.852 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:25:51.006 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:25:51.013 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.SearchVariants (E-Commerce)'
2025-09-10 02:25:51.018 +03:00 [INF] Route matched with {action = "SearchVariants", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]]] SearchVariants(Int32, System.String, System.Nullable`1[System.Int32], System.Nullable`1[System.Int32], System.Nullable`1[E_Commerce.Enums.VariantSize], System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-09-10 02:25:51.026 +03:00 [INF] Searching variants for product 1 with filters: color=, length=, waist=, size=, isActive=, deletedOnly=
2025-09-10 02:25:51.030 +03:00 [INF] Getting cache for key: product:1:variants:search:color::length::waist::size::active::deleted:
2025-09-10 02:25:51.245 +03:00 [WRN] Cache miss for key: product:1:variants:search:color::length::waist::size::active::deleted:
2025-09-10 02:25:51.249 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 02:25:51.398 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__productId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`ProductId` = @__productId_0
2025-09-10 02:25:51.408 +03:00 [INF] Caching search results for product 1
2025-09-10 02:25:52.308 +03:00 [INF] Successfully retrieved 10 variants for product 1
2025-09-10 02:25:52.311 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 02:25:52.314 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.SearchVariants (E-Commerce) in 1290.9127ms
2025-09-10 02:25:52.318 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.SearchVariants (E-Commerce)'
2025-09-10 02:25:52.321 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants - 200 1950 application/json; charset=utf-8 1478.4022ms
2025-09-10 02:25:53.647 +03:00 [INF] Setting cache for key: product:1:variants:search:color::length::waist::size::active::deleted:
2025-09-10 02:25:53.871 +03:00 [INF] Cache set successfully for key: product:1:variants:search:color::length::waist::size::active::deleted: with tags: [product:1, variantdata]
2025-09-10 02:26:03.282 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - null null
2025-09-10 02:26:08.010 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - 200 null text/html 4727.9675ms
2025-09-10 02:26:08.043 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/css-dark18180521700294 - null null
2025-09-10 02:26:08.043 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/js181801740146021 - null null
2025-09-10 02:26:08.046 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:26:08.046 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:26:08.062 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/css18180147995810 - null null
2025-09-10 02:26:08.072 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/css-dark18180521700294 - 200 null text/css 29.54ms
2025-09-10 02:26:08.103 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/js181801740146021 - 200 null application/javascript 59.3172ms
2025-09-10 02:26:08.108 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 61.597ms
2025-09-10 02:26:08.115 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 68.984ms
2025-09-10 02:26:08.124 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/css18180147995810 - 200 null text/css 61.6334ms
2025-09-10 02:26:10.410 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:26:10.430 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:26:11.886 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1475.9728ms
2025-09-10 02:26:13.903 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:26:13.926 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:26:15.321 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1417.9094ms
2025-09-10 02:26:17.328 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:26:17.337 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:26:18.759 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1430.8107ms
2025-09-10 02:26:20.771 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:26:20.778 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:26:22.178 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1406.8163ms
2025-09-10 02:26:24.209 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:26:24.228 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:26:25.611 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1401.9193ms
2025-09-10 02:26:27.631 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:26:27.640 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:26:29.011 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1379.3933ms
2025-09-10 02:26:31.021 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:26:31.040 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:26:32.437 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1415.6839ms
2025-09-10 02:26:34.448 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:26:34.458 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:26:35.837 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.4663ms
2025-09-10 02:26:37.848 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:26:37.857 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:26:39.254 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1406.7881ms
2025-09-10 02:26:41.266 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:26:41.293 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:26:41.743 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 02:26:42.704 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1437.8923ms
2025-09-10 02:26:43.994 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2251.3074ms
2025-09-10 02:26:44.021 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:26:44.099 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:26:44.131 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 110.8356ms
2025-09-10 02:26:44.151 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 52.1932ms
2025-09-10 02:26:46.180 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:26:46.189 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:26:46.828 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - application/x-www-form-urlencoded; charset=UTF-8 15
2025-09-10 02:26:46.840 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:26:47.564 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1383.9828ms
2025-09-10 02:26:47.941 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - 204 null null 1113.1582ms
2025-09-10 02:26:47.967 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 02:26:49.577 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:26:49.587 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:26:50.016 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 20
2025-09-10 02:26:50.102 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-09-10 02:26:50.254 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Orders` SET `Status` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 02:26:50.306 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2338.2743ms
2025-09-10 02:26:50.331 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:26:50.331 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:26:50.377 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 45.5937ms
2025-09-10 02:26:50.382 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 50.6534ms
2025-09-10 02:26:50.478 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - null null
2025-09-10 02:26:50.839 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1261.8179ms
2025-09-10 02:26:52.403 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:26:52.417 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:26:52.677 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - 200 null text/html 2198.8755ms
2025-09-10 02:26:52.734 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:26:52.784 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:26:52.820 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 86.1762ms
2025-09-10 02:26:52.847 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 63.1199ms
2025-09-10 02:26:53.195 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 20
2025-09-10 02:26:53.343 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-09-10 02:26:53.350 +03:00 [INF] Execute GetAll for entity OrderItem
2025-09-10 02:26:53.447 +03:00 [INF] Removing cache by tags: [order]
2025-09-10 02:26:53.503 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`ProductVariantId`, `o`.`Quantity`
FROM `OrderItem` AS `o`
WHERE `o`.`OrderId` = @__orderId_0
2025-09-10 02:26:53.513 +03:00 [INF] Adding quantity for variant: 1
2025-09-10 02:26:53.645 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1242.2144ms
2025-09-10 02:26:53.663 +03:00 [WRN] No cache entries found for tags: [order]
2025-09-10 02:26:53.734 +03:00 [INF] Executing GetByIdAsync for entity ProductVariant with ID: 1
2025-09-10 02:26:53.810 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 02:26:53.962 +03:00 [INF] Executed DbCommand (71ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `ProductVariants` SET `Quantity` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 02:26:54.876 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:26:54.886 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:26:54.977 +03:00 [INF] Quantity for variant 1 restored to 19
2025-09-10 02:26:55.125 +03:00 [INF] Executed DbCommand (71ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Orders` SET `RestockedAt` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 02:26:55.601 +03:00 [INF] Order 20 auto-expired and restock scheduled
2025-09-10 02:26:55.611 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-10 02:26:55.816 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 02:26:56.161 +03:00 [INF] Removing cache by tags: [collection, CollectionWithProduct]
2025-09-10 02:26:56.242 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 02:26:56.257 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1380.7664ms
2025-09-10 02:26:56.468 +03:00 [INF] Removed 1 cache entries for tags: [variantlist, variantdata]
2025-09-10 02:26:56.598 +03:00 [WRN] No cache entries found for tags: [collection, CollectionWithProduct]
2025-09-10 02:26:56.641 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-09-10 02:26:56.805 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Products` SET `Quantity` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 02:26:58.268 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:26:58.277 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:26:58.445 +03:00 [INF] Removing cache by tags: [subcategory, subcategorywithdata]
2025-09-10 02:26:58.473 +03:00 [INF] Removing cache by tags: [order]
2025-09-10 02:26:58.541 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-10 02:26:58.687 +03:00 [WRN] No cache entries found for tags: [order]
2025-09-10 02:26:58.872 +03:00 [WRN] No cache entries found for tags: [subcategory, subcategorywithdata]
2025-09-10 02:26:58.981 +03:00 [WRN] No cache entries found for tags: [variantlist, variantdata]
2025-09-10 02:26:59.348 +03:00 [INF] Removing cache by tag: CollectionWithProduct
2025-09-10 02:26:59.404 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 02:26:59.461 +03:00 [INF] Restocked inventory for order 20
2025-09-10 02:26:59.508 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1240.1527ms
2025-09-10 02:26:59.570 +03:00 [WRN] No cache entries found for tag: CollectionWithProduct
2025-09-10 02:26:59.833 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 02:27:00.203 +03:00 [INF] Removing cache by tag: subcategorywithdata
2025-09-10 02:27:00.221 +03:00 [INF] Removing cache by tags: [collection, CollectionWithProduct]
2025-09-10 02:27:00.418 +03:00 [WRN] No cache entries found for tag: subcategorywithdata
2025-09-10 02:27:00.648 +03:00 [WRN] No cache entries found for tags: [collection, CollectionWithProduct]
2025-09-10 02:27:00.716 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 02:27:00.925 +03:00 [INF] Removing cache by tags: [subcategory, subcategorywithdata]
2025-09-10 02:27:01.144 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 02:27:01.353 +03:00 [WRN] No cache entries found for tags: [subcategory, subcategorywithdata]
2025-09-10 02:27:01.527 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:27:01.536 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:27:02.929 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1401.6759ms
2025-09-10 02:27:03.011 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - null null
2025-09-10 02:27:04.932 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - 200 null text/html 1920.6017ms
2025-09-10 02:27:04.945 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:27:04.955 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:27:04.960 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:27:04.967 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:27:05.001 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 46.577ms
2025-09-10 02:27:05.032 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 72.078ms
2025-09-10 02:27:05.035 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 499 null null 90.6996ms
2025-09-10 02:27:07.016 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:27:07.027 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:27:08.417 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1401.012ms
2025-09-10 02:27:08.555 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - null null
2025-09-10 02:27:10.437 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:27:10.447 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:27:11.071 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - 200 null text/html 2516.0281ms
2025-09-10 02:27:11.093 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:27:11.104 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:27:11.188 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 94.9543ms
2025-09-10 02:27:11.196 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 91.5291ms
2025-09-10 02:27:11.823 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1385.9372ms
2025-09-10 02:27:13.259 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:27:13.277 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:27:14.656 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1396.9077ms
2025-09-10 02:27:16.663 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:27:16.674 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:27:18.053 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1389.3974ms
2025-09-10 02:27:20.066 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:27:20.075 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:27:21.469 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1402.5041ms
2025-09-10 02:27:23.489 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:27:23.502 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:27:24.894 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.9332ms
2025-09-10 02:27:26.909 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:27:26.917 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:27:28.306 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1397.6076ms
2025-09-10 02:27:30.317 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:27:30.330 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:27:31.704 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1387.3755ms
2025-09-10 02:27:33.724 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:27:33.934 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:27:34.125 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants - null null
2025-09-10 02:27:34.209 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:27:34.362 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:27:34.368 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.SearchVariants (E-Commerce)'
2025-09-10 02:27:34.370 +03:00 [INF] Route matched with {action = "SearchVariants", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]]] SearchVariants(Int32, System.String, System.Nullable`1[System.Int32], System.Nullable`1[System.Int32], System.Nullable`1[E_Commerce.Enums.VariantSize], System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-09-10 02:27:34.382 +03:00 [INF] Searching variants for product 1 with filters: color=, length=, waist=, size=, isActive=, deletedOnly=
2025-09-10 02:27:34.385 +03:00 [INF] Getting cache for key: product:1:variants:search:color::length::waist::size::active::deleted:
2025-09-10 02:27:34.599 +03:00 [WRN] Cache miss for key: product:1:variants:search:color::length::waist::size::active::deleted:
2025-09-10 02:27:34.602 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 02:27:34.751 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__productId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`ProductId` = @__productId_0
2025-09-10 02:27:34.764 +03:00 [INF] Caching search results for product 1
2025-09-10 02:27:35.325 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1600.6968ms
2025-09-10 02:27:35.652 +03:00 [INF] Successfully retrieved 10 variants for product 1
2025-09-10 02:27:35.654 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 02:27:35.657 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.SearchVariants (E-Commerce) in 1280.2224ms
2025-09-10 02:27:35.673 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.SearchVariants (E-Commerce)'
2025-09-10 02:27:35.683 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants - 200 1951 application/json; charset=utf-8 1557.9347ms
2025-09-10 02:27:37.346 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:27:37.363 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:27:38.737 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1390.9998ms
2025-09-10 02:27:40.627 +03:00 [INF] Setting cache for key: product:1:variants:search:color::length::waist::size::active::deleted:
2025-09-10 02:27:40.746 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:27:40.755 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:27:40.857 +03:00 [INF] Cache set successfully for key: product:1:variants:search:color::length::waist::size::active::deleted: with tags: [product:1, variantdata]
2025-09-10 02:27:42.004 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1257.7799ms
2025-09-10 02:27:44.010 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:27:44.021 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:27:44.159 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/processing - null null
2025-09-10 02:27:45.394 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1383.7504ms
2025-09-10 02:27:46.950 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/processing - 200 null text/html 2791.0171ms
2025-09-10 02:27:46.972 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:27:47.016 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:27:47.067 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 95.0424ms
2025-09-10 02:27:47.085 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 67.6264ms
2025-09-10 02:27:47.689 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - null null
2025-09-10 02:27:49.095 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:27:49.104 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:27:50.061 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - 200 null text/html 2372.129ms
2025-09-10 02:27:50.090 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:27:50.091 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:27:50.151 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 60.6688ms
2025-09-10 02:27:50.174 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 83.1786ms
2025-09-10 02:27:50.484 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1389.1128ms
2025-09-10 02:27:52.182 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:27:52.192 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:27:53.594 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.3873ms
2025-09-10 02:27:55.615 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:27:55.630 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:27:57.024 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.8009ms
2025-09-10 02:27:59.035 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:27:59.041 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:28:00.440 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1404.451ms
2025-09-10 02:28:02.451 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:28:02.464 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:28:03.849 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1397.7297ms
2025-09-10 02:28:05.712 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/failed - null null
2025-09-10 02:28:05.857 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:28:05.866 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:28:06.672 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/deleted - null null
2025-09-10 02:28:07.297 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1439.8278ms
2025-09-10 02:28:08.049 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/failed - 200 null text/html 2337.2316ms
2025-09-10 02:28:08.956 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/deleted - 200 null text/html 2283.7897ms
2025-09-10 02:28:08.978 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:28:08.981 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:28:08.991 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 12.7567ms
2025-09-10 02:28:09.040 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 59.1734ms
2025-09-10 02:28:11.028 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:28:11.038 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:28:11.472 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - null null
2025-09-10 02:28:12.459 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1430.5493ms
2025-09-10 02:28:13.109 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - 200 null text/html 1636.8845ms
2025-09-10 02:28:13.133 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:28:13.134 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:28:13.148 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 15.2238ms
2025-09-10 02:28:13.190 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 56.0984ms
2025-09-10 02:28:15.168 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:28:15.185 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:28:16.574 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1406.0448ms
2025-09-10 02:28:18.596 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:28:18.603 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:28:20.000 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1403.9998ms
2025-09-10 02:28:22.018 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:28:22.029 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:28:23.393 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1375.3071ms
2025-09-10 02:28:25.404 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:28:25.421 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:28:26.841 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1436.7026ms
2025-09-10 02:28:28.858 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:28:28.870 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:28:30.271 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1412.9369ms
2025-09-10 02:28:32.281 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:28:32.299 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:28:33.699 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1418.2409ms
2025-09-10 02:28:35.716 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:28:35.738 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:28:37.119 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1402.5369ms
2025-09-10 02:28:39.138 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:28:39.153 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:28:40.531 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1392.4127ms
2025-09-10 02:28:42.543 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:28:42.553 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:28:43.924 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1380.4342ms
2025-09-10 02:28:45.932 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:28:45.941 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:28:47.329 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1396.2018ms
2025-09-10 02:28:49.347 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:28:49.357 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:28:50.749 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1401.6463ms
2025-09-10 02:28:52.769 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:28:52.779 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:28:54.166 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1397.4479ms
2025-09-10 02:28:56.174 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:28:56.182 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:28:57.583 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1408.6161ms
2025-09-10 02:28:59.603 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:28:59.613 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:29:01.015 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.9165ms
2025-09-10 02:29:03.024 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:29:03.029 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:29:04.415 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1390.3436ms
2025-09-10 02:29:06.423 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:29:06.433 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:29:07.801 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1378.5394ms
2025-09-10 02:29:09.824 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:29:09.834 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:29:11.208 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1383.8321ms
2025-09-10 02:29:13.234 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:29:13.258 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:29:14.658 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1424.5345ms
2025-09-10 02:29:16.673 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:29:16.682 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:29:20.486 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 3812.8117ms
2025-09-10 02:29:22.498 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:29:22.503 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:29:23.334 +03:00 [INF] 1 servers were removed due to timeout
2025-09-10 02:29:23.893 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1395.4213ms
2025-09-10 02:29:25.909 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:29:25.948 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:29:27.342 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1433.0094ms
2025-09-10 02:29:29.361 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:29:29.374 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:29:30.790 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1429.0875ms
2025-09-10 02:29:32.800 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:29:32.824 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:29:34.218 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1418.5623ms
2025-09-10 02:29:36.242 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:29:36.275 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:29:37.678 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1436.3709ms
2025-09-10 02:29:39.693 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:29:39.707 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:29:41.116 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1422.7664ms
2025-09-10 02:29:43.144 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:29:43.175 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:29:44.583 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1438.4023ms
2025-09-10 02:29:46.596 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:29:46.621 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:29:48.036 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1439.9116ms
2025-09-10 02:29:50.086 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:29:50.099 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:29:51.489 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1403.1627ms
2025-09-10 02:29:53.495 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:29:53.504 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:29:54.891 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1396.366ms
2025-09-10 02:29:56.913 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:29:56.942 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:29:58.353 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1440.6082ms
2025-09-10 02:30:00.376 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:30:00.385 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:30:01.787 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.2668ms
2025-09-10 02:30:04.152 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:30:04.162 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:30:05.531 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1378.9723ms
2025-09-10 02:30:08.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:30:08.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:30:09.563 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1414.6538ms
2025-09-10 02:30:12.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:30:12.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:30:13.559 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1400.3032ms
2025-09-10 02:30:15.640 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json 63
2025-09-10 02:30:15.650 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:30:15.811 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:30:15.820 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 02:30:15.837 +03:00 [INF] Route matched with {action = "AddItemToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] AddItemToCart(E_Commerce.DtoModels.CartDtos.CreateCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 02:30:15.852 +03:00 [INF] Executing AddItemToCart for product ID: 1
2025-09-10 02:30:15.862 +03:00 [INF] Adding item to cart for user: e682f183-1c61-400b-aa5a-171750f446b5, product: 1
2025-09-10 02:30:16.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:30:16.158 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 02:30:16.158 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:30:16.165 +03:00 [INF] Execute GetAll for entity Product
2025-09-10 02:30:16.273 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__8__locals1_itemDto_ProductId_0='?' (DbType = Int32), @__8__locals1_itemDto_ProductVariantId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Price`, `t`.`c`, `t`.`EndDate`, `t`.`StartDate`, `t`.`DiscountPercent`, `t`.`DeletedAt`, `t`.`IsActive`, `t0`.`Id`, `t0`.`Quantity`, `t0`.`c`
FROM (
    SELECT `p`.`Id`, `p`.`Price`, `d`.`Id` IS NOT NULL AS `c`, `d`.`EndDate`, `d`.`StartDate`, `d`.`DiscountPercent`, `d`.`DeletedAt`, `d`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__8__locals1_itemDto_ProductId_0) AND `p`.`DeletedAt` IS NULL) AND `p`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Quantity`, `t1`.`c`, `t1`.`ProductId`
    FROM (
        SELECT `p0`.`Id`, `p0`.`Quantity`, 1 AS `c`, `p0`.`ProductId`, ROW_NUMBER() OVER(PARTITION BY `p0`.`ProductId` ORDER BY `p0`.`Id`) AS `row`
        FROM `ProductVariants` AS `p0`
        WHERE (`p0`.`Id` = @__8__locals1_itemDto_ProductVariantId_1) AND `p0`.`IsActive`
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
2025-09-10 02:30:16.373 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 02:30:16.383 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce) in 540.6569ms
2025-09-10 02:30:16.387 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 02:30:16.391 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 404 239 application/json; charset=utf-8 750.7957ms
2025-09-10 02:30:17.568 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1417.2695ms
2025-09-10 02:30:20.152 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:30:20.159 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:30:21.550 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1398.4261ms
2025-09-10 02:30:24.258 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:30:24.390 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:30:25.777 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1518.7146ms
2025-09-10 02:30:26.718 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json 62
2025-09-10 02:30:26.731 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:30:26.882 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:30:26.891 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 02:30:26.894 +03:00 [INF] Route matched with {action = "AddItemToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] AddItemToCart(E_Commerce.DtoModels.CartDtos.CreateCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 02:30:26.901 +03:00 [INF] Executing AddItemToCart for product ID: 1
2025-09-10 02:30:26.904 +03:00 [INF] Adding item to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 1
2025-09-10 02:30:27.202 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 02:30:27.243 +03:00 [INF] Execute GetAll for entity Product
2025-09-10 02:30:27.327 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__8__locals1_itemDto_ProductId_0='?' (DbType = Int32), @__8__locals1_itemDto_ProductVariantId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Price`, `t`.`c`, `t`.`EndDate`, `t`.`StartDate`, `t`.`DiscountPercent`, `t`.`DeletedAt`, `t`.`IsActive`, `t0`.`Id`, `t0`.`Quantity`, `t0`.`c`
FROM (
    SELECT `p`.`Id`, `p`.`Price`, `d`.`Id` IS NOT NULL AS `c`, `d`.`EndDate`, `d`.`StartDate`, `d`.`DiscountPercent`, `d`.`DeletedAt`, `d`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__8__locals1_itemDto_ProductId_0) AND `p`.`DeletedAt` IS NULL) AND `p`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Quantity`, `t1`.`c`, `t1`.`ProductId`
    FROM (
        SELECT `p0`.`Id`, `p0`.`Quantity`, 1 AS `c`, `p0`.`ProductId`, ROW_NUMBER() OVER(PARTITION BY `p0`.`ProductId` ORDER BY `p0`.`Id`) AS `row`
        FROM `ProductVariants` AS `p0`
        WHERE (`p0`.`Id` = @__8__locals1_itemDto_ProductVariantId_1) AND `p0`.`IsActive`
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
2025-09-10 02:30:27.408 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 02:30:27.410 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce) in 511.2273ms
2025-09-10 02:30:27.416 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 02:30:27.419 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 404 239 application/json; charset=utf-8 700.4926ms
2025-09-10 02:30:28.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:30:28.173 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:30:29.573 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1419.5819ms
2025-09-10 02:30:32.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:30:32.169 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:30:33.594 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1434.4341ms
2025-09-10 02:30:36.153 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:30:36.181 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:30:37.597 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1443.7414ms
2025-09-10 02:30:40.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:30:40.158 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:30:41.576 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1425.8377ms
2025-09-10 02:30:44.162 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:30:44.170 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:30:45.612 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1449.4415ms
2025-09-10 02:30:48.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:30:48.181 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:30:49.554 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1395.1724ms
2025-09-10 02:30:52.373 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:30:52.379 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:30:53.746 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1372.9625ms
2025-09-10 02:30:55.614 +03:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5069/api/Products/1/Variants/1/activate - null 0
2025-09-10 02:30:55.622 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:30:55.773 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:30:55.777 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.ActivateVariant (E-Commerce)'
2025-09-10 02:30:55.783 +03:00 [INF] Route matched with {action = "ActivateVariant", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] ActivateVariant(Int32, Int32) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-09-10 02:30:55.803 +03:00 [INF] Activating variant: 1
2025-09-10 02:30:56.023 +03:00 [INF] Checking if variant 1 exists and is not deleted
2025-09-10 02:30:56.026 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 02:30:56.111 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__8__locals1_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Quantity` > 0 AS `hasquntity`, `p`.`DeletedAt` IS NOT NULL AS `isdeleted`, `p`.`Size` IS NOT NULL AS `hassize`, ((`p`.`Length` <> 0) OR `p`.`Length` IS NULL) AND ((`p`.`Waist` <> 0) OR `p`.`Waist` IS NULL) AS `haslengthandwaist`, `p`.`ProductId` AS `productid`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__8__locals1_id_0
LIMIT 1
2025-09-10 02:30:56.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:30:56.161 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:30:56.202 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `ProductVariants` AS `p`
    WHERE (`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL)
2025-09-10 02:30:56.210 +03:00 [INF] Validating variant 1 has required properties for activation
2025-09-10 02:30:56.212 +03:00 [INF] Attempting to activate variant 1
2025-09-10 02:30:56.293 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE (`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 02:30:56.298 +03:00 [INF] Successfully activated variant 1
2025-09-10 02:30:56.300 +03:00 [INF] Updating product 1 quantity after activating variant 1
2025-09-10 02:30:56.302 +03:00 [INF] Recording admin operation for activating variant 1 by user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:30:56.305 +03:00 [INF] Execute AddAdminOpreationAsync
2025-09-10 02:30:56.308 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-09-10 02:30:56.331 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-09-10 02:30:56.335 +03:00 [INF] Committing unit of work for activating variant 1
2025-09-10 02:30:56.510 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p2='?' (Size = 255), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ProductVariants` SET `IsActive` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 02:30:56.595 +03:00 [INF] Committing transaction for activating variant 1
2025-09-10 02:30:57.554 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1399.4089ms
2025-09-10 02:30:58.850 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-10 02:30:59.702 +03:00 [INF] Removed 1 cache entries for tags: [variantlist, variantdata]
2025-09-10 02:30:59.745 +03:00 [INF] Removing cache by tag: CollectionWithProduct
2025-09-10 02:30:59.982 +03:00 [WRN] No cache entries found for tag: CollectionWithProduct
2025-09-10 02:31:00.183 +03:00 [INF] Successfully completed all operations for activating variant 1
2025-09-10 02:31:00.443 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:31:00.564 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:31:00.602 +03:00 [INF] Removing cache by tag: subcategorywithdata
2025-09-10 02:31:00.816 +03:00 [WRN] No cache entries found for tag: subcategorywithdata
2025-09-10 02:31:01.312 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 02:31:01.316 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.ActivateVariant (E-Commerce) in 5528.7178ms
2025-09-10 02:31:01.323 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.ActivateVariant (E-Commerce)'
2025-09-10 02:31:01.326 +03:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5069/api/Products/1/Variants/1/activate - 200 120 application/json; charset=utf-8 5712.0798ms
2025-09-10 02:31:01.938 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1495.5672ms
2025-09-10 02:31:02.547 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 02:31:02.977 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 02:31:03.439 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-09-10 02:31:04.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:31:04.176 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:31:05.416 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1255.9479ms
2025-09-10 02:31:05.848 +03:00 [INF] Removing cache by tag: CollectionWithProduct
2025-09-10 02:31:06.064 +03:00 [WRN] No cache entries found for tag: CollectionWithProduct
2025-09-10 02:31:07.398 +03:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5069/api/Products/3799/Variants/3799/deactivate - null 0
2025-09-10 02:31:07.409 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:31:07.558 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:31:07.570 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.DeactivateVariant (E-Commerce)'
2025-09-10 02:31:07.588 +03:00 [INF] Route matched with {action = "DeactivateVariant", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] DeactivateVariant(Int32, Int32) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-09-10 02:31:07.626 +03:00 [INF] Deactivating variant: 3799
2025-09-10 02:31:07.679 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 02:31:07.798 +03:00 [INF] Removing cache by tag: subcategorywithdata
2025-09-10 02:31:07.857 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 02:31:07.937 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Quantity` > 0 AS `hasquntity`, `p`.`DeletedAt` IS NOT NULL AS `isdeleted`, `p`.`Size` IS NOT NULL AS `hassize`, ((`p`.`Length` <> 0) OR `p`.`Length` IS NULL) AND ((`p`.`Waist` <> 0) OR `p`.`Waist` IS NULL) AS `haslengthandwaist`, `p`.`ProductId` AS `productid`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 02:31:08.012 +03:00 [WRN] No cache entries found for tag: subcategorywithdata
2025-09-10 02:31:08.014 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 02:31:08.019 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.DeactivateVariant (E-Commerce) in 408.1498ms
2025-09-10 02:31:08.021 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.DeactivateVariant (E-Commerce)'
2025-09-10 02:31:08.023 +03:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5069/api/Products/3799/Variants/3799/deactivate - 404 197 application/json; charset=utf-8 624.7767ms
2025-09-10 02:31:08.147 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:31:08.152 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:31:08.178 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 02:31:09.535 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.2825ms
2025-09-10 02:31:12.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:31:12.155 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:31:13.387 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1238.8503ms
2025-09-10 02:31:15.039 +03:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5069/api/Products/1/Variants/1/deactivate - null 0
2025-09-10 02:31:15.045 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:31:15.193 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:31:15.206 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.DeactivateVariant (E-Commerce)'
2025-09-10 02:31:15.208 +03:00 [INF] Route matched with {action = "DeactivateVariant", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] DeactivateVariant(Int32, Int32) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-09-10 02:31:15.214 +03:00 [INF] Deactivating variant: 1
2025-09-10 02:31:15.434 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 02:31:15.512 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Quantity` > 0 AS `hasquntity`, `p`.`DeletedAt` IS NOT NULL AS `isdeleted`, `p`.`Size` IS NOT NULL AS `hassize`, ((`p`.`Length` <> 0) OR `p`.`Length` IS NULL) AND ((`p`.`Waist` <> 0) OR `p`.`Waist` IS NULL) AS `haslengthandwaist`, `p`.`ProductId` AS `productid`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 02:31:15.528 +03:00 [INF] Attempting to deactivate variant 1
2025-09-10 02:31:15.610 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE (`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 02:31:15.620 +03:00 [INF] Successfully deactivated variant 1
2025-09-10 02:31:15.625 +03:00 [INF] Execute AddAdminOpreationAsync
2025-09-10 02:31:15.629 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-09-10 02:31:15.634 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-09-10 02:31:15.674 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'E_Commerce.Context.AppDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-09-10 02:31:15.686 +03:00 [ERR] An error occurred using a transaction.
2025-09-10 02:31:15.692 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.DeactivateVariant (E-Commerce) in 479.0305ms
2025-09-10 02:31:15.696 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.DeactivateVariant (E-Commerce)'
2025-09-10 02:31:15.701 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-09-10 02:31:15.702 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: This MySqlConnection is already in use. See https://fl.vu/mysql-conn-reuse
   at MySqlConnector.Core.ServerSession.StartQuerying(ICancellableCommand command) in /_/src/MySqlConnector/Core/ServerSession.cs:line 289
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken)
   at MySqlConnector.MySqlCommand.ExecuteNonQueryAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 309
   at MySqlConnector.MySqlTransaction.DoRollback(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlTransaction.cs:line 269
   at MySqlConnector.MySqlTransaction.RollbackAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlTransaction.cs:line 67
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.RollbackAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.RollbackAsync(CancellationToken cancellationToken)
   at E_Commerce.Services.ProductVariantServices.ProductVariantCommandService.DeactivateVariantAsync(Int32 id, String userId) in D:\project_fashion\E-Commerce-API-main\Services\ProductVariantServices\ProductVariantCommandService.cs:line 644
   at E_Commerce.Services.ProductVariantServices.ProductVariantService.DeactivateVariantAsync(Int32 id, String userId) in D:\project_fashion\E-Commerce-API-main\Services\ProductVariantServices\ProductVariantService.cs:line 79
   at E_Commerce.Controllers.ProductVariantController.DeactivateVariant(Int32 productId, Int32 id) in D:\project_fashion\E-Commerce-API-main\Controllers\ProductVariantController.cs:line 176
   at lambda_method1661(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at SecurityStampMiddleware.Invoke(HttpContext context) in D:\project_fashion\E-Commerce-API-main\MiddleWares\SecurityStampMiddleware.cs:line 75
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context) in D:\project_fashion\E-Commerce-API-main\MiddleWares\UserAuthenticationMiddleware.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-10 02:31:15.776 +03:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5069/api/Products/1/Variants/1/deactivate - 500 null text/plain; charset=utf-8 736.7111ms
2025-09-10 02:31:16.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:31:16.170 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:31:17.568 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1408.9714ms
2025-09-10 02:31:20.152 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:31:20.161 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:31:21.386 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1233.8925ms
2025-09-10 02:31:24.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:31:24.162 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:31:25.538 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1387.2839ms
2025-09-10 02:31:28.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:31:28.156 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:31:29.535 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1384.6374ms
2025-09-10 02:31:32.152 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:31:32.159 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:31:33.550 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1397.8179ms
2025-09-10 02:31:36.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:31:36.160 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:31:37.551 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1399.9062ms
2025-09-10 02:31:40.169 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:31:40.200 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:31:41.597 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1428.1249ms
2025-09-10 02:31:44.400 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:31:44.497 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:31:45.959 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1558.7952ms
2025-09-10 02:31:49.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:31:49.170 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:31:50.545 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1385.38ms
2025-09-10 02:31:53.347 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:31:53.353 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:31:54.763 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1416.557ms
2025-09-10 02:31:58.165 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:31:58.173 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:31:59.719 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1554.4509ms
2025-09-10 02:32:02.202 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:32:02.240 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:32:03.634 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1431.6217ms
2025-09-10 02:32:06.212 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:32:06.334 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:32:07.709 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1496.4835ms
2025-09-10 02:32:10.264 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:32:10.292 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:32:11.693 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1429.1564ms
2025-09-10 02:32:14.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:32:14.248 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:32:15.625 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1471.0012ms
2025-09-10 02:32:18.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:32:18.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:32:19.554 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1396.2653ms
2025-09-10 02:32:22.913 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:32:22.919 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:32:23.935 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - null null
2025-09-10 02:32:44.538 +03:00 [INF] DB tables already exist. Exit install
2025-09-10 02:32:46.006 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-10 02:32:47.023 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-10 02:32:47.693 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-10 02:32:47.876 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-09-10 02:32:47.906 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-10 02:32:47.922 +03:00 [INF] Starting data seeding...
2025-09-10 02:32:47.954 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-10 02:32:48.825 +03:00 [INF] Executed DbCommand (115ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-10 02:32:48.899 +03:00 [INF] Role 'Admin' already exists.
2025-09-10 02:32:49.051 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-10 02:32:49.222 +03:00 [INF] Role 'User' already exists.
2025-09-10 02:32:49.475 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-10 02:32:49.613 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-09-10 02:32:49.615 +03:00 [INF] Data seeding completed successfully.
2025-09-10 02:32:51.685 +03:00 [INF] Now listening on: http://localhost:5069
2025-09-10 02:32:52.090 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-09-10 02:32:52.394 +03:00 [INF] Using the following options for SQL Server job storage:
2025-09-10 02:32:52.440 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-09-10 02:32:52.484 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-09-10 02:32:52.601 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-10 02:32:52.634 +03:00 [INF] Hosting environment: Development
2025-09-10 02:32:52.637 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-09-10 02:32:52.777 +03:00 [INF] Server mrrobot:21936:7c6e5de7 successfully announced in 154.4259 ms
2025-09-10 02:32:52.781 +03:00 [INF] Server mrrobot:21936:7c6e5de7 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-09-10 02:32:52.824 +03:00 [INF] Server mrrobot:21936:7c6e5de7 all the dispatchers started
2025-09-10 02:32:53.974 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-09-10 02:32:55.124 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 1151.0919ms
2025-09-10 02:32:55.175 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-09-10 02:32:55.177 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:32:55.224 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:32:55.261 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 85.1486ms
2025-09-10 02:32:55.280 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 103.2554ms
2025-09-10 02:32:55.364 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 139.5812ms
2025-09-10 02:32:55.519 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-09-10 02:32:55.980 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 463.5184ms
2025-09-10 02:32:59.503 +03:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5069/api/Products/1/Variants/1/deactivate - null 0
2025-09-10 02:32:59.511 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-10 02:32:59.695 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:32:59.977 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:32:59.998 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.DeactivateVariant (E-Commerce)'
2025-09-10 02:33:00.146 +03:00 [INF] Route matched with {action = "DeactivateVariant", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] DeactivateVariant(Int32, Int32) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-09-10 02:33:00.739 +03:00 [INF] Deactivating variant: 1
2025-09-10 02:33:00.988 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 02:33:01.092 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__8__locals1_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Quantity` > 0 AS `hasquntity`, `p`.`DeletedAt` IS NOT NULL AS `isdeleted`, `p`.`Size` IS NOT NULL AS `hassize`, ((`p`.`Length` <> 0) OR `p`.`Length` IS NULL) AND ((`p`.`Waist` <> 0) OR `p`.`Waist` IS NULL) AS `haslengthandwaist`, `p`.`ProductId` AS `productid`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__8__locals1_id_0
LIMIT 1
2025-09-10 02:33:01.099 +03:00 [INF] Attempting to deactivate variant 1
2025-09-10 02:33:01.184 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE (`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 02:33:01.225 +03:00 [INF] Successfully deactivated variant 1
2025-09-10 02:33:01.230 +03:00 [INF] Execute AddAdminOpreationAsync
2025-09-10 02:33:01.237 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-09-10 02:33:01.315 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-09-10 02:33:01.628 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p2='?' (Size = 255), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ProductVariants` SET `IsActive` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 02:33:05.308 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-10 02:33:05.628 +03:00 [INF] Removing cache by tag: CollectionWithProduct
2025-09-10 02:33:05.755 +03:00 [WRN] No cache entries found for tags: [variantlist, variantdata]
2025-09-10 02:33:05.843 +03:00 [WRN] No cache entries found for tag: CollectionWithProduct
2025-09-10 02:33:06.269 +03:00 [INF] Removing cache by tag: subcategorywithdata
2025-09-10 02:33:06.512 +03:00 [WRN] No cache entries found for tag: subcategorywithdata
2025-09-10 02:33:07.627 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 02:33:07.654 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.DeactivateVariant (E-Commerce) in 7397.6315ms
2025-09-10 02:33:07.665 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.DeactivateVariant (E-Commerce)'
2025-09-10 02:33:07.677 +03:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5069/api/Products/1/Variants/1/deactivate - 200 122 application/json; charset=utf-8 8174.3398ms
2025-09-10 02:33:08.625 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 02:33:08.738 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 02:33:08.899 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__productId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE (`p`.`ProductId` = @__productId_0) AND `p`.`DeletedAt` IS NULL
2025-09-10 02:33:09.052 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 02:33:09.864 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-09-10 02:33:12.155 +03:00 [INF] Removing cache by tag: CollectionWithProduct
2025-09-10 02:33:12.447 +03:00 [WRN] No cache entries found for tag: CollectionWithProduct
2025-09-10 02:33:15.693 +03:00 [INF] Removing cache by tag: subcategorywithdata
2025-09-10 02:33:15.910 +03:00 [WRN] No cache entries found for tag: subcategorywithdata
2025-09-10 02:33:15.920 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 02:33:16.358 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 02:33:21.247 +03:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5069/api/Products/1/Variants/1/activate - null 0
2025-09-10 02:33:21.269 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:33:21.424 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:33:21.432 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.ActivateVariant (E-Commerce)'
2025-09-10 02:33:21.440 +03:00 [INF] Route matched with {action = "ActivateVariant", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] ActivateVariant(Int32, Int32) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-09-10 02:33:21.461 +03:00 [INF] Activating variant: 1
2025-09-10 02:33:21.695 +03:00 [INF] Checking if variant 1 exists and is not deleted
2025-09-10 02:33:21.697 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 02:33:21.773 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__8__locals1_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Quantity` > 0 AS `hasquntity`, `p`.`DeletedAt` IS NOT NULL AS `isdeleted`, `p`.`Size` IS NOT NULL AS `hassize`, ((`p`.`Length` <> 0) OR `p`.`Length` IS NULL) AND ((`p`.`Waist` <> 0) OR `p`.`Waist` IS NULL) AS `haslengthandwaist`, `p`.`ProductId` AS `productid`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__8__locals1_id_0
LIMIT 1
2025-09-10 02:33:21.861 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `ProductVariants` AS `p`
    WHERE (`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL)
2025-09-10 02:33:21.866 +03:00 [INF] Validating variant 1 has required properties for activation
2025-09-10 02:33:21.869 +03:00 [INF] Attempting to activate variant 1
2025-09-10 02:33:21.947 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE (`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 02:33:21.959 +03:00 [INF] Successfully activated variant 1
2025-09-10 02:33:21.962 +03:00 [INF] Updating product 1 quantity after activating variant 1
2025-09-10 02:33:21.965 +03:00 [INF] Recording admin operation for activating variant 1 by user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:33:21.970 +03:00 [INF] Execute AddAdminOpreationAsync
2025-09-10 02:33:21.974 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-09-10 02:33:21.978 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-09-10 02:33:21.981 +03:00 [INF] Committing unit of work for activating variant 1
2025-09-10 02:33:22.138 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p2='?' (Size = 255), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ProductVariants` SET `IsActive` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 02:33:22.219 +03:00 [INF] Committing transaction for activating variant 1
2025-09-10 02:33:26.137 +03:00 [INF] Successfully completed all operations for activating variant 1
2025-09-10 02:33:26.370 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-10 02:33:26.372 +03:00 [INF] Removing cache by tag: CollectionWithProduct
2025-09-10 02:33:26.415 +03:00 [INF] Removing cache by tag: subcategorywithdata
2025-09-10 02:33:26.591 +03:00 [WRN] No cache entries found for tag: CollectionWithProduct
2025-09-10 02:33:26.632 +03:00 [WRN] No cache entries found for tag: subcategorywithdata
2025-09-10 02:33:26.803 +03:00 [WRN] No cache entries found for tags: [variantlist, variantdata]
2025-09-10 02:33:27.027 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 02:33:27.031 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.ActivateVariant (E-Commerce) in 5583.4654ms
2025-09-10 02:33:27.037 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.ActivateVariant (E-Commerce)'
2025-09-10 02:33:27.043 +03:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5069/api/Products/1/Variants/1/activate - 200 120 application/json; charset=utf-8 5795.5085ms
2025-09-10 02:33:27.459 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 02:33:27.892 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 02:33:29.268 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-09-10 02:33:32.367 +03:00 [INF] Removing cache by tag: CollectionWithProduct
2025-09-10 02:33:32.595 +03:00 [WRN] No cache entries found for tag: CollectionWithProduct
2025-09-10 02:33:34.767 +03:00 [INF] Removing cache by tag: subcategorywithdata
2025-09-10 02:33:35.001 +03:00 [WRN] No cache entries found for tag: subcategorywithdata
2025-09-10 02:33:35.435 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 02:33:35.863 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 02:33:56.816 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json 62
2025-09-10 02:33:56.830 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:33:56.982 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:33:56.990 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 02:33:56.998 +03:00 [INF] Route matched with {action = "AddItemToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] AddItemToCart(E_Commerce.DtoModels.CartDtos.CreateCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 02:33:57.101 +03:00 [INF] Executing AddItemToCart for product ID: 1
2025-09-10 02:33:57.132 +03:00 [INF] Adding item to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 1
2025-09-10 02:33:57.473 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 02:33:57.480 +03:00 [INF] Execute GetAll for entity Product
2025-09-10 02:33:57.713 +03:00 [INF] Executed DbCommand (117ms) [Parameters=[@__8__locals1_itemDto_ProductId_0='?' (DbType = Int32), @__8__locals1_itemDto_ProductVariantId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Price`, `t`.`c`, `t`.`EndDate`, `t`.`StartDate`, `t`.`DiscountPercent`, `t`.`DeletedAt`, `t`.`IsActive`, `t0`.`Id`, `t0`.`Quantity`, `t0`.`c`
FROM (
    SELECT `p`.`Id`, `p`.`Price`, `d`.`Id` IS NOT NULL AS `c`, `d`.`EndDate`, `d`.`StartDate`, `d`.`DiscountPercent`, `d`.`DeletedAt`, `d`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__8__locals1_itemDto_ProductId_0) AND `p`.`DeletedAt` IS NULL) AND `p`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Quantity`, `t1`.`c`, `t1`.`ProductId`
    FROM (
        SELECT `p0`.`Id`, `p0`.`Quantity`, 1 AS `c`, `p0`.`ProductId`, ROW_NUMBER() OVER(PARTITION BY `p0`.`ProductId` ORDER BY `p0`.`Id`) AS `row`
        FROM `ProductVariants` AS `p0`
        WHERE (`p0`.`Id` = @__8__locals1_itemDto_ProductVariantId_1) AND `p0`.`IsActive`
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
2025-09-10 02:33:57.775 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:33:57.879 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 02:33:57.913 +03:00 [INF] Executing CreateAsync for entity CartItem
2025-09-10 02:33:57.957 +03:00 [INF] CartItem added successfully (pending save)
2025-09-10 02:33:57.961 +03:00 [INF] Execute AddUserOpreationAsync
2025-09-10 02:33:57.965 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-09-10 02:33:58.011 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-09-10 02:33:59.176 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (DbType = DateTime), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime), @p16='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `CartItems` (`AddedAt`, `CartId`, `CreatedAt`, `DeletedAt`, `ModifiedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `UnitPrice`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `CartItems`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `userOperationsLogs` (`CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`, `UserId`)
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `userOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 02:33:59.345 +03:00 [INF] Removing cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:34:00.348 +03:00 [INF] Cache removed successfully for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:34:00.400 +03:00 [INF] Executing GetByIdAsync for entity Cart with ID: 1
2025-09-10 02:34:00.430 +03:00 [INF] Item added to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 1
2025-09-10 02:34:00.449 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json 63
2025-09-10 02:34:00.454 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 02:34:00.485 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:34:00.501 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce) in 3494.9175ms
2025-09-10 02:34:00.581 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 02:34:00.597 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
FROM `Cart` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-09-10 02:34:00.662 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:34:00.790 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 200 134 application/json; charset=utf-8 3973.4145ms
2025-09-10 02:34:00.846 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 02:34:00.909 +03:00 [INF] Route matched with {action = "AddItemToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] AddItemToCart(E_Commerce.DtoModels.CartDtos.CreateCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 02:34:00.982 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Cart` SET `CheckoutDate` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 02:34:01.005 +03:00 [INF] Executing AddItemToCart for product ID: 1
2025-09-10 02:34:01.047 +03:00 [INF] Adding item to cart for user: e682f183-1c61-400b-aa5a-171750f446b5, product: 1
2025-09-10 02:34:01.341 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 02:34:01.347 +03:00 [INF] Execute GetAll for entity Product
2025-09-10 02:34:01.426 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__8__locals1_itemDto_ProductId_0='?' (DbType = Int32), @__8__locals1_itemDto_ProductVariantId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Price`, `t`.`c`, `t`.`EndDate`, `t`.`StartDate`, `t`.`DiscountPercent`, `t`.`DeletedAt`, `t`.`IsActive`, `t0`.`Id`, `t0`.`Quantity`, `t0`.`c`
FROM (
    SELECT `p`.`Id`, `p`.`Price`, `d`.`Id` IS NOT NULL AS `c`, `d`.`EndDate`, `d`.`StartDate`, `d`.`DiscountPercent`, `d`.`DeletedAt`, `d`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__8__locals1_itemDto_ProductId_0) AND `p`.`DeletedAt` IS NULL) AND `p`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Quantity`, `t1`.`c`, `t1`.`ProductId`
    FROM (
        SELECT `p0`.`Id`, `p0`.`Quantity`, 1 AS `c`, `p0`.`ProductId`, ROW_NUMBER() OVER(PARTITION BY `p0`.`ProductId` ORDER BY `p0`.`Id`) AS `row`
        FROM `ProductVariants` AS `p0`
        WHERE (`p0`.`Id` = @__8__locals1_itemDto_ProductVariantId_1) AND `p0`.`IsActive`
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
2025-09-10 02:34:01.431 +03:00 [INF] Retrieving cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:34:01.509 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 02:34:01.517 +03:00 [INF] Executing CreateAsync for entity CartItem
2025-09-10 02:34:01.525 +03:00 [INF] CartItem added successfully (pending save)
2025-09-10 02:34:01.531 +03:00 [INF] Execute AddUserOpreationAsync
2025-09-10 02:34:01.533 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-09-10 02:34:01.535 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-09-10 02:34:02.569 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (DbType = DateTime), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime), @p16='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `CartItems` (`AddedAt`, `CartId`, `CreatedAt`, `DeletedAt`, `ModifiedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `UnitPrice`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `CartItems`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `userOperationsLogs` (`CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`, `UserId`)
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `userOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 02:34:02.719 +03:00 [INF] Removing cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:34:03.150 +03:00 [INF] Cache removed successfully for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:34:03.153 +03:00 [INF] Item added to cart for user: e682f183-1c61-400b-aa5a-171750f446b5, product: 1
2025-09-10 02:34:03.156 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 02:34:03.161 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce) in 2163.7608ms
2025-09-10 02:34:03.165 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 02:34:03.182 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 200 134 application/json; charset=utf-8 2732.4163ms
2025-09-10 02:34:04.806 +03:00 [INF] Removing cache by tag: cart
2025-09-10 02:34:05.022 +03:00 [WRN] No cache entries found for tag: cart
2025-09-10 02:34:07.605 +03:00 [INF] Executing GetByIdAsync for entity Cart with ID: 3
2025-09-10 02:34:07.788 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
FROM `Cart` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-09-10 02:34:07.939 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Cart` SET `CheckoutDate` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 02:34:10.686 +03:00 [INF] Removing cache by tag: cart
2025-09-10 02:34:10.904 +03:00 [WRN] No cache entries found for tag: cart
2025-09-10 02:34:12.498 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - null 0
2025-09-10 02:34:12.513 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:34:12.675 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:34:13.115 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-09-10 02:34:13.150 +03:00 [INF] Route matched with {action = "CheckOut", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] CheckOut() on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 02:34:13.250 +03:00 [INF] Executing CheckOut
2025-09-10 02:34:13.272 +03:00 [INF] Checkout of cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:34:13.280 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:34:13.433 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 02:34:13.605 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Cart` SET `CheckoutDate` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 02:34:13.632 +03:00 [INF] Removing cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:34:13.648 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 02:34:13.662 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.CheckOut (E-Commerce) in 415.605ms
2025-09-10 02:34:13.672 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-09-10 02:34:13.681 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - 200 122 application/json; charset=utf-8 1182.396ms
2025-09-10 02:34:14.115 +03:00 [INF] Cache removed successfully for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:34:17.909 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - null 0
2025-09-10 02:34:17.976 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:34:18.147 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:34:18.199 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-09-10 02:34:18.225 +03:00 [INF] Route matched with {action = "CheckOut", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] CheckOut() on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 02:34:18.235 +03:00 [INF] Executing CheckOut
2025-09-10 02:34:18.245 +03:00 [INF] Checkout of cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:34:18.251 +03:00 [INF] Retrieving cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:34:18.432 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 02:34:18.663 +03:00 [INF] Executed DbCommand (133ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Cart` SET `CheckoutDate` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 02:34:18.731 +03:00 [INF] Removing cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:34:18.749 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 02:34:18.785 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.CheckOut (E-Commerce) in 550.9843ms
2025-09-10 02:34:19.096 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-09-10 02:34:19.098 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - 200 122 application/json; charset=utf-8 1189.3523ms
2025-09-10 02:34:19.180 +03:00 [INF] Cache removed successfully for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:34:47.225 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order - application/json 42
2025-09-10 02:34:47.780 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order - application/json 41
2025-09-10 02:34:48.283 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:34:48.896 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:34:49.045 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:34:49.051 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 02:34:49.058 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:34:49.076 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 02:34:49.069 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto]]] CreateOrder(E_Commerce.DtoModels.OrderDtos.CreateOrderDto) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 02:34:49.080 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto]]] CreateOrder(E_Commerce.DtoModels.OrderDtos.CreateOrderDto) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 02:34:49.097 +03:00 [INF] Executing CreateOrder
2025-09-10 02:34:49.099 +03:00 [INF] Executing CreateOrder
2025-09-10 02:34:49.115 +03:00 [INF] Creating order from cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:34:49.115 +03:00 [INF] Creating order from cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:34:49.427 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 02:34:49.431 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 02:34:49.513 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 02:34:49.523 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 02:34:49.525 +03:00 [INF] Checking if address 30 exists for customer: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:34:49.531 +03:00 [INF] Checking if address 1 exists for customer: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:34:49.610 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__addressId_0='?' (DbType = Int32), @__customerId_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `CustomerAddresses` AS `c`
    WHERE ((`c`.`Id` = @__addressId_0) AND (`c`.`CustomerId` = @__customerId_1)) AND `c`.`DeletedAt` IS NULL)
2025-09-10 02:34:49.610 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__addressId_0='?' (DbType = Int32), @__customerId_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `CustomerAddresses` AS `c`
    WHERE ((`c`.`Id` = @__addressId_0) AND (`c`.`CustomerId` = @__customerId_1)) AND `c`.`DeletedAt` IS NULL)
2025-09-10 02:34:49.619 +03:00 [INF] Getting cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:34:49.619 +03:00 [INF] Getting cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:34:49.629 +03:00 [INF] Getting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:34:49.629 +03:00 [INF] Getting cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:34:49.856 +03:00 [WRN] Cache miss for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:34:49.858 +03:00 [WRN] Cache miss for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:34:49.934 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 02:34:49.936 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 02:34:49.949 +03:00 [INF] Execute GetAll for entity Cart
2025-09-10 02:34:49.960 +03:00 [INF] Execute GetAll for entity Cart
2025-09-10 02:34:50.248 +03:00 [INF] Executed DbCommand (114ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-09-10 02:34:50.249 +03:00 [INF] Executed DbCommand (114ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-09-10 02:34:50.335 +03:00 [INF] Setting cache for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:34:50.351 +03:00 [INF] Setting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:34:50.640 +03:00 [INF] Cache set successfully for key: cart:user:ac03a6c3-9450-420a-9e6e-ea8902c018c5 with tags: [cart]
2025-09-10 02:34:50.643 +03:00 [INF] Cache set successfully for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5 with tags: [cart]
2025-09-10 02:34:50.649 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 02:34:50.649 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 02:34:50.758 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`, `p0`.`Id`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`Description`, `p0`.`DiscountId`, `p0`.`Gender`, `p0`.`IsActive`, `p0`.`ModifiedAt`, `p0`.`Name`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`SubCategoryId`, `p0`.`fitType`
FROM `ProductVariants` AS `p`
INNER JOIN `Products` AS `p0` ON `p`.`ProductId` = `p0`.`Id`
WHERE `p`.`Id` = 1
2025-09-10 02:34:50.759 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`, `p0`.`Id`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`Description`, `p0`.`DiscountId`, `p0`.`Gender`, `p0`.`IsActive`, `p0`.`ModifiedAt`, `p0`.`Name`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`SubCategoryId`, `p0`.`fitType`
FROM `ProductVariants` AS `p`
INNER JOIN `Products` AS `p0` ON `p`.`ProductId` = `p0`.`Id`
WHERE `p`.`Id` = 1
2025-09-10 02:34:50.853 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE `o`.`OrderNumber` = @__orderNumber_0)
2025-09-10 02:34:50.856 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE `o`.`OrderNumber` = @__orderNumber_0)
2025-09-10 02:34:50.864 +03:00 [INF] Executing CreateAsync for entity Order
2025-09-10 02:34:50.869 +03:00 [INF] Executing CreateAsync for entity Order
2025-09-10 02:34:50.931 +03:00 [INF] Order added successfully (pending save)
2025-09-10 02:34:50.931 +03:00 [INF] Order added successfully (pending save)
2025-09-10 02:34:51.109 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime), @p8='?' (Size = 500), @p9='?' (Size = 50), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Orders` (`CancelledAt`, `CreatedAt`, `CustomerAddressId`, `CustomerId`, `DeletedAt`, `DeliveredAt`, `DiscountAmount`, `ModifiedAt`, `Notes`, `OrderNumber`, `RestockedAt`, `ShippedAt`, `ShippingCost`, `Status`, `Subtotal`, `TaxAmount`, `Total`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Orders`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 02:34:51.109 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime), @p8='?' (Size = 500), @p9='?' (Size = 50), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Orders` (`CancelledAt`, `CreatedAt`, `CustomerAddressId`, `CustomerId`, `DeletedAt`, `DeliveredAt`, `DiscountAmount`, `ModifiedAt`, `Notes`, `OrderNumber`, `RestockedAt`, `ShippedAt`, `ShippingCost`, `Status`, `Subtotal`, `TaxAmount`, `Total`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Orders`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 02:34:51.202 +03:00 [INF] Executing CreateRangeAsync for entity OrderItem
2025-09-10 02:34:51.202 +03:00 [INF] Executing CreateRangeAsync for entity OrderItem
2025-09-10 02:34:51.240 +03:00 [INF] 1 OrderItem entities added successfully (pending save)
2025-09-10 02:34:51.240 +03:00 [INF] 1 OrderItem entities added successfully (pending save)
2025-09-10 02:34:51.248 +03:00 [INF] Removing 3 from variant: 1
2025-09-10 02:34:51.248 +03:00 [INF] Removing 19 from variant: 1
2025-09-10 02:34:51.251 +03:00 [INF] Executing GetByIdAsync for entity ProductVariant with ID: 1
2025-09-10 02:34:51.252 +03:00 [INF] Executing GetByIdAsync for entity ProductVariant with ID: 1
2025-09-10 02:34:51.335 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 02:34:51.335 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 02:34:52.312 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE ProductVariants SET Quantity = Quantity - @p0 WHERE Id = @p1 AND Quantity >= @p0
2025-09-10 02:34:52.319 +03:00 [INF] Clearing cart: 1
2025-09-10 02:34:52.404 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__cartId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE `c`.`CartId` = @__cartId_0
2025-09-10 02:34:52.416 +03:00 [INF] Cart 1 cleared successfully
2025-09-10 02:34:52.590 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Decimal), @p10='?' (DbType = Decimal), @p12='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM `CartItems`
WHERE `Id` = @p0;
SELECT ROW_COUNT();

INSERT INTO `OrderItem` (`CreatedAt`, `DeletedAt`, `ModifiedAt`, `OrderId`, `OrderedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `TotalPrice`, `UnitPrice`)
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
SELECT `Id`
FROM `OrderItem`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

UPDATE `ProductVariants` SET `Quantity` = @p11
WHERE `Id` = @p12;
SELECT ROW_COUNT();
2025-09-10 02:34:52.752 +03:00 [INF] Execute AddUserOpreationAsync
2025-09-10 02:34:52.758 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-09-10 02:34:52.761 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-09-10 02:34:52.763 +03:00 [INF] Execute GetAll for entity Order
2025-09-10 02:34:52.998 +03:00 [INF] Executed DbCommand (97ms) [Parameters=[@__createdOrder_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`ModifiedAt`, `t0`.`OrderNumber`, `t0`.`Status`, `t0`.`Subtotal`, `t0`.`TaxAmount`, `t0`.`ShippingCost`, `t0`.`DiscountAmount`, `t0`.`Total`, `t0`.`Notes`, `t0`.`DeletedAt`, `t0`.`ShippedAt`, `t0`.`DeliveredAt`, `t0`.`CancelledAt`, `t0`.`c`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Email`, `t0`.`PhoneNumber`, `t1`.`Id`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`Quantity`, `t1`.`UnitPrice`, `t1`.`TotalPrice`, `t1`.`OrderedAt`, `t1`.`Id0`, `t1`.`Name`, `t1`.`Price`, `t1`.`IsActive`, `t1`.`FinalPrice`, `t1`.`DiscountPrecentage`, `t1`.`MainImageUrl`, `t1`.`Id1`, `t1`.`Color`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`Size`, `t1`.`DeletedAt`, `t1`.`Length`, `t1`.`Waist`, `t1`.`Id2`, `t1`.`Id3`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`ModifiedAt`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`ShippingCost`, `o`.`DiscountAmount`, `o`.`Total`, `o`.`Notes`, `o`.`DeletedAt`, `o`.`ShippedAt`, `o`.`DeliveredAt`, `o`.`CancelledAt`, FALSE AS `c`, `t`.`Id` AS `Id0`, `t`.`Name`, `t`.`Email`, `t`.`PhoneNumber`
    FROM `Orders` AS `o`
    INNER JOIN (
        SELECT `a`.`Id`, `a`.`Email`, `a`.`PhoneNumber`, `a`.`Name`
        FROM `AspNetUsers` AS `a`
        WHERE `a`.`Discriminator` = 'Customer'
    ) AS `t` ON `o`.`CustomerId` = `t`.`Id`
    WHERE `o`.`Id` = @__createdOrder_Id_0
    LIMIT 1
) AS `t0`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`CreatedAt`, `o0`.`ModifiedAt`, `o0`.`Quantity`, `o0`.`UnitPrice`, `o0`.`TotalPrice`, `o0`.`OrderedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND `i`.`DeletedAt` IS NULL
        LIMIT 1), '') AS `MainImageUrl`, `o0`.`ProductVariantId` AS `Id1`, `p0`.`Color`, COALESCE(`p0`.`CreatedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `CreatedAt0`, COALESCE(`p0`.`ModifiedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `ModifiedAt0`, `p0`.`Size`, `p0`.`DeletedAt`, COALESCE(`p0`.`Length`, 0) AS `Length`, COALESCE(`p0`.`Waist`, 0) AS `Waist`, `d`.`Id` AS `Id2`, `p0`.`Id` AS `Id3`, `o0`.`OrderId`
    FROM `OrderItem` AS `o0`
    INNER JOIN `Products` AS `p` ON `o0`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    INNER JOIN `ProductVariants` AS `p0` ON `o0`.`ProductVariantId` = `p0`.`Id`
) AS `t1` ON `t0`.`Id` = `t1`.`OrderId`
ORDER BY `t0`.`Id`, `t0`.`Id0`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id2`
2025-09-10 02:34:53.485 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE ProductVariants SET Quantity = Quantity - @p0 WHERE Id = @p1 AND Quantity >= @p0
2025-09-10 02:34:53.671 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 02:34:53.681 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce) in 4597.0162ms
2025-09-10 02:34:53.686 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 02:34:53.727 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order - 409 314 application/json; charset=utf-8 6501.8047ms
2025-09-10 02:34:54.981 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 02:34:55.140 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__productId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE (`p`.`ProductId` = @__productId_0) AND `p`.`DeletedAt` IS NULL
2025-09-10 02:34:58.152 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-09-10 02:34:58.306 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 02:34:58.313 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Products` SET `Quantity` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 02:34:58.356 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce) in 9259.6256ms
2025-09-10 02:34:58.360 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 02:34:58.363 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order - 201 1438 application/json; charset=utf-8 10583.2203ms
2025-09-10 02:34:59.143 +03:00 [INF] Removing cache by tags: [order]
2025-09-10 02:34:59.223 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-10 02:34:59.256 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-09-10 02:34:59.350 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 02:34:59.361 +03:00 [WRN] No cache entries found for tags: [order]
2025-09-10 02:34:59.439 +03:00 [INF] Removing cache by tags: [collection, CollectionWithProduct]
2025-09-10 02:34:59.439 +03:00 [INF] Removing cache by tags: [subcategory, subcategorywithdata]
2025-09-10 02:34:59.655 +03:00 [WRN] No cache entries found for tags: [variantlist, variantdata]
2025-09-10 02:34:59.785 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 02:34:59.890 +03:00 [WRN] No cache entries found for tags: [collection, CollectionWithProduct]
2025-09-10 02:34:59.891 +03:00 [WRN] No cache entries found for tags: [subcategory, subcategorywithdata]
2025-09-10 02:35:00.509 +03:00 [INF] Removing cache by tag: CollectionWithProduct
2025-09-10 02:35:00.728 +03:00 [WRN] No cache entries found for tag: CollectionWithProduct
2025-09-10 02:35:01.389 +03:00 [INF] Removing cache by tag: subcategorywithdata
2025-09-10 02:35:01.607 +03:00 [WRN] No cache entries found for tag: subcategorywithdata
2025-09-10 02:35:02.191 +03:00 [INF] Removing cache by tag: CollectionWithProduct
2025-09-10 02:35:02.250 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 02:35:02.352 +03:00 [INF] Removing cache by tag: subcategorywithdata
2025-09-10 02:35:02.405 +03:00 [WRN] No cache entries found for tag: CollectionWithProduct
2025-09-10 02:35:02.583 +03:00 [WRN] No cache entries found for tag: subcategorywithdata
2025-09-10 02:35:02.992 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 02:35:03.214 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 02:35:03.645 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 02:35:14.709 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/ - null null
2025-09-10 02:35:14.729 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:35:14.746 +03:00 [INF] No cached response available for this request.
2025-09-10 02:35:14.752 +03:00 [INF] The response could not be cached for this request.
2025-09-10 02:35:14.758 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/ - 404 0 null 48.8758ms
2025-09-10 02:35:14.770 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5069/, Response status code: 404
2025-09-10 02:35:18.319 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire - null null
2025-09-10 02:35:20.704 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire - 200 null text/html 2384.7918ms
2025-09-10 02:35:20.729 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/css18180224184900 - null null
2025-09-10 02:35:20.729 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/css-dark181801752241160 - null null
2025-09-10 02:35:20.737 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:35:20.737 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/js18180413607522 - null null
2025-09-10 02:35:20.748 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/css-dark181801752241160 - 200 null text/css 18.9336ms
2025-09-10 02:35:20.756 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:35:20.763 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 25.4231ms
2025-09-10 02:35:20.782 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/css18180224184900 - 200 null text/css 52.9858ms
2025-09-10 02:35:20.813 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/js18180413607522 - 200 null application/javascript 75.9594ms
2025-09-10 02:35:20.847 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 90.746ms
2025-09-10 02:35:22.325 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - null null
2025-09-10 02:35:22.976 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 258
2025-09-10 02:35:22.982 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:35:23.897 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - 200 null text/html 1571.9632ms
2025-09-10 02:35:23.943 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:35:23.956 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:35:23.986 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 42.2652ms
2025-09-10 02:35:23.991 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 34.9379ms
2025-09-10 02:35:24.255 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1279.2299ms
2025-09-10 02:35:25.974 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - null null
2025-09-10 02:35:26.015 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:35:26.041 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:35:27.441 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1425.8766ms
2025-09-10 02:35:28.367 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - 200 null text/html 2393.2496ms
2025-09-10 02:35:28.406 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:35:28.406 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:35:28.419 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 13.5605ms
2025-09-10 02:35:28.442 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.4759ms
2025-09-10 02:35:30.543 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:35:30.553 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:35:31.956 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1412.887ms
2025-09-10 02:35:33.963 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:35:33.975 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:35:35.395 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1432.2152ms
2025-09-10 02:35:37.409 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:35:37.474 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:35:38.897 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1487.9862ms
2025-09-10 02:35:40.910 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:35:40.925 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:35:42.325 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1415.0094ms
2025-09-10 02:35:44.344 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:35:44.354 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:35:45.991 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 02:35:46.086 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1741.9333ms
2025-09-10 02:35:48.095 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:35:48.123 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:35:48.324 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2333.2457ms
2025-09-10 02:35:48.360 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:35:48.361 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:35:48.407 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 46.5904ms
2025-09-10 02:35:48.410 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 49.17ms
2025-09-10 02:35:49.547 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1451.7277ms
2025-09-10 02:35:50.440 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:35:50.451 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:35:51.870 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1429.4432ms
2025-09-10 02:35:52.180 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - application/x-www-form-urlencoded; charset=UTF-8 15
2025-09-10 02:35:52.192 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:35:53.311 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - 204 null null 1130.6463ms
2025-09-10 02:35:53.365 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 02:35:53.887 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:35:53.896 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:35:55.317 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1430.4472ms
2025-09-10 02:35:55.456 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 21
2025-09-10 02:35:55.538 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2173.9566ms
2025-09-10 02:35:55.557 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-09-10 02:35:55.572 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:35:55.581 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:35:55.633 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 60.9978ms
2025-09-10 02:35:55.645 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 63.3179ms
2025-09-10 02:35:55.764 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Orders` SET `Status` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 02:35:56.634 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - null null
2025-09-10 02:35:57.671 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:35:57.680 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:35:58.171 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 21
2025-09-10 02:35:58.327 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-09-10 02:35:58.338 +03:00 [INF] Execute GetAll for entity OrderItem
2025-09-10 02:35:58.493 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`ProductVariantId`, `o`.`Quantity`
FROM `OrderItem` AS `o`
WHERE `o`.`OrderId` = @__orderId_0
2025-09-10 02:35:58.503 +03:00 [INF] Adding quantity for variant: 1
2025-09-10 02:35:58.726 +03:00 [INF] Executing GetByIdAsync for entity ProductVariant with ID: 1
2025-09-10 02:35:58.808 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 02:35:58.875 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - 200 null text/html 2241.4771ms
2025-09-10 02:35:58.906 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:35:58.906 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:35:58.951 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1280.5765ms
2025-09-10 02:35:58.963 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `ProductVariants` SET `Quantity` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 02:35:58.969 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 63.7925ms
2025-09-10 02:35:59.010 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 104.1122ms
2025-09-10 02:36:00.092 +03:00 [INF] Quantity for variant 1 restored to 19
2025-09-10 02:36:00.243 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Orders` SET `RestockedAt` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 02:36:01.023 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:36:01.032 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:36:01.185 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/processing - null null
2025-09-10 02:36:01.246 +03:00 [INF] Order 21 auto-expired and restock scheduled
2025-09-10 02:36:01.309 +03:00 [INF] Removing cache by tags: [order]
2025-09-10 02:36:01.527 +03:00 [WRN] No cache entries found for tags: [order]
2025-09-10 02:36:01.568 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-10 02:36:01.995 +03:00 [WRN] No cache entries found for tags: [variantlist, variantdata]
2025-09-10 02:36:02.184 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 02:36:02.341 +03:00 [INF] Removing cache by tags: [collection, CollectionWithProduct]
2025-09-10 02:36:02.420 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1397.3023ms
2025-09-10 02:36:02.433 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-09-10 02:36:02.464 +03:00 [INF] Removing cache by tags: [order]
2025-09-10 02:36:02.564 +03:00 [INF] Removing cache by tags: [subcategory, subcategorywithdata]
2025-09-10 02:36:02.591 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Products` SET `Quantity` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 02:36:02.613 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 02:36:02.681 +03:00 [WRN] No cache entries found for tags: [order]
2025-09-10 02:36:02.770 +03:00 [WRN] No cache entries found for tags: [collection, CollectionWithProduct]
2025-09-10 02:36:02.993 +03:00 [WRN] No cache entries found for tags: [subcategory, subcategorywithdata]
2025-09-10 02:36:03.797 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/processing - 200 null text/html 2611.9754ms
2025-09-10 02:36:03.828 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:36:03.828 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:36:03.840 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 11.4745ms
2025-09-10 02:36:03.885 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 56.4029ms
2025-09-10 02:36:04.132 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-10 02:36:04.304 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 02:36:04.564 +03:00 [WRN] No cache entries found for tags: [variantlist, variantdata]
2025-09-10 02:36:04.642 +03:00 [INF] Restocked inventory for order 21
2025-09-10 02:36:04.734 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 02:36:04.887 +03:00 [INF] Removing cache by tag: CollectionWithProduct
2025-09-10 02:36:05.103 +03:00 [WRN] No cache entries found for tag: CollectionWithProduct
2025-09-10 02:36:05.506 +03:00 [INF] Removing cache by tags: [collection, CollectionWithProduct]
2025-09-10 02:36:05.703 +03:00 [INF] Removing cache by tag: subcategorywithdata
2025-09-10 02:36:05.893 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:36:05.904 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:36:05.924 +03:00 [WRN] No cache entries found for tag: subcategorywithdata
2025-09-10 02:36:05.934 +03:00 [WRN] No cache entries found for tags: [collection, CollectionWithProduct]
2025-09-10 02:36:05.974 +03:00 [INF] Removing cache by tags: [subcategory, subcategorywithdata]
2025-09-10 02:36:06.404 +03:00 [WRN] No cache entries found for tags: [subcategory, subcategorywithdata]
2025-09-10 02:36:06.607 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 02:36:07.044 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 02:36:07.160 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1266.8082ms
2025-09-10 02:36:09.187 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:36:09.198 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:36:10.617 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1430.1955ms
2025-09-10 02:36:12.634 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:36:12.650 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:36:14.072 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1438.0263ms
2025-09-10 02:36:15.767 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - null null
2025-09-10 02:36:16.085 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:36:16.091 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:36:17.482 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1396.7705ms
2025-09-10 02:36:18.162 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - 200 null text/html 2394.7812ms
2025-09-10 02:36:18.203 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:36:18.204 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:36:18.215 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 12.2343ms
2025-09-10 02:36:18.282 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 77.5982ms
2025-09-10 02:36:20.280 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:36:20.289 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:36:21.672 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1391.8895ms
2025-09-10 02:36:23.678 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:36:23.686 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:36:25.063 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1385.4768ms
2025-09-10 02:36:27.072 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:36:27.091 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:36:28.484 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.7768ms
2025-09-10 02:36:30.495 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:36:30.507 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:36:37.458 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order - application/json 42
2025-09-10 02:36:37.480 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:36:37.727 +03:00 [INF] Executed DbCommand (125ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:36:37.733 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 02:36:37.737 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto]]] CreateOrder(E_Commerce.DtoModels.OrderDtos.CreateOrderDto) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 02:36:37.751 +03:00 [INF] Executing CreateOrder
2025-09-10 02:36:37.754 +03:00 [INF] Creating order from cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:36:37.935 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 7440.1157ms
2025-09-10 02:36:38.578 +03:00 [INF] Executed DbCommand (286ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 02:36:38.831 +03:00 [INF] Executed DbCommand (244ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 02:36:38.853 +03:00 [INF] Checking if address 30 exists for customer: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:36:38.991 +03:00 [INF] Executed DbCommand (132ms) [Parameters=[@__addressId_0='?' (DbType = Int32), @__customerId_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `CustomerAddresses` AS `c`
    WHERE ((`c`.`Id` = @__addressId_0) AND (`c`.`CustomerId` = @__customerId_1)) AND `c`.`DeletedAt` IS NULL)
2025-09-10 02:36:38.996 +03:00 [INF] Getting cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:36:39.002 +03:00 [INF] Getting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:36:39.320 +03:00 [INF] Cache hit for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:36:39.337 +03:00 [INF] Cache hit for cart user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:36:39.342 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 02:36:39.546 +03:00 [INF] Executed DbCommand (199ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`, `p0`.`Id`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`Description`, `p0`.`DiscountId`, `p0`.`Gender`, `p0`.`IsActive`, `p0`.`ModifiedAt`, `p0`.`Name`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`SubCategoryId`, `p0`.`fitType`
FROM `ProductVariants` AS `p`
INNER JOIN `Products` AS `p0` ON `p`.`ProductId` = `p0`.`Id`
WHERE `p`.`Id` = 1
2025-09-10 02:36:39.749 +03:00 [INF] Executed DbCommand (194ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE `o`.`OrderNumber` = @__orderNumber_0)
2025-09-10 02:36:39.760 +03:00 [INF] Executing CreateAsync for entity Order
2025-09-10 02:36:39.764 +03:00 [INF] Order added successfully (pending save)
2025-09-10 02:36:40.128 +03:00 [INF] Executed DbCommand (162ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime), @p8='?' (Size = 500), @p9='?' (Size = 50), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Orders` (`CancelledAt`, `CreatedAt`, `CustomerAddressId`, `CustomerId`, `DeletedAt`, `DeliveredAt`, `DiscountAmount`, `ModifiedAt`, `Notes`, `OrderNumber`, `RestockedAt`, `ShippedAt`, `ShippingCost`, `Status`, `Subtotal`, `TaxAmount`, `Total`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Orders`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 02:36:40.168 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:36:40.182 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:36:40.247 +03:00 [INF] Executing CreateRangeAsync for entity OrderItem
2025-09-10 02:36:40.335 +03:00 [INF] 1 OrderItem entities added successfully (pending save)
2025-09-10 02:36:40.367 +03:00 [INF] Removing 19 from variant: 1
2025-09-10 02:36:40.383 +03:00 [INF] Executing GetByIdAsync for entity ProductVariant with ID: 1
2025-09-10 02:36:40.492 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 02:36:42.562 +03:00 [INF] Executed DbCommand (110ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE ProductVariants SET Quantity = Quantity - @p0 WHERE Id = @p1 AND Quantity >= @p0
2025-09-10 02:36:42.579 +03:00 [INF] Clearing cart: 3
2025-09-10 02:36:42.725 +03:00 [INF] Executed DbCommand (140ms) [Parameters=[@__cartId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE `c`.`CartId` = @__cartId_0
2025-09-10 02:36:42.734 +03:00 [INF] Cart 3 cleared successfully
2025-09-10 02:36:43.180 +03:00 [INF] Executed DbCommand (237ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Decimal), @p10='?' (DbType = Decimal), @p13='?' (DbType = Int32), @p11='?' (DbType = Boolean), @p12='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM `CartItems`
WHERE `Id` = @p0;
SELECT ROW_COUNT();

INSERT INTO `OrderItem` (`CreatedAt`, `DeletedAt`, `ModifiedAt`, `OrderId`, `OrderedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `TotalPrice`, `UnitPrice`)
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
SELECT `Id`
FROM `OrderItem`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

UPDATE `ProductVariants` SET `IsActive` = @p11, `Quantity` = @p12
WHERE `Id` = @p13;
SELECT ROW_COUNT();
2025-09-10 02:36:43.593 +03:00 [INF] Execute AddUserOpreationAsync
2025-09-10 02:36:43.596 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-09-10 02:36:43.598 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-09-10 02:36:43.601 +03:00 [INF] Execute GetAll for entity Order
2025-09-10 02:36:43.820 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 3651.5407ms
2025-09-10 02:36:44.007 +03:00 [INF] Executed DbCommand (218ms) [Parameters=[@__createdOrder_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`ModifiedAt`, `t0`.`OrderNumber`, `t0`.`Status`, `t0`.`Subtotal`, `t0`.`TaxAmount`, `t0`.`ShippingCost`, `t0`.`DiscountAmount`, `t0`.`Total`, `t0`.`Notes`, `t0`.`DeletedAt`, `t0`.`ShippedAt`, `t0`.`DeliveredAt`, `t0`.`CancelledAt`, `t0`.`c`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Email`, `t0`.`PhoneNumber`, `t1`.`Id`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`Quantity`, `t1`.`UnitPrice`, `t1`.`TotalPrice`, `t1`.`OrderedAt`, `t1`.`Id0`, `t1`.`Name`, `t1`.`Price`, `t1`.`IsActive`, `t1`.`FinalPrice`, `t1`.`DiscountPrecentage`, `t1`.`MainImageUrl`, `t1`.`Id1`, `t1`.`Color`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`Size`, `t1`.`DeletedAt`, `t1`.`Length`, `t1`.`Waist`, `t1`.`Id2`, `t1`.`Id3`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`ModifiedAt`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`ShippingCost`, `o`.`DiscountAmount`, `o`.`Total`, `o`.`Notes`, `o`.`DeletedAt`, `o`.`ShippedAt`, `o`.`DeliveredAt`, `o`.`CancelledAt`, FALSE AS `c`, `t`.`Id` AS `Id0`, `t`.`Name`, `t`.`Email`, `t`.`PhoneNumber`
    FROM `Orders` AS `o`
    INNER JOIN (
        SELECT `a`.`Id`, `a`.`Email`, `a`.`PhoneNumber`, `a`.`Name`
        FROM `AspNetUsers` AS `a`
        WHERE `a`.`Discriminator` = 'Customer'
    ) AS `t` ON `o`.`CustomerId` = `t`.`Id`
    WHERE `o`.`Id` = @__createdOrder_Id_0
    LIMIT 1
) AS `t0`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`CreatedAt`, `o0`.`ModifiedAt`, `o0`.`Quantity`, `o0`.`UnitPrice`, `o0`.`TotalPrice`, `o0`.`OrderedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND `i`.`DeletedAt` IS NULL
        LIMIT 1), '') AS `MainImageUrl`, `o0`.`ProductVariantId` AS `Id1`, `p0`.`Color`, COALESCE(`p0`.`CreatedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `CreatedAt0`, COALESCE(`p0`.`ModifiedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `ModifiedAt0`, `p0`.`Size`, `p0`.`DeletedAt`, COALESCE(`p0`.`Length`, 0) AS `Length`, COALESCE(`p0`.`Waist`, 0) AS `Waist`, `d`.`Id` AS `Id2`, `p0`.`Id` AS `Id3`, `o0`.`OrderId`
    FROM `OrderItem` AS `o0`
    INNER JOIN `Products` AS `p` ON `o0`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    INNER JOIN `ProductVariants` AS `p0` ON `o0`.`ProductVariantId` = `p0`.`Id`
) AS `t1` ON `t0`.`Id` = `t1`.`OrderId`
ORDER BY `t0`.`Id`, `t0`.`Id0`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id2`
2025-09-10 02:36:46.164 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:36:46.173 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:36:47.461 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 02:36:47.625 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__productId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE (`p`.`ProductId` = @__productId_0) AND `p`.`DeletedAt` IS NULL
2025-09-10 02:36:47.696 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1531.6052ms
2025-09-10 02:36:48.779 +03:00 [INF] Executed DbCommand (204ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-09-10 02:36:49.179 +03:00 [INF] Executed DbCommand (203ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Products` SET `Quantity` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 02:36:50.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:36:50.159 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:36:50.662 +03:00 [INF] Removing cache by tags: [order]
2025-09-10 02:36:50.934 +03:00 [WRN] No cache entries found for tags: [order]
2025-09-10 02:36:51.355 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-10 02:36:51.836 +03:00 [WRN] No cache entries found for tags: [variantlist, variantdata]
2025-09-10 02:36:52.834 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2685.6273ms
2025-09-10 02:36:55.147 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:36:55.160 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:36:55.499 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 02:36:55.584 +03:00 [INF] Removing cache by tag: CollectionWithProduct
2025-09-10 02:36:55.822 +03:00 [WRN] No cache entries found for tag: CollectionWithProduct
2025-09-10 02:36:55.989 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 02:36:57.479 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2332.0527ms
2025-09-10 02:36:59.128 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 02:36:59.133 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce) in 21388.9639ms
2025-09-10 02:36:59.139 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 02:36:59.189 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order - 201 1433 application/json; charset=utf-8 21730.2177ms
2025-09-10 02:36:59.328 +03:00 [INF] Removing cache by tag: subcategorywithdata
2025-09-10 02:36:59.563 +03:00 [WRN] No cache entries found for tag: subcategorywithdata
2025-09-10 02:36:59.937 +03:00 [INF] Removing cache by tags: [collection, CollectionWithProduct]
2025-09-10 02:37:00.025 +03:00 [INF] Removing cache by tags: [subcategory, subcategorywithdata]
2025-09-10 02:37:00.196 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:37:00.200 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:37:00.540 +03:00 [WRN] No cache entries found for tags: [collection, CollectionWithProduct]
2025-09-10 02:37:00.540 +03:00 [WRN] No cache entries found for tags: [subcategory, subcategorywithdata]
2025-09-10 02:37:00.899 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 02:37:01.337 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 02:37:01.626 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1429.9861ms
2025-09-10 02:37:04.153 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:37:04.168 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:37:06.879 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2725.8648ms
2025-09-10 02:37:09.146 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:37:09.155 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:37:11.789 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2643.1001ms
2025-09-10 02:37:14.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:37:14.170 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:37:15.577 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1417.3659ms
2025-09-10 02:37:18.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:37:18.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:37:20.706 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2551.4661ms
2025-09-10 02:37:23.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:37:23.162 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:37:24.550 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1394.9954ms
2025-09-10 02:37:27.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:37:27.163 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:37:28.599 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1444.0568ms
2025-09-10 02:37:31.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:37:31.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:37:34.092 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2936.4557ms
2025-09-10 02:37:37.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:37:37.167 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:37:39.936 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2778.8486ms
2025-09-10 02:37:42.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:37:42.160 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:37:44.430 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2276.4775ms
2025-09-10 02:37:47.152 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:37:47.161 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:37:49.179 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2027.5721ms
2025-09-10 02:37:52.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:37:52.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:37:53.365 +03:00 [INF] 1 servers were removed due to timeout
2025-09-10 02:37:57.103 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 4944.727ms
2025-09-10 02:37:59.161 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:37:59.170 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:38:03.476 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 4315.1956ms
2025-09-10 02:38:06.165 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:38:06.171 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:38:09.111 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2945.6396ms
2025-09-10 02:38:11.152 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:38:11.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:38:13.445 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2292.5732ms
2025-09-10 02:38:16.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:38:16.169 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:38:19.375 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 3217.4297ms
2025-09-10 02:38:22.148 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:38:22.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:38:23.579 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1430.5272ms
2025-09-10 02:38:26.162 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:38:26.178 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:38:28.423 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2261.5711ms
2025-09-10 02:38:31.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:38:31.157 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:38:35.208 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 4056.8011ms
2025-09-10 02:38:38.148 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:38:38.157 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:38:40.395 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2246.8258ms
2025-09-10 02:38:43.163 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:38:43.173 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:38:45.759 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2596.4311ms
2025-09-10 02:38:48.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:38:48.168 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:38:49.764 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1612.519ms
2025-09-10 02:38:52.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:38:52.159 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:38:54.107 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Payment - application/json 138
2025-09-10 02:38:54.116 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:38:54.120 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Customer|Admin)
2025-09-10 02:38:54.132 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-09-10 02:38:54.139 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Payment - 403 0 null 32.4279ms
2025-09-10 02:38:54.412 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2262.0608ms
2025-09-10 02:38:57.168 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:38:57.184 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:38:59.644 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2476.217ms
2025-09-10 02:39:02.176 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:39:02.200 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:39:04.760 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2584.1327ms
2025-09-10 02:39:07.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:39:07.167 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:39:10.765 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 3608.25ms
2025-09-10 02:39:13.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:39:13.157 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:39:14.572 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1423.1211ms
2025-09-10 02:39:17.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:39:17.172 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:39:18.574 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1418.9159ms
2025-09-10 02:39:21.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:39:21.161 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:39:23.132 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1981.3317ms
2025-09-10 02:39:26.169 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:39:26.174 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:39:30.060 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 3891.8773ms
2025-09-10 02:39:32.211 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:39:32.221 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:39:33.432 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Payment - application/json 115
2025-09-10 02:39:33.439 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:39:33.737 +03:00 [INF] Executed DbCommand (146ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:39:33.742 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.PaymentController.CreatePayment (E-Commerce)'
2025-09-10 02:39:33.755 +03:00 [INF] Route matched with {action = "CreatePayment", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto]]] CreatePayment(CreatePaymentRequest) on controller E_Commerce.Controllers.PaymentController (E-Commerce).
2025-09-10 02:39:33.805 +03:00 [INF] Executing CreatePayment for order: ORD-20250909233639-1140
2025-09-10 02:39:33.824 +03:00 [INF] Starting CreatePaymentMethod for order ORD-20250909233639-1140 by user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:39:34.683 +03:00 [INF] Getting order by number: ORD-20250909233639-1140
2025-09-10 02:39:34.873 +03:00 [INF] Executed DbCommand (181ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`OrderNumber` = @__orderNumber_0
LIMIT 1
2025-09-10 02:39:34.882 +03:00 [WRN] Order 23 does not belong to user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 02:39:35.073 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 02:39:35.082 +03:00 [INF] Executed action E_Commerce.Controllers.PaymentController.CreatePayment (E-Commerce) in 1322.853ms
2025-09-10 02:39:35.106 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.PaymentController.CreatePayment (E-Commerce)'
2025-09-10 02:39:35.109 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Payment - 400 230 application/json; charset=utf-8 1677.0353ms
2025-09-10 02:39:35.896 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 3684.9565ms
2025-09-10 02:39:38.147 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:39:38.155 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:39:40.346 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2198.6943ms
2025-09-10 02:39:43.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:39:43.172 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:39:45.840 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2682.7317ms
2025-09-10 02:39:48.408 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:39:48.439 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:39:49.893 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1485.4362ms
2025-09-10 02:39:52.246 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:39:52.256 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:39:55.352 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 3106.7184ms
2025-09-10 02:39:58.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:39:58.173 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:39:59.608 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1451.0453ms
2025-09-10 02:40:02.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:40:02.167 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:40:03.613 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1455.0254ms
2025-09-10 02:40:06.147 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:40:06.160 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:40:09.506 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 3358.9135ms
2025-09-10 02:40:12.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:40:12.171 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:40:14.417 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2263.2691ms
2025-09-10 02:40:17.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:40:17.169 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:40:19.872 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2712.8915ms
2025-09-10 02:40:22.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:40:22.192 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:40:24.508 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2348.3951ms
2025-09-10 02:40:27.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:40:27.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:40:30.364 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 3205.4641ms
2025-09-10 02:40:33.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:40:33.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:40:34.872 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1711.982ms
2025-09-10 02:40:37.162 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:40:37.180 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:40:38.938 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1776.024ms
2025-09-10 02:40:41.161 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:40:41.179 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:40:44.677 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 3515.4566ms
2025-09-10 02:40:47.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:40:47.159 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:40:49.722 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2567.0525ms
2025-09-10 02:40:52.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:40:52.163 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:40:55.019 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2864.1285ms
2025-09-10 02:40:57.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:40:57.161 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:40:59.305 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2153.1651ms
2025-09-10 02:42:26.012 +03:00 [INF] DB tables already exist. Exit install
2025-09-10 02:42:27.255 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-10 02:42:28.284 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-10 02:42:28.963 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-10 02:42:29.146 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-09-10 02:42:29.170 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-10 02:42:29.185 +03:00 [INF] Starting data seeding...
2025-09-10 02:42:29.226 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-10 02:42:29.826 +03:00 [INF] Executed DbCommand (117ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-10 02:42:29.892 +03:00 [INF] Role 'Admin' already exists.
2025-09-10 02:42:30.052 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-10 02:42:30.095 +03:00 [INF] Role 'User' already exists.
2025-09-10 02:42:30.282 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-10 02:42:30.435 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-09-10 02:42:30.471 +03:00 [INF] Data seeding completed successfully.
2025-09-10 02:42:32.059 +03:00 [INF] Now listening on: http://localhost:5069
2025-09-10 02:42:32.149 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-09-10 02:42:32.151 +03:00 [INF] Using the following options for SQL Server job storage:
2025-09-10 02:42:32.154 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-09-10 02:42:32.156 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-09-10 02:42:32.169 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-10 02:42:32.190 +03:00 [INF] Hosting environment: Development
2025-09-10 02:42:32.193 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-09-10 02:42:32.379 +03:00 [INF] Server mrrobot:8084:2e7a8fe1 successfully announced in 198.3404 ms
2025-09-10 02:42:32.400 +03:00 [INF] Server mrrobot:8084:2e7a8fe1 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-09-10 02:42:32.526 +03:00 [INF] Server mrrobot:8084:2e7a8fe1 all the dispatchers started
2025-09-10 02:42:32.879 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-09-10 02:42:33.239 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 360.8717ms
2025-09-10 02:42:33.342 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-09-10 02:42:33.347 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:42:33.724 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:42:33.730 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 388.1608ms
2025-09-10 02:42:33.754 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 29.407ms
2025-09-10 02:42:33.821 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 473.8679ms
2025-09-10 02:42:34.045 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-09-10 02:42:34.364 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 318.8003ms
2025-09-10 02:44:28.702 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Payment - application/json 138
2025-09-10 02:44:28.710 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-10 02:44:28.912 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:44:29.131 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:44:29.150 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.PaymentController.CreatePayment (E-Commerce)'
2025-09-10 02:44:29.180 +03:00 [INF] Route matched with {action = "CreatePayment", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto]]] CreatePayment(CreatePaymentRequestDto) on controller E_Commerce.Controllers.PaymentController (E-Commerce).
2025-09-10 02:44:29.597 +03:00 [INF] Executing CreatePayment for order: ORD-20250909233639-1140
2025-09-10 02:44:29.609 +03:00 [INF] Starting CreatePaymentMethod for order ORD-20250909233639-1140 by user e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 02:44:29.856 +03:00 [INF] Getting order by number: ORD-20250909233639-1140
2025-09-10 02:44:29.955 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`OrderNumber` = @__orderNumber_0
LIMIT 1
2025-09-10 02:44:30.045 +03:00 [INF] Execute GetAll for entity Payment
2025-09-10 02:44:30.153 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__order_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Amount`, `p`.`CreatedAt`, `p`.`CustomerId`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`OrderId`, `p`.`PaymentDate`, `p`.`PaymentMethodId`, `p`.`PaymentProviderId`, `p`.`ProviderOrderId`, `p`.`Status`, `p`.`TransactionId`
FROM `Payments` AS `p`
WHERE (`p`.`OrderId` = @__order_Id_0) AND (`p`.`Status` = 1)
LIMIT 1
2025-09-10 02:44:30.177 +03:00 [INF] Getting payment method ID for enum "Visa"
2025-09-10 02:44:30.184 +03:00 [INF] Execute GetAll for entity PaymentMethod
2025-09-10 02:44:30.285 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__methodEnum_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`
FROM `PaymentMethods` AS `p`
WHERE ((`p`.`Method` = @__methodEnum_0) AND `p`.`IsActive`) AND `p`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 02:44:30.298 +03:00 [INF] Found payment method ID 1 for enum "Visa"
2025-09-10 02:44:30.325 +03:00 [INF] Executing GetByIdAsync for entity PaymentMethod with ID: 1
2025-09-10 02:44:30.413 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IntegrationId`, `p`.`IsActive`, `p`.`Method`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`PaymentProviderId`
FROM `PaymentMethods` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 02:44:30.482 +03:00 [INF] Execute GetAll for entity PaymentProvider
2025-09-10 02:44:30.568 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`PublicKey`
FROM `PaymentProviders` AS `p`
WHERE `p`.`Provider` = 1
LIMIT 1
2025-09-10 02:44:30.576 +03:00 [INF] Executing GetTokenAsync
2025-09-10 02:44:30.591 +03:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-09-10 02:44:30.611 +03:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-09-10 02:44:31.359 +03:00 [INF] Received HTTP response headers after 741.9869ms - 201
2025-09-10 02:44:31.363 +03:00 [INF] End processing HTTP request after 778.165ms - 201
2025-09-10 02:44:31.368 +03:00 [INF] Successfully retrieved PayMob token
2025-09-10 02:44:31.472 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 02:44:31.515 +03:00 [INF] Getting address by ID: 30
2025-09-10 02:44:31.673 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__addressId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AdditionalNotes`, `c`.`AddressType`, `c`.`City`, `c`.`Country`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`IsDefault`, `c`.`ModifiedAt`, `c`.`PhoneNumber`, `c`.`PostalCode`, `c`.`State`, `c`.`StreetAddress`, `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Discriminator`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `t`.`Age`, `t`.`CreateAt`, `t`.`DeletedAt`, `t`.`Gender`, `t`.`ImageId`, `t`.`ImageId1`, `t`.`LastVisit`, `t`.`Name`
FROM `CustomerAddresses` AS `c`
INNER JOIN (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Discriminator` = 'Customer'
) AS `t` ON `c`.`CustomerId` = `t`.`Id`
WHERE (`c`.`Id` = @__addressId_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 02:44:31.745 +03:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/ecommerce/orders
2025-09-10 02:44:31.748 +03:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/ecommerce/orders
2025-09-10 02:44:31.982 +03:00 [INF] Received HTTP response headers after 232.0202ms - 201
2025-09-10 02:44:31.986 +03:00 [INF] End processing HTTP request after 241.624ms - 201
2025-09-10 02:44:32.098 +03:00 [INF] Successfully created PayMob order: 383664898 for local order: ORD-20250909233639-1140
2025-09-10 02:44:32.100 +03:00 [INF] Execute GetAll for entity PaymentMethod
2025-09-10 02:44:32.182 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__dto_PaymentMethod_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`IntegrationId`
FROM `PaymentMethods` AS `p`
INNER JOIN `PaymentProviders` AS `p0` ON `p`.`PaymentProviderId` = `p0`.`Id`
WHERE ((`p`.`Method` = @__dto_PaymentMethod_0) AND `p`.`IsActive`) AND (`p0`.`Provider` = 1)
LIMIT 1
2025-09-10 02:44:32.191 +03:00 [INF] Using integration ID: 5221967 for payment method: "Visa"
2025-09-10 02:44:32.198 +03:00 [INF] Starting GeneratePaymentKeyAsync for Order ID: 383664898, Amount: 190000
2025-09-10 02:44:32.214 +03:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/acceptance/payment_keys
2025-09-10 02:44:32.218 +03:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/acceptance/payment_keys
2025-09-10 02:44:32.440 +03:00 [INF] Received HTTP response headers after 218.9234ms - 201
2025-09-10 02:44:32.445 +03:00 [INF] End processing HTTP request after 230.8856ms - 201
2025-09-10 02:44:32.450 +03:00 [INF] Request sent to Paymob payment_keys endpoint
2025-09-10 02:44:32.454 +03:00 [INF] Received response from Paymob payment_keys endpoint
2025-09-10 02:44:32.457 +03:00 [INF] Payment key generated successfully for Order ID: 383664898
2025-09-10 02:44:32.461 +03:00 [INF] Successfully generated payment key for order: ORD-20250909233639-1140
2025-09-10 02:44:32.467 +03:00 [INF] Execute GetAll for entity PaymentProvider
2025-09-10 02:44:32.549 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__paymentProvider_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`IframeId`
FROM `PaymentProviders` AS `p`
WHERE `p`.`Provider` = @__paymentProvider_0
LIMIT 1
2025-09-10 02:44:32.562 +03:00 [INF] Executing CreateAsync for entity Payment
2025-09-10 02:44:32.643 +03:00 [INF] Payment added successfully (pending save)
2025-09-10 02:44:32.651 +03:00 [INF] Execute AddUserOpreationAsync
2025-09-10 02:44:32.656 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-09-10 02:44:32.679 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-09-10 02:44:33.011 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?' (Size = 255), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int64), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime), @p17='?' (DbType = Int32), @p18='?' (DbType = DateTime), @p19='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Payments` (`Amount`, `CreatedAt`, `CustomerId`, `DeletedAt`, `ModifiedAt`, `OrderId`, `PaymentDate`, `PaymentMethodId`, `PaymentProviderId`, `ProviderOrderId`, `Status`, `TransactionId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
SELECT `Id`
FROM `Payments`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `userOperationsLogs` (`CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`, `UserId`)
VALUES (@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
SELECT `Id`
FROM `userOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 02:44:33.241 +03:00 [INF] Payment created successfully with ID 4
2025-09-10 02:44:34.233 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 02:44:34.323 +03:00 [INF] Executed action E_Commerce.Controllers.PaymentController.CreatePayment (E-Commerce) in 5134.5943ms
2025-09-10 02:44:34.334 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.PaymentController.CreatePayment (E-Commerce)'
2025-09-10 02:44:34.356 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Payment - 200 1365 application/json; charset=utf-8 5654.0227ms
2025-09-10 02:46:20.664 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire - null null
2025-09-10 02:46:22.960 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire - 200 null text/html 2295.9052ms
2025-09-10 02:46:22.992 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/css-dark18180236887862 - null null
2025-09-10 02:46:22.993 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/js181801003282028 - null null
2025-09-10 02:46:22.995 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:46:22.995 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:46:22.996 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/css181802036264275 - null null
2025-09-10 02:46:23.013 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/css-dark18180236887862 - 200 null text/css 21.4588ms
2025-09-10 02:46:23.038 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 42.7338ms
2025-09-10 02:46:23.053 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/js181801003282028 - 200 null application/javascript 60.2369ms
2025-09-10 02:46:23.085 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/css181802036264275 - 200 null text/css 88.4437ms
2025-09-10 02:46:23.085 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 90.0194ms
2025-09-10 02:46:24.874 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - null null
2025-09-10 02:46:25.277 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 258
2025-09-10 02:46:25.288 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:46:26.435 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - 200 null text/html 1560.5227ms
2025-09-10 02:46:26.461 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:46:26.463 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:46:26.504 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.0392ms
2025-09-10 02:46:26.522 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 59.0684ms
2025-09-10 02:46:26.554 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1276.5505ms
2025-09-10 02:46:27.465 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 02:46:28.540 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:46:28.557 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:46:29.821 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2355.3168ms
2025-09-10 02:46:29.847 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:46:29.848 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:46:29.870 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 22.3943ms
2025-09-10 02:46:29.903 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 55.5679ms
2025-09-10 02:46:29.962 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1421.9362ms
2025-09-10 02:46:31.905 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:46:31.917 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:46:33.419 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1514.4617ms
2025-09-10 02:46:35.433 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:46:35.460 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:46:36.855 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1421.3247ms
2025-09-10 02:46:37.692 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - application/x-www-form-urlencoded; charset=UTF-8 15
2025-09-10 02:46:37.703 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:46:38.829 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - 204 null null 1137.7418ms
2025-09-10 02:46:38.852 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 02:46:38.871 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:46:38.879 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:46:40.262 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1391.6352ms
2025-09-10 02:46:40.959 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2107.2001ms
2025-09-10 02:46:41.002 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:46:41.014 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:46:41.051 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 49.2851ms
2025-09-10 02:46:41.064 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 49.5271ms
2025-09-10 02:46:41.994 +03:00 [INF] Starting CheckAndUpdatePaymentStatusAsync for payment 4
2025-09-10 02:46:42.225 +03:00 [INF] Executing GetByIdAsync for entity Payment with ID: 4
2025-09-10 02:46:42.306 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Amount`, `p`.`CreatedAt`, `p`.`CustomerId`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`OrderId`, `p`.`PaymentDate`, `p`.`PaymentMethodId`, `p`.`PaymentProviderId`, `p`.`ProviderOrderId`, `p`.`Status`, `p`.`TransactionId`
FROM `Payments` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 02:46:42.316 +03:00 [INF] Execute GetAll for entity PaymentProvider
2025-09-10 02:46:42.392 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`PublicKey`
FROM `PaymentProviders` AS `p`
WHERE `p`.`Provider` = 1
LIMIT 1
2025-09-10 02:46:42.400 +03:00 [INF] Executing GetTokenAsync
2025-09-10 02:46:42.403 +03:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-09-10 02:46:42.407 +03:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-09-10 02:46:43.099 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:46:43.106 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:46:43.131 +03:00 [INF] Received HTTP response headers after 721.0444ms - 201
2025-09-10 02:46:43.134 +03:00 [INF] End processing HTTP request after 731.7336ms - 201
2025-09-10 02:46:43.139 +03:00 [INF] Successfully retrieved PayMob token
2025-09-10 02:46:43.142 +03:00 [INF] Start processing HTTP request GET https://accept.paymob.com/api/ecommerce/orders/383664898
2025-09-10 02:46:43.146 +03:00 [INF] Sending HTTP request GET https://accept.paymob.com/api/ecommerce/orders/383664898
2025-09-10 02:46:43.359 +03:00 [INF] Received HTTP response headers after 209.9735ms - 200
2025-09-10 02:46:43.363 +03:00 [INF] End processing HTTP request after 220.9924ms - 200
2025-09-10 02:46:44.337 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1237.7657ms
2025-09-10 02:46:44.411 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Payments` SET `ModifiedAt` = @p0, `Status` = @p1
WHERE `Id` = @p2;
SELECT ROW_COUNT();
2025-09-10 02:46:45.433 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/processing - null null
2025-09-10 02:46:46.352 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:46:46.364 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:46:47.769 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1416.7143ms
2025-09-10 02:46:48.018 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/processing - 200 null text/html 2584.7983ms
2025-09-10 02:46:48.043 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:46:48.047 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:46:48.057 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 13.3726ms
2025-09-10 02:46:48.127 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 80.3057ms
2025-09-10 02:46:48.973 +03:00 [INF] Payment 4 updated to "Completed"
2025-09-10 02:46:50.081 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:46:50.100 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:46:51.384 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1303.2413ms
2025-09-10 02:46:52.142 +03:00 [INF] Execute GetAll for entity Order
2025-09-10 02:46:52.282 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__8__locals1_orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CancelledAt`, `t`.`CreatedAt`, `t`.`CustomerAddressId`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`DeliveredAt`, `t`.`DiscountAmount`, `t`.`ModifiedAt`, `t`.`Notes`, `t`.`OrderNumber`, `t`.`RestockedAt`, `t`.`ShippedAt`, `t`.`ShippingCost`, `t`.`Status`, `t`.`Subtotal`, `t`.`TaxAmount`, `t`.`Total`, `o0`.`Id`, `o0`.`CreatedAt`, `o0`.`DeletedAt`, `o0`.`ModifiedAt`, `o0`.`OrderId`, `o0`.`OrderedAt`, `o0`.`ProductId`, `o0`.`ProductVariantId`, `o0`.`Quantity`, `o0`.`TotalPrice`, `o0`.`UnitPrice`
FROM (
    SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
    FROM `Orders` AS `o`
    WHERE `o`.`Id` = @__8__locals1_orderId_0
    LIMIT 1
) AS `t`
LEFT JOIN `OrderItem` AS `o0` ON `t`.`Id` = `o0`.`OrderId`
ORDER BY `t`.`Id`
2025-09-10 02:46:53.206 +03:00 [INF] Removing cache by tags: [order]
2025-09-10 02:46:53.401 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:46:53.417 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:46:53.435 +03:00 [WRN] No cache entries found for tags: [order]
2025-09-10 02:46:54.306 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-10 02:46:54.513 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 02:46:54.618 +03:00 [INF] Removing cache by tags: [subcategory, subcategorywithdata]
2025-09-10 02:46:54.735 +03:00 [WRN] No cache entries found for tags: [variantlist, variantdata]
2025-09-10 02:46:54.813 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1412.1901ms
2025-09-10 02:46:54.941 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 02:46:54.978 +03:00 [INF] Removing cache by tags: [collection, CollectionWithProduct]
2025-09-10 02:46:55.045 +03:00 [WRN] No cache entries found for tags: [subcategory, subcategorywithdata]
2025-09-10 02:46:55.407 +03:00 [WRN] No cache entries found for tags: [collection, CollectionWithProduct]
2025-09-10 02:46:56.837 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:46:56.847 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:46:58.102 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1265.3059ms
2025-09-10 02:47:00.130 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:47:00.154 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:47:00.578 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - null null
2025-09-10 02:47:02.202 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2072.3884ms
2025-09-10 02:47:03.207 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - 200 null text/html 2629.1852ms
2025-09-10 02:47:03.247 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:47:03.248 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:47:03.263 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 16.4619ms
2025-09-10 02:47:03.357 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 109.6784ms
2025-09-10 02:47:05.334 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:47:05.341 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:47:06.721 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1387.0916ms
2025-09-10 02:47:08.737 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:47:08.763 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:47:10.171 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1433.688ms
2025-09-10 02:47:12.179 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:47:12.192 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:47:13.588 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.6759ms
2025-09-10 02:47:15.597 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:47:15.605 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:47:17.040 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1443.469ms
2025-09-10 02:47:19.061 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:47:19.074 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:47:20.455 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1393.4434ms
2025-09-10 02:47:22.470 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:47:22.477 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:47:23.848 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1377.3445ms
2025-09-10 02:47:25.861 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:47:25.870 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:47:27.247 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1386.3431ms
2025-09-10 02:47:29.260 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:47:29.269 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:47:30.675 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1414.7926ms
2025-09-10 02:47:32.703 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:47:32.712 +03:00 [INF] 1 servers were removed due to timeout
2025-09-10 02:47:32.753 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:47:32.781 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - null null
2025-09-10 02:47:32.801 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:47:32.975 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:47:32.981 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.GetOrders (E-Commerce)'
2025-09-10 02:47:32.992 +03:00 [INF] Route matched with {action = "GetOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.OrderDtos.OrderListDto]]]] GetOrders(System.String, System.Nullable`1[System.Boolean], Int32, Int32, System.Nullable`1[E_Commerce.Enums.OrderStatus]) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 02:47:33.007 +03:00 [INF] Executing GetOrders: role: User, userId: e682f183-1c61-400b-aa5a-171750f446b5, deleted: , page: 1, size: 10, status: 
2025-09-10 02:47:33.014 +03:00 [INF] Filtering orders - UserId: e682f183-1c61-400b-aa5a-171750f446b5, Deleted: null, Page: 1, PageSize: 10, Status: null
2025-09-10 02:47:33.022 +03:00 [INF] Getting cache for key: order:filter:user:e682f183-1c61-400b-aa5a-171750f446b5_deleted:all_page:1_size:10_status:all
2025-09-10 02:47:33.239 +03:00 [WRN] Cache miss for key: order:filter:user:e682f183-1c61-400b-aa5a-171750f446b5_deleted:all_page:1_size:10_status:all
2025-09-10 02:47:33.243 +03:00 [INF] Execute GetAll for entity Order
2025-09-10 02:47:33.433 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 255), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`OrderNumber`, `t0`.`Name`, `t`.`Status`, `t`.`Total`, `t`.`CreatedAt`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`CustomerId`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Total`
    FROM `Orders` AS `o`
    WHERE `o`.`CustomerId` = @__8__locals1_userId_0
    ORDER BY `o`.`CreatedAt` DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS `t`
INNER JOIN (
    SELECT `a`.`Id`, `a`.`Name`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Discriminator` = 'Customer'
) AS `t0` ON `t`.`CustomerId` = `t0`.`Id`
ORDER BY `t`.`CreatedAt` DESC
2025-09-10 02:47:34.127 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1424.3658ms
2025-09-10 02:47:34.334 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.OrderDtos.OrderListDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 02:47:34.354 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.GetOrders (E-Commerce) in 1355.9528ms
2025-09-10 02:47:34.391 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.GetOrders (E-Commerce)'
2025-09-10 02:47:34.401 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - 200 458 application/json; charset=utf-8 1619.7408ms
2025-09-10 02:47:35.989 +03:00 [INF] Setting cache for key: order:filter:user:e682f183-1c61-400b-aa5a-171750f446b5_deleted:all_page:1_size:10_status:all
2025-09-10 02:47:36.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:47:36.159 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:47:36.234 +03:00 [INF] Cache set successfully for key: order:filter:user:e682f183-1c61-400b-aa5a-171750f446b5_deleted:all_page:1_size:10_status:all with tags: [order]
2025-09-10 02:47:37.536 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1385.0636ms
2025-09-10 02:47:39.558 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:47:39.592 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:47:40.833 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1275.2467ms
2025-09-10 02:47:42.848 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:47:42.859 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:47:44.252 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1403.5959ms
2025-09-10 02:47:46.263 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:47:46.290 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:47:47.667 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1404.4851ms
2025-09-10 02:47:49.693 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:47:49.710 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:47:51.107 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1414.0264ms
2025-09-10 02:47:53.126 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:47:53.133 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:47:54.531 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.0634ms
2025-09-10 02:47:56.550 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:47:56.580 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:47:57.974 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1424.027ms
2025-09-10 02:47:59.995 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:48:00.006 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:48:04.475 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 4479.5907ms
2025-09-10 02:48:07.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:48:07.157 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:48:10.904 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 3753.2626ms
2025-09-10 02:48:13.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:48:13.160 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:48:14.587 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1437.426ms
2025-09-10 02:48:17.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:48:17.154 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:48:18.565 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1415.9626ms
2025-09-10 02:48:21.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:48:21.167 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:48:22.572 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1421.6766ms
2025-09-10 02:48:25.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:48:25.162 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:48:26.560 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1410.2145ms
2025-09-10 02:48:29.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:48:29.175 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:48:30.558 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1401.6686ms
2025-09-10 02:48:33.164 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:48:33.190 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:48:34.724 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1559.8881ms
2025-09-10 02:48:37.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:48:37.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:48:38.550 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1396.5055ms
2025-09-10 02:48:41.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:48:41.172 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:48:42.565 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.3377ms
2025-09-10 02:48:45.171 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:48:45.178 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:48:46.563 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1392.3809ms
2025-09-10 02:48:49.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:48:49.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:48:50.545 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.8074ms
2025-09-10 02:48:53.170 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:48:53.196 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:48:54.576 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.7547ms
2025-09-10 02:48:57.153 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:48:57.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:48:58.988 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1834.9928ms
2025-09-10 02:49:01.161 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:49:01.180 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:49:02.566 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1404.9783ms
2025-09-10 02:49:05.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:49:05.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:49:07.058 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1902.602ms
2025-09-10 02:49:09.164 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:49:09.178 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:49:10.816 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1651.4316ms
2025-09-10 02:49:13.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:49:13.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:49:14.548 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1391.9593ms
2025-09-10 02:49:17.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:49:17.163 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:49:18.573 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1419.121ms
2025-09-10 02:49:21.165 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:49:21.185 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:49:22.585 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1420.2886ms
2025-09-10 02:49:25.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:49:25.162 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:49:26.568 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1418.9999ms
2025-09-10 02:49:29.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:49:29.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:49:30.544 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1384.2898ms
2025-09-10 02:49:33.166 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:49:33.199 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:49:34.568 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1402.1929ms
2025-09-10 02:49:37.152 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:49:37.176 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:49:38.572 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1420.1914ms
2025-09-10 02:49:41.147 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:49:41.154 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:49:42.522 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1374.965ms
2025-09-10 02:49:45.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:49:45.167 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:49:46.539 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1382.0309ms
2025-09-10 02:49:49.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:49:49.168 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:49:50.568 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.0486ms
2025-09-10 02:49:53.187 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:49:53.197 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:49:54.575 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.3303ms
2025-09-10 02:49:57.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:49:57.178 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:49:58.865 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1705.4937ms
2025-09-10 02:50:01.165 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:50:01.180 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:50:02.556 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1391.2215ms
2025-09-10 02:50:05.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:50:05.181 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:50:06.572 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1414.1495ms
2025-09-10 02:50:09.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:50:09.159 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:50:10.535 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1384.6746ms
2025-09-10 02:50:13.148 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:50:13.155 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:50:14.538 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1390.6608ms
2025-09-10 02:50:17.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:50:17.160 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:50:18.532 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1377.9721ms
2025-09-10 02:50:21.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:50:21.174 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:50:22.558 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1408.4827ms
2025-09-10 02:50:25.153 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:50:25.162 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:50:26.558 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1404.3479ms
2025-09-10 02:50:29.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:50:29.177 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:50:30.580 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1426.8515ms
2025-09-10 02:50:33.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:50:33.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:50:34.852 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1693.334ms
2025-09-10 02:50:37.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:50:37.173 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:50:38.557 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1401.043ms
2025-09-10 02:50:41.162 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:50:41.185 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:50:42.571 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1408.7294ms
2025-09-10 02:50:45.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:50:45.178 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:50:46.574 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1414.7907ms
2025-09-10 02:50:49.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:50:49.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:50:50.562 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1406.2579ms
2025-09-10 02:50:53.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:50:53.160 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:50:54.561 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.4053ms
2025-09-10 02:50:57.164 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:50:57.176 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:50:58.586 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1422.4445ms
2025-09-10 02:51:01.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:51:01.161 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:51:02.559 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1407.9761ms
2025-09-10 02:51:05.164 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:51:05.186 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:51:06.602 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1437.7534ms
2025-09-10 02:51:09.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:51:09.167 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:51:10.571 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1413.5298ms
2025-09-10 02:51:13.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:51:13.160 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:51:14.538 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1387.8601ms
2025-09-10 02:51:17.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:51:17.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:51:18.546 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1389.5521ms
2025-09-10 02:51:21.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:51:21.161 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:51:22.533 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1382.3841ms
2025-09-10 02:51:25.148 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:51:25.157 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:51:26.527 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1379.05ms
2025-09-10 02:51:29.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:51:29.160 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:51:30.548 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1397.8583ms
2025-09-10 02:51:33.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:51:33.186 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:51:34.585 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1428.037ms
2025-09-10 02:51:37.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:51:37.157 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:51:38.543 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1392.2582ms
2025-09-10 02:51:41.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:51:41.170 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:51:42.557 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1399.6332ms
2025-09-10 02:51:45.152 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:51:45.160 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:51:46.555 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1403.7707ms
2025-09-10 02:51:49.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:51:49.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:51:50.543 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1387.936ms
2025-09-10 02:51:53.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:51:53.179 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:51:54.581 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1431.8876ms
2025-09-10 02:51:57.153 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:51:57.161 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:51:58.557 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1404.4147ms
2025-09-10 02:52:01.145 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:52:01.153 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:52:02.557 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1412.2163ms
2025-09-10 02:52:05.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:52:05.163 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:52:06.547 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1391.4474ms
2025-09-10 02:52:09.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:52:09.161 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:52:10.540 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.7791ms
2025-09-10 02:52:13.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:52:13.181 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:52:14.571 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1420.7921ms
2025-09-10 02:52:17.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:52:17.159 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:52:18.537 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.2971ms
2025-09-10 02:52:21.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:52:21.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:52:22.562 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1404.8517ms
2025-09-10 02:52:25.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:52:25.163 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:52:26.543 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1385.4315ms
2025-09-10 02:52:29.153 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:52:29.175 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:52:30.576 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1423.6858ms
2025-09-10 02:52:33.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:52:33.186 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:52:34.559 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1402.2091ms
2025-09-10 02:52:37.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:52:37.184 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:52:38.903 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1745.874ms
2025-09-10 02:52:41.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:52:41.170 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:52:42.557 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1401.6972ms
2025-09-10 02:52:45.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:52:45.174 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:52:46.558 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1401.8796ms
2025-09-10 02:52:49.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:52:49.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:52:50.548 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1391.3638ms
2025-09-10 02:52:53.152 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:52:53.172 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:52:54.574 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1421.8003ms
2025-09-10 02:52:57.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:52:57.173 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:52:58.558 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1401.3357ms
2025-09-10 02:53:01.163 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:53:01.182 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:53:02.584 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1421.8309ms
2025-09-10 02:53:05.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:53:05.167 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:53:06.566 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1408.0418ms
2025-09-10 02:53:09.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:53:09.160 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:53:10.546 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1396.3747ms
2025-09-10 02:53:13.153 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:53:13.160 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:53:15.203 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2050.2885ms
2025-09-10 02:53:18.146 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:53:18.156 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:53:19.535 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.8378ms
2025-09-10 02:53:22.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:53:22.184 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:53:23.571 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1410.6334ms
2025-09-10 02:53:26.162 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:53:26.199 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:53:27.577 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1415.3768ms
2025-09-10 02:53:30.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:53:30.167 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:53:31.551 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1393.5003ms
2025-09-10 02:53:34.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:53:34.157 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:53:35.532 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1381.935ms
2025-09-10 02:53:36.982 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - null null
2025-09-10 02:53:37.080 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 02:53:37.254 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 02:53:37.258 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.GetOrders (E-Commerce)'
2025-09-10 02:53:37.263 +03:00 [INF] Route matched with {action = "GetOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.OrderDtos.OrderListDto]]]] GetOrders(System.String, System.Nullable`1[System.Boolean], Int32, Int32, System.Nullable`1[E_Commerce.Enums.OrderStatus]) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 02:53:37.315 +03:00 [INF] Executing GetOrders: role: User, userId: e682f183-1c61-400b-aa5a-171750f446b5, deleted: , page: 1, size: 10, status: 
2025-09-10 02:53:37.318 +03:00 [INF] Filtering orders - UserId: e682f183-1c61-400b-aa5a-171750f446b5, Deleted: null, Page: 1, PageSize: 10, Status: null
2025-09-10 02:53:37.322 +03:00 [INF] Getting cache for key: order:filter:user:e682f183-1c61-400b-aa5a-171750f446b5_deleted:all_page:1_size:10_status:all
2025-09-10 02:53:37.538 +03:00 [INF] Cache hit for key: order:filter:user:e682f183-1c61-400b-aa5a-171750f446b5_deleted:all_page:1_size:10_status:all
2025-09-10 02:53:37.544 +03:00 [INF] Cache hit for filtered orders
2025-09-10 02:53:37.547 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.OrderDtos.OrderListDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 02:53:37.552 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.GetOrders (E-Commerce) in 284.3414ms
2025-09-10 02:53:37.555 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.GetOrders (E-Commerce)'
2025-09-10 02:53:37.569 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - 200 456 application/json; charset=utf-8 587.0152ms
2025-09-10 02:53:38.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:53:38.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:53:39.543 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1386.8301ms
2025-09-10 02:53:42.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:53:42.180 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:53:43.565 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.6958ms
2025-09-10 02:53:46.165 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:53:46.173 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:53:47.561 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1396.0468ms
2025-09-10 02:53:50.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:53:50.189 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:53:51.570 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.6111ms
2025-09-10 02:53:54.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:53:54.174 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:53:55.584 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1429.5912ms
2025-09-10 02:53:58.163 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:53:58.188 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:53:59.588 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1425.6642ms
2025-09-10 02:54:02.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:54:02.163 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:54:03.544 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1386.7122ms
2025-09-10 02:54:06.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:54:06.177 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:54:07.561 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1404.1511ms
2025-09-10 02:54:10.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:54:10.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:54:11.536 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1384.7774ms
2025-09-10 02:54:14.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:54:14.192 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:54:15.568 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1410.958ms
2025-09-10 02:54:19.171 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:54:19.181 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:54:20.554 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1383.4161ms
2025-09-10 02:57:35.504 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:57:35.518 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - null null
2025-09-10 02:57:35.556 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:57:36.975 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1470.8384ms
2025-09-10 02:57:38.008 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - 200 null text/html 2489.3168ms
2025-09-10 02:57:38.045 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 02:57:38.065 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 02:57:38.108 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 62.7945ms
2025-09-10 02:57:38.115 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 50.0142ms
2025-09-10 02:57:41.431 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:57:41.436 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:57:42.812 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1381.6317ms
2025-09-10 02:57:45.145 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:57:45.155 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:57:46.523 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1378.4058ms
2025-09-10 02:57:49.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:57:49.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:57:50.537 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1379.145ms
2025-09-10 02:57:53.153 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:57:53.161 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:57:54.552 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1398.9553ms
2025-09-10 02:57:57.162 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:57:57.170 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:57:58.601 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1438.5967ms
2025-09-10 02:58:01.165 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:58:01.182 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:58:02.554 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.885ms
2025-09-10 02:58:05.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:58:05.163 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:58:06.543 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1391.8157ms
2025-09-10 02:58:09.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:58:09.167 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:58:10.544 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1386.3423ms
2025-09-10 02:58:13.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:58:13.169 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:58:14.540 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1379.8999ms
2025-09-10 02:58:17.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:58:17.203 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:58:18.599 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1444.9884ms
2025-09-10 02:58:21.162 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:58:21.169 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:58:22.548 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1386.1168ms
2025-09-10 02:58:25.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:58:25.167 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:58:26.543 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1382.7384ms
2025-09-10 02:58:29.148 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:58:29.170 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:58:30.616 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1467.6213ms
2025-09-10 02:58:33.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:58:33.161 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:58:34.557 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1402.8852ms
2025-09-10 02:58:37.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:58:37.161 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:58:38.543 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1389.3226ms
2025-09-10 02:58:41.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:58:41.177 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:58:42.551 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1395.2693ms
2025-09-10 02:58:45.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:58:45.169 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:58:46.566 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1407.0902ms
2025-09-10 02:58:49.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:58:49.162 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:58:50.542 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1390.8517ms
2025-09-10 02:58:53.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:58:53.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:58:54.547 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1392.1144ms
2025-09-10 02:58:57.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:58:57.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:58:58.559 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1408.122ms
2025-09-10 02:59:01.173 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:59:01.190 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:59:02.562 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.8096ms
2025-09-10 02:59:05.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:59:05.168 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:59:06.534 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1375.3399ms
2025-09-10 02:59:09.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:59:09.162 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:59:10.537 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1385.9346ms
2025-09-10 02:59:13.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:59:13.158 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:59:14.557 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1407.0945ms
2025-09-10 02:59:17.199 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:59:17.216 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:59:18.617 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1417.7357ms
2025-09-10 02:59:21.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:59:21.184 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:59:22.595 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1439.8507ms
2025-09-10 02:59:25.329 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:59:25.366 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:59:26.798 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1468.5063ms
2025-09-10 02:59:29.152 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:59:29.160 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:59:30.531 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1378.6994ms
2025-09-10 02:59:33.164 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:59:33.173 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:59:34.552 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1387.5868ms
2025-09-10 02:59:37.161 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:59:37.294 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:59:38.674 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1512.975ms
2025-09-10 02:59:41.513 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:59:41.526 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:59:42.950 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1436.9946ms
2025-09-10 02:59:45.146 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:59:45.151 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:59:46.527 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1381.0968ms
2025-09-10 02:59:49.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:59:49.170 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:59:50.584 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1430.1204ms
2025-09-10 02:59:53.280 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:59:53.292 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:59:54.692 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.6951ms
2025-09-10 02:59:57.147 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 02:59:57.156 +03:00 [INF] CORS policy execution successful.
2025-09-10 02:59:58.531 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1383.5751ms
2025-09-10 03:00:01.172 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:00:01.210 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:00:02.643 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1471.8173ms
2025-09-10 03:00:05.145 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:00:05.156 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:00:06.537 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1391.6757ms
2025-09-10 03:00:08.465 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE `c`.`DeletedAt` IS NOT NULL
2025-09-10 03:00:09.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:00:09.167 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:00:10.400 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1243.9511ms
2025-09-10 03:00:13.170 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:00:13.187 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:00:14.577 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1407.6382ms
2025-09-10 03:00:17.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:00:17.189 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:00:18.582 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1424.9921ms
2025-09-10 03:00:22.277 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:00:22.284 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:00:23.899 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1621.3267ms
2025-09-10 03:00:27.161 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:00:27.184 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:00:28.556 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1394.8072ms
2025-09-10 03:00:32.173 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:00:32.186 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:00:33.575 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1401.9271ms
2025-09-10 03:00:36.718 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:00:36.724 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:00:38.139 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1421.5393ms
2025-09-10 03:00:40.999 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - null null
2025-09-10 03:00:42.580 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:00:42.584 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:00:43.272 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - 200 null text/html 2273.5731ms
2025-09-10 03:00:43.334 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 03:00:43.345 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 11.3861ms
2025-09-10 03:00:43.356 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 03:00:43.400 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 43.8995ms
2025-09-10 03:00:43.948 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1368.3321ms
2025-09-10 03:00:48.587 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:00:48.592 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:00:49.960 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1373.121ms
2025-09-10 03:00:52.161 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:00:52.167 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:00:53.557 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1396.2331ms
2025-09-10 03:00:56.687 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:00:56.699 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:00:58.188 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1500.415ms
2025-09-10 03:01:01.909 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:01:01.922 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:01:03.329 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1420.4443ms
2025-09-10 03:01:06.162 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:01:06.168 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:01:08.078 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1915.8261ms
2025-09-10 03:01:10.163 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:01:10.175 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:01:11.547 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1384.0929ms
2025-09-10 03:01:14.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:01:14.163 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:01:15.532 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1377.3691ms
2025-09-10 03:04:33.019 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - null null
2025-09-10 03:04:34.979 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 03:04:35.205 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 03:04:35.242 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.GetOrders (E-Commerce)'
2025-09-10 03:04:35.354 +03:00 [INF] Route matched with {action = "GetOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.OrderDtos.OrderListDto]]]] GetOrders(System.String, System.Nullable`1[System.Boolean], Int32, Int32, System.Nullable`1[E_Commerce.Enums.OrderStatus]) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 03:04:35.855 +03:00 [INF] Executing GetOrders: role: User, userId: e682f183-1c61-400b-aa5a-171750f446b5, deleted: , page: 1, size: 10, status: 
2025-09-10 03:04:35.939 +03:00 [INF] Filtering orders - UserId: e682f183-1c61-400b-aa5a-171750f446b5, Deleted: null, Page: 1, PageSize: 10, Status: null
2025-09-10 03:04:35.982 +03:00 [INF] Getting cache for key: order:filter:user:e682f183-1c61-400b-aa5a-171750f446b5_deleted:all_page:1_size:10_status:all
2025-09-10 03:04:36.225 +03:00 [INF] Cache hit for key: order:filter:user:e682f183-1c61-400b-aa5a-171750f446b5_deleted:all_page:1_size:10_status:all
2025-09-10 03:04:37.014 +03:00 [INF] Cache hit for filtered orders
2025-09-10 03:04:37.265 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.OrderDtos.OrderListDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 03:04:37.308 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.GetOrders (E-Commerce) in 1472.3874ms
2025-09-10 03:04:37.317 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.GetOrders (E-Commerce)'
2025-09-10 03:04:37.365 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - 200 456 application/json; charset=utf-8 4345.884ms
2025-09-10 03:04:42.406 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:04:42.517 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - null null
2025-09-10 03:04:42.926 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:04:43.802 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 03:04:44.438 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2032.8036ms
2025-09-10 03:04:45.327 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - 200 null text/html 2809.847ms
2025-09-10 03:04:46.130 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2327.7409ms
2025-09-10 03:04:46.228 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 03:04:47.399 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 03:04:47.478 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 1250.3197ms
2025-09-10 03:04:47.519 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 119.6197ms
2025-09-10 03:04:49.579 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:04:49.686 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - application/x-www-form-urlencoded; charset=UTF-8 15
2025-09-10 03:04:50.156 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:04:50.187 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:04:51.516 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - 204 null null 1831.992ms
2025-09-10 03:04:51.562 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 03:04:51.769 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2190.2115ms
2025-09-10 03:04:53.761 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2199.5319ms
2025-09-10 03:04:53.838 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 03:04:53.979 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 03:04:54.031 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 192.6479ms
2025-09-10 03:04:54.055 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 76.4618ms
2025-09-10 03:04:56.089 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:04:56.556 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:04:57.197 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 23
2025-09-10 03:04:57.402 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-09-10 03:04:58.035 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1945.7949ms
2025-09-10 03:04:58.152 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Orders` SET `Status` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 03:05:00.084 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:05:00.480 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:05:01.132 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 23
2025-09-10 03:05:01.401 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-09-10 03:05:01.550 +03:00 [INF] Execute GetAll for entity OrderItem
2025-09-10 03:05:01.761 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`ProductVariantId`, `o`.`Quantity`
FROM `OrderItem` AS `o`
WHERE `o`.`OrderId` = @__orderId_0
2025-09-10 03:05:02.079 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1995.631ms
2025-09-10 03:05:02.277 +03:00 [INF] Adding quantity for variant: 1
2025-09-10 03:05:02.303 +03:00 [INF] Removing cache by tags: [order]
2025-09-10 03:05:02.536 +03:00 [INF] Executing GetByIdAsync for entity ProductVariant with ID: 1
2025-09-10 03:05:02.678 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 03:05:02.828 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-10 03:05:03.030 +03:00 [INF] Removed 1 cache entries for tags: [order]
2025-09-10 03:05:03.182 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `ProductVariants` SET `Quantity` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 03:05:03.509 +03:00 [WRN] No cache entries found for tags: [variantlist, variantdata]
2025-09-10 03:05:04.106 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:05:04.249 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:05:04.274 +03:00 [INF] Order 23 auto-expired and restock scheduled
2025-09-10 03:05:04.344 +03:00 [INF] Quantity for variant 1 restored to 19
2025-09-10 03:05:04.526 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Orders` SET `RestockedAt` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 03:05:05.682 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1575.7968ms
2025-09-10 03:05:06.135 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 03:05:06.598 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 03:05:06.800 +03:00 [INF] Removing cache by tags: [collection, CollectionWithProduct]
2025-09-10 03:05:07.417 +03:00 [WRN] No cache entries found for tags: [collection, CollectionWithProduct]
2025-09-10 03:05:07.658 +03:00 [INF] Removing cache by tags: [subcategory, subcategorywithdata]
2025-09-10 03:05:08.086 +03:00 [INF] Removing cache by tags: [order]
2025-09-10 03:05:08.196 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-10 03:05:08.206 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:05:08.277 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-09-10 03:05:08.326 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:05:08.426 +03:00 [WRN] No cache entries found for tags: [order]
2025-09-10 03:05:08.486 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 03:05:08.655 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Products` SET `Quantity` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 03:05:08.655 +03:00 [WRN] No cache entries found for tags: [subcategory, subcategorywithdata]
2025-09-10 03:05:08.707 +03:00 [WRN] No cache entries found for tags: [variantlist, variantdata]
2025-09-10 03:05:08.938 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 03:05:08.960 +03:00 [INF] Restocked inventory for order 23
2025-09-10 03:05:09.691 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1485.8392ms
2025-09-10 03:05:09.900 +03:00 [INF] Removing cache by tags: [collection, CollectionWithProduct]
2025-09-10 03:05:10.519 +03:00 [WRN] No cache entries found for tags: [collection, CollectionWithProduct]
2025-09-10 03:05:10.824 +03:00 [INF] Removing cache by tags: [subcategory, subcategorywithdata]
2025-09-10 03:05:11.283 +03:00 [INF] Removing cache by tag: CollectionWithProduct
2025-09-10 03:05:11.390 +03:00 [WRN] No cache entries found for tags: [subcategory, subcategorywithdata]
2025-09-10 03:05:11.562 +03:00 [WRN] No cache entries found for tag: CollectionWithProduct
2025-09-10 03:05:11.714 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:05:11.849 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:05:12.160 +03:00 [INF] Removing cache by tag: subcategorywithdata
2025-09-10 03:05:12.684 +03:00 [WRN] No cache entries found for tag: subcategorywithdata
2025-09-10 03:05:13.323 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1608.0798ms
2025-09-10 03:05:13.542 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 03:05:14.027 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 03:05:15.340 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:05:15.626 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:05:16.953 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1613.149ms
2025-09-10 03:05:18.979 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:05:19.180 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:05:20.639 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1659.0341ms
2025-09-10 03:05:22.662 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:05:22.761 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:05:24.232 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1569.1108ms
2025-09-10 03:05:26.273 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:05:26.335 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:05:28.103 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1829.9052ms
2025-09-10 03:05:30.183 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:05:31.004 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:05:31.916 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - null null
2025-09-10 03:05:32.308 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 03:05:32.491 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2316.5782ms
2025-09-10 03:05:32.671 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 03:05:32.703 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.GetOrders (E-Commerce)'
2025-09-10 03:05:32.713 +03:00 [INF] Route matched with {action = "GetOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.OrderDtos.OrderListDto]]]] GetOrders(System.String, System.Nullable`1[System.Boolean], Int32, Int32, System.Nullable`1[E_Commerce.Enums.OrderStatus]) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 03:05:32.722 +03:00 [INF] Executing GetOrders: role: User, userId: e682f183-1c61-400b-aa5a-171750f446b5, deleted: , page: 1, size: 10, status: 
2025-09-10 03:05:32.749 +03:00 [INF] Filtering orders - UserId: e682f183-1c61-400b-aa5a-171750f446b5, Deleted: null, Page: 1, PageSize: 10, Status: null
2025-09-10 03:05:32.799 +03:00 [INF] Getting cache for key: order:filter:user:e682f183-1c61-400b-aa5a-171750f446b5_deleted:all_page:1_size:10_status:all
2025-09-10 03:05:33.063 +03:00 [WRN] Cache miss for key: order:filter:user:e682f183-1c61-400b-aa5a-171750f446b5_deleted:all_page:1_size:10_status:all
2025-09-10 03:05:33.137 +03:00 [INF] Execute GetAll for entity Order
2025-09-10 03:05:33.317 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 255), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`OrderNumber`, `t0`.`Name`, `t`.`Status`, `t`.`Total`, `t`.`CreatedAt`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`CustomerId`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Total`
    FROM `Orders` AS `o`
    WHERE `o`.`CustomerId` = @__8__locals1_userId_0
    ORDER BY `o`.`CreatedAt` DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS `t`
INNER JOIN (
    SELECT `a`.`Id`, `a`.`Name`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Discriminator` = 'Customer'
) AS `t0` ON `t`.`CustomerId` = `t0`.`Id`
ORDER BY `t`.`CreatedAt` DESC
2025-09-10 03:05:34.251 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.OrderDtos.OrderListDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 03:05:34.257 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.GetOrders (E-Commerce) in 1537.1253ms
2025-09-10 03:05:34.281 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.GetOrders (E-Commerce)'
2025-09-10 03:05:34.315 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - 200 458 application/json; charset=utf-8 2399.533ms
2025-09-10 03:05:34.641 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:05:34.974 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:05:35.631 +03:00 [INF] Setting cache for key: order:filter:user:e682f183-1c61-400b-aa5a-171750f446b5_deleted:all_page:1_size:10_status:all
2025-09-10 03:05:36.131 +03:00 [INF] Cache set successfully for key: order:filter:user:e682f183-1c61-400b-aa5a-171750f446b5_deleted:all_page:1_size:10_status:all with tags: [order]
2025-09-10 03:05:37.292 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2651.4017ms
2025-09-10 03:05:39.331 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:05:39.923 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:05:41.848 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2517.149ms
2025-09-10 03:05:43.883 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:05:43.893 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:05:45.310 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1427.5374ms
2025-09-10 03:05:47.335 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:05:47.418 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:05:48.927 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1591.8125ms
2025-09-10 03:05:50.961 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:05:51.518 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:05:51.728 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json 63
2025-09-10 03:05:51.754 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 03:05:51.944 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 03:05:51.968 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 03:05:51.984 +03:00 [INF] Route matched with {action = "AddItemToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] AddItemToCart(E_Commerce.DtoModels.CartDtos.CreateCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 03:05:52.069 +03:00 [INF] Executing AddItemToCart for product ID: 1
2025-09-10 03:05:52.097 +03:00 [INF] Adding item to cart for user: e682f183-1c61-400b-aa5a-171750f446b5, product: 1
2025-09-10 03:05:52.526 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 03:05:52.567 +03:00 [INF] Execute GetAll for entity Product
2025-09-10 03:05:52.830 +03:00 [INF] Executed DbCommand (112ms) [Parameters=[@__8__locals1_itemDto_ProductId_0='?' (DbType = Int32), @__8__locals1_itemDto_ProductVariantId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Price`, `t`.`c`, `t`.`EndDate`, `t`.`StartDate`, `t`.`DiscountPercent`, `t`.`DeletedAt`, `t`.`IsActive`, `t0`.`Id`, `t0`.`Quantity`, `t0`.`c`
FROM (
    SELECT `p`.`Id`, `p`.`Price`, `d`.`Id` IS NOT NULL AS `c`, `d`.`EndDate`, `d`.`StartDate`, `d`.`DiscountPercent`, `d`.`DeletedAt`, `d`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__8__locals1_itemDto_ProductId_0) AND `p`.`DeletedAt` IS NULL) AND `p`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Quantity`, `t1`.`c`, `t1`.`ProductId`
    FROM (
        SELECT `p0`.`Id`, `p0`.`Quantity`, 1 AS `c`, `p0`.`ProductId`, ROW_NUMBER() OVER(PARTITION BY `p0`.`ProductId` ORDER BY `p0`.`Id`) AS `row`
        FROM `ProductVariants` AS `p0`
        WHERE (`p0`.`Id` = @__8__locals1_itemDto_ProductVariantId_1) AND `p0`.`IsActive`
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
2025-09-10 03:05:53.080 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2118.6834ms
2025-09-10 03:05:53.433 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 03:05:53.452 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce) in 1459.3862ms
2025-09-10 03:05:53.497 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 03:05:53.500 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 404 239 application/json; charset=utf-8 1772.2155ms
2025-09-10 03:05:55.094 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:05:55.102 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:05:56.609 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1515.3026ms
2025-09-10 03:05:58.624 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:05:58.875 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:06:00.299 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1674.4655ms
2025-09-10 03:06:03.190 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:06:03.209 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:06:04.704 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1514.0328ms
2025-09-10 03:06:07.152 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:06:07.193 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:06:08.638 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1485.1644ms
2025-09-10 03:06:11.167 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:06:11.189 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:06:12.574 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1407.0205ms
2025-09-10 03:06:16.978 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:06:16.984 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:06:18.358 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1379.1638ms
2025-09-10 03:06:21.169 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:06:21.189 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:06:22.113 +03:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5069/api/Products/1/Variants/1/activate - null 0
2025-09-10 03:06:22.131 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 03:06:22.285 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 03:06:22.290 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.ActivateVariant (E-Commerce)'
2025-09-10 03:06:22.301 +03:00 [INF] Route matched with {action = "ActivateVariant", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] ActivateVariant(Int32, Int32) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-09-10 03:06:22.334 +03:00 [INF] Activating variant: 1
2025-09-10 03:06:22.556 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1387.031ms
2025-09-10 03:06:22.557 +03:00 [INF] Checking if variant 1 exists and is not deleted
2025-09-10 03:06:22.571 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 03:06:22.663 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__8__locals1_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Quantity` > 0 AS `hasquntity`, `p`.`DeletedAt` IS NOT NULL AS `isdeleted`, `p`.`Size` IS NOT NULL AS `hassize`, ((`p`.`Length` <> 0) OR `p`.`Length` IS NULL) AND ((`p`.`Waist` <> 0) OR `p`.`Waist` IS NULL) AS `haslengthandwaist`, `p`.`ProductId` AS `productid`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__8__locals1_id_0
LIMIT 1
2025-09-10 03:06:22.756 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `ProductVariants` AS `p`
    WHERE (`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL)
2025-09-10 03:06:22.763 +03:00 [INF] Validating variant 1 has required properties for activation
2025-09-10 03:06:22.767 +03:00 [INF] Attempting to activate variant 1
2025-09-10 03:06:22.851 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE (`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 03:06:22.868 +03:00 [INF] Successfully activated variant 1
2025-09-10 03:06:22.875 +03:00 [INF] Updating product 1 quantity after activating variant 1
2025-09-10 03:06:22.885 +03:00 [INF] Recording admin operation for activating variant 1 by user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 03:06:22.909 +03:00 [INF] Execute AddAdminOpreationAsync
2025-09-10 03:06:22.971 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-09-10 03:06:23.035 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-09-10 03:06:23.041 +03:00 [INF] Committing unit of work for activating variant 1
2025-09-10 03:06:23.268 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p2='?' (Size = 255), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ProductVariants` SET `IsActive` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 03:06:23.371 +03:00 [INF] Committing transaction for activating variant 1
2025-09-10 03:06:26.288 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:06:26.297 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:06:26.606 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-10 03:06:26.763 +03:00 [INF] Removing cache by tag: CollectionWithProduct
2025-09-10 03:06:26.975 +03:00 [WRN] No cache entries found for tag: CollectionWithProduct
2025-09-10 03:06:27.017 +03:00 [INF] Successfully completed all operations for activating variant 1
2025-09-10 03:06:27.031 +03:00 [WRN] No cache entries found for tags: [variantlist, variantdata]
2025-09-10 03:06:27.668 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1379.8472ms
2025-09-10 03:06:27.783 +03:00 [INF] Removing cache by tag: subcategorywithdata
2025-09-10 03:06:27.907 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 03:06:27.916 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.ActivateVariant (E-Commerce) in 5611.2734ms
2025-09-10 03:06:27.932 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.ActivateVariant (E-Commerce)'
2025-09-10 03:06:27.934 +03:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5069/api/Products/1/Variants/1/activate - 200 120 application/json; charset=utf-8 5821.4252ms
2025-09-10 03:06:28.000 +03:00 [WRN] No cache entries found for tag: subcategorywithdata
2025-09-10 03:06:29.148 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 03:06:29.616 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 03:06:29.971 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-09-10 03:06:30.234 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:06:30.245 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:06:31.483 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1248.737ms
2025-09-10 03:06:31.641 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json 63
2025-09-10 03:06:31.653 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 03:06:31.815 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 03:06:31.828 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 03:06:31.832 +03:00 [INF] Route matched with {action = "AddItemToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] AddItemToCart(E_Commerce.DtoModels.CartDtos.CreateCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 03:06:31.838 +03:00 [INF] Executing AddItemToCart for product ID: 1
2025-09-10 03:06:31.843 +03:00 [INF] Adding item to cart for user: e682f183-1c61-400b-aa5a-171750f446b5, product: 1
2025-09-10 03:06:32.141 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 03:06:32.153 +03:00 [INF] Execute GetAll for entity Product
2025-09-10 03:06:32.241 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__8__locals1_itemDto_ProductId_0='?' (DbType = Int32), @__8__locals1_itemDto_ProductVariantId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Price`, `t`.`c`, `t`.`EndDate`, `t`.`StartDate`, `t`.`DiscountPercent`, `t`.`DeletedAt`, `t`.`IsActive`, `t0`.`Id`, `t0`.`Quantity`, `t0`.`c`
FROM (
    SELECT `p`.`Id`, `p`.`Price`, `d`.`Id` IS NOT NULL AS `c`, `d`.`EndDate`, `d`.`StartDate`, `d`.`DiscountPercent`, `d`.`DeletedAt`, `d`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__8__locals1_itemDto_ProductId_0) AND `p`.`DeletedAt` IS NULL) AND `p`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Quantity`, `t1`.`c`, `t1`.`ProductId`
    FROM (
        SELECT `p0`.`Id`, `p0`.`Quantity`, 1 AS `c`, `p0`.`ProductId`, ROW_NUMBER() OVER(PARTITION BY `p0`.`ProductId` ORDER BY `p0`.`Id`) AS `row`
        FROM `ProductVariants` AS `p0`
        WHERE (`p0`.`Id` = @__8__locals1_itemDto_ProductVariantId_1) AND `p0`.`IsActive`
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
2025-09-10 03:06:32.252 +03:00 [INF] Retrieving cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:06:32.358 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 03:06:32.403 +03:00 [INF] Executing CreateAsync for entity CartItem
2025-09-10 03:06:32.442 +03:00 [INF] CartItem added successfully (pending save)
2025-09-10 03:06:32.445 +03:00 [INF] Execute AddUserOpreationAsync
2025-09-10 03:06:32.447 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-09-10 03:06:32.451 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-09-10 03:06:32.508 +03:00 [INF] Removing cache by tag: CollectionWithProduct
2025-09-10 03:06:32.726 +03:00 [WRN] No cache entries found for tag: CollectionWithProduct
2025-09-10 03:06:33.097 +03:00 [INF] Removing cache by tag: subcategorywithdata
2025-09-10 03:06:33.343 +03:00 [WRN] No cache entries found for tag: subcategorywithdata
2025-09-10 03:06:33.526 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (DbType = DateTime), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime), @p16='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `CartItems` (`AddedAt`, `CartId`, `CreatedAt`, `DeletedAt`, `ModifiedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `UnitPrice`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `CartItems`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `userOperationsLogs` (`CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`, `UserId`)
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `userOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 03:06:33.735 +03:00 [INF] Removing cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:06:34.038 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 03:06:34.207 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:06:34.240 +03:00 [INF] Cache removed successfully for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:06:34.250 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:06:34.278 +03:00 [INF] Item added to cart for user: e682f183-1c61-400b-aa5a-171750f446b5, product: 1
2025-09-10 03:06:34.380 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 03:06:34.492 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 03:06:34.648 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce) in 2812.0533ms
2025-09-10 03:06:34.726 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 03:06:34.742 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 200 134 application/json; charset=utf-8 3101.5274ms
2025-09-10 03:06:34.784 +03:00 [INF] Executing GetByIdAsync for entity Cart with ID: 3
2025-09-10 03:06:34.990 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
FROM `Cart` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-09-10 03:06:35.219 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Cart` SET `CheckoutDate` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 03:06:35.700 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1492.6245ms
2025-09-10 03:06:37.739 +03:00 [INF] Removing cache by tag: cart
2025-09-10 03:06:38.720 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:06:38.729 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:06:39.032 +03:00 [INF] Removed 2 cache entries for tag: cart
2025-09-10 03:06:40.523 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1803.1996ms
2025-09-10 03:06:44.838 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - null 0
2025-09-10 03:06:44.933 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 03:06:45.119 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 03:06:45.142 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-09-10 03:06:45.156 +03:00 [INF] Route matched with {action = "CheckOut", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] CheckOut() on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 03:06:45.166 +03:00 [INF] Executing CheckOut
2025-09-10 03:06:45.176 +03:00 [INF] Checkout of cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:06:45.179 +03:00 [INF] Retrieving cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:06:45.356 +03:00 [INF] Executed DbCommand (99ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 03:06:45.529 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Cart` SET `CheckoutDate` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 03:06:45.580 +03:00 [INF] Removing cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:06:45.602 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 03:06:45.609 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.CheckOut (E-Commerce) in 448.2ms
2025-09-10 03:06:45.694 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-09-10 03:06:45.821 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - 200 122 application/json; charset=utf-8 982.9962ms
2025-09-10 03:06:46.034 +03:00 [INF] Cache removed successfully for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:06:47.115 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:06:47.127 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:06:48.631 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1515.0084ms
2025-09-10 03:06:53.714 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:06:53.718 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:06:55.114 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1400.2364ms
2025-09-10 03:06:55.650 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order - application/json 42
2025-09-10 03:06:55.906 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 03:06:56.150 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 03:06:56.168 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 03:06:56.205 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto]]] CreateOrder(E_Commerce.DtoModels.OrderDtos.CreateOrderDto) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 03:06:56.351 +03:00 [INF] Executing CreateOrder
2025-09-10 03:06:56.412 +03:00 [INF] Creating order from cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:06:56.722 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 03:06:56.818 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 03:06:56.831 +03:00 [INF] Checking if address 30 exists for customer: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:06:56.912 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__addressId_0='?' (DbType = Int32), @__customerId_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `CustomerAddresses` AS `c`
    WHERE ((`c`.`Id` = @__addressId_0) AND (`c`.`CustomerId` = @__customerId_1)) AND `c`.`DeletedAt` IS NULL)
2025-09-10 03:06:56.929 +03:00 [INF] Getting cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:06:56.936 +03:00 [INF] Getting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:06:57.150 +03:00 [WRN] Cache miss for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:06:57.228 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 03:06:57.239 +03:00 [INF] Execute GetAll for entity Cart
2025-09-10 03:06:57.504 +03:00 [INF] Executed DbCommand (94ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-09-10 03:06:57.653 +03:00 [INF] Setting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:06:58.026 +03:00 [INF] Cache set successfully for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5 with tags: [cart]
2025-09-10 03:06:58.127 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 03:06:58.236 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`, `p0`.`Id`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`Description`, `p0`.`DiscountId`, `p0`.`Gender`, `p0`.`IsActive`, `p0`.`ModifiedAt`, `p0`.`Name`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`SubCategoryId`, `p0`.`fitType`
FROM `ProductVariants` AS `p`
INNER JOIN `Products` AS `p0` ON `p`.`ProductId` = `p0`.`Id`
WHERE `p`.`Id` = 1
2025-09-10 03:06:58.346 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE `o`.`OrderNumber` = @__orderNumber_0)
2025-09-10 03:06:58.365 +03:00 [INF] Executing CreateAsync for entity Order
2025-09-10 03:06:58.385 +03:00 [INF] Order added successfully (pending save)
2025-09-10 03:06:58.546 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime), @p8='?' (Size = 500), @p9='?' (Size = 50), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Orders` (`CancelledAt`, `CreatedAt`, `CustomerAddressId`, `CustomerId`, `DeletedAt`, `DeliveredAt`, `DiscountAmount`, `ModifiedAt`, `Notes`, `OrderNumber`, `RestockedAt`, `ShippedAt`, `ShippingCost`, `Status`, `Subtotal`, `TaxAmount`, `Total`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Orders`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 03:06:59.170 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:06:59.235 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:06:59.352 +03:00 [INF] Executing CreateRangeAsync for entity OrderItem
2025-09-10 03:06:59.715 +03:00 [INF] 1 OrderItem entities added successfully (pending save)
2025-09-10 03:06:59.727 +03:00 [INF] Removing 19 from variant: 1
2025-09-10 03:06:59.732 +03:00 [INF] Executing GetByIdAsync for entity ProductVariant with ID: 1
2025-09-10 03:06:59.808 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 03:07:00.746 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1576.2743ms
2025-09-10 03:07:01.893 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE ProductVariants SET Quantity = Quantity - @p0 WHERE Id = @p1 AND Quantity >= @p0
2025-09-10 03:07:01.929 +03:00 [INF] Clearing cart: 3
2025-09-10 03:07:02.013 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__cartId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE `c`.`CartId` = @__cartId_0
2025-09-10 03:07:02.052 +03:00 [INF] Cart 3 cleared successfully
2025-09-10 03:07:02.227 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Decimal), @p10='?' (DbType = Decimal), @p13='?' (DbType = Int32), @p11='?' (DbType = Boolean), @p12='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM `CartItems`
WHERE `Id` = @p0;
SELECT ROW_COUNT();

INSERT INTO `OrderItem` (`CreatedAt`, `DeletedAt`, `ModifiedAt`, `OrderId`, `OrderedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `TotalPrice`, `UnitPrice`)
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
SELECT `Id`
FROM `OrderItem`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

UPDATE `ProductVariants` SET `IsActive` = @p11, `Quantity` = @p12
WHERE `Id` = @p13;
SELECT ROW_COUNT();
2025-09-10 03:07:02.289 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 03:07:02.427 +03:00 [INF] Execute AddUserOpreationAsync
2025-09-10 03:07:02.434 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-09-10 03:07:02.438 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-09-10 03:07:02.446 +03:00 [INF] Execute GetAll for entity Order
2025-09-10 03:07:02.573 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__productId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE (`p`.`ProductId` = @__productId_0) AND `p`.`DeletedAt` IS NULL
2025-09-10 03:07:02.900 +03:00 [INF] Executed DbCommand (99ms) [Parameters=[@__createdOrder_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`ModifiedAt`, `t0`.`OrderNumber`, `t0`.`Status`, `t0`.`Subtotal`, `t0`.`TaxAmount`, `t0`.`ShippingCost`, `t0`.`DiscountAmount`, `t0`.`Total`, `t0`.`Notes`, `t0`.`DeletedAt`, `t0`.`ShippedAt`, `t0`.`DeliveredAt`, `t0`.`CancelledAt`, `t0`.`c`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Email`, `t0`.`PhoneNumber`, `t1`.`Id`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`Quantity`, `t1`.`UnitPrice`, `t1`.`TotalPrice`, `t1`.`OrderedAt`, `t1`.`Id0`, `t1`.`Name`, `t1`.`Price`, `t1`.`IsActive`, `t1`.`FinalPrice`, `t1`.`DiscountPrecentage`, `t1`.`MainImageUrl`, `t1`.`Id1`, `t1`.`Color`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`Size`, `t1`.`DeletedAt`, `t1`.`Length`, `t1`.`Waist`, `t1`.`Id2`, `t1`.`Id3`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`ModifiedAt`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`ShippingCost`, `o`.`DiscountAmount`, `o`.`Total`, `o`.`Notes`, `o`.`DeletedAt`, `o`.`ShippedAt`, `o`.`DeliveredAt`, `o`.`CancelledAt`, FALSE AS `c`, `t`.`Id` AS `Id0`, `t`.`Name`, `t`.`Email`, `t`.`PhoneNumber`
    FROM `Orders` AS `o`
    INNER JOIN (
        SELECT `a`.`Id`, `a`.`Email`, `a`.`PhoneNumber`, `a`.`Name`
        FROM `AspNetUsers` AS `a`
        WHERE `a`.`Discriminator` = 'Customer'
    ) AS `t` ON `o`.`CustomerId` = `t`.`Id`
    WHERE `o`.`Id` = @__createdOrder_Id_0
    LIMIT 1
) AS `t0`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`CreatedAt`, `o0`.`ModifiedAt`, `o0`.`Quantity`, `o0`.`UnitPrice`, `o0`.`TotalPrice`, `o0`.`OrderedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND `i`.`DeletedAt` IS NULL
        LIMIT 1), '') AS `MainImageUrl`, `o0`.`ProductVariantId` AS `Id1`, `p0`.`Color`, COALESCE(`p0`.`CreatedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `CreatedAt0`, COALESCE(`p0`.`ModifiedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `ModifiedAt0`, `p0`.`Size`, `p0`.`DeletedAt`, COALESCE(`p0`.`Length`, 0) AS `Length`, COALESCE(`p0`.`Waist`, 0) AS `Waist`, `d`.`Id` AS `Id2`, `p0`.`Id` AS `Id3`, `o0`.`OrderId`
    FROM `OrderItem` AS `o0`
    INNER JOIN `Products` AS `p` ON `o0`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    INNER JOIN `ProductVariants` AS `p0` ON `o0`.`ProductVariantId` = `p0`.`Id`
) AS `t1` ON `t0`.`Id` = `t1`.`OrderId`
ORDER BY `t0`.`Id`, `t0`.`Id0`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id2`
2025-09-10 03:07:03.421 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:07:03.454 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:07:03.865 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-09-10 03:07:04.586 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Products` SET `Quantity` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 03:07:04.846 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1424.9281ms
2025-09-10 03:07:05.574 +03:00 [INF] Removing cache by tags: [order]
2025-09-10 03:07:06.218 +03:00 [INF] Removed 1 cache entries for tags: [order]
2025-09-10 03:07:06.467 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-10 03:07:06.895 +03:00 [WRN] No cache entries found for tags: [variantlist, variantdata]
2025-09-10 03:07:07.163 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 03:07:07.587 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 03:07:08.421 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 03:07:08.927 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce) in 12596.0347ms
2025-09-10 03:07:08.980 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 03:07:08.986 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order - 201 1433 application/json; charset=utf-8 13336.1524ms
2025-09-10 03:07:09.135 +03:00 [INF] Removing cache by tag: CollectionWithProduct
2025-09-10 03:07:09.396 +03:00 [WRN] No cache entries found for tag: CollectionWithProduct
2025-09-10 03:07:09.867 +03:00 [INF] Removing cache by tags: [collection, CollectionWithProduct]
2025-09-10 03:07:10.151 +03:00 [INF] Removing cache by tag: subcategorywithdata
2025-09-10 03:07:10.421 +03:00 [WRN] No cache entries found for tag: subcategorywithdata
2025-09-10 03:07:10.519 +03:00 [INF] Removing cache by tags: [subcategory, subcategorywithdata]
2025-09-10 03:07:10.636 +03:00 [WRN] No cache entries found for tags: [collection, CollectionWithProduct]
2025-09-10 03:07:10.889 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:07:10.894 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:07:10.972 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 03:07:10.982 +03:00 [WRN] No cache entries found for tags: [subcategory, subcategorywithdata]
2025-09-10 03:07:11.434 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 03:07:12.289 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1399.8484ms
2025-09-10 03:07:15.637 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:07:15.644 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:07:16.935 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1298.5572ms
2025-09-10 03:07:19.579 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:07:19.585 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:07:21.004 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1425.3422ms
2025-09-10 03:07:23.738 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:07:23.756 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:07:25.135 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1396.9424ms
2025-09-10 03:07:28.163 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:07:28.180 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:07:29.552 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1389.3727ms
2025-09-10 03:07:32.147 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:07:32.153 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:07:33.546 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1399.4472ms
2025-09-10 03:07:36.722 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:07:36.734 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:07:38.170 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1448.2762ms
2025-09-10 03:07:43.438 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:07:43.452 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:07:44.833 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1394.8443ms
2025-09-10 03:07:47.152 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Payment - application/json 138
2025-09-10 03:07:47.241 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 03:07:47.409 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 03:07:47.563 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.PaymentController.CreatePayment (E-Commerce)'
2025-09-10 03:07:47.582 +03:00 [INF] Route matched with {action = "CreatePayment", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto]]] CreatePayment(CreatePaymentRequestDto) on controller E_Commerce.Controllers.PaymentController (E-Commerce).
2025-09-10 03:07:47.605 +03:00 [INF] Executing CreatePayment for order: ORD-20250909233639-1140
2025-09-10 03:07:47.607 +03:00 [INF] Starting CreatePaymentMethod for order ORD-20250909233639-1140 by user e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:07:47.838 +03:00 [INF] Getting order by number: ORD-20250909233639-1140
2025-09-10 03:07:47.946 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`OrderNumber` = @__orderNumber_0
LIMIT 1
2025-09-10 03:07:47.951 +03:00 [WRN] Order 23 is not eligible for payment. Current status: "PaymentExpired"
2025-09-10 03:07:48.031 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 03:07:48.034 +03:00 [INF] Executed action E_Commerce.Controllers.PaymentController.CreatePayment (E-Commerce) in 445.4148ms
2025-09-10 03:07:48.070 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.PaymentController.CreatePayment (E-Commerce)'
2025-09-10 03:07:48.073 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Payment - 400 266 application/json; charset=utf-8 921.0047ms
2025-09-10 03:07:59.897 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:07:59.906 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:08:01.303 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.42ms
2025-09-10 03:08:04.651 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Payment - application/json 138
2025-09-10 03:08:05.023 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 03:08:05.108 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:08:05.115 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:08:05.200 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 03:08:05.222 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.PaymentController.CreatePayment (E-Commerce)'
2025-09-10 03:08:05.225 +03:00 [INF] Route matched with {action = "CreatePayment", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto]]] CreatePayment(CreatePaymentRequestDto) on controller E_Commerce.Controllers.PaymentController (E-Commerce).
2025-09-10 03:08:05.256 +03:00 [INF] Executing CreatePayment for order: ORD-20250910000658-3723
2025-09-10 03:08:05.262 +03:00 [INF] Starting CreatePaymentMethod for order ORD-20250910000658-3723 by user e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:08:05.481 +03:00 [INF] Getting order by number: ORD-20250910000658-3723
2025-09-10 03:08:05.559 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`OrderNumber` = @__orderNumber_0
LIMIT 1
2025-09-10 03:08:05.565 +03:00 [INF] Execute GetAll for entity Payment
2025-09-10 03:08:05.643 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__order_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Amount`, `p`.`CreatedAt`, `p`.`CustomerId`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`OrderId`, `p`.`PaymentDate`, `p`.`PaymentMethodId`, `p`.`PaymentProviderId`, `p`.`ProviderOrderId`, `p`.`Status`, `p`.`TransactionId`
FROM `Payments` AS `p`
WHERE (`p`.`OrderId` = @__order_Id_0) AND (`p`.`Status` = 1)
LIMIT 1
2025-09-10 03:08:05.647 +03:00 [INF] Getting payment method ID for enum "Visa"
2025-09-10 03:08:05.649 +03:00 [INF] Execute GetAll for entity PaymentMethod
2025-09-10 03:08:05.728 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__methodEnum_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`
FROM `PaymentMethods` AS `p`
WHERE ((`p`.`Method` = @__methodEnum_0) AND `p`.`IsActive`) AND `p`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 03:08:05.735 +03:00 [INF] Found payment method ID 1 for enum "Visa"
2025-09-10 03:08:05.737 +03:00 [INF] Executing GetByIdAsync for entity PaymentMethod with ID: 1
2025-09-10 03:08:05.813 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IntegrationId`, `p`.`IsActive`, `p`.`Method`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`PaymentProviderId`
FROM `PaymentMethods` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 03:08:05.819 +03:00 [INF] Execute GetAll for entity PaymentProvider
2025-09-10 03:08:05.895 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`PublicKey`
FROM `PaymentProviders` AS `p`
WHERE `p`.`Provider` = 1
LIMIT 1
2025-09-10 03:08:05.900 +03:00 [INF] Executing GetTokenAsync
2025-09-10 03:08:05.910 +03:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-09-10 03:08:05.913 +03:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-09-10 03:08:06.510 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1401.6791ms
2025-09-10 03:08:06.656 +03:00 [INF] Received HTTP response headers after 741.4457ms - 201
2025-09-10 03:08:06.661 +03:00 [INF] End processing HTTP request after 751.5681ms - 201
2025-09-10 03:08:06.670 +03:00 [INF] Successfully retrieved PayMob token
2025-09-10 03:08:06.747 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 03:08:06.773 +03:00 [INF] Getting address by ID: 30
2025-09-10 03:08:06.853 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__addressId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AdditionalNotes`, `c`.`AddressType`, `c`.`City`, `c`.`Country`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`IsDefault`, `c`.`ModifiedAt`, `c`.`PhoneNumber`, `c`.`PostalCode`, `c`.`State`, `c`.`StreetAddress`, `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Discriminator`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `t`.`Age`, `t`.`CreateAt`, `t`.`DeletedAt`, `t`.`Gender`, `t`.`ImageId`, `t`.`ImageId1`, `t`.`LastVisit`, `t`.`Name`
FROM `CustomerAddresses` AS `c`
INNER JOIN (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Discriminator` = 'Customer'
) AS `t` ON `c`.`CustomerId` = `t`.`Id`
WHERE (`c`.`Id` = @__addressId_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 03:08:06.860 +03:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/ecommerce/orders
2025-09-10 03:08:06.865 +03:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/ecommerce/orders
2025-09-10 03:08:07.080 +03:00 [INF] Received HTTP response headers after 211.243ms - 201
2025-09-10 03:08:07.088 +03:00 [INF] End processing HTTP request after 228.1619ms - 201
2025-09-10 03:08:07.096 +03:00 [INF] Successfully created PayMob order: 383669254 for local order: ORD-20250910000658-3723
2025-09-10 03:08:07.103 +03:00 [INF] Execute GetAll for entity PaymentMethod
2025-09-10 03:08:07.178 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__dto_PaymentMethod_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`IntegrationId`
FROM `PaymentMethods` AS `p`
INNER JOIN `PaymentProviders` AS `p0` ON `p`.`PaymentProviderId` = `p0`.`Id`
WHERE ((`p`.`Method` = @__dto_PaymentMethod_0) AND `p`.`IsActive`) AND (`p0`.`Provider` = 1)
LIMIT 1
2025-09-10 03:08:07.183 +03:00 [INF] Using integration ID: 5221967 for payment method: "Visa"
2025-09-10 03:08:07.187 +03:00 [INF] Starting GeneratePaymentKeyAsync for Order ID: 383669254, Amount: 190000
2025-09-10 03:08:07.196 +03:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/acceptance/payment_keys
2025-09-10 03:08:07.199 +03:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/acceptance/payment_keys
2025-09-10 03:08:07.420 +03:00 [INF] Received HTTP response headers after 218.5305ms - 201
2025-09-10 03:08:07.422 +03:00 [INF] End processing HTTP request after 226.1747ms - 201
2025-09-10 03:08:07.428 +03:00 [INF] Request sent to Paymob payment_keys endpoint
2025-09-10 03:08:07.431 +03:00 [INF] Received response from Paymob payment_keys endpoint
2025-09-10 03:08:07.433 +03:00 [INF] Payment key generated successfully for Order ID: 383669254
2025-09-10 03:08:07.435 +03:00 [INF] Successfully generated payment key for order: ORD-20250910000658-3723
2025-09-10 03:08:07.437 +03:00 [INF] Execute GetAll for entity PaymentProvider
2025-09-10 03:08:07.512 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__paymentProvider_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`IframeId`
FROM `PaymentProviders` AS `p`
WHERE `p`.`Provider` = @__paymentProvider_0
LIMIT 1
2025-09-10 03:08:07.517 +03:00 [INF] Executing CreateAsync for entity Payment
2025-09-10 03:08:07.520 +03:00 [INF] Payment added successfully (pending save)
2025-09-10 03:08:07.521 +03:00 [INF] Execute AddUserOpreationAsync
2025-09-10 03:08:07.523 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-09-10 03:08:07.525 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-09-10 03:08:07.679 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?' (Size = 255), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int64), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime), @p17='?' (DbType = Int32), @p18='?' (DbType = DateTime), @p19='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Payments` (`Amount`, `CreatedAt`, `CustomerId`, `DeletedAt`, `ModifiedAt`, `OrderId`, `PaymentDate`, `PaymentMethodId`, `PaymentProviderId`, `ProviderOrderId`, `Status`, `TransactionId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
SELECT `Id`
FROM `Payments`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `userOperationsLogs` (`CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`, `UserId`)
VALUES (@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
SELECT `Id`
FROM `userOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 03:08:07.835 +03:00 [INF] Payment created successfully with ID 5
2025-09-10 03:08:08.711 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 03:08:08.717 +03:00 [INF] Executed action E_Commerce.Controllers.PaymentController.CreatePayment (E-Commerce) in 3466.2682ms
2025-09-10 03:08:08.720 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.PaymentController.CreatePayment (E-Commerce)'
2025-09-10 03:08:08.731 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Payment - 200 1365 application/json; charset=utf-8 4080.3939ms
2025-09-10 03:08:09.165 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:08:09.218 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:08:10.599 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1434.0205ms
2025-09-10 03:08:13.971 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:08:13.984 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:08:15.369 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1397.7428ms
2025-09-10 03:08:18.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:08:18.173 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:08:20.205 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2047.6585ms
2025-09-10 03:08:23.446 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:08:23.455 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:08:24.871 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1425.303ms
2025-09-10 03:08:27.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:08:27.163 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:08:28.561 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1407.3646ms
2025-09-10 03:08:31.280 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:08:31.290 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:08:32.663 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1383.0106ms
2025-09-10 03:08:35.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:08:35.167 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:08:36.536 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1380.0827ms
2025-09-10 03:08:39.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:08:39.174 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:08:40.545 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1385.358ms
2025-09-10 03:08:43.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:08:43.156 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:08:44.529 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1378.3256ms
2025-09-10 03:08:47.162 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:08:47.167 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:08:48.852 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1690.459ms
2025-09-10 03:08:51.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:08:51.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:08:52.543 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1384.6404ms
2025-09-10 03:08:55.152 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:08:55.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:08:56.538 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1385.7526ms
2025-09-10 03:08:59.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:08:59.157 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:09:00.531 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1381.176ms
2025-09-10 03:09:03.167 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:09:03.180 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:09:04.556 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.6237ms
2025-09-10 03:09:07.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:09:07.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:09:08.563 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1407.7209ms
2025-09-10 03:09:10.581 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:09:10.589 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:09:10.688 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 03:09:11.994 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1412.6524ms
2025-09-10 03:09:13.117 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2429.1556ms
2025-09-10 03:09:13.135 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 03:09:13.233 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 03:09:13.384 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 248.9501ms
2025-09-10 03:09:13.391 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 158.4073ms
2025-09-10 03:09:15.431 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:09:15.438 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:09:15.892 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - application/x-www-form-urlencoded; charset=UTF-8 15
2025-09-10 03:09:15.901 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:09:16.840 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1408.5384ms
2025-09-10 03:09:17.030 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - 204 null null 1137.5923ms
2025-09-10 03:09:17.066 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 03:09:18.275 +03:00 [INF] Starting CheckAndUpdatePaymentStatusAsync for payment 5
2025-09-10 03:09:18.494 +03:00 [INF] Executing GetByIdAsync for entity Payment with ID: 5
2025-09-10 03:09:18.571 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Amount`, `p`.`CreatedAt`, `p`.`CustomerId`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`OrderId`, `p`.`PaymentDate`, `p`.`PaymentMethodId`, `p`.`PaymentProviderId`, `p`.`ProviderOrderId`, `p`.`Status`, `p`.`TransactionId`
FROM `Payments` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 03:09:18.630 +03:00 [INF] Execute GetAll for entity PaymentProvider
2025-09-10 03:09:18.706 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`PublicKey`
FROM `PaymentProviders` AS `p`
WHERE `p`.`Provider` = 1
LIMIT 1
2025-09-10 03:09:18.711 +03:00 [INF] Executing GetTokenAsync
2025-09-10 03:09:18.714 +03:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-09-10 03:09:18.717 +03:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-09-10 03:09:18.869 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:09:18.876 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:09:19.358 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2291.7993ms
2025-09-10 03:09:19.422 +03:00 [INF] Received HTTP response headers after 700.2949ms - 201
2025-09-10 03:09:19.447 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 03:09:19.468 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 03:09:19.471 +03:00 [INF] End processing HTTP request after 756.8043ms - 201
2025-09-10 03:09:19.486 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.0883ms
2025-09-10 03:09:19.493 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 24.8453ms
2025-09-10 03:09:19.497 +03:00 [INF] Successfully retrieved PayMob token
2025-09-10 03:09:19.563 +03:00 [INF] Start processing HTTP request GET https://accept.paymob.com/api/ecommerce/orders/383669254
2025-09-10 03:09:19.571 +03:00 [INF] Sending HTTP request GET https://accept.paymob.com/api/ecommerce/orders/383669254
2025-09-10 03:09:19.777 +03:00 [INF] Received HTTP response headers after 204.6421ms - 200
2025-09-10 03:09:19.780 +03:00 [INF] End processing HTTP request after 217.0535ms - 200
2025-09-10 03:09:20.106 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1237.4382ms
2025-09-10 03:09:20.799 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Payments` SET `ModifiedAt` = @p0, `Status` = @p1
WHERE `Id` = @p2;
SELECT ROW_COUNT();
2025-09-10 03:09:21.547 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:09:21.557 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:09:22.788 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1241.2768ms
2025-09-10 03:09:24.797 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:09:24.804 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:09:25.002 +03:00 [INF] Execute UpdateOrderAfterPaid_id:24_to status:"Processing"
2025-09-10 03:09:25.239 +03:00 [INF] Execute GetAll for entity Order
2025-09-10 03:09:25.304 +03:00 [INF] Payment 5 updated to "Completed"
2025-09-10 03:09:25.342 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CancelledAt`, `t`.`CreatedAt`, `t`.`CustomerAddressId`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`DeliveredAt`, `t`.`DiscountAmount`, `t`.`ModifiedAt`, `t`.`Notes`, `t`.`OrderNumber`, `t`.`RestockedAt`, `t`.`ShippedAt`, `t`.`ShippingCost`, `t`.`Status`, `t`.`Subtotal`, `t`.`TaxAmount`, `t`.`Total`, `o0`.`Id`, `o0`.`CreatedAt`, `o0`.`DeletedAt`, `o0`.`ModifiedAt`, `o0`.`OrderId`, `o0`.`OrderedAt`, `o0`.`ProductId`, `o0`.`ProductVariantId`, `o0`.`Quantity`, `o0`.`TotalPrice`, `o0`.`UnitPrice`
FROM (
    SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
    FROM `Orders` AS `o`
    WHERE `o`.`Id` = @__orderId_0
    LIMIT 1
) AS `t`
LEFT JOIN `OrderItem` AS `o0` ON `t`.`Id` = `o0`.`OrderId`
ORDER BY `t`.`Id`
2025-09-10 03:09:25.350 +03:00 [WRN] Invalid status transition from "PendingPayment" to "Processing"
2025-09-10 03:09:26.148 +03:00 [INF] Removing cache by tags: [order]
2025-09-10 03:09:26.172 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1375.1677ms
2025-09-10 03:09:26.364 +03:00 [WRN] No cache entries found for tags: [order]
2025-09-10 03:09:26.458 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 03:09:26.479 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-10 03:09:26.502 +03:00 [INF] Removing cache by tags: [collection, CollectionWithProduct]
2025-09-10 03:09:26.601 +03:00 [INF] Removing cache by tags: [subcategory, subcategorywithdata]
2025-09-10 03:09:26.895 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 03:09:26.906 +03:00 [WRN] No cache entries found for tags: [variantlist, variantdata]
2025-09-10 03:09:26.934 +03:00 [WRN] No cache entries found for tags: [collection, CollectionWithProduct]
2025-09-10 03:09:27.026 +03:00 [WRN] No cache entries found for tags: [subcategory, subcategorywithdata]
2025-09-10 03:09:28.182 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:09:28.188 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:09:29.420 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1237.7127ms
2025-09-10 03:09:31.438 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:09:31.445 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:09:32.845 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1407.7718ms
2025-09-10 03:09:34.855 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:09:34.863 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:09:36.248 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1393.5685ms
2025-09-10 03:09:38.267 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:09:38.275 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:09:39.653 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1386.3864ms
2025-09-10 03:09:41.661 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:09:41.673 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:09:43.053 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1391.6677ms
2025-09-10 03:09:45.174 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:09:45.190 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:09:46.570 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1396.2671ms
2025-09-10 03:09:49.164 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:09:49.173 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:09:50.570 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1406.197ms
2025-09-10 03:09:53.211 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:09:53.217 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:09:54.615 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1404.1346ms
2025-09-10 03:09:57.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:09:57.157 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:09:58.537 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1386.2613ms
2025-09-10 03:10:01.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:10:01.174 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:10:02.547 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1390.8525ms
2025-09-10 03:10:05.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:10:05.172 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:10:06.543 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1384.0054ms
2025-09-10 03:10:09.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:10:09.169 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:10:10.564 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1408.0521ms
2025-09-10 03:10:13.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:10:13.162 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:10:14.565 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1415.0249ms
2025-09-10 03:10:17.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:10:17.171 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:10:18.608 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1448.0286ms
2025-09-10 03:10:21.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:10:21.171 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:10:22.546 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1387.7959ms
2025-09-10 03:10:25.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:10:25.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:10:26.541 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1385.6169ms
2025-09-10 03:10:29.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:10:29.170 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:10:30.535 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1374.5305ms
2025-09-10 03:10:33.153 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:10:33.163 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:10:34.536 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1383.938ms
2025-09-10 03:10:37.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:10:37.176 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:10:38.542 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1386.7805ms
2025-09-10 03:10:41.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:10:41.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:10:42.538 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1380.5758ms
2025-09-10 03:10:45.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:10:45.167 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:10:46.545 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1391.2185ms
2025-09-10 03:10:49.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:10:49.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:10:50.533 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1377.861ms
2025-09-10 03:10:53.176 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:10:53.189 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:10:54.581 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.1728ms
2025-09-10 03:10:57.146 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:10:57.153 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:10:58.547 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1401.2193ms
2025-09-10 03:11:01.165 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:11:01.172 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:11:02.558 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1392.8727ms
2025-09-10 03:11:05.260 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:11:05.585 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:11:07.266 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2006.1721ms
2025-09-10 03:11:10.165 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:11:10.171 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:11:12.833 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2668.1546ms
2025-09-10 03:11:15.267 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:11:15.386 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:11:17.550 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2282.7832ms
2025-09-10 03:11:22.147 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:11:22.155 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:11:24.722 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2575.9324ms
2025-09-10 03:11:27.381 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:11:27.394 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:11:29.436 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2054.5757ms
2025-09-10 03:11:32.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:11:32.168 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:11:34.046 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1888.4088ms
2025-09-10 03:11:36.183 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:11:36.377 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:11:38.315 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2132.0431ms
2025-09-10 03:11:41.361 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:11:41.381 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:11:43.058 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1696.4016ms
2025-09-10 03:11:45.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:11:45.304 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:11:46.981 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1826.1197ms
2025-09-10 03:11:49.056 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:11:49.125 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:11:51.900 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2843.5776ms
2025-09-10 03:11:54.228 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:11:54.236 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:11:56.946 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2717.499ms
2025-09-10 03:11:59.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:11:59.157 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:12:01.117 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1967.7256ms
2025-09-10 03:12:03.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:12:03.174 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:12:05.062 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1904.6498ms
2025-09-10 03:12:07.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:12:07.169 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:12:09.176 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2020.4138ms
2025-09-10 03:12:12.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:12:12.170 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:12:14.050 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1891.1351ms
2025-09-10 03:12:16.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:12:16.169 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:12:18.636 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2476.731ms
2025-09-10 03:12:21.161 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:12:21.179 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:12:22.880 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1718.8733ms
2025-09-10 03:12:25.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:12:25.169 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:12:26.845 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1685.0551ms
2025-09-10 03:12:29.147 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:12:29.156 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:12:30.816 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1669.0181ms
2025-09-10 03:12:33.153 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:12:33.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:12:35.216 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2062.611ms
2025-09-10 03:12:38.189 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:12:38.445 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:12:40.806 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2617.3311ms
2025-09-10 03:12:43.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:12:43.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:12:44.901 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1743.2866ms
2025-09-10 03:12:47.161 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:12:47.225 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:12:48.768 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1607.1238ms
2025-09-10 03:12:50.882 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 03:12:52.161 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:12:52.180 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:12:54.320 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 3437.2662ms
2025-09-10 03:12:54.392 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 03:12:54.404 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 03:12:54.410 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 17.7608ms
2025-09-10 03:12:54.421 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 16.3168ms
2025-09-10 03:12:54.887 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2726.6738ms
2025-09-10 03:12:57.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:12:57.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:12:58.925 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1770.1032ms
2025-09-10 03:13:00.940 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:13:00.954 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:13:01.530 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - application/x-www-form-urlencoded; charset=UTF-8 15
2025-09-10 03:13:01.540 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:13:03.016 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2075.9194ms
2025-09-10 03:13:03.544 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - 204 null null 2014.372ms
2025-09-10 03:13:03.572 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 03:13:05.037 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:13:05.057 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:13:06.658 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 24
2025-09-10 03:13:06.779 +03:00 [INF] Executed DbCommand (89ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-09-10 03:13:06.980 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Orders` SET `Status` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 03:13:07.573 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2535.8866ms
2025-09-10 03:13:07.573 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 4001.5693ms
2025-09-10 03:13:07.675 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 03:13:07.718 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 03:13:07.769 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 94.3521ms
2025-09-10 03:13:07.815 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 96.1754ms
2025-09-10 03:13:09.839 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:13:09.848 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:13:11.505 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1666.3158ms
2025-09-10 03:13:13.515 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:13:13.522 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:13:16.231 +03:00 [INF] Order 24 auto-expired and restock scheduled
2025-09-10 03:13:17.225 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 3710.2535ms
2025-09-10 03:13:17.747 +03:00 [INF] Removing cache by tags: [order]
2025-09-10 03:13:17.750 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 24
2025-09-10 03:13:17.849 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 03:13:18.220 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-10 03:13:18.235 +03:00 [INF] Removing cache by tags: [collection, CollectionWithProduct]
2025-09-10 03:13:18.332 +03:00 [INF] Executed DbCommand (112ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-09-10 03:13:18.342 +03:00 [INF] Execute GetAll for entity OrderItem
2025-09-10 03:13:18.356 +03:00 [WRN] No cache entries found for tags: [order]
2025-09-10 03:13:18.771 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 03:13:18.777 +03:00 [WRN] No cache entries found for tags: [variantlist, variantdata]
2025-09-10 03:13:18.778 +03:00 [WRN] No cache entries found for tags: [collection, CollectionWithProduct]
2025-09-10 03:13:18.951 +03:00 [INF] Executed DbCommand (305ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`ProductVariantId`, `o`.`Quantity`
FROM `OrderItem` AS `o`
WHERE `o`.`OrderId` = @__orderId_0
2025-09-10 03:13:18.962 +03:00 [INF] Adding quantity for variant: 1
2025-09-10 03:13:19.247 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:13:19.258 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:13:19.629 +03:00 [INF] Executing GetByIdAsync for entity ProductVariant with ID: 1
2025-09-10 03:13:19.765 +03:00 [INF] Executed DbCommand (133ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 03:13:19.966 +03:00 [INF] Executed DbCommand (105ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `ProductVariants` SET `Quantity` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 03:13:21.357 +03:00 [INF] Removing cache by tags: [subcategory, subcategorywithdata]
2025-09-10 03:13:21.522 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2274.9032ms
2025-09-10 03:13:21.772 +03:00 [INF] Quantity for variant 1 restored to 19
2025-09-10 03:13:21.818 +03:00 [WRN] No cache entries found for tags: [subcategory, subcategorywithdata]
2025-09-10 03:13:21.988 +03:00 [INF] Executed DbCommand (102ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Orders` SET `RestockedAt` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 03:13:23.537 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:13:23.545 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:13:23.924 +03:00 [INF] Executed DbCommand (131ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-09-10 03:13:24.081 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Products` SET `Quantity` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 03:13:26.029 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2491.5502ms
2025-09-10 03:13:26.029 +03:00 [INF] Removing cache by tags: [order]
2025-09-10 03:13:26.336 +03:00 [WRN] No cache entries found for tags: [order]
2025-09-10 03:13:28.051 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:13:28.061 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:13:28.308 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-10 03:13:28.698 +03:00 [INF] Removing cache by tag: CollectionWithProduct
2025-09-10 03:13:28.716 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 03:13:28.906 +03:00 [WRN] No cache entries found for tags: [variantlist, variantdata]
2025-09-10 03:13:28.968 +03:00 [WRN] No cache entries found for tag: CollectionWithProduct
2025-09-10 03:13:29.522 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 03:13:29.697 +03:00 [INF] Restocked inventory for order 24
2025-09-10 03:13:30.289 +03:00 [INF] Removing cache by tag: subcategorywithdata
2025-09-10 03:13:30.875 +03:00 [WRN] No cache entries found for tag: subcategorywithdata
2025-09-10 03:13:31.015 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2963.8187ms
2025-09-10 03:13:31.531 +03:00 [INF] Removing cache by tags: [collection, CollectionWithProduct]
2025-09-10 03:13:31.974 +03:00 [WRN] No cache entries found for tags: [collection, CollectionWithProduct]
2025-09-10 03:13:32.234 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 03:13:32.799 +03:00 [INF] Removing cache by tags: [subcategory, subcategorywithdata]
2025-09-10 03:13:33.031 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:13:33.035 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 03:13:33.042 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:13:33.259 +03:00 [WRN] No cache entries found for tags: [subcategory, subcategorywithdata]
2025-09-10 03:13:36.256 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 3224.7773ms
2025-09-10 03:13:38.263 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:13:38.277 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:13:40.590 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2327.2833ms
2025-09-10 03:13:42.607 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:13:42.614 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:13:46.462 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 3854.8288ms
2025-09-10 03:13:48.478 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:13:48.489 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:13:50.468 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1990.5144ms
2025-09-10 03:13:52.478 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:13:52.489 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:13:54.395 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1916.8908ms
2025-09-10 03:13:56.405 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:13:56.417 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:13:57.945 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1539.4261ms
2025-09-10 03:13:59.952 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:13:59.960 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:14:01.618 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1666.5584ms
2025-09-10 03:14:03.641 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:14:03.656 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:14:05.116 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1475.0991ms
2025-09-10 03:14:07.127 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:14:07.133 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:14:08.750 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1623.2676ms
2025-09-10 03:14:11.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:14:11.167 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:14:13.477 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2317.7329ms
2025-09-10 03:14:16.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:14:16.170 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:14:16.468 +03:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5069/api/Products/1/Variants/1/activate - null 0
2025-09-10 03:14:16.482 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 03:14:16.714 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 03:14:16.859 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.ActivateVariant (E-Commerce)'
2025-09-10 03:14:16.874 +03:00 [INF] Route matched with {action = "ActivateVariant", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] ActivateVariant(Int32, Int32) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-09-10 03:14:16.883 +03:00 [INF] Activating variant: 1
2025-09-10 03:14:17.200 +03:00 [INF] Checking if variant 1 exists and is not deleted
2025-09-10 03:14:17.208 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 03:14:17.290 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__8__locals1_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Quantity` > 0 AS `hasquntity`, `p`.`DeletedAt` IS NOT NULL AS `isdeleted`, `p`.`Size` IS NOT NULL AS `hassize`, ((`p`.`Length` <> 0) OR `p`.`Length` IS NULL) AND ((`p`.`Waist` <> 0) OR `p`.`Waist` IS NULL) AS `haslengthandwaist`, `p`.`ProductId` AS `productid`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__8__locals1_id_0
LIMIT 1
2025-09-10 03:14:17.446 +03:00 [INF] Executed DbCommand (147ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `ProductVariants` AS `p`
    WHERE (`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL)
2025-09-10 03:14:17.457 +03:00 [INF] Validating variant 1 has required properties for activation
2025-09-10 03:14:17.459 +03:00 [INF] Attempting to activate variant 1
2025-09-10 03:14:17.580 +03:00 [INF] Executed DbCommand (118ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE (`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 03:14:17.599 +03:00 [INF] Successfully activated variant 1
2025-09-10 03:14:17.602 +03:00 [INF] Updating product 1 quantity after activating variant 1
2025-09-10 03:14:17.608 +03:00 [INF] Recording admin operation for activating variant 1 by user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 03:14:17.611 +03:00 [INF] Execute AddAdminOpreationAsync
2025-09-10 03:14:17.613 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-09-10 03:14:17.616 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-09-10 03:14:17.620 +03:00 [INF] Committing unit of work for activating variant 1
2025-09-10 03:14:17.780 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p2='?' (Size = 255), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ProductVariants` SET `IsActive` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 03:14:17.848 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1689.1727ms
2025-09-10 03:14:17.872 +03:00 [INF] Committing transaction for activating variant 1
2025-09-10 03:14:20.146 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:14:20.157 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:14:22.878 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2731.5943ms
2025-09-10 03:14:23.134 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-10 03:14:23.718 +03:00 [WRN] No cache entries found for tags: [variantlist, variantdata]
2025-09-10 03:14:24.100 +03:00 [INF] Removing cache by tag: CollectionWithProduct
2025-09-10 03:14:24.501 +03:00 [WRN] No cache entries found for tag: CollectionWithProduct
2025-09-10 03:14:24.671 +03:00 [INF] Successfully completed all operations for activating variant 1
2025-09-10 03:14:25.148 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:14:25.160 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:14:26.150 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 03:14:26.157 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.ActivateVariant (E-Commerce) in 9278.1331ms
2025-09-10 03:14:26.161 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.ActivateVariant (E-Commerce)'
2025-09-10 03:14:26.166 +03:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5069/api/Products/1/Variants/1/activate - 200 120 application/json; charset=utf-8 9698.0519ms
2025-09-10 03:14:26.194 +03:00 [INF] Removing cache by tag: subcategorywithdata
2025-09-10 03:14:26.438 +03:00 [WRN] No cache entries found for tag: subcategorywithdata
2025-09-10 03:14:26.971 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 03:14:27.136 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1988.2542ms
2025-09-10 03:14:27.489 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 03:14:28.406 +03:00 [INF] Executed DbCommand (99ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-09-10 03:14:30.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:14:30.170 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:14:31.307 +03:00 [INF] Removing cache by tag: CollectionWithProduct
2025-09-10 03:14:31.553 +03:00 [WRN] No cache entries found for tag: CollectionWithProduct
2025-09-10 03:14:32.212 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2052.2105ms
2025-09-10 03:14:33.971 +03:00 [INF] Removing cache by tag: subcategorywithdata
2025-09-10 03:14:34.199 +03:00 [WRN] No cache entries found for tag: subcategorywithdata
2025-09-10 03:14:35.322 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:14:35.346 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:14:35.380 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 03:14:35.886 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 03:14:35.973 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json 63
2025-09-10 03:14:35.985 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 03:14:36.205 +03:00 [INF] Executed DbCommand (133ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 03:14:36.216 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 03:14:36.225 +03:00 [INF] Route matched with {action = "AddItemToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] AddItemToCart(E_Commerce.DtoModels.CartDtos.CreateCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 03:14:36.233 +03:00 [INF] Executing AddItemToCart for product ID: 1
2025-09-10 03:14:36.235 +03:00 [INF] Adding item to cart for user: e682f183-1c61-400b-aa5a-171750f446b5, product: 1
2025-09-10 03:14:36.628 +03:00 [INF] Executed DbCommand (139ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 03:14:36.652 +03:00 [INF] Execute GetAll for entity Product
2025-09-10 03:14:36.980 +03:00 [INF] Executed DbCommand (247ms) [Parameters=[@__8__locals1_itemDto_ProductId_0='?' (DbType = Int32), @__8__locals1_itemDto_ProductVariantId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Price`, `t`.`c`, `t`.`EndDate`, `t`.`StartDate`, `t`.`DiscountPercent`, `t`.`DeletedAt`, `t`.`IsActive`, `t0`.`Id`, `t0`.`Quantity`, `t0`.`c`
FROM (
    SELECT `p`.`Id`, `p`.`Price`, `d`.`Id` IS NOT NULL AS `c`, `d`.`EndDate`, `d`.`StartDate`, `d`.`DiscountPercent`, `d`.`DeletedAt`, `d`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__8__locals1_itemDto_ProductId_0) AND `p`.`DeletedAt` IS NULL) AND `p`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Quantity`, `t1`.`c`, `t1`.`ProductId`
    FROM (
        SELECT `p0`.`Id`, `p0`.`Quantity`, 1 AS `c`, `p0`.`ProductId`, ROW_NUMBER() OVER(PARTITION BY `p0`.`ProductId` ORDER BY `p0`.`Id`) AS `row`
        FROM `ProductVariants` AS `p0`
        WHERE (`p0`.`Id` = @__8__locals1_itemDto_ProductVariantId_1) AND `p0`.`IsActive`
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
2025-09-10 03:14:36.987 +03:00 [INF] Retrieving cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:14:37.111 +03:00 [INF] Executed DbCommand (121ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 03:14:37.120 +03:00 [INF] Executing CreateAsync for entity CartItem
2025-09-10 03:14:37.125 +03:00 [INF] CartItem added successfully (pending save)
2025-09-10 03:14:37.133 +03:00 [INF] Execute AddUserOpreationAsync
2025-09-10 03:14:37.139 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-09-10 03:14:37.142 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-09-10 03:14:38.055 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2733.4609ms
2025-09-10 03:14:38.970 +03:00 [INF] Executed DbCommand (201ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (DbType = DateTime), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime), @p16='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `CartItems` (`AddedAt`, `CartId`, `CreatedAt`, `DeletedAt`, `ModifiedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `UnitPrice`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `CartItems`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `userOperationsLogs` (`CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`, `UserId`)
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `userOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 03:14:39.145 +03:00 [INF] Removing cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:14:39.684 +03:00 [INF] Cache removed successfully for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:14:39.715 +03:00 [INF] Item added to cart for user: e682f183-1c61-400b-aa5a-171750f446b5, product: 1
2025-09-10 03:14:39.734 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 03:14:39.741 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce) in 3511.1848ms
2025-09-10 03:14:39.748 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-09-10 03:14:39.766 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 200 134 application/json; charset=utf-8 3793.2993ms
2025-09-10 03:14:40.172 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:14:40.193 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:14:40.832 +03:00 [INF] Executing GetByIdAsync for entity Cart with ID: 3
2025-09-10 03:14:41.067 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
FROM `Cart` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-09-10 03:14:41.402 +03:00 [INF] Executed DbCommand (201ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Cart` SET `CheckoutDate` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 03:14:42.867 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2694.5787ms
2025-09-10 03:14:43.285 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - null 0
2025-09-10 03:14:43.361 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 03:14:43.699 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 03:14:43.713 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-09-10 03:14:43.719 +03:00 [INF] Route matched with {action = "CheckOut", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] CheckOut() on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-09-10 03:14:43.734 +03:00 [INF] Executing CheckOut
2025-09-10 03:14:43.747 +03:00 [INF] Checkout of cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:14:43.749 +03:00 [INF] Retrieving cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:14:44.107 +03:00 [INF] Executed DbCommand (184ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-09-10 03:14:44.266 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Cart` SET `CheckoutDate` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 03:14:44.281 +03:00 [INF] Removing cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:14:44.286 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 03:14:44.296 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.CheckOut (E-Commerce) in 562.7078ms
2025-09-10 03:14:44.311 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-09-10 03:14:44.328 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - 200 122 application/json; charset=utf-8 1043.5092ms
2025-09-10 03:14:45.330 +03:00 [INF] Cache removed successfully for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:14:46.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:14:46.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:14:47.312 +03:00 [INF] Removing cache by tag: cart
2025-09-10 03:14:47.559 +03:00 [WRN] No cache entries found for tag: cart
2025-09-10 03:14:48.026 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1866.8477ms
2025-09-10 03:14:50.147 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:14:50.157 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:14:51.779 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1631.788ms
2025-09-10 03:14:54.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:14:54.178 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:14:56.588 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2428.7907ms
2025-09-10 03:14:59.153 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:14:59.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:15:00.823 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1669.7834ms
2025-09-10 03:15:02.666 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - null null
2025-09-10 03:15:02.674 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 03:15:02.891 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 03:15:02.898 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.GetOrders (E-Commerce)'
2025-09-10 03:15:02.909 +03:00 [INF] Route matched with {action = "GetOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.OrderDtos.OrderListDto]]]] GetOrders(System.String, System.Nullable`1[System.Boolean], Int32, Int32, System.Nullable`1[E_Commerce.Enums.OrderStatus]) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 03:15:02.917 +03:00 [INF] Executing GetOrders: role: User, userId: e682f183-1c61-400b-aa5a-171750f446b5, deleted: , page: 1, size: 10, status: 
2025-09-10 03:15:02.920 +03:00 [INF] Filtering orders - UserId: e682f183-1c61-400b-aa5a-171750f446b5, Deleted: null, Page: 1, PageSize: 10, Status: null
2025-09-10 03:15:02.927 +03:00 [INF] Getting cache for key: order:filter:user:e682f183-1c61-400b-aa5a-171750f446b5_deleted:all_page:1_size:10_status:all
2025-09-10 03:15:03.148 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:15:03.156 +03:00 [WRN] Cache miss for key: order:filter:user:e682f183-1c61-400b-aa5a-171750f446b5_deleted:all_page:1_size:10_status:all
2025-09-10 03:15:03.158 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:15:03.160 +03:00 [INF] Execute GetAll for entity Order
2025-09-10 03:15:03.355 +03:00 [INF] Executed DbCommand (98ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 255), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`OrderNumber`, `t0`.`Name`, `t`.`Status`, `t`.`Total`, `t`.`CreatedAt`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`CustomerId`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Total`
    FROM `Orders` AS `o`
    WHERE `o`.`CustomerId` = @__8__locals1_userId_0
    ORDER BY `o`.`CreatedAt` DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS `t`
INNER JOIN (
    SELECT `a`.`Id`, `a`.`Name`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Discriminator` = 'Customer'
) AS `t0` ON `t`.`CustomerId` = `t0`.`Id`
ORDER BY `t`.`CreatedAt` DESC
2025-09-10 03:15:04.362 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.OrderDtos.OrderListDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 03:15:04.368 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.GetOrders (E-Commerce) in 1455.2897ms
2025-09-10 03:15:04.389 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.GetOrders (E-Commerce)'
2025-09-10 03:15:04.391 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - 200 618 application/json; charset=utf-8 1724.9257ms
2025-09-10 03:15:04.717 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1569.3001ms
2025-09-10 03:15:07.164 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:15:07.181 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:15:07.920 +03:00 [INF] Setting cache for key: order:filter:user:e682f183-1c61-400b-aa5a-171750f446b5_deleted:all_page:1_size:10_status:all
2025-09-10 03:15:08.148 +03:00 [INF] Cache set successfully for key: order:filter:user:e682f183-1c61-400b-aa5a-171750f446b5_deleted:all_page:1_size:10_status:all with tags: [order]
2025-09-10 03:15:08.445 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1281.5284ms
2025-09-10 03:15:11.219 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:15:11.235 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:15:12.189 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order - application/json 42
2025-09-10 03:15:12.202 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 03:15:12.357 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 03:15:12.365 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 03:15:12.375 +03:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto]]] CreateOrder(E_Commerce.DtoModels.OrderDtos.CreateOrderDto) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 03:15:12.384 +03:00 [INF] Executing CreateOrder
2025-09-10 03:15:12.386 +03:00 [INF] Creating order from cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:15:12.643 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1424.1926ms
2025-09-10 03:15:12.685 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 03:15:12.767 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 03:15:12.775 +03:00 [INF] Checking if address 30 exists for customer: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:15:12.853 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__addressId_0='?' (DbType = Int32), @__customerId_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `CustomerAddresses` AS `c`
    WHERE ((`c`.`Id` = @__addressId_0) AND (`c`.`CustomerId` = @__customerId_1)) AND `c`.`DeletedAt` IS NULL)
2025-09-10 03:15:12.862 +03:00 [INF] Getting cart for user: e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:15:12.864 +03:00 [INF] Getting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:15:13.076 +03:00 [WRN] Cache miss for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:15:13.161 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-09-10 03:15:13.190 +03:00 [INF] Execute GetAll for entity Cart
2025-09-10 03:15:13.283 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-09-10 03:15:13.293 +03:00 [INF] Setting cache for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:15:13.530 +03:00 [INF] Cache set successfully for key: cart:user:e682f183-1c61-400b-aa5a-171750f446b5 with tags: [cart]
2025-09-10 03:15:13.537 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 03:15:13.619 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`, `p0`.`Id`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`Description`, `p0`.`DiscountId`, `p0`.`Gender`, `p0`.`IsActive`, `p0`.`ModifiedAt`, `p0`.`Name`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`SubCategoryId`, `p0`.`fitType`
FROM `ProductVariants` AS `p`
INNER JOIN `Products` AS `p0` ON `p`.`ProductId` = `p0`.`Id`
WHERE `p`.`Id` = 1
2025-09-10 03:15:13.701 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE `o`.`OrderNumber` = @__orderNumber_0)
2025-09-10 03:15:13.708 +03:00 [INF] Executing CreateAsync for entity Order
2025-09-10 03:15:13.710 +03:00 [INF] Order added successfully (pending save)
2025-09-10 03:15:13.862 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime), @p8='?' (Size = 500), @p9='?' (Size = 50), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Orders` (`CancelledAt`, `CreatedAt`, `CustomerAddressId`, `CustomerId`, `DeletedAt`, `DeliveredAt`, `DiscountAmount`, `ModifiedAt`, `Notes`, `OrderNumber`, `RestockedAt`, `ShippedAt`, `ShippingCost`, `Status`, `Subtotal`, `TaxAmount`, `Total`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Orders`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 03:15:13.942 +03:00 [INF] Executing CreateRangeAsync for entity OrderItem
2025-09-10 03:15:13.949 +03:00 [INF] 1 OrderItem entities added successfully (pending save)
2025-09-10 03:15:13.950 +03:00 [INF] Removing 19 from variant: 1
2025-09-10 03:15:13.952 +03:00 [INF] Executing GetByIdAsync for entity ProductVariant with ID: 1
2025-09-10 03:15:14.031 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 03:15:15.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:15:15.156 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:15:15.872 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE ProductVariants SET Quantity = Quantity - @p0 WHERE Id = @p1 AND Quantity >= @p0
2025-09-10 03:15:15.879 +03:00 [INF] Clearing cart: 3
2025-09-10 03:15:15.955 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__cartId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE `c`.`CartId` = @__cartId_0
2025-09-10 03:15:15.991 +03:00 [INF] Cart 3 cleared successfully
2025-09-10 03:15:16.145 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Decimal), @p10='?' (DbType = Decimal), @p13='?' (DbType = Int32), @p11='?' (DbType = Boolean), @p12='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM `CartItems`
WHERE `Id` = @p0;
SELECT ROW_COUNT();

INSERT INTO `OrderItem` (`CreatedAt`, `DeletedAt`, `ModifiedAt`, `OrderId`, `OrderedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `TotalPrice`, `UnitPrice`)
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
SELECT `Id`
FROM `OrderItem`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

UPDATE `ProductVariants` SET `IsActive` = @p11, `Quantity` = @p12
WHERE `Id` = @p13;
SELECT ROW_COUNT();
2025-09-10 03:15:16.303 +03:00 [INF] Execute AddUserOpreationAsync
2025-09-10 03:15:16.306 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-09-10 03:15:16.311 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-09-10 03:15:16.312 +03:00 [INF] Execute GetAll for entity Order
2025-09-10 03:15:16.478 +03:00 [INF] Executed DbCommand (89ms) [Parameters=[@__createdOrder_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`ModifiedAt`, `t0`.`OrderNumber`, `t0`.`Status`, `t0`.`Subtotal`, `t0`.`TaxAmount`, `t0`.`ShippingCost`, `t0`.`DiscountAmount`, `t0`.`Total`, `t0`.`Notes`, `t0`.`DeletedAt`, `t0`.`ShippedAt`, `t0`.`DeliveredAt`, `t0`.`CancelledAt`, `t0`.`c`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Email`, `t0`.`PhoneNumber`, `t1`.`Id`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`Quantity`, `t1`.`UnitPrice`, `t1`.`TotalPrice`, `t1`.`OrderedAt`, `t1`.`Id0`, `t1`.`Name`, `t1`.`Price`, `t1`.`IsActive`, `t1`.`FinalPrice`, `t1`.`DiscountPrecentage`, `t1`.`MainImageUrl`, `t1`.`Id1`, `t1`.`Color`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`Size`, `t1`.`DeletedAt`, `t1`.`Length`, `t1`.`Waist`, `t1`.`Id2`, `t1`.`Id3`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`ModifiedAt`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`ShippingCost`, `o`.`DiscountAmount`, `o`.`Total`, `o`.`Notes`, `o`.`DeletedAt`, `o`.`ShippedAt`, `o`.`DeliveredAt`, `o`.`CancelledAt`, FALSE AS `c`, `t`.`Id` AS `Id0`, `t`.`Name`, `t`.`Email`, `t`.`PhoneNumber`
    FROM `Orders` AS `o`
    INNER JOIN (
        SELECT `a`.`Id`, `a`.`Email`, `a`.`PhoneNumber`, `a`.`Name`
        FROM `AspNetUsers` AS `a`
        WHERE `a`.`Discriminator` = 'Customer'
    ) AS `t` ON `o`.`CustomerId` = `t`.`Id`
    WHERE `o`.`Id` = @__createdOrder_Id_0
    LIMIT 1
) AS `t0`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`CreatedAt`, `o0`.`ModifiedAt`, `o0`.`Quantity`, `o0`.`UnitPrice`, `o0`.`TotalPrice`, `o0`.`OrderedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND `i`.`DeletedAt` IS NULL
        LIMIT 1), '') AS `MainImageUrl`, `o0`.`ProductVariantId` AS `Id1`, `p0`.`Color`, COALESCE(`p0`.`CreatedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `CreatedAt0`, COALESCE(`p0`.`ModifiedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `ModifiedAt0`, `p0`.`Size`, `p0`.`DeletedAt`, COALESCE(`p0`.`Length`, 0) AS `Length`, COALESCE(`p0`.`Waist`, 0) AS `Waist`, `d`.`Id` AS `Id2`, `p0`.`Id` AS `Id3`, `o0`.`OrderId`
    FROM `OrderItem` AS `o0`
    INNER JOIN `Products` AS `p` ON `o0`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    INNER JOIN `ProductVariants` AS `p0` ON `o0`.`ProductVariantId` = `p0`.`Id`
) AS `t1` ON `t0`.`Id` = `t1`.`OrderId`
ORDER BY `t0`.`Id`, `t0`.`Id0`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id2`
2025-09-10 03:15:16.551 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1402.6623ms
2025-09-10 03:15:18.290 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-10 03:15:18.438 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__productId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE (`p`.`ProductId` = @__productId_0) AND `p`.`DeletedAt` IS NULL
2025-09-10 03:15:18.450 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-09-10 03:15:18.602 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Products` SET `Quantity` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 03:15:18.659 +03:00 [INF] Removing cache by tags: [order]
2025-09-10 03:15:19.165 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:15:19.174 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:15:19.300 +03:00 [INF] Removed 1 cache entries for tags: [order]
2025-09-10 03:15:19.536 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-10 03:15:19.959 +03:00 [WRN] No cache entries found for tags: [variantlist, variantdata]
2025-09-10 03:15:20.395 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1230.175ms
2025-09-10 03:15:21.094 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 03:15:21.245 +03:00 [INF] Removing cache by tag: CollectionWithProduct
2025-09-10 03:15:21.291 +03:00 [INF] Removing cache by tags: [collection, CollectionWithProduct]
2025-09-10 03:15:21.457 +03:00 [WRN] No cache entries found for tag: CollectionWithProduct
2025-09-10 03:15:21.518 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 03:15:21.648 +03:00 [INF] Removing cache by tag: subcategorywithdata
2025-09-10 03:15:21.716 +03:00 [WRN] No cache entries found for tags: [collection, CollectionWithProduct]
2025-09-10 03:15:21.755 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 03:15:21.764 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce) in 9383.1381ms
2025-09-10 03:15:21.793 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrder (E-Commerce)'
2025-09-10 03:15:21.802 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order - 201 1433 application/json; charset=utf-8 9612.6017ms
2025-09-10 03:15:21.874 +03:00 [WRN] No cache entries found for tag: subcategorywithdata
2025-09-10 03:15:22.173 +03:00 [INF] Removing cache by tags: [subcategory, subcategorywithdata]
2025-09-10 03:15:22.510 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 03:15:22.686 +03:00 [WRN] No cache entries found for tags: [subcategory, subcategorywithdata]
2025-09-10 03:15:23.238 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:15:23.243 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 03:15:23.247 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:15:24.624 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1386.6893ms
2025-09-10 03:15:27.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:15:27.163 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:15:28.394 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1239.8021ms
2025-09-10 03:15:31.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:15:31.156 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:15:32.528 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1379.1453ms
2025-09-10 03:15:35.171 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:15:35.185 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:15:36.587 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1415.8248ms
2025-09-10 03:15:39.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:15:39.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:15:40.558 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1403.1078ms
2025-09-10 03:15:43.206 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:15:43.219 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:15:44.591 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1384.6677ms
2025-09-10 03:15:47.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:15:47.167 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:15:48.543 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1384.2713ms
2025-09-10 03:15:48.924 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Payment - application/json 138
2025-09-10 03:15:48.931 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 03:15:49.079 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 03:15:49.084 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.PaymentController.CreatePayment (E-Commerce)'
2025-09-10 03:15:49.092 +03:00 [INF] Route matched with {action = "CreatePayment", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto]]] CreatePayment(CreatePaymentRequestDto) on controller E_Commerce.Controllers.PaymentController (E-Commerce).
2025-09-10 03:15:49.099 +03:00 [INF] Executing CreatePayment for order: ORD-20250910001513-9221
2025-09-10 03:15:49.100 +03:00 [INF] Starting CreatePaymentMethod for order ORD-20250910001513-9221 by user e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:15:49.318 +03:00 [INF] Getting order by number: ORD-20250910001513-9221
2025-09-10 03:15:49.395 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`OrderNumber` = @__orderNumber_0
LIMIT 1
2025-09-10 03:15:49.401 +03:00 [INF] Execute GetAll for entity Payment
2025-09-10 03:15:49.479 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__order_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Amount`, `p`.`CreatedAt`, `p`.`CustomerId`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`OrderId`, `p`.`PaymentDate`, `p`.`PaymentMethodId`, `p`.`PaymentProviderId`, `p`.`ProviderOrderId`, `p`.`Status`, `p`.`TransactionId`
FROM `Payments` AS `p`
WHERE (`p`.`OrderId` = @__order_Id_0) AND (`p`.`Status` = 1)
LIMIT 1
2025-09-10 03:15:49.485 +03:00 [INF] Getting payment method ID for enum "Visa"
2025-09-10 03:15:49.488 +03:00 [INF] Execute GetAll for entity PaymentMethod
2025-09-10 03:15:49.567 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__methodEnum_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`
FROM `PaymentMethods` AS `p`
WHERE ((`p`.`Method` = @__methodEnum_0) AND `p`.`IsActive`) AND `p`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 03:15:49.578 +03:00 [INF] Found payment method ID 1 for enum "Visa"
2025-09-10 03:15:49.581 +03:00 [INF] Executing GetByIdAsync for entity PaymentMethod with ID: 1
2025-09-10 03:15:49.659 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IntegrationId`, `p`.`IsActive`, `p`.`Method`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`PaymentProviderId`
FROM `PaymentMethods` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 03:15:49.685 +03:00 [INF] Execute GetAll for entity PaymentProvider
2025-09-10 03:15:49.765 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`PublicKey`
FROM `PaymentProviders` AS `p`
WHERE `p`.`Provider` = 1
LIMIT 1
2025-09-10 03:15:49.866 +03:00 [INF] Executing GetTokenAsync
2025-09-10 03:15:49.870 +03:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-09-10 03:15:49.881 +03:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-09-10 03:15:50.490 +03:00 [INF] Received HTTP response headers after 593.158ms - 201
2025-09-10 03:15:50.495 +03:00 [INF] End processing HTTP request after 624.6726ms - 201
2025-09-10 03:15:50.499 +03:00 [INF] Successfully retrieved PayMob token
2025-09-10 03:15:50.576 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-09-10 03:15:50.584 +03:00 [INF] Getting address by ID: 30
2025-09-10 03:15:50.665 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__addressId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AdditionalNotes`, `c`.`AddressType`, `c`.`City`, `c`.`Country`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`IsDefault`, `c`.`ModifiedAt`, `c`.`PhoneNumber`, `c`.`PostalCode`, `c`.`State`, `c`.`StreetAddress`, `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Discriminator`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `t`.`Age`, `t`.`CreateAt`, `t`.`DeletedAt`, `t`.`Gender`, `t`.`ImageId`, `t`.`ImageId1`, `t`.`LastVisit`, `t`.`Name`
FROM `CustomerAddresses` AS `c`
INNER JOIN (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Discriminator` = 'Customer'
) AS `t` ON `c`.`CustomerId` = `t`.`Id`
WHERE (`c`.`Id` = @__addressId_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-09-10 03:15:50.675 +03:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/ecommerce/orders
2025-09-10 03:15:50.682 +03:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/ecommerce/orders
2025-09-10 03:15:50.894 +03:00 [INF] Received HTTP response headers after 209.3136ms - 201
2025-09-10 03:15:50.897 +03:00 [INF] End processing HTTP request after 221.9154ms - 201
2025-09-10 03:15:50.901 +03:00 [INF] Successfully created PayMob order: 383670827 for local order: ORD-20250910001513-9221
2025-09-10 03:15:50.904 +03:00 [INF] Execute GetAll for entity PaymentMethod
2025-09-10 03:15:50.979 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__dto_PaymentMethod_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`IntegrationId`
FROM `PaymentMethods` AS `p`
INNER JOIN `PaymentProviders` AS `p0` ON `p`.`PaymentProviderId` = `p0`.`Id`
WHERE ((`p`.`Method` = @__dto_PaymentMethod_0) AND `p`.`IsActive`) AND (`p0`.`Provider` = 1)
LIMIT 1
2025-09-10 03:15:50.986 +03:00 [INF] Using integration ID: 5221967 for payment method: "Visa"
2025-09-10 03:15:50.991 +03:00 [INF] Starting GeneratePaymentKeyAsync for Order ID: 383670827, Amount: 190000
2025-09-10 03:15:50.997 +03:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/acceptance/payment_keys
2025-09-10 03:15:51.000 +03:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/acceptance/payment_keys
2025-09-10 03:15:51.213 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:15:51.218 +03:00 [INF] Received HTTP response headers after 214.9136ms - 201
2025-09-10 03:15:51.282 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:15:51.284 +03:00 [INF] End processing HTTP request after 287.5567ms - 201
2025-09-10 03:15:51.292 +03:00 [INF] Request sent to Paymob payment_keys endpoint
2025-09-10 03:15:51.298 +03:00 [INF] Received response from Paymob payment_keys endpoint
2025-09-10 03:15:51.304 +03:00 [INF] Payment key generated successfully for Order ID: 383670827
2025-09-10 03:15:51.328 +03:00 [INF] Successfully generated payment key for order: ORD-20250910001513-9221
2025-09-10 03:15:51.332 +03:00 [INF] Execute GetAll for entity PaymentProvider
2025-09-10 03:15:51.425 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__paymentProvider_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`IframeId`
FROM `PaymentProviders` AS `p`
WHERE `p`.`Provider` = @__paymentProvider_0
LIMIT 1
2025-09-10 03:15:51.582 +03:00 [INF] Executing CreateAsync for entity Payment
2025-09-10 03:15:51.684 +03:00 [INF] Payment added successfully (pending save)
2025-09-10 03:15:51.700 +03:00 [INF] Execute AddUserOpreationAsync
2025-09-10 03:15:51.702 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-09-10 03:15:51.709 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-09-10 03:15:51.878 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?' (Size = 255), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int64), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime), @p17='?' (DbType = Int32), @p18='?' (DbType = DateTime), @p19='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Payments` (`Amount`, `CreatedAt`, `CustomerId`, `DeletedAt`, `ModifiedAt`, `OrderId`, `PaymentDate`, `PaymentMethodId`, `PaymentProviderId`, `ProviderOrderId`, `Status`, `TransactionId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
SELECT `Id`
FROM `Payments`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `userOperationsLogs` (`CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`, `UserId`)
VALUES (@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
SELECT `Id`
FROM `userOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 03:15:52.060 +03:00 [INF] Payment created successfully with ID 6
2025-09-10 03:15:52.658 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1445.183ms
2025-09-10 03:15:52.936 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 03:15:52.945 +03:00 [INF] Executed action E_Commerce.Controllers.PaymentController.CreatePayment (E-Commerce) in 3848.2656ms
2025-09-10 03:15:52.970 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.PaymentController.CreatePayment (E-Commerce)'
2025-09-10 03:15:52.977 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Payment - 200 1365 application/json; charset=utf-8 4053.1104ms
2025-09-10 03:15:55.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:15:55.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:15:56.655 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1498.1186ms
2025-09-10 03:15:59.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:15:59.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:16:00.536 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1379.27ms
2025-09-10 03:16:03.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:16:03.187 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:16:04.564 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.025ms
2025-09-10 03:16:07.146 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:16:07.157 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:16:08.537 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1390.3808ms
2025-09-10 03:16:11.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:16:11.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:16:12.546 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1389.5331ms
2025-09-10 03:16:15.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:16:15.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:16:16.538 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1380.3683ms
2025-09-10 03:16:19.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:16:19.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:16:20.545 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1393.9191ms
2025-09-10 03:16:23.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:16:23.169 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:16:24.546 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1386.6167ms
2025-09-10 03:16:27.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:16:27.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:16:28.546 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1389.0131ms
2025-09-10 03:16:31.163 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:16:31.170 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:16:32.567 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1404.5248ms
2025-09-10 03:16:34.626 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:16:34.635 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:16:36.011 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1384.9197ms
2025-09-10 03:16:38.045 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:16:38.054 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:16:38.394 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 03:16:39.752 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1707.3847ms
2025-09-10 03:16:40.674 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2280.3529ms
2025-09-10 03:16:40.797 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 03:16:40.817 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 03:16:40.821 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.297ms
2025-09-10 03:16:40.843 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 26.138ms
2025-09-10 03:16:43.009 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:16:43.024 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:16:44.415 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1406.5577ms
2025-09-10 03:16:45.186 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - application/x-www-form-urlencoded; charset=UTF-8 15
2025-09-10 03:16:45.198 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:16:46.291 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - 204 null null 1104.3293ms
2025-09-10 03:16:46.339 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-09-10 03:16:46.428 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:16:46.448 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:16:47.518 +03:00 [INF] Starting CheckAndUpdatePaymentStatusAsync for payment 6
2025-09-10 03:16:47.744 +03:00 [INF] Executing GetByIdAsync for entity Payment with ID: 6
2025-09-10 03:16:47.820 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1392.4528ms
2025-09-10 03:16:47.827 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Amount`, `p`.`CreatedAt`, `p`.`CustomerId`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`OrderId`, `p`.`PaymentDate`, `p`.`PaymentMethodId`, `p`.`PaymentProviderId`, `p`.`ProviderOrderId`, `p`.`Status`, `p`.`TransactionId`
FROM `Payments` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-09-10 03:16:47.877 +03:00 [INF] Execute GetAll for entity PaymentProvider
2025-09-10 03:16:47.952 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`PublicKey`
FROM `PaymentProviders` AS `p`
WHERE `p`.`Provider` = 1
LIMIT 1
2025-09-10 03:16:47.962 +03:00 [INF] Executing GetTokenAsync
2025-09-10 03:16:47.964 +03:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-09-10 03:16:47.966 +03:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-09-10 03:16:48.186 +03:00 [INF] Received HTTP response headers after 217.5407ms - 201
2025-09-10 03:16:48.192 +03:00 [INF] End processing HTTP request after 228.2895ms - 201
2025-09-10 03:16:48.196 +03:00 [INF] Successfully retrieved PayMob token
2025-09-10 03:16:48.198 +03:00 [INF] Start processing HTTP request GET https://accept.paymob.com/api/ecommerce/orders/383670827
2025-09-10 03:16:48.201 +03:00 [INF] Sending HTTP request GET https://accept.paymob.com/api/ecommerce/orders/383670827
2025-09-10 03:16:48.406 +03:00 [INF] Received HTTP response headers after 203.5618ms - 200
2025-09-10 03:16:48.415 +03:00 [INF] End processing HTTP request after 217.1023ms - 200
2025-09-10 03:16:48.501 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2162.6229ms
2025-09-10 03:16:48.529 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-10 03:16:48.529 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-10 03:16:48.536 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 6.9107ms
2025-09-10 03:16:48.569 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.5239ms
2025-09-10 03:16:49.434 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Payments` SET `ModifiedAt` = @p0, `Status` = @p1
WHERE `Id` = @p2;
SELECT ROW_COUNT();
2025-09-10 03:16:50.563 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:16:50.578 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:16:51.068 +03:00 [INF] Execute UpdateOrderAfterPaid_id:25_to status:"Confirmed"
2025-09-10 03:16:51.292 +03:00 [INF] Execute GetAll for entity Order
2025-09-10 03:16:51.373 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CancelledAt`, `t`.`CreatedAt`, `t`.`CustomerAddressId`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`DeliveredAt`, `t`.`DiscountAmount`, `t`.`ModifiedAt`, `t`.`Notes`, `t`.`OrderNumber`, `t`.`RestockedAt`, `t`.`ShippedAt`, `t`.`ShippingCost`, `t`.`Status`, `t`.`Subtotal`, `t`.`TaxAmount`, `t`.`Total`, `o0`.`Id`, `o0`.`CreatedAt`, `o0`.`DeletedAt`, `o0`.`ModifiedAt`, `o0`.`OrderId`, `o0`.`OrderedAt`, `o0`.`ProductId`, `o0`.`ProductVariantId`, `o0`.`Quantity`, `o0`.`TotalPrice`, `o0`.`UnitPrice`
FROM (
    SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
    FROM `Orders` AS `o`
    WHERE `o`.`Id` = @__orderId_0
    LIMIT 1
) AS `t`
LEFT JOIN `OrderItem` AS `o0` ON `t`.`Id` = `o0`.`OrderId`
ORDER BY `t`.`Id`
2025-09-10 03:16:51.529 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Orders` SET `Status` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-10 03:16:51.754 +03:00 [INF] Removing cache by tags: [order]
2025-09-10 03:16:51.828 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1265.0237ms
2025-09-10 03:16:51.968 +03:00 [WRN] No cache entries found for tags: [order]
2025-09-10 03:16:52.618 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-10 03:16:53.042 +03:00 [WRN] No cache entries found for tags: [variantlist, variantdata]
2025-09-10 03:16:53.839 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:16:53.847 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:16:53.907 +03:00 [INF] Payment 6 updated to "Completed"
2025-09-10 03:16:54.314 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 03:16:54.627 +03:00 [INF] Removing cache by tags: [order]
2025-09-10 03:16:54.631 +03:00 [INF] Removing cache by tags: [collection, CollectionWithProduct]
2025-09-10 03:16:54.737 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 03:16:54.827 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-10 03:16:54.843 +03:00 [WRN] No cache entries found for tags: [order]
2025-09-10 03:16:55.057 +03:00 [WRN] No cache entries found for tags: [collection, CollectionWithProduct]
2025-09-10 03:16:55.199 +03:00 [INF] Removing cache by tags: [subcategory, subcategorywithdata]
2025-09-10 03:16:55.229 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1390.2449ms
2025-09-10 03:16:55.258 +03:00 [WRN] No cache entries found for tags: [variantlist, variantdata]
2025-09-10 03:16:55.583 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 03:16:55.622 +03:00 [WRN] No cache entries found for tags: [subcategory, subcategorywithdata]
2025-09-10 03:16:56.007 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 03:16:56.015 +03:00 [INF] Updated order 25 to "Confirmed" after payment
2025-09-10 03:16:56.709 +03:00 [INF] Removing cache by tags: [collection, CollectionWithProduct]
2025-09-10 03:16:57.135 +03:00 [WRN] No cache entries found for tags: [collection, CollectionWithProduct]
2025-09-10 03:16:57.248 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:16:57.260 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:16:57.316 +03:00 [INF] Removing cache by tags: [subcategory, subcategorywithdata]
2025-09-10 03:16:57.741 +03:00 [WRN] No cache entries found for tags: [subcategory, subcategorywithdata]
2025-09-10 03:16:58.500 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1251.9774ms
2025-09-10 03:17:00.515 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:17:00.593 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:17:01.959 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1444.1559ms
2025-09-10 03:17:03.971 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:17:03.978 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:17:05.368 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1396.8775ms
2025-09-10 03:17:07.387 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:17:07.399 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:17:08.777 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1389.5994ms
2025-09-10 03:17:10.799 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:17:10.999 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:17:12.371 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1571.2025ms
2025-09-10 03:17:13.029 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - null null
2025-09-10 03:17:13.038 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 03:17:13.188 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 03:17:13.197 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.GetOrders (E-Commerce)'
2025-09-10 03:17:13.201 +03:00 [INF] Route matched with {action = "GetOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.OrderDtos.OrderListDto]]]] GetOrders(System.String, System.Nullable`1[System.Boolean], Int32, Int32, System.Nullable`1[E_Commerce.Enums.OrderStatus]) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 03:17:13.205 +03:00 [INF] Executing GetOrders: role: User, userId: e682f183-1c61-400b-aa5a-171750f446b5, deleted: , page: 1, size: 10, status: 
2025-09-10 03:17:13.214 +03:00 [INF] Filtering orders - UserId: e682f183-1c61-400b-aa5a-171750f446b5, Deleted: null, Page: 1, PageSize: 10, Status: null
2025-09-10 03:17:13.220 +03:00 [INF] Getting cache for key: order:filter:user:e682f183-1c61-400b-aa5a-171750f446b5_deleted:all_page:1_size:10_status:all
2025-09-10 03:17:13.432 +03:00 [WRN] Cache miss for key: order:filter:user:e682f183-1c61-400b-aa5a-171750f446b5_deleted:all_page:1_size:10_status:all
2025-09-10 03:17:13.434 +03:00 [INF] Execute GetAll for entity Order
2025-09-10 03:17:13.587 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 255), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`OrderNumber`, `t0`.`Name`, `t`.`Status`, `t`.`Total`, `t`.`CreatedAt`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`CustomerId`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Total`
    FROM `Orders` AS `o`
    WHERE `o`.`CustomerId` = @__8__locals1_userId_0
    ORDER BY `o`.`CreatedAt` DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS `t`
INNER JOIN (
    SELECT `a`.`Id`, `a`.`Name`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Discriminator` = 'Customer'
) AS `t0` ON `t`.`CustomerId` = `t0`.`Id`
ORDER BY `t`.`CreatedAt` DESC
2025-09-10 03:17:14.403 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:17:14.415 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:17:14.469 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.OrderDtos.OrderListDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 03:17:14.477 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.GetOrders (E-Commerce) in 1272.4522ms
2025-09-10 03:17:14.489 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.GetOrders (E-Commerce)'
2025-09-10 03:17:14.506 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - 200 773 application/json; charset=utf-8 1477.4107ms
2025-09-10 03:17:15.790 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1387.2427ms
2025-09-10 03:17:15.792 +03:00 [INF] Setting cache for key: order:filter:user:e682f183-1c61-400b-aa5a-171750f446b5_deleted:all_page:1_size:10_status:all
2025-09-10 03:17:16.087 +03:00 [INF] Cache set successfully for key: order:filter:user:e682f183-1c61-400b-aa5a-171750f446b5_deleted:all_page:1_size:10_status:all with tags: [order]
2025-09-10 03:17:17.798 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:17:17.806 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:17:19.038 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1239.7136ms
2025-09-10 03:17:21.056 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:17:21.065 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:17:22.439 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1382.8502ms
2025-09-10 03:17:24.459 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:17:24.474 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:17:25.855 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1396.1141ms
2025-09-10 03:17:28.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:17:28.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:17:29.532 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1382.7252ms
2025-09-10 03:17:32.224 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:17:32.237 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:17:33.628 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1404.5599ms
2025-09-10 03:17:36.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:17:36.161 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:17:37.555 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1406.6604ms
2025-09-10 03:17:40.153 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:17:40.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:17:41.558 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.1903ms
2025-09-10 03:17:44.325 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:17:44.349 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:17:45.725 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1400.6176ms
2025-09-10 03:17:48.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:17:48.167 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:17:49.535 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1376.7627ms
2025-09-10 03:17:52.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:17:52.170 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:17:53.538 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1378.973ms
2025-09-10 03:17:56.216 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:17:56.232 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:17:57.605 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.8186ms
2025-09-10 03:18:00.146 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:18:00.153 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:18:01.527 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1381.065ms
2025-09-10 03:18:04.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:18:04.162 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:18:05.543 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1393.3237ms
2025-09-10 03:18:08.187 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:18:08.229 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:18:09.611 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1424.0619ms
2025-09-10 03:18:12.147 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:18:12.157 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:18:13.583 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1435.0828ms
2025-09-10 03:18:16.148 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:18:16.154 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:18:17.528 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1380.3926ms
2025-09-10 03:18:17.898 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order/number/ORD-20250910001513-9221 - null null
2025-09-10 03:18:17.905 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 03:18:18.059 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 03:18:18.065 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.GetOrderByNumber (E-Commerce)'
2025-09-10 03:18:18.073 +03:00 [INF] Route matched with {action = "GetOrderByNumber", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderDto]]] GetOrderByNumber(System.String) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 03:18:18.086 +03:00 [INF] Executing GetOrderByNumber for number: ORD-20250910001513-9221
2025-09-10 03:18:18.098 +03:00 [INF] Getting order by number: ORD-20250910001513-9221 for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, IsAdmin: false
2025-09-10 03:18:18.109 +03:00 [INF] Getting cache for key: order:number:ORD-20250910001513-9221_user:ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin:False
2025-09-10 03:18:18.322 +03:00 [WRN] Cache miss for key: order:number:ORD-20250910001513-9221_user:ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin:False
2025-09-10 03:18:18.335 +03:00 [INF] Checking if order ORD-20250910001513-9221 exists for user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 03:18:18.492 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__ordernumber_0='?' (Size = 50), @__userid_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE ((`o`.`OrderNumber` = @__ordernumber_0) AND (`o`.`CustomerId` = @__userid_1)) AND `o`.`DeletedAt` IS NULL)
2025-09-10 03:18:18.507 +03:00 [WRN] Order with number ORD-20250910001513-9221 not found or not authorized for user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 03:18:18.516 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 03:18:18.532 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.GetOrderByNumber (E-Commerce) in 454.3807ms
2025-09-10 03:18:18.536 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.GetOrderByNumber (E-Commerce)'
2025-09-10 03:18:18.540 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order/number/ORD-20250910001513-9221 - 404 226 application/json; charset=utf-8 642.136ms
2025-09-10 03:18:20.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:18:20.156 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:18:21.645 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1495.181ms
2025-09-10 03:18:24.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:18:24.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:18:25.560 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1404.1094ms
2025-09-10 03:18:28.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:18:28.161 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:18:29.530 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1375.3319ms
2025-09-10 03:18:32.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:18:32.157 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:18:33.528 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1378.3273ms
2025-09-10 03:18:36.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:18:36.218 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:18:37.607 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order/number/ORD-20250910001513-9221 - null null
2025-09-10 03:18:37.636 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1479.7101ms
2025-09-10 03:18:37.874 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 03:18:38.032 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 03:18:38.109 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.GetOrderByNumber (E-Commerce)'
2025-09-10 03:18:38.117 +03:00 [INF] Route matched with {action = "GetOrderByNumber", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderDto]]] GetOrderByNumber(System.String) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 03:18:38.132 +03:00 [INF] Executing GetOrderByNumber for number: ORD-20250910001513-9221
2025-09-10 03:18:38.148 +03:00 [INF] Getting order by number: ORD-20250910001513-9221 for user: e682f183-1c61-400b-aa5a-171750f446b5, IsAdmin: false
2025-09-10 03:18:38.153 +03:00 [INF] Getting cache for key: order:number:ORD-20250910001513-9221_user:e682f183-1c61-400b-aa5a-171750f446b5_admin:False
2025-09-10 03:18:38.366 +03:00 [WRN] Cache miss for key: order:number:ORD-20250910001513-9221_user:e682f183-1c61-400b-aa5a-171750f446b5_admin:False
2025-09-10 03:18:38.371 +03:00 [INF] Checking if order ORD-20250910001513-9221 exists for user e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:18:38.518 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__ordernumber_0='?' (Size = 50), @__userid_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE ((`o`.`OrderNumber` = @__ordernumber_0) AND (`o`.`CustomerId` = @__userid_1)) AND `o`.`DeletedAt` IS NULL)
2025-09-10 03:18:38.524 +03:00 [INF] Execute GetAll for entity Order
2025-09-10 03:18:38.739 +03:00 [INF] Executed DbCommand (88ms) [Parameters=[@__8__locals1_orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`ModifiedAt`, `t0`.`OrderNumber`, `t0`.`Status`, `t0`.`Subtotal`, `t0`.`TaxAmount`, `t0`.`ShippingCost`, `t0`.`DiscountAmount`, `t0`.`Total`, `t0`.`Notes`, `t0`.`DeletedAt`, `t0`.`ShippedAt`, `t0`.`DeliveredAt`, `t0`.`CancelledAt`, `t0`.`c`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Email`, `t0`.`PhoneNumber`, `t1`.`Id`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`Quantity`, `t1`.`UnitPrice`, `t1`.`TotalPrice`, `t1`.`OrderedAt`, `t1`.`Id0`, `t1`.`Name`, `t1`.`Price`, `t1`.`IsActive`, `t1`.`FinalPrice`, `t1`.`DiscountPrecentage`, `t1`.`MainImageUrl`, `t1`.`Id1`, `t1`.`Color`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`Size`, `t1`.`DeletedAt`, `t1`.`Length`, `t1`.`Waist`, `t1`.`Id2`, `t1`.`Id3`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`ModifiedAt`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`ShippingCost`, `o`.`DiscountAmount`, `o`.`Total`, `o`.`Notes`, `o`.`DeletedAt`, `o`.`ShippedAt`, `o`.`DeliveredAt`, `o`.`CancelledAt`, FALSE AS `c`, `t`.`Id` AS `Id0`, `t`.`Name`, `t`.`Email`, `t`.`PhoneNumber`
    FROM `Orders` AS `o`
    INNER JOIN (
        SELECT `a`.`Id`, `a`.`Email`, `a`.`PhoneNumber`, `a`.`Name`
        FROM `AspNetUsers` AS `a`
        WHERE `a`.`Discriminator` = 'Customer'
    ) AS `t` ON `o`.`CustomerId` = `t`.`Id`
    WHERE `o`.`OrderNumber` = @__8__locals1_orderNumber_0
    LIMIT 1
) AS `t0`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`CreatedAt`, `o0`.`ModifiedAt`, `o0`.`Quantity`, `o0`.`UnitPrice`, `o0`.`TotalPrice`, `o0`.`OrderedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND `i`.`DeletedAt` IS NULL
        LIMIT 1), '') AS `MainImageUrl`, `o0`.`ProductVariantId` AS `Id1`, `p0`.`Color`, COALESCE(`p0`.`CreatedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `CreatedAt0`, COALESCE(`p0`.`ModifiedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `ModifiedAt0`, `p0`.`Size`, `p0`.`DeletedAt`, COALESCE(`p0`.`Length`, 0) AS `Length`, COALESCE(`p0`.`Waist`, 0) AS `Waist`, `d`.`Id` AS `Id2`, `p0`.`Id` AS `Id3`, `o0`.`OrderId`
    FROM `OrderItem` AS `o0`
    INNER JOIN `Products` AS `p` ON `o0`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    INNER JOIN `ProductVariants` AS `p0` ON `o0`.`ProductVariantId` = `p0`.`Id`
) AS `t1` ON `t0`.`Id` = `t1`.`OrderId`
ORDER BY `t0`.`Id`, `t0`.`Id0`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id2`
2025-09-10 03:18:39.661 +03:00 [INF] Order ORD-20250910001513-9221 retrieved successfully for user e682f183-1c61-400b-aa5a-171750f446b5
2025-09-10 03:18:39.670 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 03:18:39.673 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.GetOrderByNumber (E-Commerce) in 1541.8039ms
2025-09-10 03:18:39.706 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.GetOrderByNumber (E-Commerce)'
2025-09-10 03:18:39.718 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order/number/ORD-20250910001513-9221 - 200 1397 application/json; charset=utf-8 2110.2465ms
2025-09-10 03:18:40.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:18:40.161 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:18:40.997 +03:00 [INF] Setting cache for key: order:number:ORD-20250910001513-9221_user:e682f183-1c61-400b-aa5a-171750f446b5_admin:False
2025-09-10 03:18:41.259 +03:00 [INF] Cache set successfully for key: order:number:ORD-20250910001513-9221_user:e682f183-1c61-400b-aa5a-171750f446b5_admin:False with tags: [order]
2025-09-10 03:18:41.531 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1376.7788ms
2025-09-10 03:18:44.171 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:18:44.183 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:18:45.416 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1244.8902ms
2025-09-10 03:18:48.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:18:48.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:18:49.560 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1401.0018ms
2025-09-10 03:18:52.148 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:18:52.157 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:18:53.837 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1688.477ms
2025-09-10 03:18:56.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:18:56.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:18:57.541 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1385.6459ms
2025-09-10 03:19:00.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:19:00.171 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:19:01.544 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.5653ms
2025-09-10 03:19:04.153 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:19:04.159 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:19:05.565 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.9844ms
2025-09-10 03:19:08.147 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:19:08.155 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:19:09.525 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1378.0297ms
2025-09-10 03:19:12.855 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:19:12.870 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:19:14.251 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1396.7029ms
2025-09-10 03:19:17.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:19:17.163 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:19:18.559 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1404.5346ms
2025-09-10 03:19:21.402 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:19:21.440 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:19:22.955 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1553.0678ms
2025-09-10 03:19:25.168 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:19:25.180 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:19:26.558 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1390.1449ms
2025-09-10 03:19:29.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:19:29.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:19:30.539 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1383.1438ms
2025-09-10 03:19:33.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:19:33.169 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:19:34.565 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1406.2155ms
2025-09-10 03:19:37.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:19:37.161 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:19:38.559 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1408.6859ms
2025-09-10 03:19:41.152 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:19:41.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:19:42.556 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1404.3895ms
2025-09-10 03:19:45.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:19:45.169 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:19:46.566 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1407.5563ms
2025-09-10 03:19:49.161 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:19:49.170 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:19:50.593 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1431.6305ms
2025-09-10 03:19:53.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:19:53.176 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:19:54.580 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1422.3508ms
2025-09-10 03:19:57.205 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:19:57.217 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:19:58.597 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1391.166ms
2025-09-10 03:20:01.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:20:01.167 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:20:02.545 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1390.7892ms
2025-09-10 03:20:05.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:20:05.167 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:20:06.566 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1408.7239ms
2025-09-10 03:20:09.146 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:20:09.153 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:20:10.526 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1379.3405ms
2025-09-10 03:20:13.146 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:20:13.151 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:20:14.546 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1400.054ms
2025-09-10 03:20:17.264 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:20:17.284 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:20:18.659 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1394.4206ms
2025-09-10 03:20:21.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:20:21.162 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:20:22.839 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1688.3669ms
2025-09-10 03:20:25.145 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:20:25.155 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:20:26.529 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1383.2608ms
2025-09-10 03:20:29.152 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:20:29.162 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:20:30.540 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.1187ms
2025-09-10 03:20:33.262 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:20:33.275 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:20:34.647 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1384.5785ms
2025-09-10 03:20:37.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:20:37.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:20:38.562 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1406.1701ms
2025-09-10 03:20:40.473 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5069/api/Order/25/status?status=5 - application/json 23
2025-09-10 03:20:40.481 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 03:20:40.632 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 03:20:40.653 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.UpdateOrderStatus (E-Commerce)'
2025-09-10 03:20:40.661 +03:00 [INF] Route matched with {action = "UpdateOrderStatus", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] UpdateOrderStatus(Int32, E_Commerce.DtoModels.OrderDtos.OrderStatusNoteDto, E_Commerce.Enums.OrderStatus) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 03:20:40.910 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 25
2025-09-10 03:20:40.991 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-09-10 03:20:41.071 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 03:20:41.075 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.UpdateOrderStatus (E-Commerce) in 408.9049ms
2025-09-10 03:20:41.077 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.UpdateOrderStatus (E-Commerce)'
2025-09-10 03:20:41.087 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5069/api/Order/25/status?status=5 - 400 255 application/json; charset=utf-8 614.2336ms
2025-09-10 03:20:41.146 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:20:41.156 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:20:42.549 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1402.845ms
2025-09-10 03:20:45.197 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:20:45.222 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:20:46.594 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1396.5274ms
2025-09-10 03:20:49.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:20:49.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:20:50.550 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1393.7153ms
2025-09-10 03:20:53.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:20:53.170 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:20:54.565 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1406.3274ms
2025-09-10 03:20:57.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:20:57.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:20:58.562 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1404.8375ms
2025-09-10 03:21:01.322 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:21:01.370 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:21:02.262 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5069/api/Order/25/status?status=10 - application/json 23
2025-09-10 03:21:02.271 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 03:21:02.420 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 03:21:02.425 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.UpdateOrderStatus (E-Commerce)'
2025-09-10 03:21:02.435 +03:00 [INF] Route matched with {action = "UpdateOrderStatus", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] UpdateOrderStatus(Int32, E_Commerce.DtoModels.OrderDtos.OrderStatusNoteDto, E_Commerce.Enums.OrderStatus) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 03:21:02.440 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 03:21:02.444 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.UpdateOrderStatus (E-Commerce) in 5.7856ms
2025-09-10 03:21:02.459 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.UpdateOrderStatus (E-Commerce)'
2025-09-10 03:21:02.474 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5069/api/Order/25/status?status=10 - 400 220 application/json; charset=utf-8 211.9736ms
2025-09-10 03:21:02.764 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1442.0683ms
2025-09-10 03:21:05.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:21:05.169 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:21:06.650 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1492.3049ms
2025-09-10 03:21:09.207 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:21:09.377 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:21:10.889 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1682.0925ms
2025-09-10 03:21:13.241 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:21:13.303 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:21:14.944 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1703.293ms
2025-09-10 03:21:17.162 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:21:17.172 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:21:18.588 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1425.5515ms
2025-09-10 03:21:21.165 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:21:21.189 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:21:22.621 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1455.7642ms
2025-09-10 03:21:25.170 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:21:25.187 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:21:26.690 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1519.7296ms
2025-09-10 03:21:29.732 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:21:29.741 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:21:31.423 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1691.6878ms
2025-09-10 03:21:35.323 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:21:35.332 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:21:36.813 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1490.9289ms
2025-09-10 03:21:39.902 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:21:39.920 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:21:41.422 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1519.984ms
2025-09-10 03:21:44.235 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:21:44.323 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:21:45.760 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1525.0135ms
2025-09-10 03:21:49.594 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:21:49.612 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:21:51.032 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1438.3203ms
2025-09-10 03:21:54.163 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:21:54.247 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:21:55.775 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1612.3702ms
2025-09-10 03:21:59.167 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:21:59.173 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:22:00.788 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1621.15ms
2025-09-10 03:22:03.162 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:22:03.208 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:22:04.815 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1653.5332ms
2025-09-10 03:22:07.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:22:07.174 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:22:08.631 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1472.4412ms
2025-09-10 03:22:09.636 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5069/api/Order/3799/status?status=2 - application/json 23
2025-09-10 03:22:09.674 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 03:22:09.849 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 03:22:10.228 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.UpdateOrderStatus (E-Commerce)'
2025-09-10 03:22:10.237 +03:00 [INF] Route matched with {action = "UpdateOrderStatus", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] UpdateOrderStatus(Int32, E_Commerce.DtoModels.OrderDtos.OrderStatusNoteDto, E_Commerce.Enums.OrderStatus) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 03:22:10.549 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 3799
2025-09-10 03:22:10.656 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-09-10 03:22:10.747 +03:00 [WRN] Order with ID 3799 not found or deleted
2025-09-10 03:22:10.871 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 03:22:11.051 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.UpdateOrderStatus (E-Commerce) in 743.1768ms
2025-09-10 03:22:11.158 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.UpdateOrderStatus (E-Commerce)'
2025-09-10 03:22:11.170 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5069/api/Order/3799/status?status=2 - 404 193 application/json; charset=utf-8 1533.3643ms
2025-09-10 03:22:11.238 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:22:11.257 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:22:12.742 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1504.2074ms
2025-09-10 03:22:15.172 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:22:15.221 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:22:16.658 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1485.4162ms
2025-09-10 03:22:19.496 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:22:19.503 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:22:20.069 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5069/api/Order/25/status?status=2 - application/json 23
2025-09-10 03:22:20.104 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 03:22:20.329 +03:00 [INF] Executed DbCommand (108ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 03:22:20.538 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.UpdateOrderStatus (E-Commerce)'
2025-09-10 03:22:20.561 +03:00 [INF] Route matched with {action = "UpdateOrderStatus", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] UpdateOrderStatus(Int32, E_Commerce.DtoModels.OrderDtos.OrderStatusNoteDto, E_Commerce.Enums.OrderStatus) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 03:22:20.806 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 25
2025-09-10 03:22:20.919 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1423.0479ms
2025-09-10 03:22:21.130 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-09-10 03:22:21.363 +03:00 [INF] Execute AddAdminOpreationAsync
2025-09-10 03:22:21.381 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-09-10 03:22:21.412 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-09-10 03:22:21.614 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Orders` SET `Status` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-10 03:22:24.172 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:22:24.228 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:22:24.557 +03:00 [INF] Removing cache by tags: [order]
2025-09-10 03:22:25.609 +03:00 [INF] Removed 2 cache entries for tags: [order]
2025-09-10 03:22:25.726 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-10 03:22:25.869 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1698.17ms
2025-09-10 03:22:26.363 +03:00 [WRN] No cache entries found for tags: [variantlist, variantdata]
2025-09-10 03:22:26.720 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 03:22:26.762 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.UpdateOrderStatus (E-Commerce) in 6189.6041ms
2025-09-10 03:22:26.831 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.UpdateOrderStatus (E-Commerce)'
2025-09-10 03:22:26.844 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5069/api/Order/25/status?status=2 - 200 126 application/json; charset=utf-8 6774.906ms
2025-09-10 03:22:27.286 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-10 03:22:27.286 +03:00 [INF] Removing cache by tags: [collection, CollectionWithProduct]
2025-09-10 03:22:28.014 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-09-10 03:22:28.014 +03:00 [WRN] No cache entries found for tags: [collection, CollectionWithProduct]
2025-09-10 03:22:28.421 +03:00 [INF] Removing cache by tags: [subcategory, subcategorywithdata]
2025-09-10 03:22:28.527 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:22:28.546 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:22:29.207 +03:00 [WRN] No cache entries found for tags: [subcategory, subcategorywithdata]
2025-09-10 03:22:29.885 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1358.1292ms
2025-09-10 03:22:32.221 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:22:32.242 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:22:33.771 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1549.3656ms
2025-09-10 03:22:36.195 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:22:36.210 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:22:37.645 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1449.7255ms
2025-09-10 03:22:40.173 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:22:41.238 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:22:42.772 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2598.9887ms
2025-09-10 03:22:45.325 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:22:45.347 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:22:46.948 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1622.7117ms
2025-09-10 03:22:50.300 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:22:50.346 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:22:52.006 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1705.5703ms
2025-09-10 03:22:54.183 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:22:54.210 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:22:55.965 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1781.4871ms
2025-09-10 03:22:58.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:22:58.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:22:59.562 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1405.1552ms
2025-09-10 03:23:02.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:23:02.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:23:03.544 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1384.8228ms
2025-09-10 03:23:06.147 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:23:06.154 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:23:07.532 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1384.6334ms
2025-09-10 03:23:10.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:23:10.163 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:23:11.575 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1418.6276ms
2025-09-10 03:23:14.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:23:14.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:23:15.548 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.4818ms
2025-09-10 03:23:18.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:23:18.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:23:19.571 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1412.3091ms
2025-09-10 03:23:22.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:23:22.161 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:23:23.536 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1380.9883ms
2025-09-10 03:23:26.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:23:26.155 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:23:27.557 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1408.0699ms
2025-09-10 03:23:30.153 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:23:30.158 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:23:31.615 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1461.9607ms
2025-09-10 03:23:34.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:23:34.160 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:23:35.541 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1387.7819ms
2025-09-10 03:23:38.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:23:38.162 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:23:39.660 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1510.6925ms
2025-09-10 03:23:42.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:23:42.156 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:23:43.531 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1381.5775ms
2025-09-10 03:23:46.147 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:23:46.158 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:23:47.561 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1413.9465ms
2025-09-10 03:23:50.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:23:50.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:23:51.592 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1440.8186ms
2025-09-10 03:23:54.163 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:23:54.194 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:23:55.645 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1482.3601ms
2025-09-10 03:23:58.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:23:58.159 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:23:59.570 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1420.0167ms
2025-09-10 03:24:02.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:24:02.168 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:24:03.569 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.8407ms
2025-09-10 03:24:06.167 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:24:06.218 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:24:07.597 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1430.4046ms
2025-09-10 03:24:10.146 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:24:10.160 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:24:11.581 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1435.3718ms
2025-09-10 03:24:14.152 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:24:14.163 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:24:15.560 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1408.2153ms
2025-09-10 03:24:18.148 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:24:18.161 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:24:19.563 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1414.8203ms
2025-09-10 03:24:22.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:24:22.161 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:24:23.577 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1425.6052ms
2025-09-10 03:24:26.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:24:26.163 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:24:27.535 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1380.3274ms
2025-09-10 03:24:30.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:24:30.163 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:24:31.528 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1373.3899ms
2025-09-10 03:24:34.216 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:24:34.294 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:24:35.694 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1477.3209ms
2025-09-10 03:24:38.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:24:38.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:24:39.561 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1404.422ms
2025-09-10 03:24:42.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:24:42.170 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:24:43.548 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.8545ms
2025-09-10 03:24:46.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:24:46.161 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:24:47.535 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1385.6257ms
2025-09-10 03:24:50.147 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:24:50.157 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:24:51.528 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1381.3844ms
2025-09-10 03:24:54.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:24:54.171 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:24:55.562 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1403.9639ms
2025-09-10 03:24:58.165 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:24:58.173 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:24:59.578 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1412.1272ms
2025-09-10 03:25:02.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:25:02.174 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:25:03.574 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1415.7133ms
2025-09-10 03:25:06.163 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:25:06.179 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:25:07.607 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1444.3182ms
2025-09-10 03:25:10.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:25:10.159 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:25:11.564 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1415.0065ms
2025-09-10 03:25:14.147 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:25:14.153 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:25:15.560 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1413.1555ms
2025-09-10 03:25:18.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:25:18.169 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:25:19.585 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1430.2639ms
2025-09-10 03:25:22.163 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:25:22.189 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:25:23.605 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1442.24ms
2025-09-10 03:25:26.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:25:26.167 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:25:27.568 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.0192ms
2025-09-10 03:25:30.163 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:25:30.198 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:25:31.594 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1431.5215ms
2025-09-10 03:25:34.148 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:25:34.160 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:25:35.539 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1390.4494ms
2025-09-10 03:25:38.152 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:25:38.168 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:25:39.581 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1428.7304ms
2025-09-10 03:25:42.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:25:42.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:25:43.598 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1442.2947ms
2025-09-10 03:25:46.153 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:25:46.171 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:25:47.573 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1420.2632ms
2025-09-10 03:25:50.148 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:25:50.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:25:51.553 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1404.8454ms
2025-09-10 03:25:54.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:25:54.174 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:25:55.569 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.1931ms
2025-09-10 03:25:58.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:25:58.162 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:25:59.553 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1401.2779ms
2025-09-10 03:26:02.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:26:02.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:26:03.551 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1396.3402ms
2025-09-10 03:26:06.163 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:26:06.179 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:26:07.572 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1408.6184ms
2025-09-10 03:26:10.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:26:10.168 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:26:11.583 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1425.4264ms
2025-09-10 03:26:14.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:26:14.172 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:26:15.570 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1410.0761ms
2025-09-10 03:26:18.163 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:26:18.183 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:26:19.617 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1454.6473ms
2025-09-10 03:26:22.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:26:22.167 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:26:23.580 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1421.6043ms
2025-09-10 03:26:26.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:26:26.163 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:26:27.565 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.4857ms
2025-09-10 03:26:30.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:26:30.175 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:26:31.684 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1528.2002ms
2025-09-10 03:26:34.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:26:34.168 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:26:35.553 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1392.8722ms
2025-09-10 03:26:38.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:26:38.187 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:26:39.664 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1507.171ms
2025-09-10 03:26:42.152 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:26:42.175 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:26:43.615 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1462.799ms
2025-09-10 03:26:46.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:26:46.178 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:26:47.583 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1432.0457ms
2025-09-10 03:26:50.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:26:50.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:26:51.548 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1393.5102ms
2025-09-10 03:26:54.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:26:54.169 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:26:55.555 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1398.0637ms
2025-09-10 03:26:58.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:26:58.171 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:26:59.577 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1417.5575ms
2025-09-10 03:27:02.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:27:02.176 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:27:03.581 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1423.9765ms
2025-09-10 03:27:06.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:27:06.192 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:27:07.599 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1438.643ms
2025-09-10 03:27:10.161 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:27:10.188 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:27:11.570 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1408.4815ms
2025-09-10 03:27:14.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:27:14.183 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:27:15.577 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1416.7683ms
2025-09-10 03:27:18.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:27:18.163 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:27:19.547 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1390.698ms
2025-09-10 03:27:22.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:27:22.172 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:27:23.578 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1419.8667ms
2025-09-10 03:27:26.152 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:27:26.163 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:27:27.631 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1479.2033ms
2025-09-10 03:27:30.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:27:30.179 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:27:31.593 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1433.6835ms
2025-09-10 03:27:34.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:27:34.179 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:27:35.596 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1435.6908ms
2025-09-10 03:27:38.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:27:38.190 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:27:39.661 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1500.6836ms
2025-09-10 03:27:42.170 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:27:42.189 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:27:43.632 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1461.5261ms
2025-09-10 03:27:46.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:27:46.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:27:47.570 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1414.2704ms
2025-09-10 03:27:50.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:27:50.188 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:27:51.575 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1418.2243ms
2025-09-10 03:27:54.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:27:54.184 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:27:55.568 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.3311ms
2025-09-10 03:27:58.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:27:58.168 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:27:59.864 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1708.1261ms
2025-09-10 03:28:02.165 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:28:02.176 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:28:03.566 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1400.7087ms
2025-09-10 03:28:06.147 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:28:06.157 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:28:07.789 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1642.416ms
2025-09-10 03:28:10.147 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:28:10.160 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:28:11.621 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1474.2744ms
2025-09-10 03:28:14.165 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:28:14.184 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:28:15.583 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1418.8548ms
2025-09-10 03:28:18.168 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:28:18.189 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:28:20.325 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2156.9155ms
2025-09-10 03:28:23.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:28:23.168 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:28:24.557 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1406.0875ms
2025-09-10 03:28:27.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:28:27.175 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:28:28.562 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1413.1006ms
2025-09-10 03:28:31.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:28:31.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:28:32.571 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.729ms
2025-09-10 03:28:35.156 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:28:35.165 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:28:36.567 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1411.2701ms
2025-09-10 03:28:39.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:28:39.188 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:28:40.614 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1455.7227ms
2025-09-10 03:28:43.146 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:28:43.162 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:28:44.574 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1428.1508ms
2025-09-10 03:28:47.163 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:28:47.190 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:28:48.607 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1444.0819ms
2025-09-10 03:28:51.163 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:28:51.185 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:28:52.578 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1415.3691ms
2025-09-10 03:28:55.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:28:55.170 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:28:56.557 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1396.9253ms
2025-09-10 03:28:59.145 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:28:59.156 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:29:00.612 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1466.6267ms
2025-09-10 03:29:03.145 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:29:03.154 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:29:04.547 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1401.1157ms
2025-09-10 03:29:04.641 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - null null
2025-09-10 03:29:04.655 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 03:29:04.810 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 03:29:04.838 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.GetOrders (E-Commerce)'
2025-09-10 03:29:04.851 +03:00 [INF] Route matched with {action = "GetOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.OrderDtos.OrderListDto]]]] GetOrders(System.String, System.Nullable`1[System.Boolean], Int32, Int32, System.Nullable`1[E_Commerce.Enums.OrderStatus]) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 03:29:04.871 +03:00 [INF] Executing GetOrders: role: Admin, userId: , deleted: , page: 1, size: 10, status: 
2025-09-10 03:29:04.876 +03:00 [INF] Filtering orders - UserId: null, Deleted: null, Page: 1, PageSize: 10, Status: null
2025-09-10 03:29:04.898 +03:00 [INF] Getting cache for key: order:filter:user:all_deleted:all_page:1_size:10_status:all
2025-09-10 03:29:05.112 +03:00 [WRN] Cache miss for key: order:filter:user:all_deleted:all_page:1_size:10_status:all
2025-09-10 03:29:05.113 +03:00 [INF] Execute GetAll for entity Order
2025-09-10 03:29:05.351 +03:00 [INF] Executed DbCommand (108ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`OrderNumber`, `t0`.`Name`, `t`.`Status`, `t`.`Total`, `t`.`CreatedAt`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`CustomerId`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Total`
    FROM `Orders` AS `o`
    ORDER BY `o`.`CreatedAt` DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
INNER JOIN (
    SELECT `a`.`Id`, `a`.`Name`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Discriminator` = 'Customer'
) AS `t0` ON `t`.`CustomerId` = `t0`.`Id`
ORDER BY `t`.`CreatedAt` DESC
2025-09-10 03:29:06.359 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.OrderDtos.OrderListDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-10 03:29:06.372 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.GetOrders (E-Commerce) in 1516.9729ms
2025-09-10 03:29:06.380 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.GetOrders (E-Commerce)'
2025-09-10 03:29:06.384 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - 200 1735 application/json; charset=utf-8 1743.118ms
2025-09-10 03:29:07.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:29:07.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:29:08.574 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1424.2952ms
2025-09-10 03:29:10.381 +03:00 [INF] Setting cache for key: order:filter:user:all_deleted:all_page:1_size:10_status:all
2025-09-10 03:29:10.618 +03:00 [INF] Cache set successfully for key: order:filter:user:all_deleted:all_page:1_size:10_status:all with tags: [order]
2025-09-10 03:29:11.166 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:29:11.192 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:29:12.429 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1263.2007ms
2025-09-10 03:29:15.152 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:29:15.169 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:29:16.555 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1403.1082ms
2025-09-10 03:29:19.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:29:19.170 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:29:20.544 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1384.373ms
2025-09-10 03:29:23.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:29:23.162 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:29:24.556 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1406.2715ms
2025-09-10 03:29:27.150 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:29:27.161 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:29:28.550 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1399.2552ms
2025-09-10 03:29:31.160 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:29:31.174 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:29:32.557 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1397.0861ms
2025-09-10 03:29:35.153 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:29:35.163 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:29:36.568 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1414.8424ms
2025-09-10 03:29:37.772 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order/number/ORD-20250910001513-9221 - null null
2025-09-10 03:29:37.790 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 03:29:37.949 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 03:29:37.973 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.GetOrderByNumber (E-Commerce)'
2025-09-10 03:29:37.976 +03:00 [INF] Route matched with {action = "GetOrderByNumber", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderDto]]] GetOrderByNumber(System.String) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 03:29:37.985 +03:00 [INF] Executing GetOrderByNumber for number: ORD-20250910001513-9221
2025-09-10 03:29:37.989 +03:00 [INF] Getting order by number: ORD-20250910001513-9221 for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, IsAdmin: false
2025-09-10 03:29:38.001 +03:00 [INF] Getting cache for key: order:number:ORD-20250910001513-9221_user:ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin:False
2025-09-10 03:29:38.215 +03:00 [WRN] Cache miss for key: order:number:ORD-20250910001513-9221_user:ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin:False
2025-09-10 03:29:38.226 +03:00 [INF] Checking if order ORD-20250910001513-9221 exists for user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 03:29:38.380 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__ordernumber_0='?' (Size = 50), @__userid_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE ((`o`.`OrderNumber` = @__ordernumber_0) AND (`o`.`CustomerId` = @__userid_1)) AND `o`.`DeletedAt` IS NULL)
2025-09-10 03:29:38.392 +03:00 [WRN] Order with number ORD-20250910001513-9221 not found or not authorized for user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 03:29:38.396 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 03:29:38.401 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.GetOrderByNumber (E-Commerce) in 420.5731ms
2025-09-10 03:29:38.406 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.GetOrderByNumber (E-Commerce)'
2025-09-10 03:29:38.409 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order/number/ORD-20250910001513-9221 - 404 226 application/json; charset=utf-8 637.8393ms
2025-09-10 03:29:39.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:29:39.169 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:29:40.568 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.3969ms
2025-09-10 03:29:43.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:29:43.159 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:29:44.538 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1388.3242ms
2025-09-10 03:29:47.148 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:29:47.166 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:29:48.555 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1406.4838ms
2025-09-10 03:29:51.145 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:29:51.153 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:29:52.583 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1438.2111ms
2025-09-10 03:29:55.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:29:55.160 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:29:56.565 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.888ms
2025-09-10 03:29:59.222 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:29:59.237 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:30:00.749 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1527.1574ms
2025-09-10 03:30:03.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:30:03.163 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:30:04.567 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1413.0529ms
2025-09-10 03:30:07.221 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:30:07.249 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:30:08.630 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1409.2404ms
2025-09-10 03:30:11.153 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:30:11.184 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:30:12.596 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1442.4527ms
2025-09-10 03:30:15.226 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:30:15.235 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:30:16.943 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1716.9812ms
2025-09-10 03:30:20.208 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:30:20.214 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:30:21.833 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1625.2419ms
2025-09-10 03:30:24.152 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-09-10 03:30:24.164 +03:00 [INF] CORS policy execution successful.
2025-09-10 03:30:25.565 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1412.5665ms
2025-09-10 03:34:34.471 +03:00 [INF] DB tables already exist. Exit install
2025-09-10 03:34:36.040 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-10 03:34:37.150 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-10 03:34:37.843 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-10 03:34:38.019 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-09-10 03:34:38.058 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-10 03:34:38.086 +03:00 [INF] Starting data seeding...
2025-09-10 03:34:38.128 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-10 03:34:38.849 +03:00 [INF] Executed DbCommand (134ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-10 03:34:40.379 +03:00 [INF] Role 'Admin' already exists.
2025-09-10 03:34:40.848 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-10 03:34:40.932 +03:00 [INF] Role 'User' already exists.
2025-09-10 03:34:41.123 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-10 03:34:41.258 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-09-10 03:34:41.264 +03:00 [INF] Data seeding completed successfully.
2025-09-10 03:34:42.940 +03:00 [INF] Now listening on: http://localhost:5069
2025-09-10 03:34:43.057 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-09-10 03:34:43.064 +03:00 [INF] Using the following options for SQL Server job storage:
2025-09-10 03:34:43.067 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-09-10 03:34:43.072 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-09-10 03:34:43.089 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-10 03:34:43.093 +03:00 [INF] Hosting environment: Development
2025-09-10 03:34:43.106 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-09-10 03:34:43.291 +03:00 [INF] Server mrrobot:2408:794163c6 successfully announced in 179.9249 ms
2025-09-10 03:34:43.298 +03:00 [INF] Server mrrobot:2408:794163c6 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-09-10 03:34:43.359 +03:00 [INF] Server mrrobot:2408:794163c6 all the dispatchers started
2025-09-10 03:34:47.836 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order/number/ORD-20250910001513-9221 - null null
2025-09-10 03:34:47.873 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-10 03:34:48.074 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 03:34:48.280 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 03:34:48.306 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.GetOrderByNumber (E-Commerce)'
2025-09-10 03:34:48.345 +03:00 [INF] Route matched with {action = "GetOrderByNumber", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderDto]]] GetOrderByNumber(System.String) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 03:34:48.825 +03:00 [INF] Executing GetOrderByNumber for number: ORD-20250910001513-9221
2025-09-10 03:34:48.831 +03:00 [INF] Getting order by number: ORD-20250910001513-9221 for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, IsAdmin: true
2025-09-10 03:34:48.837 +03:00 [INF] Getting cache for key: order:number:ORD-20250910001513-9221_user:ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin:True
2025-09-10 03:34:49.057 +03:00 [WRN] Cache miss for key: order:number:ORD-20250910001513-9221_user:ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin:True
2025-09-10 03:34:49.062 +03:00 [INF] Checking if order ORD-20250910001513-9221 exists for user
2025-09-10 03:34:49.221 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__ordernumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE (`o`.`OrderNumber` = @__ordernumber_0) AND `o`.`DeletedAt` IS NULL)
2025-09-10 03:34:49.233 +03:00 [INF] Execute GetAll for entity Order
2025-09-10 03:34:49.634 +03:00 [INF] Executed DbCommand (113ms) [Parameters=[@__8__locals1_orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`ModifiedAt`, `t0`.`OrderNumber`, `t0`.`Status`, `t0`.`Subtotal`, `t0`.`TaxAmount`, `t0`.`ShippingCost`, `t0`.`DiscountAmount`, `t0`.`Total`, `t0`.`Notes`, `t0`.`DeletedAt`, `t0`.`ShippedAt`, `t0`.`DeliveredAt`, `t0`.`CancelledAt`, `t0`.`c`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Email`, `t0`.`PhoneNumber`, `t1`.`Id`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`Quantity`, `t1`.`UnitPrice`, `t1`.`TotalPrice`, `t1`.`OrderedAt`, `t1`.`Id0`, `t1`.`Name`, `t1`.`Price`, `t1`.`IsActive`, `t1`.`FinalPrice`, `t1`.`DiscountPrecentage`, `t1`.`MainImageUrl`, `t1`.`Id1`, `t1`.`Color`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`Size`, `t1`.`DeletedAt`, `t1`.`Length`, `t1`.`Waist`, `t1`.`Id2`, `t1`.`Id3`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`ModifiedAt`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`ShippingCost`, `o`.`DiscountAmount`, `o`.`Total`, `o`.`Notes`, `o`.`DeletedAt`, `o`.`ShippedAt`, `o`.`DeliveredAt`, `o`.`CancelledAt`, FALSE AS `c`, `t`.`Id` AS `Id0`, `t`.`Name`, `t`.`Email`, `t`.`PhoneNumber`
    FROM `Orders` AS `o`
    INNER JOIN (
        SELECT `a`.`Id`, `a`.`Email`, `a`.`PhoneNumber`, `a`.`Name`
        FROM `AspNetUsers` AS `a`
        WHERE `a`.`Discriminator` = 'Customer'
    ) AS `t` ON `o`.`CustomerId` = `t`.`Id`
    WHERE `o`.`OrderNumber` = @__8__locals1_orderNumber_0
    LIMIT 1
) AS `t0`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`CreatedAt`, `o0`.`ModifiedAt`, `o0`.`Quantity`, `o0`.`UnitPrice`, `o0`.`TotalPrice`, `o0`.`OrderedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND `i`.`DeletedAt` IS NULL
        LIMIT 1), '') AS `MainImageUrl`, `o0`.`ProductVariantId` AS `Id1`, `p0`.`Color`, COALESCE(`p0`.`CreatedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `CreatedAt0`, COALESCE(`p0`.`ModifiedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `ModifiedAt0`, `p0`.`Size`, `p0`.`DeletedAt`, COALESCE(`p0`.`Length`, 0) AS `Length`, COALESCE(`p0`.`Waist`, 0) AS `Waist`, `d`.`Id` AS `Id2`, `p0`.`Id` AS `Id3`, `o0`.`OrderId`
    FROM `OrderItem` AS `o0`
    INNER JOIN `Products` AS `p` ON `o0`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    INNER JOIN `ProductVariants` AS `p0` ON `o0`.`ProductVariantId` = `p0`.`Id`
) AS `t1` ON `t0`.`Id` = `t1`.`OrderId`
ORDER BY `t0`.`Id`, `t0`.`Id0`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id2`
2025-09-10 03:34:50.665 +03:00 [INF] Order ORD-20250910001513-9221 retrieved successfully for user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 03:34:50.682 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 03:34:50.729 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.GetOrderByNumber (E-Commerce) in 2345.2841ms
2025-09-10 03:34:50.734 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.GetOrderByNumber (E-Commerce)'
2025-09-10 03:34:50.752 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order/number/ORD-20250910001513-9221 - 200 1400 application/json; charset=utf-8 2917.6344ms
2025-09-10 03:34:55.607 +03:00 [INF] Setting cache for key: order:number:ORD-20250910001513-9221_user:ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin:True
2025-09-10 03:34:55.897 +03:00 [INF] Cache set successfully for key: order:number:ORD-20250910001513-9221_user:ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin:True with tags: [order]
2025-09-10 03:35:13.782 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order/25 - null null
2025-09-10 03:35:13.800 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-10 03:35:13.961 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-10 03:35:13.968 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.GetOrder (E-Commerce)'
2025-09-10 03:35:13.979 +03:00 [INF] Route matched with {action = "GetOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderDto]]] GetOrder(Int32) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-09-10 03:35:14.000 +03:00 [INF] Executing GetOrder for ID: 25
2025-09-10 03:35:14.008 +03:00 [INF] Getting order by ID: 25 for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, IsAdmin: true
2025-09-10 03:35:14.015 +03:00 [INF] Getting cache for key: order:id:25_user:ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin:True
2025-09-10 03:35:14.232 +03:00 [WRN] Cache miss for key: order:id:25_user:ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin:True
2025-09-10 03:35:14.393 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE (`o`.`Id` = @__id_0) AND `o`.`DeletedAt` IS NULL)
2025-09-10 03:35:14.415 +03:00 [INF] Execute GetAll for entity Order
2025-09-10 03:35:14.628 +03:00 [INF] Executed DbCommand (89ms) [Parameters=[@__8__locals1_orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`ModifiedAt`, `t0`.`OrderNumber`, `t0`.`Status`, `t0`.`Subtotal`, `t0`.`TaxAmount`, `t0`.`ShippingCost`, `t0`.`DiscountAmount`, `t0`.`Total`, `t0`.`Notes`, `t0`.`DeletedAt`, `t0`.`ShippedAt`, `t0`.`DeliveredAt`, `t0`.`CancelledAt`, `t0`.`c`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Email`, `t0`.`PhoneNumber`, `t1`.`Id`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`Quantity`, `t1`.`UnitPrice`, `t1`.`TotalPrice`, `t1`.`OrderedAt`, `t1`.`Id0`, `t1`.`Name`, `t1`.`Price`, `t1`.`IsActive`, `t1`.`FinalPrice`, `t1`.`DiscountPrecentage`, `t1`.`MainImageUrl`, `t1`.`Id1`, `t1`.`Color`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`Size`, `t1`.`DeletedAt`, `t1`.`Length`, `t1`.`Waist`, `t1`.`Id2`, `t1`.`Id3`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`ModifiedAt`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`ShippingCost`, `o`.`DiscountAmount`, `o`.`Total`, `o`.`Notes`, `o`.`DeletedAt`, `o`.`ShippedAt`, `o`.`DeliveredAt`, `o`.`CancelledAt`, FALSE AS `c`, `t`.`Id` AS `Id0`, `t`.`Name`, `t`.`Email`, `t`.`PhoneNumber`
    FROM `Orders` AS `o`
    INNER JOIN (
        SELECT `a`.`Id`, `a`.`Email`, `a`.`PhoneNumber`, `a`.`Name`
        FROM `AspNetUsers` AS `a`
        WHERE `a`.`Discriminator` = 'Customer'
    ) AS `t` ON `o`.`CustomerId` = `t`.`Id`
    WHERE `o`.`Id` = @__8__locals1_orderId_0
    LIMIT 1
) AS `t0`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`CreatedAt`, `o0`.`ModifiedAt`, `o0`.`Quantity`, `o0`.`UnitPrice`, `o0`.`TotalPrice`, `o0`.`OrderedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND `i`.`DeletedAt` IS NULL
        LIMIT 1), '') AS `MainImageUrl`, `o0`.`ProductVariantId` AS `Id1`, `p0`.`Color`, COALESCE(`p0`.`CreatedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `CreatedAt0`, COALESCE(`p0`.`ModifiedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `ModifiedAt0`, `p0`.`Size`, `p0`.`DeletedAt`, COALESCE(`p0`.`Length`, 0) AS `Length`, COALESCE(`p0`.`Waist`, 0) AS `Waist`, `d`.`Id` AS `Id2`, `p0`.`Id` AS `Id3`, `o0`.`OrderId`
    FROM `OrderItem` AS `o0`
    INNER JOIN `Products` AS `p` ON `o0`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    INNER JOIN `ProductVariants` AS `p0` ON `o0`.`ProductVariantId` = `p0`.`Id`
) AS `t1` ON `t0`.`Id` = `t1`.`OrderId`
ORDER BY `t0`.`Id`, `t0`.`Id0`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id2`
2025-09-10 03:35:15.531 +03:00 [INF] Order 25 retrieved successfully for user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-10 03:35:15.536 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-10 03:35:15.547 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.GetOrder (E-Commerce) in 1558.3573ms
2025-09-10 03:35:15.583 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.GetOrder (E-Commerce)'
2025-09-10 03:35:15.624 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order/25 - 200 1400 application/json; charset=utf-8 1841.998ms
2025-09-10 03:35:16.831 +03:00 [INF] Setting cache for key: order:id:25_user:ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin:True
2025-09-10 03:35:17.054 +03:00 [INF] Cache set successfully for key: order:id:25_user:ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin:True with tags: [order]
2025-09-10 03:35:48.499 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
