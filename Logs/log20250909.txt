2025-09-09 18:37:42.580 +03:00 [INF] DB tables already exist. Exit install
2025-09-09 18:37:45.210 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-09 18:37:46.517 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-09 18:37:47.202 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-09 18:37:47.393 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-09-09 18:37:47.429 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-09 18:37:47.471 +03:00 [INF] Starting data seeding...
2025-09-09 18:37:47.556 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-09 18:37:48.230 +03:00 [INF] Executed DbCommand (147ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-09 18:37:48.350 +03:00 [INF] Role 'Admin' already exists.
2025-09-09 18:37:48.531 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-09 18:37:48.542 +03:00 [INF] Role 'User' already exists.
2025-09-09 18:37:48.740 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-09 18:37:48.874 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-09-09 18:37:48.889 +03:00 [INF] Data seeding completed successfully.
2025-09-09 18:37:50.984 +03:00 [INF] Now listening on: http://localhost:5069
2025-09-09 18:37:51.133 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-09-09 18:37:51.150 +03:00 [INF] Using the following options for SQL Server job storage:
2025-09-09 18:37:51.178 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-09-09 18:37:51.199 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-09-09 18:37:51.281 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-09 18:37:51.302 +03:00 [INF] Hosting environment: Development
2025-09-09 18:37:51.328 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-09-09 18:37:51.593 +03:00 [INF] Server mrrobot:17904:56a642fd successfully announced in 181.6242 ms
2025-09-09 18:37:51.682 +03:00 [INF] Server mrrobot:17904:56a642fd is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-09-09 18:37:53.011 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-09-09 18:37:53.506 +03:00 [INF] Server mrrobot:17904:56a642fd all the dispatchers started
2025-09-09 18:37:53.980 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 977.5343ms
2025-09-09 18:37:54.055 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-09-09 18:37:54.055 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-09 18:37:54.140 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-09 18:37:54.152 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 97.7004ms
2025-09-09 18:37:54.211 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 71.2173ms
2025-09-09 18:37:54.457 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 401.2638ms
2025-09-09 18:37:55.225 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-09-09 18:37:55.781 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 556.0695ms
2025-09-09 18:39:10.140 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Account/login - application/json-patch+json 70
2025-09-09 18:39:10.154 +03:00 [INF] CORS policy execution successful.
2025-09-09 18:39:10.166 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-09 18:39:10.638 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 18:39:10.728 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-09-09 18:39:10.882 +03:00 [INF] Route matched with {action = "LoginAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.TokenDtos.TokensDto]]] LoginAsync(E_Commerce.DtoModels.AccountDtos.LoginDTo) on controller E_Commerce.Controllers.AccountController (E-Commerce).
2025-09-09 18:39:11.351 +03:00 [INF] In LoginAsync Method 
2025-09-09 18:39:11.511 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-09 18:39:11.666 +03:00 [INF] üîê Generating Access Token for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-09 18:39:11.671 +03:00 [INF] üîê Generating Access Token for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-09 18:39:11.836 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedUserName` = @__normalizedUserName_0)
LIMIT 1
2025-09-09 18:39:12.007 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-09 18:39:12.520 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@p22='?' (Size = 255), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p23='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 256), @p15='?' (Size = 256), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `AspNetUsers` SET `AccessFailedCount` = @p0, `Age` = @p1, `ConcurrencyStamp` = @p2, `CreateAt` = @p3, `DeletedAt` = @p4, `Email` = @p5, `EmailConfirmed` = @p6, `Gender` = @p7, `ImageId` = @p8, `ImageId1` = @p9, `LastVisit` = @p10, `LockoutEnabled` = @p11, `LockoutEnd` = @p12, `Name` = @p13, `NormalizedEmail` = @p14, `NormalizedUserName` = @p15, `PasswordHash` = @p16, `PhoneNumber` = @p17, `PhoneNumberConfirmed` = @p18, `SecurityStamp` = @p19, `TwoFactorEnabled` = @p20, `UserName` = @p21
WHERE `Id` = @p22 AND `ConcurrencyStamp` = @p23;
SELECT ROW_COUNT();
2025-09-09 18:39:12.784 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-09-09 18:39:12.883 +03:00 [INF] ‚úÖ Access Token generated successfully for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-09 18:39:12.888 +03:00 [INF] üîë Generating Refresh Token for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-09 18:39:13.121 +03:00 [INF] ‚úÖ RefreshToken generated and stored for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-09 18:39:13.182 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.TokenDtos.TokensDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-09 18:39:13.240 +03:00 [INF] Executed action E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce) in 2347.3796ms
2025-09-09 18:39:13.252 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-09-09 18:39:13.266 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Account/login - 200 1251 application/json; charset=utf-8 3125.9526ms
2025-09-09 18:40:01.825 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Products/1/Variants - application/json-patch+json 105
2025-09-09 18:40:01.838 +03:00 [INF] CORS policy execution successful.
2025-09-09 18:40:01.938 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 18:40:02.265 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-09 18:40:02.294 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.CreateVariants (E-Commerce)'
2025-09-09 18:40:02.308 +03:00 [INF] Route matched with {action = "CreateVariants", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]]] CreateVariants(Int32, System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.CreateProductVariantDto]) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-09-09 18:40:02.404 +03:00 [INF] Adding variants to product: 1
2025-09-09 18:40:02.576 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL)
2025-09-09 18:40:25.897 +03:00 [INF] Checking if variant with color=string1, size="S", waist=100, length=200 already exists for product 1
2025-09-09 18:40:26.006 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__productId_0='?' (DbType = Int32), @__color_1='?' (Size = 4000), @__size_Value_2='?' (DbType = Int32), @__waist_Value_3='?' (DbType = Int32), @__length_Value_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `ProductVariants` AS `p`
    WHERE ((((`p`.`ProductId` = @__productId_0) AND (`p`.`Color` = @__color_1)) AND (`p`.`Size` = @__size_Value_2)) AND (`p`.`Waist` = @__waist_Value_3)) AND (`p`.`Length` = @__length_Value_4))
2025-09-09 18:40:38.866 +03:00 [INF] Executing CreateRangeAsync for entity ProductVariant
2025-09-09 18:40:40.925 +03:00 [INF] 1 ProductVariant entities added successfully (pending save)
2025-09-09 18:40:55.847 +03:00 [INF] Execute AddAdminOpreationAsync
2025-09-09 18:41:07.918 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-09-09 18:41:07.977 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-09-09 18:41:34.714 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 255), @p11='?' (DbType = DateTime), @p12='?' (DbType = DateTime), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime), @p16='?' (DbType = Int32), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ProductVariants` (`Color`, `CreatedAt`, `DeletedAt`, `IsActive`, `Length`, `ModifiedAt`, `ProductId`, `Quantity`, `Size`, `Waist`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT `Id`
FROM `ProductVariants`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-09 18:41:42.224 +03:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-09-09 18:41:42.400 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'E_Commerce.Context.AppDbContext'.
System.InvalidOperationException: Connection must be Open; current state is Closed
   at MySqlConnector.MySqlConnection.get_Session() in /_/src/MySqlConnector/MySqlConnection.cs:line 733
   at MySqlConnector.Core.ICancellableCommandExtensions.ResetCommandTimeout(ICancellableCommand command) in /_/src/MySqlConnector/Core/ICancellableCommand.cs:line 42
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 355
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: Connection must be Open; current state is Closed
   at MySqlConnector.MySqlConnection.get_Session() in /_/src/MySqlConnector/MySqlConnection.cs:line 733
   at MySqlConnector.Core.ICancellableCommandExtensions.ResetCommandTimeout(ICancellableCommand command) in /_/src/MySqlConnector/Core/ICancellableCommand.cs:line 42
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 355
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-09 18:41:58.808 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-09 18:42:09.052 +03:00 [INF] Successfully added 1 variant(s) to product 1
2025-09-09 18:42:21.328 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-09 18:42:21.383 +03:00 [ERR] Error removing cache by tags: [variantlist, variantdata]
StackExchange.Redis.RedisTimeoutException: Timeout awaiting response (outbound=0KiB, inbound=0KiB, 5468ms elapsed, timeout is 5000ms), command=EXEC, next: UNLINK key_tags:product:2:variants:search:color::length::waist::size::active::deleted:, inst: 0, qu: 0, qs: 0, aw: False, bw: Inactive, rs: DequeueResult, ws: Idle, in: 0, last-in: 6, cur-in: 47, sync-ops: 0, async-ops: 5, serverEndpoint: square-guinea-46271.upstash.io:6379, conn-sec: 281.05, aoc: 0, mc: 1/1/0, mgr: 9 of 10 available, clientName: MRROBOT(SE.Redis-v2.6.122.38350), IOCP: (Busy=0,Free=1000,Min=1,Max=1000), WORKER: (Busy=4,Free=32763,Min=4,Max=32767), POOL: (Threads=9,QueuedItems=3,CompletedItems=4354,Timers=7), v: 2.6.122.38350 (Please take a look at this article for some common client-side issues that can cause timeouts: https://stackexchange.github.io/StackExchange.Redis/Timeouts)
   at E_Commerce.Services.Cache.CacheManager.RemoveByTagsAsync(String[] tags) in D:\project_fashion\E-Commerce-API-main\Services\CacheServices\CacheManager.cs:line 202
2025-09-09 18:42:21.407 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.CreateVariants (E-Commerce) in 139095.3664ms
2025-09-09 18:42:21.416 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.CreateVariants (E-Commerce)'
2025-09-09 18:42:35.344 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No route matches the supplied values.
   at Microsoft.AspNetCore.Mvc.CreatedAtActionResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsync(ActionContext context, ObjectResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at SecurityStampMiddleware.Invoke(HttpContext context) in D:\project_fashion\E-Commerce-API-main\MiddleWares\SecurityStampMiddleware.cs:line 75
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context) in D:\project_fashion\E-Commerce-API-main\MiddleWares\UserAuthenticationMiddleware.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-09 18:42:35.376 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Products/1/Variants - 500 null text/plain; charset=utf-8 153551.3067ms
2025-09-09 18:44:04.998 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-09-09 18:44:05.046 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 46.8392ms
2025-09-09 18:44:05.083 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-09-09 18:44:05.089 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-09 18:44:05.579 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-09 18:44:05.695 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 611.3496ms
2025-09-09 18:44:05.805 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 715.9268ms
2025-09-09 18:44:05.826 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 246.9775ms
2025-09-09 18:44:06.113 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-09-09 18:44:06.321 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 208.2302ms
2025-09-09 18:44:35.186 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Products/1/Variants - application/json-patch+json 115
2025-09-09 18:44:35.362 +03:00 [INF] CORS policy execution successful.
2025-09-09 18:44:35.415 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenException: IDX10612: Decryption failed. Header.Enc is null or empty, it must be specified.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.DecryptToken(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWEAsync(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-09 18:44:35.459 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10612: Decryption failed. Header.Enc is null or empty, it must be specified.
2025-09-09 18:44:35.466 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 18:44:35.471 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-09 18:44:35.509 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-09 18:44:35.515 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Products/1/Variants - 401 0 null 328.793ms
2025-09-09 18:44:49.971 +03:00 [ERR] Execution Worker is in the Failed state now due to an exception, execution will be retried in no more than 00:05:00
MySqlConnector.MySqlException (0x80004005): Connect Timeout expired.
 ---> MySqlConnector.MySqlException (0x80004005): The Command Timeout expired before the operation completed.
 ---> System.IO.IOException: Unable to read data from the transport connection: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond..
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.Read(Span`1 buffer)
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesSync|6_0(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 34
   at MySqlConnector.Protocol.Serialization.BufferedByteReader.ReadBytesAsync(IByteHandler byteHandler, ArraySegment`1 buffer, Int32 totalBytesToRead, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/BufferedByteReader.cs:line 34
   at MySqlConnector.Protocol.Serialization.ProtocolUtility.ReadPayloadAsync(BufferedByteReader bufferedByteReader, IByteHandler byteHandler, Func`1 getNextSequenceNumber, ArraySegmentHolder`1 previousPayloads, ProtocolErrorBehavior protocolErrorBehavior, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/ProtocolUtility.cs:line 421
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 882
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 593
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 74
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 951
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Hangfire.MySql.MySqlStorage.CreateAndOpenConnection()
   at Hangfire.MySql.JobQueue.MySqlJobQueue.Dequeue(String[] queues, CancellationToken cancellationToken)
   at Hangfire.MySql.MySqlStorageConnection.FetchNextJob(String[] queues, CancellationToken cancellationToken)
   at Hangfire.Server.Worker.Execute(BackgroundProcessContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\Worker.cs:line 107
   at Hangfire.Server.BackgroundProcessDispatcherBuilder.ExecuteProcess(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessDispatcherBuilder.cs:line 82
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
2025-09-09 18:44:53.050 +03:00 [WRN] Server mrrobot:17904:56a642fd encountered an exception while sending heartbeat
MySqlConnector.MySqlException (0x80004005): Connect Timeout expired.
 ---> MySqlConnector.MySqlException (0x80004005): The Command Timeout expired before the operation completed.
 ---> System.IO.IOException: Unable to read data from the transport connection: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond..
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.Read(Span`1 buffer)
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesSync|6_0(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 34
   at MySqlConnector.Protocol.Serialization.BufferedByteReader.ReadBytesAsync(IByteHandler byteHandler, ArraySegment`1 buffer, Int32 totalBytesToRead, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/BufferedByteReader.cs:line 34
   at MySqlConnector.Protocol.Serialization.ProtocolUtility.ReadPayloadAsync(BufferedByteReader bufferedByteReader, IByteHandler byteHandler, Func`1 getNextSequenceNumber, ArraySegmentHolder`1 previousPayloads, ProtocolErrorBehavior protocolErrorBehavior, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/ProtocolUtility.cs:line 421
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 882
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 593
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 74
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 951
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Hangfire.MySql.MySqlStorage.CreateAndOpenConnection()
   at Hangfire.MySql.MySqlStorage.UseConnection[T](Func`2 func)
   at Hangfire.MySql.MySqlStorage.UseConnection(Action`1 action)
   at Hangfire.MySql.MySqlStorageConnection.Heartbeat(String serverId)
   at Hangfire.Server.ServerHeartbeatProcess.Execute(BackgroundProcessContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\ServerHeartbeatProcess.cs:line 50
2025-09-09 18:44:54.263 +03:00 [ERR] Execution RecurringJobScheduler is in the Failed state now due to an exception, execution will be retried in no more than 00:00:04
MySqlConnector.MySqlException (0x80004005): Connect Timeout expired.
 ---> MySqlConnector.MySqlException (0x80004005): The Command Timeout expired before the operation completed.
 ---> System.IO.IOException: Unable to read data from the transport connection: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond..
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.Read(Span`1 buffer)
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesSync|6_0(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 34
   at MySqlConnector.Protocol.Serialization.BufferedByteReader.ReadBytesAsync(IByteHandler byteHandler, ArraySegment`1 buffer, Int32 totalBytesToRead, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/BufferedByteReader.cs:line 34
   at MySqlConnector.Protocol.Serialization.ProtocolUtility.ReadPayloadAsync(BufferedByteReader bufferedByteReader, IByteHandler byteHandler, Func`1 getNextSequenceNumber, ArraySegmentHolder`1 previousPayloads, ProtocolErrorBehavior protocolErrorBehavior, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/ProtocolUtility.cs:line 421
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 882
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 593
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 74
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 951
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Hangfire.MySql.MySqlStorage.CreateAndOpenConnection()
   at Hangfire.MySql.MySqlDistributedLock..ctor(MySqlStorage storage, String resource, TimeSpan timeout, MySqlStorageOptions storageOptions)
   at Hangfire.MySql.MySqlStorageConnection.AcquireDistributedLock(String resource, TimeSpan timeout)
   at Hangfire.Server.RecurringJobScheduler.UseConnectionDistributedLock[T](JobStorage storage, Func`2 action) in C:\projects\hangfire-525\src\Hangfire.Core\Server\RecurringJobScheduler.cs:line 423
   at Hangfire.Server.RecurringJobScheduler.EnqueueNextRecurringJobs(BackgroundProcessContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\RecurringJobScheduler.cs:line 203
   at Hangfire.Server.RecurringJobScheduler.Execute(BackgroundProcessContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\RecurringJobScheduler.cs:line 176
   at Hangfire.Server.BackgroundProcessDispatcherBuilder.ExecuteProcess(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessDispatcherBuilder.cs:line 82
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
2025-09-09 18:44:54.617 +03:00 [ERR] Execution DelayedJobScheduler is in the Failed state now due to an exception, execution will be retried in no more than 00:00:04
MySqlConnector.MySqlException (0x80004005): Connect Timeout expired.
 ---> MySqlConnector.MySqlException (0x80004005): The Command Timeout expired before the operation completed.
 ---> System.IO.IOException: Unable to read data from the transport connection: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond..
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.Read(Span`1 buffer)
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesSync|6_0(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 34
   at MySqlConnector.Protocol.Serialization.BufferedByteReader.ReadBytesAsync(IByteHandler byteHandler, ArraySegment`1 buffer, Int32 totalBytesToRead, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/BufferedByteReader.cs:line 34
   at MySqlConnector.Protocol.Serialization.ProtocolUtility.ReadPayloadAsync(BufferedByteReader bufferedByteReader, IByteHandler byteHandler, Func`1 getNextSequenceNumber, ArraySegmentHolder`1 previousPayloads, ProtocolErrorBehavior protocolErrorBehavior, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/ProtocolUtility.cs:line 421
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 882
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 593
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 74
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 951
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Hangfire.MySql.MySqlStorage.CreateAndOpenConnection()
   at Hangfire.MySql.MySqlDistributedLock..ctor(MySqlStorage storage, String resource, TimeSpan timeout, MySqlStorageOptions storageOptions)
   at Hangfire.MySql.MySqlStorageConnection.AcquireDistributedLock(String resource, TimeSpan timeout)
   at Hangfire.Server.DelayedJobScheduler.UseConnectionDistributedLock[T](JobStorage storage, Func`2 action) in C:\projects\hangfire-525\src\Hangfire.Core\Server\DelayedJobScheduler.cs:line 411
   at Hangfire.Server.DelayedJobScheduler.EnqueueNextScheduledJobs(BackgroundProcessContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\DelayedJobScheduler.cs:line 167
   at Hangfire.Server.DelayedJobScheduler.Execute(BackgroundProcessContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\DelayedJobScheduler.cs:line 148
   at Hangfire.Server.BackgroundProcessDispatcherBuilder.ExecuteProcess(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessDispatcherBuilder.cs:line 82
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
2025-09-09 18:44:55.110 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Products/1/Variants - application/json-patch+json 115
2025-09-09 18:44:55.131 +03:00 [INF] CORS policy execution successful.
2025-09-09 18:44:55.157 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 18:45:10.214 +03:00 [ERR] An error occurred using the connection to database 'Fashion_Site' on server 'mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com'.
2025-09-09 18:45:10.227 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'E_Commerce.Context.AppDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure()' to the 'UseMySql' call.
 ---> MySqlConnector.MySqlException (0x80004005): Connect Timeout expired.
 ---> MySqlConnector.MySqlException (0x80004005): The Command Timeout expired before the operation completed.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesAsync|6_2(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 67
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesAsync|6_2(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 75
   at MySqlConnector.Protocol.Serialization.BufferedByteReader.ReadBytesAsync(IByteHandler byteHandler, ArraySegment`1 buffer, Int32 totalBytesToRead, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/BufferedByteReader.cs:line 34
   at MySqlConnector.Protocol.Serialization.ProtocolUtility.ReadPayloadAsync(BufferedByteReader bufferedByteReader, IByteHandler byteHandler, Func`1 getNextSequenceNumber, ArraySegmentHolder`1 previousPayloads, ProtocolErrorBehavior protocolErrorBehavior, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/ProtocolUtility.cs:line 421
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 882
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 593
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 74
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 951
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlRelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure()' to the 'UseMySql' call.
 ---> MySqlConnector.MySqlException (0x80004005): Connect Timeout expired.
 ---> MySqlConnector.MySqlException (0x80004005): The Command Timeout expired before the operation completed.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesAsync|6_2(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 67
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesAsync|6_2(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 75
   at MySqlConnector.Protocol.Serialization.BufferedByteReader.ReadBytesAsync(IByteHandler byteHandler, ArraySegment`1 buffer, Int32 totalBytesToRead, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/BufferedByteReader.cs:line 34
   at MySqlConnector.Protocol.Serialization.ProtocolUtility.ReadPayloadAsync(BufferedByteReader bufferedByteReader, IByteHandler byteHandler, Func`1 getNextSequenceNumber, ArraySegmentHolder`1 previousPayloads, ProtocolErrorBehavior protocolErrorBehavior, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/ProtocolUtility.cs:line 421
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 882
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 593
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 74
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 951
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlRelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-09 18:45:29.128 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure()' to the 'UseMySql' call.
 ---> MySqlConnector.MySqlException (0x80004005): Connect Timeout expired.
 ---> MySqlConnector.MySqlException (0x80004005): The Command Timeout expired before the operation completed.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesAsync|6_2(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 67
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesAsync|6_2(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 75
   at MySqlConnector.Protocol.Serialization.BufferedByteReader.ReadBytesAsync(IByteHandler byteHandler, ArraySegment`1 buffer, Int32 totalBytesToRead, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/BufferedByteReader.cs:line 34
   at MySqlConnector.Protocol.Serialization.ProtocolUtility.ReadPayloadAsync(BufferedByteReader bufferedByteReader, IByteHandler byteHandler, Func`1 getNextSequenceNumber, ArraySegmentHolder`1 previousPayloads, ProtocolErrorBehavior protocolErrorBehavior, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/ProtocolUtility.cs:line 421
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 882
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 593
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 74
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 951
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlRelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at SecurityStampMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-09 18:45:29.271 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Products/1/Variants - 500 null text/plain; charset=utf-8 34161.0344ms
2025-09-09 18:45:44.239 +03:00 [WRN] Server mrrobot:17904:56a642fd encountered an exception while sending heartbeat
MySqlConnector.MySqlException (0x80004005): Connect Timeout expired.
 ---> MySqlConnector.MySqlException (0x80004005): The Command Timeout expired before the operation completed.
 ---> System.IO.IOException: Unable to read data from the transport connection: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond..
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.Read(Span`1 buffer)
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesSync|6_0(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 34
   at MySqlConnector.Protocol.Serialization.BufferedByteReader.ReadBytesAsync(IByteHandler byteHandler, ArraySegment`1 buffer, Int32 totalBytesToRead, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/BufferedByteReader.cs:line 34
   at MySqlConnector.Protocol.Serialization.ProtocolUtility.ReadPayloadAsync(BufferedByteReader bufferedByteReader, IByteHandler byteHandler, Func`1 getNextSequenceNumber, ArraySegmentHolder`1 previousPayloads, ProtocolErrorBehavior protocolErrorBehavior, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/ProtocolUtility.cs:line 421
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 882
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 593
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 74
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 951
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Hangfire.MySql.MySqlStorage.CreateAndOpenConnection()
   at Hangfire.MySql.MySqlStorage.UseConnection[T](Func`2 func)
   at Hangfire.MySql.MySqlStorage.UseConnection(Action`1 action)
   at Hangfire.MySql.MySqlStorageConnection.Heartbeat(String serverId)
   at Hangfire.Server.ServerHeartbeatProcess.Execute(BackgroundProcessContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\ServerHeartbeatProcess.cs:line 50
2025-09-09 18:46:14.419 +03:00 [WRN] Server mrrobot:17904:56a642fd encountered an exception while sending heartbeat
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 428
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 433
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 111
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Hangfire.MySql.MySqlStorage.CreateAndOpenConnection()
   at Hangfire.MySql.MySqlStorage.UseConnection[T](Func`2 func)
   at Hangfire.MySql.MySqlStorage.UseConnection(Action`1 action)
   at Hangfire.MySql.MySqlStorageConnection.Heartbeat(String serverId)
   at Hangfire.Server.ServerHeartbeatProcess.Execute(BackgroundProcessContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\ServerHeartbeatProcess.cs:line 50
2025-09-09 18:46:44.549 +03:00 [WRN] Server mrrobot:17904:56a642fd encountered an exception while sending heartbeat
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 428
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 433
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 111
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Hangfire.MySql.MySqlStorage.CreateAndOpenConnection()
   at Hangfire.MySql.MySqlStorage.UseConnection[T](Func`2 func)
   at Hangfire.MySql.MySqlStorage.UseConnection(Action`1 action)
   at Hangfire.MySql.MySqlStorageConnection.Heartbeat(String serverId)
   at Hangfire.Server.ServerHeartbeatProcess.Execute(BackgroundProcessContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\ServerHeartbeatProcess.cs:line 50
2025-09-09 18:47:14.684 +03:00 [WRN] Server mrrobot:17904:56a642fd encountered an exception while sending heartbeat
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 428
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 433
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 111
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Hangfire.MySql.MySqlStorage.CreateAndOpenConnection()
   at Hangfire.MySql.MySqlStorage.UseConnection[T](Func`2 func)
   at Hangfire.MySql.MySqlStorage.UseConnection(Action`1 action)
   at Hangfire.MySql.MySqlStorageConnection.Heartbeat(String serverId)
   at Hangfire.Server.ServerHeartbeatProcess.Execute(BackgroundProcessContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\ServerHeartbeatProcess.cs:line 50
2025-09-09 18:47:44.786 +03:00 [WRN] Server mrrobot:17904:56a642fd encountered an exception while sending heartbeat
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 428
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 433
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 111
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Hangfire.MySql.MySqlStorage.CreateAndOpenConnection()
   at Hangfire.MySql.MySqlStorage.UseConnection[T](Func`2 func)
   at Hangfire.MySql.MySqlStorage.UseConnection(Action`1 action)
   at Hangfire.MySql.MySqlStorageConnection.Heartbeat(String serverId)
   at Hangfire.Server.ServerHeartbeatProcess.Execute(BackgroundProcessContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\ServerHeartbeatProcess.cs:line 50
2025-09-09 18:48:14.938 +03:00 [WRN] Server mrrobot:17904:56a642fd encountered an exception while sending heartbeat
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 428
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 433
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 111
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Hangfire.MySql.MySqlStorage.CreateAndOpenConnection()
   at Hangfire.MySql.MySqlStorage.UseConnection[T](Func`2 func)
   at Hangfire.MySql.MySqlStorage.UseConnection(Action`1 action)
   at Hangfire.MySql.MySqlStorageConnection.Heartbeat(String serverId)
   at Hangfire.Server.ServerHeartbeatProcess.Execute(BackgroundProcessContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\ServerHeartbeatProcess.cs:line 50
2025-09-09 18:48:23.427 +03:00 [ERR] Execution ServerWatchdog is in the Failed state now due to an exception, execution will be retried in no more than 00:00:25
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 428
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 433
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 111
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Hangfire.MySql.MySqlStorage.CreateAndOpenConnection()
   at Hangfire.MySql.MySqlStorage.UseConnection[T](Func`2 func)
   at Hangfire.MySql.MySqlStorageConnection.RemoveTimedOutServers(TimeSpan timeOut)
   at Hangfire.Server.ServerWatchdog.Execute(BackgroundProcessContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\ServerWatchdog.cs:line 44
   at Hangfire.Server.BackgroundProcessDispatcherBuilder.ExecuteProcess(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessDispatcherBuilder.cs:line 82
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
2025-09-09 18:48:23.770 +03:00 [ERR] Execution CountersAggregator is in the Failed state now due to an exception, execution will be retried in no more than 00:00:25
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 428
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 433
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 111
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Hangfire.MySql.MySqlStorage.CreateAndOpenConnection()
   at Hangfire.MySql.MySqlStorage.UseConnection[T](Func`2 func)
   at Hangfire.MySql.MySqlStorage.UseConnection(Action`1 action)
   at Hangfire.MySql.CountersAggregator.Execute(CancellationToken cancellationToken)
   at Hangfire.Server.ServerProcessDispatcherBuilder.ExecuteComponent(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\ServerProcessDispatcherBuilder.cs:line 65
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
2025-09-09 18:48:45.090 +03:00 [WRN] Server mrrobot:17904:56a642fd encountered an exception while sending heartbeat
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 428
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 433
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 111
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Hangfire.MySql.MySqlStorage.CreateAndOpenConnection()
   at Hangfire.MySql.MySqlStorage.UseConnection[T](Func`2 func)
   at Hangfire.MySql.MySqlStorage.UseConnection(Action`1 action)
   at Hangfire.MySql.MySqlStorageConnection.Heartbeat(String serverId)
   at Hangfire.Server.ServerHeartbeatProcess.Execute(BackgroundProcessContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\ServerHeartbeatProcess.cs:line 50
2025-09-09 18:49:15.234 +03:00 [WRN] Server mrrobot:17904:56a642fd encountered an exception while sending heartbeat
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 428
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 433
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 111
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Hangfire.MySql.MySqlStorage.CreateAndOpenConnection()
   at Hangfire.MySql.MySqlStorage.UseConnection[T](Func`2 func)
   at Hangfire.MySql.MySqlStorage.UseConnection(Action`1 action)
   at Hangfire.MySql.MySqlStorageConnection.Heartbeat(String serverId)
   at Hangfire.Server.ServerHeartbeatProcess.Execute(BackgroundProcessContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\ServerHeartbeatProcess.cs:line 50
2025-09-09 18:49:45.369 +03:00 [WRN] Server mrrobot:17904:56a642fd encountered an exception while sending heartbeat
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 428
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 433
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 111
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Hangfire.MySql.MySqlStorage.CreateAndOpenConnection()
   at Hangfire.MySql.MySqlStorage.UseConnection[T](Func`2 func)
   at Hangfire.MySql.MySqlStorage.UseConnection(Action`1 action)
   at Hangfire.MySql.MySqlStorageConnection.Heartbeat(String serverId)
   at Hangfire.Server.ServerHeartbeatProcess.Execute(BackgroundProcessContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\ServerHeartbeatProcess.cs:line 50
2025-09-09 18:50:15.520 +03:00 [WRN] Server mrrobot:17904:56a642fd encountered an exception while sending heartbeat
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 428
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 433
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 111
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Hangfire.MySql.MySqlStorage.CreateAndOpenConnection()
   at Hangfire.MySql.MySqlStorage.UseConnection[T](Func`2 func)
   at Hangfire.MySql.MySqlStorage.UseConnection(Action`1 action)
   at Hangfire.MySql.MySqlStorageConnection.Heartbeat(String serverId)
   at Hangfire.Server.ServerHeartbeatProcess.Execute(BackgroundProcessContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\ServerHeartbeatProcess.cs:line 50
2025-09-09 18:50:15.532 +03:00 [ERR] Server mrrobot:17904:56a642fd will be restarted due to server time out
2025-09-09 18:50:15.535 +03:00 [INF] Server mrrobot:17904:56a642fd caught restart signal...
2025-09-09 18:50:15.599 +03:00 [WRN] Server mrrobot:17904:56a642fd stopped non-gracefully due to ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler. Outstanding work on those dispatchers could be aborted, and there can be delays in background processing. This server instance will be incorrectly shown as active for a while. To avoid non-graceful shutdowns, investigate what prevents from stopping gracefully and add CancellationToken support for those methods.
2025-09-09 18:50:15.714 +03:00 [WRN] Server mrrobot:17904:56a642fd there was an exception, server may not be removed
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 428
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 433
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 111
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Hangfire.MySql.MySqlStorage.CreateAndOpenConnection()
   at Hangfire.MySql.MySqlStorage.UseConnection[T](Func`2 func)
   at Hangfire.MySql.MySqlStorage.UseConnection(Action`1 action)
   at Hangfire.MySql.MySqlStorageConnection.RemoveServer(String serverId)
   at Hangfire.Server.BackgroundServerProcess.ServerDelete(BackgroundServerContext context, Stopwatch stoppedAt) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 214
2025-09-09 18:50:15.742 +03:00 [ERR] Execution BackgroundServerProcess is in the Failed state now due to an exception, execution will be retried in no more than 00:00:15
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 428
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 433
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 111
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Hangfire.MySql.MySqlStorage.CreateAndOpenConnection()
   at Hangfire.MySql.MySqlStorage.UseConnection[T](Func`2 func)
   at Hangfire.MySql.MySqlStorage.UseConnection(Action`1 action)
   at Hangfire.MySql.MySqlStorageConnection.AnnounceServer(String serverId, ServerContext context)
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 194
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
2025-09-09 18:50:30.951 +03:00 [ERR] Execution BackgroundServerProcess is still in the Failed state for 00:00:15.0959198 due to an exception, will be retried in no more than 00:00:15
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 428
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 433
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 111
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Hangfire.MySql.MySqlStorage.CreateAndOpenConnection()
   at Hangfire.MySql.MySqlStorage.UseConnection[T](Func`2 func)
   at Hangfire.MySql.MySqlStorage.UseConnection(Action`1 action)
   at Hangfire.MySql.MySqlStorageConnection.AnnounceServer(String serverId, ServerContext context)
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 194
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
2025-09-09 18:50:46.055 +03:00 [ERR] Execution BackgroundServerProcess is still in the Failed state for 00:00:30.2000402 due to an exception, will be retried in no more than 00:00:15
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 428
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 433
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 111
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Hangfire.MySql.MySqlStorage.CreateAndOpenConnection()
   at Hangfire.MySql.MySqlStorage.UseConnection[T](Func`2 func)
   at Hangfire.MySql.MySqlStorage.UseConnection(Action`1 action)
   at Hangfire.MySql.MySqlStorageConnection.AnnounceServer(String serverId, ServerContext context)
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 194
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
2025-09-09 18:51:01.173 +03:00 [ERR] Execution BackgroundServerProcess is still in the Failed state for 00:00:45.3176724 due to an exception, will be retried in no more than 00:00:15
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 428
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 433
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 111
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Hangfire.MySql.MySqlStorage.CreateAndOpenConnection()
   at Hangfire.MySql.MySqlStorage.UseConnection[T](Func`2 func)
   at Hangfire.MySql.MySqlStorage.UseConnection(Action`1 action)
   at Hangfire.MySql.MySqlStorageConnection.AnnounceServer(String serverId, ServerContext context)
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 194
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
2025-09-09 18:51:16.256 +03:00 [ERR] Execution BackgroundServerProcess is still in the Failed state for 00:01:00.4013158 due to an exception, will be retried in no more than 00:00:15
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 428
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 433
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 111
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Hangfire.MySql.MySqlStorage.CreateAndOpenConnection()
   at Hangfire.MySql.MySqlStorage.UseConnection[T](Func`2 func)
   at Hangfire.MySql.MySqlStorage.UseConnection(Action`1 action)
   at Hangfire.MySql.MySqlStorageConnection.AnnounceServer(String serverId, ServerContext context)
   at Hangfire.Server.BackgroundServerProcess.CreateServer(BackgroundServerContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 194
   at Hangfire.Server.BackgroundServerProcess.Execute(Guid executionId, BackgroundExecution execution, CancellationToken stoppingToken, CancellationToken stoppedToken, CancellationToken shutdownToken) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundServerProcess.cs:line 101
   at Hangfire.Server.BackgroundProcessingServer.RunServer(Guid executionId, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Server\BackgroundProcessingServer.cs:line 249
   at Hangfire.Processing.BackgroundExecution.Run(Action`2 callback, Object state) in C:\projects\hangfire-525\src\Hangfire.Core\Processing\BackgroundExecution.cs:line 118
2025-09-09 18:51:32.378 +03:00 [INF] Server mrrobot:17904:710c8eb9 successfully announced in 911.7311 ms
2025-09-09 18:51:32.382 +03:00 [INF] Server mrrobot:17904:710c8eb9 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-09-09 18:51:32.577 +03:00 [INF] 1 servers were removed due to timeout
2025-09-09 18:51:32.790 +03:00 [INF] Server mrrobot:17904:710c8eb9 all the dispatchers started
2025-09-09 18:51:32.800 +03:00 [INF] Execution BackgroundServerProcess recovered from the Failed state after 00:01:16.9448717 and is in the Running state now
2025-09-09 18:52:21.568 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Products/1/Variants - application/json-patch+json 107
2025-09-09 18:52:21.583 +03:00 [INF] CORS policy execution successful.
2025-09-09 18:52:21.662 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 18:52:23.392 +03:00 [INF] Executed DbCommand (1,423ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-09 18:52:23.967 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.CreateVariants (E-Commerce)'
2025-09-09 18:52:24.007 +03:00 [INF] Route matched with {action = "CreateVariants", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]]] CreateVariants(Int32, System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.CreateProductVariantDto]) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-09-09 18:52:24.032 +03:00 [INF] Adding variants to product: 1
2025-09-09 18:52:24.201 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL)
2025-09-09 18:52:26.284 +03:00 [INF] Checking if variant with color=string11, size="M", waist=100, length=200 already exists for product 1
2025-09-09 18:52:26.400 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__productId_0='?' (DbType = Int32), @__color_1='?' (Size = 4000), @__size_Value_2='?' (DbType = Int32), @__waist_Value_3='?' (DbType = Int32), @__length_Value_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `ProductVariants` AS `p`
    WHERE ((((`p`.`ProductId` = @__productId_0) AND (`p`.`Color` = @__color_1)) AND (`p`.`Size` = @__size_Value_2)) AND (`p`.`Waist` = @__waist_Value_3)) AND (`p`.`Length` = @__length_Value_4))
2025-09-09 18:52:27.399 +03:00 [INF] Executing CreateRangeAsync for entity ProductVariant
2025-09-09 18:52:27.407 +03:00 [INF] 1 ProductVariant entities added successfully (pending save)
2025-09-09 18:52:27.410 +03:00 [INF] Execute AddAdminOpreationAsync
2025-09-09 18:52:27.413 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-09-09 18:52:27.416 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-09-09 18:52:28.548 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 255), @p11='?' (DbType = DateTime), @p12='?' (DbType = DateTime), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime), @p16='?' (DbType = Int32), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ProductVariants` (`Color`, `CreatedAt`, `DeletedAt`, `IsActive`, `Length`, `ModifiedAt`, `ProductId`, `Quantity`, `Size`, `Waist`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT `Id`
FROM `ProductVariants`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-09 18:52:30.869 +03:00 [INF] Successfully added 1 variant(s) to product 1
2025-09-09 18:52:30.876 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-09 18:52:30.881 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.CreateVariants (E-Commerce) in 6869.9649ms
2025-09-09 18:52:30.884 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.CreateVariants (E-Commerce)'
2025-09-09 18:52:41.783 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No route matches the supplied values.
   at Microsoft.AspNetCore.Mvc.CreatedAtActionResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsync(ActionContext context, ObjectResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at SecurityStampMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-09 18:52:41.804 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Products/1/Variants - 500 null text/plain; charset=utf-8 20236.6386ms
2025-09-09 18:52:43.499 +03:00 [INF] Removing cache by tags: [variantlist, variantdata]
2025-09-09 18:52:43.586 +03:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-09-09 18:52:43.595 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'E_Commerce.Context.AppDbContext'.
System.InvalidOperationException: Connection must be Open; current state is Closed
   at MySqlConnector.MySqlConnection.get_Session() in /_/src/MySqlConnector/MySqlConnection.cs:line 733
   at MySqlConnector.Core.ICancellableCommandExtensions.ResetCommandTimeout(ICancellableCommand command) in /_/src/MySqlConnector/Core/ICancellableCommand.cs:line 42
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 355
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: Connection must be Open; current state is Closed
   at MySqlConnector.MySqlConnection.get_Session() in /_/src/MySqlConnector/MySqlConnection.cs:line 733
   at MySqlConnector.Core.ICancellableCommandExtensions.ResetCommandTimeout(ICancellableCommand command) in /_/src/MySqlConnector/Core/ICancellableCommand.cs:line 42
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 355
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-09 18:52:44.483 +03:00 [WRN] No cache entries found for tags: [variantlist, variantdata]
2025-09-09 18:54:00.567 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-09-09 18:54:00.788 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 220.8313ms
2025-09-09 18:54:00.856 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-09-09 18:54:00.882 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 26.5064ms
2025-09-09 18:54:00.915 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-09 18:54:00.936 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 20.9343ms
2025-09-09 18:54:00.981 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-09 18:54:00.987 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 6.0205ms
2025-09-09 18:54:01.518 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-09-09 18:54:01.653 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 134.8386ms
2025-09-09 18:58:14.152 +03:00 [INF] DB tables already exist. Exit install
2025-09-09 18:58:15.760 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-09 18:58:16.930 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-09 18:58:17.705 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-09 18:58:17.899 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-09-09 18:58:17.924 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-09 18:58:17.956 +03:00 [INF] Starting data seeding...
2025-09-09 18:58:18.025 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-09 18:58:18.742 +03:00 [INF] Executed DbCommand (139ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-09 18:58:18.833 +03:00 [INF] Role 'Admin' already exists.
2025-09-09 18:58:19.030 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-09 18:58:19.040 +03:00 [INF] Role 'User' already exists.
2025-09-09 18:58:19.240 +03:00 [INF] Executed DbCommand (89ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-09 18:58:19.336 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-09-09 18:58:19.339 +03:00 [INF] Data seeding completed successfully.
2025-09-09 18:58:21.161 +03:00 [INF] Now listening on: http://localhost:5069
2025-09-09 18:58:21.276 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-09-09 18:58:21.285 +03:00 [INF] Using the following options for SQL Server job storage:
2025-09-09 18:58:21.288 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-09-09 18:58:21.290 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-09-09 18:58:21.323 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-09 18:58:21.340 +03:00 [INF] Hosting environment: Development
2025-09-09 18:58:21.343 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-09-09 18:58:21.514 +03:00 [INF] Server mrrobot:3100:886916f2 successfully announced in 178.7323 ms
2025-09-09 18:58:21.524 +03:00 [INF] Server mrrobot:3100:886916f2 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-09-09 18:58:22.454 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-09-09 18:58:23.018 +03:00 [INF] Server mrrobot:3100:886916f2 all the dispatchers started
2025-09-09 18:58:23.255 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 839.8497ms
2025-09-09 18:58:23.344 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-09 18:58:23.338 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-09-09 18:58:23.512 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-09 18:58:23.550 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 256.3653ms
2025-09-09 18:58:23.582 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 70.3481ms
2025-09-09 18:58:23.585 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 241.6096ms
2025-09-09 18:58:23.656 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-09-09 18:58:23.955 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 298.5727ms
2025-09-09 18:59:29.971 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Products/1/Variants - application/json-patch+json 106
2025-09-09 18:59:30.074 +03:00 [INF] CORS policy execution successful.
2025-09-09 18:59:30.079 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-09 18:59:30.410 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 18:59:30.641 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-09 18:59:30.671 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.CreateVariants (E-Commerce)'
2025-09-09 18:59:30.709 +03:00 [INF] Route matched with {action = "CreateVariants", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]]] CreateVariants(Int32, System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.CreateProductVariantDto]) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-09-09 18:59:31.206 +03:00 [INF] Adding variants to product: 1
2025-09-09 18:59:31.394 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL)
2025-09-09 18:59:36.530 +03:00 [INF] Checking if variant with color=strin1g, size="S", waist=100, length=200 already exists for product 1
2025-09-09 18:59:36.646 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__productId_0='?' (DbType = Int32), @__color_1='?' (Size = 4000), @__size_Value_2='?' (DbType = Int32), @__waist_Value_3='?' (DbType = Int32), @__length_Value_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `ProductVariants` AS `p`
    WHERE ((((`p`.`ProductId` = @__productId_0) AND (`p`.`Color` = @__color_1)) AND (`p`.`Size` = @__size_Value_2)) AND (`p`.`Waist` = @__waist_Value_3)) AND (`p`.`Length` = @__length_Value_4))
2025-09-09 18:59:39.556 +03:00 [INF] Executing CreateRangeAsync for entity ProductVariant
2025-09-09 18:59:39.663 +03:00 [INF] 1 ProductVariant entities added successfully (pending save)
2025-09-09 18:59:39.668 +03:00 [INF] Execute AddAdminOpreationAsync
2025-09-09 18:59:39.673 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-09-09 18:59:39.704 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-09-09 18:59:44.357 +03:00 [INF] Executed DbCommand (114ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 255), @p11='?' (DbType = DateTime), @p12='?' (DbType = DateTime), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime), @p16='?' (DbType = Int32), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ProductVariants` (`Color`, `CreatedAt`, `DeletedAt`, `IsActive`, `Length`, `ModifiedAt`, `ProductId`, `Quantity`, `Size`, `Waist`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT `Id`
FROM `ProductVariants`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-09 18:59:46.724 +03:00 [INF] Successfully added 1 variant(s) to product 1
2025-09-09 18:59:46.746 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-09 18:59:46.785 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.CreateVariants (E-Commerce) in 16056.7018ms
2025-09-09 18:59:46.792 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.CreateVariants (E-Commerce)'
2025-09-09 18:59:46.804 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Products/1/Variants - 201 309 application/json; charset=utf-8 16832.9523ms
2025-09-09 19:00:12.917 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/1 - null null
2025-09-09 19:00:12.995 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 19:00:13.186 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-09 19:00:13.198 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-09 19:00:13.207 +03:00 [INF] Route matched with {action = "GetProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDetailDto]]] GetProduct(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-09 19:00:13.229 +03:00 [INF] Executing GetProduct for ID: 1
2025-09-09 19:00:13.240 +03:00 [INF] Retrieving product by id: 1, isActive: , deletedOnly: 
2025-09-09 19:00:13.254 +03:00 [INF] Getting cache for key: Product:1_active:_deleted:
2025-09-09 19:00:13.501 +03:00 [WRN] Cache miss for key: Product:1_active:_deleted:
2025-09-09 19:00:13.504 +03:00 [INF] Execute GetAll for entity Product
2025-09-09 19:00:13.652 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-09 19:00:13.882 +03:00 [INF] Executed DbCommand (131ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`fitType`, `t`.`IsActive`, `t`.`c`, `t`.`Price`, `t`.`SubCategoryId`, `t`.`c0`, `t`.`Id0`, `t`.`DiscountPercent`, `t`.`IsActive0`, `t`.`StartDate`, `t`.`EndDate`, `t`.`Name0`, `t`.`Description0`, `t0`.`Id`, `t0`.`Url`, `t1`.`Id`, `t1`.`Color`, `t1`.`Size`, `t1`.`Waist`, `t1`.`Length`, `t1`.`Quantity`, `t1`.`ProductId`
FROM (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`fitType`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `c`, `p`.`Price`, `p`.`SubCategoryId`, (`d`.`Id` IS NOT NULL AND (`d`.`DeletedAt` IS NULL)) AND (`d`.`EndDate` > UTC_TIMESTAMP()) AS `c0`, `d`.`Id` AS `Id0`, `d`.`DiscountPercent`, `d`.`IsActive` AS `IsActive0`, `d`.`StartDate`, `d`.`EndDate`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE `p`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
LEFT JOIN (
    SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity`, `p0`.`ProductId`
    FROM `ProductVariants` AS `p0`
    WHERE `p0`.`DeletedAt` IS NULL AND (`p0`.`Quantity` <> 0)
) AS `t1` ON `t`.`Id` = `t1`.`ProductId`
ORDER BY `t`.`Id`, `t`.`Id0`, `t0`.`Id`
2025-09-09 19:00:13.903 +03:00 [INF] Product found: zV4Ok4bWzFGA6KsVb3uZ (ID: 1)
2025-09-09 19:00:13.908 +03:00 [INF] Setting cache for key: Product:1_active:_deleted:
2025-09-09 19:00:13.987 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDetailDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-09 19:00:14.001 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProduct (E-Commerce) in 784.7692ms
2025-09-09 19:00:14.005 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-09 19:00:14.007 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/1 - 200 1958 application/json; charset=utf-8 1090.6045ms
2025-09-09 19:00:14.227 +03:00 [INF] Cache set successfully for key: Product:1_active:_deleted: with tags: [Productwithdata]
2025-09-09 19:05:35.823 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Products/1/Variants - application/json-patch+json 209
2025-09-09 19:05:35.832 +03:00 [INF] CORS policy execution successful.
2025-09-09 19:05:35.843 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 19:05:36.032 +03:00 [INF] Executed DbCommand (94ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-09 19:05:36.042 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.CreateVariants (E-Commerce)'
2025-09-09 19:05:36.049 +03:00 [INF] Route matched with {action = "CreateVariants", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]]] CreateVariants(Int32, System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.CreateProductVariantDto]) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-09-09 19:05:36.058 +03:00 [INF] Adding variants to product: 1
2025-09-09 19:05:36.230 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL)
2025-09-09 19:05:36.487 +03:00 [INF] Checking if variant with color=strin1g, size="S", waist=100, length=200 already exists for product 1
2025-09-09 19:05:36.581 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__productId_0='?' (DbType = Int32), @__color_1='?' (Size = 4000), @__size_Value_2='?' (DbType = Int32), @__waist_Value_3='?' (DbType = Int32), @__length_Value_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `ProductVariants` AS `p`
    WHERE ((((`p`.`ProductId` = @__productId_0) AND (`p`.`Color` = @__color_1)) AND (`p`.`Size` = @__size_Value_2)) AND (`p`.`Waist` = @__waist_Value_3)) AND (`p`.`Length` = @__length_Value_4))
2025-09-09 19:05:36.588 +03:00 [WRN] Duplicate variant found for product 1 (Color=strin1g, Size="S", Waist=100, Length=200)
2025-09-09 19:05:36.605 +03:00 [INF] Checking if variant with color=strin1g22, size="S", waist=100, length=200 already exists for product 1
2025-09-09 19:05:36.696 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__productId_0='?' (DbType = Int32), @__color_1='?' (Size = 4000), @__size_Value_2='?' (DbType = Int32), @__waist_Value_3='?' (DbType = Int32), @__length_Value_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `ProductVariants` AS `p`
    WHERE ((((`p`.`ProductId` = @__productId_0) AND (`p`.`Color` = @__color_1)) AND (`p`.`Size` = @__size_Value_2)) AND (`p`.`Waist` = @__waist_Value_3)) AND (`p`.`Length` = @__length_Value_4))
2025-09-09 19:05:36.704 +03:00 [INF] Executing CreateRangeAsync for entity ProductVariant
2025-09-09 19:05:36.707 +03:00 [INF] 1 ProductVariant entities added successfully (pending save)
2025-09-09 19:05:36.710 +03:00 [INF] Execute AddAdminOpreationAsync
2025-09-09 19:05:36.712 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-09-09 19:05:36.715 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-09-09 19:05:36.890 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 255), @p11='?' (DbType = DateTime), @p12='?' (DbType = DateTime), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime), @p16='?' (DbType = Int32), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ProductVariants` (`Color`, `CreatedAt`, `DeletedAt`, `IsActive`, `Length`, `ModifiedAt`, `ProductId`, `Quantity`, `Size`, `Waist`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT `Id`
FROM `ProductVariants`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-09 19:05:39.076 +03:00 [INF] Successfully added 1 variant(s) to product 1
2025-09-09 19:05:39.080 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-09 19:05:39.085 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.CreateVariants (E-Commerce) in 3028.9817ms
2025-09-09 19:05:39.092 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.CreateVariants (E-Commerce)'
2025-09-09 19:05:39.099 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Products/1/Variants - 201 385 application/json; charset=utf-8 3276.5338ms
2025-09-09 19:06:05.020 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Products/1/Variants - application/json-patch+json 209
2025-09-09 19:06:05.030 +03:00 [INF] CORS policy execution successful.
2025-09-09 19:06:05.034 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 19:06:05.286 +03:00 [INF] Executed DbCommand (136ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-09 19:06:05.327 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.CreateVariants (E-Commerce)'
2025-09-09 19:06:05.355 +03:00 [INF] Route matched with {action = "CreateVariants", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]]] CreateVariants(Int32, System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.CreateProductVariantDto]) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-09-09 19:06:05.431 +03:00 [INF] Adding variants to product: 1
2025-09-09 19:06:05.598 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL)
2025-09-09 19:06:05.852 +03:00 [INF] Checking if variant with color=strin13g, size="S", waist=100, length=200 already exists for product 1
2025-09-09 19:06:05.956 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__productId_0='?' (DbType = Int32), @__color_1='?' (Size = 4000), @__size_Value_2='?' (DbType = Int32), @__waist_Value_3='?' (DbType = Int32), @__length_Value_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `ProductVariants` AS `p`
    WHERE ((((`p`.`ProductId` = @__productId_0) AND (`p`.`Color` = @__color_1)) AND (`p`.`Size` = @__size_Value_2)) AND (`p`.`Waist` = @__waist_Value_3)) AND (`p`.`Length` = @__length_Value_4))
2025-09-09 19:06:05.967 +03:00 [INF] Checking if variant with color=strin1g22, size="S", waist=100, length=200 already exists for product 1
2025-09-09 19:06:06.056 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__productId_0='?' (DbType = Int32), @__color_1='?' (Size = 4000), @__size_Value_2='?' (DbType = Int32), @__waist_Value_3='?' (DbType = Int32), @__length_Value_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `ProductVariants` AS `p`
    WHERE ((((`p`.`ProductId` = @__productId_0) AND (`p`.`Color` = @__color_1)) AND (`p`.`Size` = @__size_Value_2)) AND (`p`.`Waist` = @__waist_Value_3)) AND (`p`.`Length` = @__length_Value_4))
2025-09-09 19:06:06.067 +03:00 [WRN] Duplicate variant found for product 1 (Color=strin1g22, Size="S", Waist=100, Length=200)
2025-09-09 19:06:06.073 +03:00 [INF] Executing CreateRangeAsync for entity ProductVariant
2025-09-09 19:06:06.076 +03:00 [INF] 1 ProductVariant entities added successfully (pending save)
2025-09-09 19:06:06.078 +03:00 [INF] Execute AddAdminOpreationAsync
2025-09-09 19:06:06.080 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-09-09 19:06:06.083 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-09-09 19:06:06.257 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 255), @p11='?' (DbType = DateTime), @p12='?' (DbType = DateTime), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime), @p16='?' (DbType = Int32), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ProductVariants` (`Color`, `CreatedAt`, `DeletedAt`, `IsActive`, `Length`, `ModifiedAt`, `ProductId`, `Quantity`, `Size`, `Waist`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT `Id`
FROM `ProductVariants`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-09 19:06:08.398 +03:00 [INF] Successfully added 1 variant(s) to product 1
2025-09-09 19:06:08.401 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-09 19:06:08.405 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.CreateVariants (E-Commerce) in 3044.7399ms
2025-09-09 19:06:08.412 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.CreateVariants (E-Commerce)'
2025-09-09 19:06:08.415 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Products/1/Variants - 201 386 application/json; charset=utf-8 3394.9904ms
2025-09-09 19:06:10.176 +03:00 [INF] Executed DbCommand (93ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-09-09 19:06:10.440 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Products` SET `Quantity` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-09 19:06:16.806 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Products/1/Variants - application/json-patch+json 211
2025-09-09 19:06:16.919 +03:00 [INF] CORS policy execution successful.
2025-09-09 19:06:16.923 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 19:06:17.107 +03:00 [INF] Executed DbCommand (99ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-09 19:06:17.121 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.CreateVariants (E-Commerce)'
2025-09-09 19:06:17.133 +03:00 [INF] Route matched with {action = "CreateVariants", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]]] CreateVariants(Int32, System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.CreateProductVariantDto]) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-09-09 19:06:17.139 +03:00 [INF] Adding variants to product: 1
2025-09-09 19:06:17.432 +03:00 [INF] Executed DbCommand (191ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL)
2025-09-09 19:06:17.693 +03:00 [INF] Checking if variant with color=strin132g, size="S", waist=100, length=200 already exists for product 1
2025-09-09 19:06:17.805 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__productId_0='?' (DbType = Int32), @__color_1='?' (Size = 4000), @__size_Value_2='?' (DbType = Int32), @__waist_Value_3='?' (DbType = Int32), @__length_Value_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `ProductVariants` AS `p`
    WHERE ((((`p`.`ProductId` = @__productId_0) AND (`p`.`Color` = @__color_1)) AND (`p`.`Size` = @__size_Value_2)) AND (`p`.`Waist` = @__waist_Value_3)) AND (`p`.`Length` = @__length_Value_4))
2025-09-09 19:06:17.815 +03:00 [INF] Checking if variant with color=strin12g22, size="S", waist=100, length=200 already exists for product 1
2025-09-09 19:06:17.903 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__productId_0='?' (DbType = Int32), @__color_1='?' (Size = 4000), @__size_Value_2='?' (DbType = Int32), @__waist_Value_3='?' (DbType = Int32), @__length_Value_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `ProductVariants` AS `p`
    WHERE ((((`p`.`ProductId` = @__productId_0) AND (`p`.`Color` = @__color_1)) AND (`p`.`Size` = @__size_Value_2)) AND (`p`.`Waist` = @__waist_Value_3)) AND (`p`.`Length` = @__length_Value_4))
2025-09-09 19:06:17.912 +03:00 [INF] Executing CreateRangeAsync for entity ProductVariant
2025-09-09 19:06:17.915 +03:00 [INF] 2 ProductVariant entities added successfully (pending save)
2025-09-09 19:06:17.918 +03:00 [INF] Execute AddAdminOpreationAsync
2025-09-09 19:06:17.920 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-09-09 19:06:17.925 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-09-09 19:06:18.104 +03:00 [INF] Executed DbCommand (92ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime), @p12='?' (DbType = DateTime), @p13='?' (DbType = Boolean), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (Size = 255), @p21='?' (DbType = DateTime), @p22='?' (DbType = DateTime), @p23='?' (Size = 4000), @p24='?' (Size = 4000), @p25='?' (DbType = DateTime), @p26='?' (DbType = Int32), @p27='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ProductVariants` (`Color`, `CreatedAt`, `DeletedAt`, `IsActive`, `Length`, `ModifiedAt`, `ProductId`, `Quantity`, `Size`, `Waist`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT `Id`
FROM `ProductVariants`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `ProductVariants` (`Color`, `CreatedAt`, `DeletedAt`, `IsActive`, `Length`, `ModifiedAt`, `ProductId`, `Quantity`, `Size`, `Waist`)
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
SELECT `Id`
FROM `ProductVariants`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-09 19:06:20.256 +03:00 [INF] Successfully added 2 variant(s) to product 1
2025-09-09 19:06:20.263 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-09 19:06:20.268 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.CreateVariants (E-Commerce) in 3130.1326ms
2025-09-09 19:06:20.272 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.CreateVariants (E-Commerce)'
2025-09-09 19:06:20.277 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Products/1/Variants - 201 496 application/json; charset=utf-8 3470.3102ms
2025-09-09 19:06:24.471 +03:00 [INF] Executed DbCommand (92ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-09-09 19:06:24.644 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Products` SET `Quantity` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-09-09 19:06:24.970 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/1 - null null
2025-09-09 19:06:24.982 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 19:06:25.151 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-09 19:06:25.159 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-09 19:06:25.163 +03:00 [INF] Route matched with {action = "GetProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDetailDto]]] GetProduct(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-09 19:06:25.171 +03:00 [INF] Executing GetProduct for ID: 1
2025-09-09 19:06:25.174 +03:00 [INF] Retrieving product by id: 1, isActive: , deletedOnly: 
2025-09-09 19:06:25.176 +03:00 [INF] Getting cache for key: Product:1_active:_deleted:
2025-09-09 19:06:25.403 +03:00 [INF] Cache hit for key: Product:1_active:_deleted:
2025-09-09 19:06:25.432 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDetailDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-09 19:06:25.438 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProduct (E-Commerce) in 267.9636ms
2025-09-09 19:06:25.469 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-09 19:06:25.472 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/1 - 200 1956 application/json; charset=utf-8 501.989ms
2025-09-09 19:06:31.202 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/1 - null null
2025-09-09 19:06:31.310 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 19:06:31.560 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-09 19:06:31.571 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-09 19:06:31.574 +03:00 [INF] Route matched with {action = "GetProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDetailDto]]] GetProduct(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-09 19:06:31.583 +03:00 [INF] Executing GetProduct for ID: 1
2025-09-09 19:06:31.585 +03:00 [INF] Retrieving product by id: 1, isActive: , deletedOnly: 
2025-09-09 19:06:31.588 +03:00 [INF] Getting cache for key: Product:1_active:_deleted:
2025-09-09 19:06:31.812 +03:00 [INF] Cache hit for key: Product:1_active:_deleted:
2025-09-09 19:06:31.816 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDetailDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-09 19:06:31.820 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProduct (E-Commerce) in 241.4681ms
2025-09-09 19:06:31.830 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-09 19:06:31.835 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/1 - 200 1956 application/json; charset=utf-8 633.3254ms
2025-09-09 20:26:02.421 +03:00 [INF] DB tables already exist. Exit install
2025-09-09 20:26:03.655 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-09 20:26:04.719 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-09 20:26:05.486 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-09 20:26:05.690 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-09-09 20:26:05.738 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-09 20:26:05.778 +03:00 [INF] Starting data seeding...
2025-09-09 20:26:05.836 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-09 20:26:06.461 +03:00 [INF] Executed DbCommand (144ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-09 20:26:06.530 +03:00 [INF] Role 'Admin' already exists.
2025-09-09 20:26:06.701 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-09 20:26:06.710 +03:00 [INF] Role 'User' already exists.
2025-09-09 20:26:06.905 +03:00 [INF] Executed DbCommand (88ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-09 20:26:06.996 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-09-09 20:26:06.999 +03:00 [INF] Data seeding completed successfully.
2025-09-09 20:26:08.423 +03:00 [INF] Now listening on: http://localhost:5069
2025-09-09 20:26:08.515 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-09-09 20:26:08.546 +03:00 [INF] Using the following options for SQL Server job storage:
2025-09-09 20:26:08.564 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-09-09 20:26:08.570 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-09-09 20:26:08.953 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-09-09 20:26:08.966 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-09 20:26:09.182 +03:00 [INF] Server mrrobot:20636:81a1c0a2 successfully announced in 184.1957 ms
2025-09-09 20:26:09.411 +03:00 [INF] Hosting environment: Development
2025-09-09 20:26:09.434 +03:00 [INF] Server mrrobot:20636:81a1c0a2 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-09-09 20:26:09.458 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-09-09 20:26:09.689 +03:00 [INF] 1 servers were removed due to timeout
2025-09-09 20:26:09.879 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 925.4355ms
2025-09-09 20:26:10.047 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-09-09 20:26:10.090 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-09 20:26:10.319 +03:00 [INF] Server mrrobot:20636:81a1c0a2 all the dispatchers started
2025-09-09 20:26:10.327 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-09 20:26:10.348 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 303.0479ms
2025-09-09 20:26:10.430 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 103.097ms
2025-09-09 20:26:10.444 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 354.4563ms
2025-09-09 20:26:10.541 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-09-09 20:26:10.961 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 420.0908ms
2025-09-09 23:42:43.294 +03:00 [INF] DB tables already exist. Exit install
2025-09-09 23:42:44.725 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-09 23:42:45.954 +03:00 [INF] Executed DbCommand (99ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-09 23:42:46.727 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-09 23:42:46.926 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-09-09 23:42:46.949 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-09 23:42:46.993 +03:00 [INF] Starting data seeding...
2025-09-09 23:42:47.024 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-09 23:42:47.617 +03:00 [INF] Executed DbCommand (153ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-09 23:42:47.707 +03:00 [INF] Role 'Admin' already exists.
2025-09-09 23:42:47.878 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-09 23:42:47.911 +03:00 [INF] Role 'User' already exists.
2025-09-09 23:42:48.102 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-09 23:42:48.223 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-09-09 23:42:48.225 +03:00 [INF] Data seeding completed successfully.
2025-09-09 23:42:49.953 +03:00 [INF] Now listening on: http://localhost:5069
2025-09-09 23:42:50.043 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-09-09 23:42:50.047 +03:00 [INF] Using the following options for SQL Server job storage:
2025-09-09 23:42:50.050 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-09-09 23:42:50.057 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-09-09 23:42:50.118 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-09 23:42:50.157 +03:00 [INF] Hosting environment: Development
2025-09-09 23:42:50.175 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-09-09 23:42:50.303 +03:00 [INF] Server mrrobot:6108:1b4d5310 successfully announced in 183.3903 ms
2025-09-09 23:42:50.333 +03:00 [INF] Server mrrobot:6108:1b4d5310 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-09-09 23:42:50.715 +03:00 [INF] Server mrrobot:6108:1b4d5310 all the dispatchers started
2025-09-09 23:42:51.125 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-09-09 23:42:51.841 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 719.2758ms
2025-09-09 23:42:51.877 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-09-09 23:42:51.939 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-09 23:42:51.974 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-09 23:42:51.997 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 120.4097ms
2025-09-09 23:42:52.048 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 73.3622ms
2025-09-09 23:42:52.196 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 257.3326ms
2025-09-09 23:42:52.397 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-09-09 23:42:52.795 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 397.4277ms
2025-09-09 23:42:59.171 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-09-09 23:42:59.663 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 492.5749ms
2025-09-09 23:43:00.455 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/favicon.ico - null null
2025-09-09 23:43:01.247 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-09 23:43:01.554 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 23:43:01.590 +03:00 [INF] No cached response available for this request.
2025-09-09 23:43:01.615 +03:00 [INF] The response could not be cached for this request.
2025-09-09 23:43:01.621 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/favicon.ico - 404 0 null 1165.0607ms
2025-09-09 23:43:01.640 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5069/favicon.ico, Response status code: 404
2025-09-09 23:45:03.608 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Account/login - application/json 70
2025-09-09 23:45:03.667 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-09-09 23:45:03.750 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-09-09 23:45:03.757 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 23:45:03.764 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-09-09 23:45:03.809 +03:00 [INF] Route matched with {action = "LoginAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.TokenDtos.TokensDto]]] LoginAsync(E_Commerce.DtoModels.AccountDtos.LoginDTo) on controller E_Commerce.Controllers.AccountController (E-Commerce).
2025-09-09 23:45:04.245 +03:00 [INF] In LoginAsync Method 
2025-09-09 23:45:04.412 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-09 23:45:04.634 +03:00 [INF] üîê Generating Access Token for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-09 23:45:04.647 +03:00 [INF] üîê Generating Access Token for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-09 23:45:04.870 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedUserName` = @__normalizedUserName_0)
LIMIT 1
2025-09-09 23:45:05.038 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-09 23:45:05.404 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@p22='?' (Size = 255), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p23='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 256), @p15='?' (Size = 256), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `AspNetUsers` SET `AccessFailedCount` = @p0, `Age` = @p1, `ConcurrencyStamp` = @p2, `CreateAt` = @p3, `DeletedAt` = @p4, `Email` = @p5, `EmailConfirmed` = @p6, `Gender` = @p7, `ImageId` = @p8, `ImageId1` = @p9, `LastVisit` = @p10, `LockoutEnabled` = @p11, `LockoutEnd` = @p12, `Name` = @p13, `NormalizedEmail` = @p14, `NormalizedUserName` = @p15, `PasswordHash` = @p16, `PhoneNumber` = @p17, `PhoneNumberConfirmed` = @p18, `SecurityStamp` = @p19, `TwoFactorEnabled` = @p20, `UserName` = @p21
WHERE `Id` = @p22 AND `ConcurrencyStamp` = @p23;
SELECT ROW_COUNT();
2025-09-09 23:45:05.681 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-09-09 23:45:05.744 +03:00 [INF] ‚úÖ Access Token generated successfully for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-09 23:45:05.750 +03:00 [INF] üîë Generating Refresh Token for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-09 23:45:05.975 +03:00 [INF] ‚úÖ RefreshToken generated and stored for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-09 23:45:06.062 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.TokenDtos.TokensDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-09 23:45:06.120 +03:00 [INF] Executed action E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce) in 2290.6662ms
2025-09-09 23:45:06.169 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-09-09 23:45:06.207 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Account/login - 200 1251 application/json; charset=utf-8 2599.3593ms
2025-09-09 23:47:24.540 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/AdminOperation - null null
2025-09-09 23:47:24.616 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 23:47:24.915 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-09 23:47:24.927 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.AdminOperationController.GetAllOperation (E-Commerce)'
2025-09-09 23:47:24.937 +03:00 [INF] Route matched with {action = "GetAllOperation", controller = "AdminOperation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.ResponseDto]] GetAllOperation() on controller E_Commerce.Controllers.AdminOperationController (E-Commerce).
2025-09-09 23:47:24.952 +03:00 [INF] Execute GetAllOperation
2025-09-09 23:47:24.960 +03:00 [INF] Execute GetAllOpreationsAsync
2025-09-09 23:47:24.967 +03:00 [INF] Execute GetAll for entity AdminOperationsLog
2025-09-09 23:47:25.138 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `adminOperationsLogs` AS `a`)
2025-09-09 23:47:25.549 +03:00 [INF] Executed DbCommand (196ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Description`, CAST(`a`.`Id` AS char), `a`.`ItemId`, `t`.`Name`, `a`.`OperationType`, `a`.`Timestamp`
FROM `adminOperationsLogs` AS `a`
INNER JOIN (
    SELECT `a0`.`Id`, `a0`.`Name`
    FROM `AspNetUsers` AS `a0`
    WHERE `a0`.`Discriminator` = 'Customer'
) AS `t` ON `a`.`AdminId` = `t`.`Id`
2025-09-09 23:47:25.573 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.ResponseDto'.
2025-09-09 23:47:25.605 +03:00 [INF] Executed action E_Commerce.Controllers.AdminOperationController.GetAllOperation (E-Commerce) in 658.8537ms
2025-09-09 23:47:25.610 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.AdminOperationController.GetAllOperation (E-Commerce)'
2025-09-09 23:47:25.616 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/AdminOperation - 200 66450 application/json; charset=utf-8 1075.4202ms
2025-09-09 23:47:59.038 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products?search=string&isActive=true&includeDeleted=true&page=1&pageSize=10 - null null
2025-09-09 23:47:59.049 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 23:47:59.206 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-09 23:47:59.212 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProducts (E-Commerce)'
2025-09-09 23:47:59.229 +03:00 [INF] Route matched with {action = "GetProducts", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] GetProducts(System.String, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-09 23:47:59.280 +03:00 [INF] Getting cache for key: advsearch_string_________False_1_10_True_True
2025-09-09 23:47:59.601 +03:00 [WRN] Cache miss for key: advsearch_string_________False_1_10_True_True
2025-09-09 23:47:59.608 +03:00 [INF] Execute GetAll for entity Product
2025-09-09 23:47:59.939 +03:00 [INF] Executed DbCommand (95ms) [Parameters=[@__8__locals1_searchCriteria_SearchTerm_0_contains='?' (Size = 20), @__8__locals1_searchCriteria_SearchTerm_0_contains_1='?' (Size = 50), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`SubCategoryId`, `t`.`Price`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`fitType`, `t`.`IsActive`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `t`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `t`.`Price`)
    ELSE `t`.`Price`
END, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`EndDate`
    ELSE NULL
END, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
    ELSE NULL
END, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
    ELSE 0.0
END, `d`.`Id`, `i`.`Id`, `i`.`Url`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`IsActive` AND (`p`.`DeletedAt` IS NOT NULL)) AND ((`p`.`Name` LIKE @__8__locals1_searchCriteria_SearchTerm_0_contains) OR (`p`.`Description` LIKE @__8__locals1_searchCriteria_SearchTerm_0_contains_1))
    ORDER BY `p`.`Name`
    LIMIT @__p_2 OFFSET @__p_1
) AS `t`
LEFT JOIN `Discount` AS `d` ON `t`.`DiscountId` = `d`.`Id`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`ProductId`
ORDER BY `t`.`Name`, `t`.`Id`, `d`.`Id`
2025-09-09 23:47:59.968 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-09 23:47:59.975 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProducts (E-Commerce) in 738.6251ms
2025-09-09 23:47:59.992 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProducts (E-Commerce)'
2025-09-09 23:48:00.030 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products?search=string&isActive=true&includeDeleted=true&page=1&pageSize=10 - 404 254 application/json; charset=utf-8 991.9104ms
2025-09-09 23:48:09.159 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products?page=1&pageSize=10 - null null
2025-09-09 23:48:09.171 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 23:48:09.332 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-09 23:48:09.341 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProducts (E-Commerce)'
2025-09-09 23:48:09.345 +03:00 [INF] Route matched with {action = "GetProducts", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] GetProducts(System.String, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-09 23:48:09.359 +03:00 [INF] Getting cache for key: advsearch__________False_1_10__
2025-09-09 23:48:09.632 +03:00 [WRN] Cache miss for key: advsearch__________False_1_10__
2025-09-09 23:48:09.638 +03:00 [INF] Execute GetAll for entity Product
2025-09-09 23:48:09.853 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`SubCategoryId`, `t`.`Price`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`fitType`, `t`.`IsActive`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `t`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `t`.`Price`)
    ELSE `t`.`Price`
END, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`EndDate`
    ELSE NULL
END, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
    ELSE NULL
END, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
    ELSE 0.0
END, `d`.`Id`, `i`.`Id`, `i`.`Url`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    ORDER BY `p`.`Name`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Discount` AS `d` ON `t`.`DiscountId` = `d`.`Id`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`ProductId`
ORDER BY `t`.`Name`, `t`.`Id`, `d`.`Id`
2025-09-09 23:48:11.150 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-09 23:48:11.187 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProducts (E-Commerce) in 1836.0813ms
2025-09-09 23:48:11.202 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProducts (E-Commerce)'
2025-09-09 23:48:11.207 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products?page=1&pageSize=10 - 200 8777 application/json; charset=utf-8 2048.125ms
2025-09-09 23:48:13.772 +03:00 [INF] Setting cache for key: advsearch__________False_1_10__
2025-09-09 23:48:14.134 +03:00 [INF] Cache set successfully for key: advsearch__________False_1_10__ with tags: [product_search]
2025-09-09 23:49:43.148 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Products/advanced-search?page=1&pageSize=10 - application/json 27
2025-09-09 23:49:43.162 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 23:49:43.338 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-09 23:49:43.360 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.AdvancedSearch (E-Commerce)'
2025-09-09 23:49:43.393 +03:00 [INF] Route matched with {action = "AdvancedSearch", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] AdvancedSearch(E_Commerce.Services.ProductServices.AdvancedSearchDto, Int32, Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-09 23:49:43.648 +03:00 [INF] Getting cache for key: advsearch_______True___False_1_10__
2025-09-09 23:49:43.865 +03:00 [WRN] Cache miss for key: advsearch_______True___False_1_10__
2025-09-09 23:49:43.870 +03:00 [INF] Execute GetAll for entity Product
2025-09-09 23:49:44.061 +03:00 [INF] Executed DbCommand (93ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`SubCategoryId`, `t`.`Price`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`fitType`, `t`.`IsActive`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `t`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `t`.`Price`)
    ELSE `t`.`Price`
END, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`EndDate`
    ELSE NULL
END, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
    ELSE NULL
END, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
    ELSE 0.0
END, `d`.`Id`, `i`.`Id`, `i`.`Url`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE `p`.`Quantity` > 0
    ORDER BY `p`.`Name`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Discount` AS `d` ON `t`.`DiscountId` = `d`.`Id`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`ProductId`
ORDER BY `t`.`Name`, `t`.`Id`, `d`.`Id`
2025-09-09 23:49:45.042 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-09 23:49:45.055 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.AdvancedSearch (E-Commerce) in 1490.4752ms
2025-09-09 23:49:45.062 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.AdvancedSearch (E-Commerce)'
2025-09-09 23:49:45.075 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Products/advanced-search?page=1&pageSize=10 - 200 1297 application/json; charset=utf-8 1926.6493ms
2025-09-09 23:49:46.653 +03:00 [INF] Setting cache for key: advsearch_______True___False_1_10__
2025-09-09 23:49:46.891 +03:00 [INF] Cache set successfully for key: advsearch_______True___False_1_10__ with tags: [product_search]
2025-09-09 23:50:24.391 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/3799?6 - null null
2025-09-09 23:50:24.457 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 23:50:24.629 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-09 23:50:24.639 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-09 23:50:24.656 +03:00 [INF] Route matched with {action = "GetProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDetailDto]]] GetProduct(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-09 23:50:24.663 +03:00 [INF] Executing GetProduct for ID: 3799
2025-09-09 23:50:24.680 +03:00 [INF] Retrieving product by id: 3799, isActive: , deletedOnly: 
2025-09-09 23:50:24.688 +03:00 [INF] Getting cache for key: Product:3799_active:_deleted:
2025-09-09 23:50:25.010 +03:00 [WRN] Cache miss for key: Product:3799_active:_deleted:
2025-09-09 23:50:25.019 +03:00 [INF] Execute GetAll for entity Product
2025-09-09 23:50:25.073 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-09 23:50:25.286 +03:00 [INF] Executed DbCommand (115ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`fitType`, `t`.`IsActive`, `t`.`c`, `t`.`Price`, `t`.`SubCategoryId`, `t`.`c0`, `t`.`Id0`, `t`.`DiscountPercent`, `t`.`IsActive0`, `t`.`StartDate`, `t`.`EndDate`, `t`.`Name0`, `t`.`Description0`, `t0`.`Id`, `t0`.`Url`, `t1`.`Id`, `t1`.`Color`, `t1`.`Size`, `t1`.`Waist`, `t1`.`Length`, `t1`.`Quantity`, `t1`.`ProductId`
FROM (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`fitType`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `c`, `p`.`Price`, `p`.`SubCategoryId`, (`d`.`Id` IS NOT NULL AND (`d`.`DeletedAt` IS NULL)) AND (`d`.`EndDate` > UTC_TIMESTAMP()) AS `c0`, `d`.`Id` AS `Id0`, `d`.`DiscountPercent`, `d`.`IsActive` AS `IsActive0`, `d`.`StartDate`, `d`.`EndDate`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE `p`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
LEFT JOIN (
    SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity`, `p0`.`ProductId`
    FROM `ProductVariants` AS `p0`
    WHERE `p0`.`DeletedAt` IS NULL AND (`p0`.`Quantity` <> 0)
) AS `t1` ON `t`.`Id` = `t1`.`ProductId`
ORDER BY `t`.`Id`, `t`.`Id0`, `t0`.`Id`
2025-09-09 23:50:25.302 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDetailDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-09 23:50:25.310 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProduct (E-Commerce) in 649.8063ms
2025-09-09 23:50:25.318 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-09 23:50:25.322 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/3799?6 - 404 196 application/json; charset=utf-8 930.4737ms
2025-09-09 23:50:39.760 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/3799?isActive=true&includeDeleted=false&6 - null null
2025-09-09 23:50:39.772 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 23:50:39.973 +03:00 [INF] Executed DbCommand (106ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-09 23:50:39.986 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-09 23:50:39.992 +03:00 [INF] Route matched with {action = "GetProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDetailDto]]] GetProduct(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-09 23:50:40.003 +03:00 [INF] Executing GetProduct for ID: 3799
2025-09-09 23:50:40.006 +03:00 [INF] Retrieving product by id: 3799, isActive: True, deletedOnly: False
2025-09-09 23:50:40.010 +03:00 [INF] Getting cache for key: Product:3799_active:True_deleted:False
2025-09-09 23:50:40.239 +03:00 [WRN] Cache miss for key: Product:3799_active:True_deleted:False
2025-09-09 23:50:40.260 +03:00 [INF] Execute GetAll for entity Product
2025-09-09 23:50:40.297 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-09 23:50:40.518 +03:00 [INF] Executed DbCommand (98ms) [Parameters=[@__id_0='?' (DbType = Int32), @__isActive_1='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`fitType`, `t`.`IsActive`, `t`.`c`, `t`.`Price`, `t`.`SubCategoryId`, `t`.`c0`, `t`.`Id0`, `t`.`DiscountPercent`, `t`.`IsActive0`, `t`.`StartDate`, `t`.`EndDate`, `t`.`Name0`, `t`.`Description0`, `t0`.`Id`, `t0`.`Url`, `t1`.`Id`, `t1`.`Color`, `t1`.`Size`, `t1`.`Waist`, `t1`.`Length`, `t1`.`Quantity`, `t1`.`ProductId`
FROM (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`fitType`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `c`, `p`.`Price`, `p`.`SubCategoryId`, (`d`.`Id` IS NOT NULL AND (`d`.`DeletedAt` IS NULL)) AND (`d`.`EndDate` > UTC_TIMESTAMP()) AS `c0`, `d`.`Id` AS `Id0`, `d`.`DiscountPercent`, `d`.`IsActive` AS `IsActive0`, `d`.`StartDate`, `d`.`EndDate`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL) AND (`p`.`IsActive` = @__isActive_1)
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
LEFT JOIN (
    SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity`, `p0`.`ProductId`
    FROM `ProductVariants` AS `p0`
    WHERE `p0`.`DeletedAt` IS NULL AND (`p0`.`Quantity` <> 0)
) AS `t1` ON `t`.`Id` = `t1`.`ProductId`
ORDER BY `t`.`Id`, `t`.`Id0`, `t0`.`Id`
2025-09-09 23:50:40.535 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDetailDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-09 23:50:40.539 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProduct (E-Commerce) in 537.9907ms
2025-09-09 23:50:40.543 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-09 23:50:40.545 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/3799?isActive=true&includeDeleted=false&6 - 404 196 application/json; charset=utf-8 785.206ms
2025-09-09 23:50:49.001 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/3799?isActive=false&includeDeleted=false&6 - null null
2025-09-09 23:50:49.018 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 23:50:49.180 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-09 23:50:49.190 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-09 23:50:49.193 +03:00 [INF] Route matched with {action = "GetProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDetailDto]]] GetProduct(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-09 23:50:49.204 +03:00 [INF] Executing GetProduct for ID: 3799
2025-09-09 23:50:49.207 +03:00 [INF] Retrieving product by id: 3799, isActive: False, deletedOnly: False
2025-09-09 23:50:49.210 +03:00 [INF] Getting cache for key: Product:3799_active:False_deleted:False
2025-09-09 23:50:49.428 +03:00 [WRN] Cache miss for key: Product:3799_active:False_deleted:False
2025-09-09 23:50:49.477 +03:00 [INF] Execute GetAll for entity Product
2025-09-09 23:50:49.658 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__id_0='?' (DbType = Int32), @__isActive_1='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`fitType`, `t`.`IsActive`, `t`.`c`, `t`.`Price`, `t`.`SubCategoryId`, `t`.`c0`, `t`.`Id0`, `t`.`DiscountPercent`, `t`.`IsActive0`, `t`.`StartDate`, `t`.`EndDate`, `t`.`Name0`, `t`.`Description0`, `t0`.`Id`, `t0`.`Url`, `t1`.`Id`, `t1`.`Color`, `t1`.`Size`, `t1`.`Waist`, `t1`.`Length`, `t1`.`Quantity`, `t1`.`ProductId`
FROM (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`fitType`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `c`, `p`.`Price`, `p`.`SubCategoryId`, (`d`.`Id` IS NOT NULL AND (`d`.`DeletedAt` IS NULL)) AND (`d`.`EndDate` > UTC_TIMESTAMP()) AS `c0`, `d`.`Id` AS `Id0`, `d`.`DiscountPercent`, `d`.`IsActive` AS `IsActive0`, `d`.`StartDate`, `d`.`EndDate`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL) AND (`p`.`IsActive` = @__isActive_1)
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
LEFT JOIN (
    SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity`, `p0`.`ProductId`
    FROM `ProductVariants` AS `p0`
    WHERE `p0`.`DeletedAt` IS NULL AND (`p0`.`Quantity` <> 0)
) AS `t1` ON `t`.`Id` = `t1`.`ProductId`
ORDER BY `t`.`Id`, `t`.`Id0`, `t0`.`Id`
2025-09-09 23:50:49.670 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDetailDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-09 23:50:49.674 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProduct (E-Commerce) in 471.019ms
2025-09-09 23:50:49.678 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-09 23:50:49.687 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/3799?isActive=false&includeDeleted=false&6 - 404 196 application/json; charset=utf-8 679.6573ms
2025-09-09 23:51:39.328 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/3799?isActive=false&includeDeleted=false&1 - null null
2025-09-09 23:51:39.345 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 23:51:39.515 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-09 23:51:39.524 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-09 23:51:39.530 +03:00 [INF] Route matched with {action = "GetProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDetailDto]]] GetProduct(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-09 23:51:39.539 +03:00 [INF] Executing GetProduct for ID: 3799
2025-09-09 23:51:39.541 +03:00 [INF] Retrieving product by id: 3799, isActive: False, deletedOnly: False
2025-09-09 23:51:39.544 +03:00 [INF] Getting cache for key: Product:3799_active:False_deleted:False
2025-09-09 23:51:39.757 +03:00 [WRN] Cache miss for key: Product:3799_active:False_deleted:False
2025-09-09 23:51:39.765 +03:00 [INF] Execute GetAll for entity Product
2025-09-09 23:51:39.925 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__id_0='?' (DbType = Int32), @__isActive_1='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`fitType`, `t`.`IsActive`, `t`.`c`, `t`.`Price`, `t`.`SubCategoryId`, `t`.`c0`, `t`.`Id0`, `t`.`DiscountPercent`, `t`.`IsActive0`, `t`.`StartDate`, `t`.`EndDate`, `t`.`Name0`, `t`.`Description0`, `t0`.`Id`, `t0`.`Url`, `t1`.`Id`, `t1`.`Color`, `t1`.`Size`, `t1`.`Waist`, `t1`.`Length`, `t1`.`Quantity`, `t1`.`ProductId`
FROM (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`fitType`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `c`, `p`.`Price`, `p`.`SubCategoryId`, (`d`.`Id` IS NOT NULL AND (`d`.`DeletedAt` IS NULL)) AND (`d`.`EndDate` > UTC_TIMESTAMP()) AS `c0`, `d`.`Id` AS `Id0`, `d`.`DiscountPercent`, `d`.`IsActive` AS `IsActive0`, `d`.`StartDate`, `d`.`EndDate`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL) AND (`p`.`IsActive` = @__isActive_1)
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
LEFT JOIN (
    SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity`, `p0`.`ProductId`
    FROM `ProductVariants` AS `p0`
    WHERE `p0`.`DeletedAt` IS NULL AND (`p0`.`Quantity` <> 0)
) AS `t1` ON `t`.`Id` = `t1`.`ProductId`
ORDER BY `t`.`Id`, `t`.`Id0`, `t0`.`Id`
2025-09-09 23:51:39.936 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDetailDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-09 23:51:39.942 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProduct (E-Commerce) in 404.5452ms
2025-09-09 23:51:39.948 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-09 23:51:39.951 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/3799?isActive=false&includeDeleted=false&1 - 404 196 application/json; charset=utf-8 623.3615ms
2025-09-09 23:51:45.140 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/3799?1 - null null
2025-09-09 23:51:45.154 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 23:51:45.318 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-09 23:51:45.343 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-09 23:51:45.347 +03:00 [INF] Route matched with {action = "GetProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDetailDto]]] GetProduct(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-09 23:51:45.357 +03:00 [INF] Executing GetProduct for ID: 3799
2025-09-09 23:51:45.360 +03:00 [INF] Retrieving product by id: 3799, isActive: , deletedOnly: 
2025-09-09 23:51:45.380 +03:00 [INF] Getting cache for key: Product:3799_active:_deleted:
2025-09-09 23:51:45.695 +03:00 [WRN] Cache miss for key: Product:3799_active:_deleted:
2025-09-09 23:51:45.698 +03:00 [INF] Execute GetAll for entity Product
2025-09-09 23:51:45.861 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`fitType`, `t`.`IsActive`, `t`.`c`, `t`.`Price`, `t`.`SubCategoryId`, `t`.`c0`, `t`.`Id0`, `t`.`DiscountPercent`, `t`.`IsActive0`, `t`.`StartDate`, `t`.`EndDate`, `t`.`Name0`, `t`.`Description0`, `t0`.`Id`, `t0`.`Url`, `t1`.`Id`, `t1`.`Color`, `t1`.`Size`, `t1`.`Waist`, `t1`.`Length`, `t1`.`Quantity`, `t1`.`ProductId`
FROM (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`fitType`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `c`, `p`.`Price`, `p`.`SubCategoryId`, (`d`.`Id` IS NOT NULL AND (`d`.`DeletedAt` IS NULL)) AND (`d`.`EndDate` > UTC_TIMESTAMP()) AS `c0`, `d`.`Id` AS `Id0`, `d`.`DiscountPercent`, `d`.`IsActive` AS `IsActive0`, `d`.`StartDate`, `d`.`EndDate`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE `p`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
LEFT JOIN (
    SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity`, `p0`.`ProductId`
    FROM `ProductVariants` AS `p0`
    WHERE `p0`.`DeletedAt` IS NULL AND (`p0`.`Quantity` <> 0)
) AS `t1` ON `t`.`Id` = `t1`.`ProductId`
ORDER BY `t`.`Id`, `t`.`Id0`, `t0`.`Id`
2025-09-09 23:51:45.871 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDetailDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-09 23:51:45.876 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProduct (E-Commerce) in 521.0705ms
2025-09-09 23:51:45.880 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-09 23:51:45.884 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/3799?1 - 404 196 application/json; charset=utf-8 743.8136ms
2025-09-09 23:52:16.569 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/3799?2 - null null
2025-09-09 23:52:16.578 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 23:52:16.729 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-09 23:52:16.736 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-09 23:52:16.740 +03:00 [INF] Route matched with {action = "GetProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDetailDto]]] GetProduct(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-09 23:52:16.748 +03:00 [INF] Executing GetProduct for ID: 3799
2025-09-09 23:52:16.752 +03:00 [INF] Retrieving product by id: 3799, isActive: , deletedOnly: 
2025-09-09 23:52:16.754 +03:00 [INF] Getting cache for key: Product:3799_active:_deleted:
2025-09-09 23:52:17.030 +03:00 [WRN] Cache miss for key: Product:3799_active:_deleted:
2025-09-09 23:52:17.033 +03:00 [INF] Execute GetAll for entity Product
2025-09-09 23:52:17.190 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`fitType`, `t`.`IsActive`, `t`.`c`, `t`.`Price`, `t`.`SubCategoryId`, `t`.`c0`, `t`.`Id0`, `t`.`DiscountPercent`, `t`.`IsActive0`, `t`.`StartDate`, `t`.`EndDate`, `t`.`Name0`, `t`.`Description0`, `t0`.`Id`, `t0`.`Url`, `t1`.`Id`, `t1`.`Color`, `t1`.`Size`, `t1`.`Waist`, `t1`.`Length`, `t1`.`Quantity`, `t1`.`ProductId`
FROM (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`fitType`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `c`, `p`.`Price`, `p`.`SubCategoryId`, (`d`.`Id` IS NOT NULL AND (`d`.`DeletedAt` IS NULL)) AND (`d`.`EndDate` > UTC_TIMESTAMP()) AS `c0`, `d`.`Id` AS `Id0`, `d`.`DiscountPercent`, `d`.`IsActive` AS `IsActive0`, `d`.`StartDate`, `d`.`EndDate`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE `p`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
LEFT JOIN (
    SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity`, `p0`.`ProductId`
    FROM `ProductVariants` AS `p0`
    WHERE `p0`.`DeletedAt` IS NULL AND (`p0`.`Quantity` <> 0)
) AS `t1` ON `t`.`Id` = `t1`.`ProductId`
ORDER BY `t`.`Id`, `t`.`Id0`, `t0`.`Id`
2025-09-09 23:52:17.199 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDetailDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-09 23:52:17.203 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProduct (E-Commerce) in 456.5633ms
2025-09-09 23:52:17.212 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-09 23:52:17.215 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/3799?2 - 404 196 application/json; charset=utf-8 646.3547ms
2025-09-09 23:52:25.023 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/3799?4 - null null
2025-09-09 23:52:25.073 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 23:52:25.230 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-09 23:52:25.242 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-09 23:52:25.246 +03:00 [INF] Route matched with {action = "GetProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDetailDto]]] GetProduct(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-09 23:52:25.257 +03:00 [INF] Executing GetProduct for ID: 3799
2025-09-09 23:52:25.269 +03:00 [INF] Retrieving product by id: 3799, isActive: , deletedOnly: 
2025-09-09 23:52:25.278 +03:00 [INF] Getting cache for key: Product:3799_active:_deleted:
2025-09-09 23:52:25.530 +03:00 [WRN] Cache miss for key: Product:3799_active:_deleted:
2025-09-09 23:52:25.534 +03:00 [INF] Execute GetAll for entity Product
2025-09-09 23:52:25.694 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`fitType`, `t`.`IsActive`, `t`.`c`, `t`.`Price`, `t`.`SubCategoryId`, `t`.`c0`, `t`.`Id0`, `t`.`DiscountPercent`, `t`.`IsActive0`, `t`.`StartDate`, `t`.`EndDate`, `t`.`Name0`, `t`.`Description0`, `t0`.`Id`, `t0`.`Url`, `t1`.`Id`, `t1`.`Color`, `t1`.`Size`, `t1`.`Waist`, `t1`.`Length`, `t1`.`Quantity`, `t1`.`ProductId`
FROM (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`fitType`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `c`, `p`.`Price`, `p`.`SubCategoryId`, (`d`.`Id` IS NOT NULL AND (`d`.`DeletedAt` IS NULL)) AND (`d`.`EndDate` > UTC_TIMESTAMP()) AS `c0`, `d`.`Id` AS `Id0`, `d`.`DiscountPercent`, `d`.`IsActive` AS `IsActive0`, `d`.`StartDate`, `d`.`EndDate`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE `p`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
LEFT JOIN (
    SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity`, `p0`.`ProductId`
    FROM `ProductVariants` AS `p0`
    WHERE `p0`.`DeletedAt` IS NULL AND (`p0`.`Quantity` <> 0)
) AS `t1` ON `t`.`Id` = `t1`.`ProductId`
ORDER BY `t`.`Id`, `t`.`Id0`, `t0`.`Id`
2025-09-09 23:52:25.702 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDetailDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-09 23:52:25.706 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProduct (E-Commerce) in 454.0413ms
2025-09-09 23:52:25.712 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-09 23:52:25.715 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/3799?4 - 404 196 application/json; charset=utf-8 692.4346ms
2025-09-09 23:54:32.968 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-09-09 23:54:33.036 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 68.3773ms
2025-09-09 23:54:33.173 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-09 23:54:33.181 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-09-09 23:54:33.198 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-09 23:54:33.212 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 31.1512ms
2025-09-09 23:54:33.218 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.5335ms
2025-09-09 23:54:33.232 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 34.2965ms
2025-09-09 23:54:33.383 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-09-09 23:54:33.594 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 210.4961ms
2025-09-09 23:54:55.248 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-09-09 23:54:55.271 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 22.5251ms
2025-09-09 23:54:55.435 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-09-09 23:54:55.436 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-09 23:54:55.459 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-09 23:54:55.468 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 33.101ms
2025-09-09 23:54:55.638 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 201.9909ms
2025-09-09 23:54:55.642 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 183.4791ms
2025-09-09 23:54:55.913 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-09-09 23:54:56.075 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 161.1471ms
2025-09-09 23:55:04.550 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/3799?4 - null null
2025-09-09 23:55:04.596 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 23:55:04.864 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-09 23:55:05.200 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-09 23:55:05.235 +03:00 [INF] Route matched with {action = "GetProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDetailDto]]] GetProduct(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-09 23:55:05.352 +03:00 [INF] Executing GetProduct for ID: 3799
2025-09-09 23:55:05.386 +03:00 [INF] Retrieving product by id: 3799, isActive: , deletedOnly: 
2025-09-09 23:55:05.394 +03:00 [INF] Getting cache for key: Product:3799_active:_deleted:
2025-09-09 23:55:05.613 +03:00 [WRN] Cache miss for key: Product:3799_active:_deleted:
2025-09-09 23:55:05.637 +03:00 [INF] Execute GetAll for entity Product
2025-09-09 23:55:05.801 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`fitType`, `t`.`IsActive`, `t`.`c`, `t`.`Price`, `t`.`SubCategoryId`, `t`.`c0`, `t`.`Id0`, `t`.`DiscountPercent`, `t`.`IsActive0`, `t`.`StartDate`, `t`.`EndDate`, `t`.`Name0`, `t`.`Description0`, `t0`.`Id`, `t0`.`Url`, `t1`.`Id`, `t1`.`Color`, `t1`.`Size`, `t1`.`Waist`, `t1`.`Length`, `t1`.`Quantity`, `t1`.`ProductId`
FROM (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`fitType`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `c`, `p`.`Price`, `p`.`SubCategoryId`, (`d`.`Id` IS NOT NULL AND (`d`.`DeletedAt` IS NULL)) AND (`d`.`EndDate` > UTC_TIMESTAMP()) AS `c0`, `d`.`Id` AS `Id0`, `d`.`DiscountPercent`, `d`.`IsActive` AS `IsActive0`, `d`.`StartDate`, `d`.`EndDate`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE `p`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
LEFT JOIN (
    SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity`, `p0`.`ProductId`
    FROM `ProductVariants` AS `p0`
    WHERE `p0`.`DeletedAt` IS NULL AND (`p0`.`Quantity` <> 0)
) AS `t1` ON `t`.`Id` = `t1`.`ProductId`
ORDER BY `t`.`Id`, `t`.`Id0`, `t0`.`Id`
2025-09-09 23:55:05.816 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDetailDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-09 23:55:05.821 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProduct (E-Commerce) in 470.8812ms
2025-09-09 23:55:05.835 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-09 23:55:05.839 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/3799?4 - 404 196 application/json; charset=utf-8 1288.7939ms
2025-09-09 23:55:38.566 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-09-09 23:55:38.579 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 12.8688ms
2025-09-09 23:55:38.665 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-09-09 23:55:38.666 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-09 23:55:38.727 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-09 23:55:38.734 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 69.8469ms
2025-09-09 23:55:38.815 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 149.4218ms
2025-09-09 23:55:38.848 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 120.7624ms
2025-09-09 23:55:39.170 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-09-09 23:55:39.422 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 251.785ms
2025-09-09 23:55:45.959 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/3799?4 - null null
2025-09-09 23:55:45.966 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 23:55:46.119 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-09 23:55:46.128 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-09 23:55:46.134 +03:00 [INF] Route matched with {action = "GetProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDetailDto]]] GetProduct(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-09 23:55:46.141 +03:00 [INF] Executing GetProduct for ID: 3799
2025-09-09 23:55:46.157 +03:00 [INF] Retrieving product by id: 3799, isActive: , deletedOnly: 
2025-09-09 23:55:46.159 +03:00 [INF] Getting cache for key: Product:3799_active:_deleted:
2025-09-09 23:55:46.439 +03:00 [WRN] Cache miss for key: Product:3799_active:_deleted:
2025-09-09 23:55:46.445 +03:00 [INF] Execute GetAll for entity Product
2025-09-09 23:55:46.605 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE `p`.`Id` = @__id_0)
2025-09-09 23:55:46.723 +03:00 [WRN] Product with id: 3799 not found in database
2025-09-09 23:55:46.747 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDetailDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-09 23:55:46.771 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProduct (E-Commerce) in 632.1018ms
2025-09-09 23:55:47.021 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-09 23:55:47.038 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/3799?4 - 404 196 application/json; charset=utf-8 1079.8757ms
2025-09-09 23:56:56.069 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-09-09 23:56:56.244 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 175.7754ms
2025-09-09 23:56:56.289 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-09-09 23:56:56.289 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-09 23:56:56.330 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-09 23:56:56.337 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 48.5932ms
2025-09-09 23:56:56.365 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 75.546ms
2025-09-09 23:56:56.377 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 46.548ms
2025-09-09 23:56:56.521 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-09-09 23:56:56.687 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 165.6938ms
2025-09-09 23:57:02.164 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/3799?4 - null null
2025-09-09 23:57:02.176 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 23:57:02.340 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-09 23:57:02.717 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-09 23:57:02.951 +03:00 [INF] Route matched with {action = "GetProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDetailDto]]] GetProduct(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-09 23:57:02.974 +03:00 [INF] Executing GetProduct for ID: 3799
2025-09-09 23:57:02.993 +03:00 [INF] Fetching product details for Product ID: 3799, IsActive: , DeletedOnly: 
2025-09-09 23:57:03.000 +03:00 [INF] Retrieving product by id: 3799, isActive: , deletedOnly: 
2025-09-09 23:57:03.005 +03:00 [INF] Getting cache for key: Product:3799_active:_deleted:
2025-09-09 23:57:03.261 +03:00 [WRN] Cache miss for key: Product:3799_active:_deleted:
2025-09-09 23:57:03.271 +03:00 [INF] Execute GetAll for entity Product
2025-09-09 23:57:03.441 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE `p`.`Id` = @__id_0)
2025-09-09 23:57:03.487 +03:00 [WRN] Product with id: 3799 not found in database
2025-09-09 23:57:03.489 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDetailDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-09 23:57:03.506 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProduct (E-Commerce) in 532.3308ms
2025-09-09 23:57:03.614 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-09 23:57:03.618 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/3799?4 - 404 196 application/json; charset=utf-8 1453.35ms
2025-09-09 23:58:59.308 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5069/api/Products/6 - application/json 207
2025-09-09 23:58:59.327 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 23:58:59.481 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-09 23:58:59.491 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.UpdateProduct (E-Commerce)'
2025-09-09 23:58:59.498 +03:00 [INF] Route matched with {action = "UpdateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]] UpdateProduct(Int32, E_Commerce.DtoModels.ProductDtos.UpdateProductDto) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-09 23:58:59.529 +03:00 [INF] Executing UpdateProduct for ID: 6
2025-09-09 23:58:59.547 +03:00 [INF] Updating product: 6
2025-09-09 23:58:59.931 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `t`.`Id0`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`CustomerId`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t`.`CategoryId`, `t`.`CreatedAt0`, `t`.`DeletedAt0`, `t`.`Description0`, `t`.`DiscountPercent`, `t`.`EndDate`, `t`.`IsActive0`, `t`.`ModifiedAt0`, `t`.`Name0`, `t`.`StartDate`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`, `d`.`Id` AS `Id0`, `d`.`CategoryId`, `d`.`CreatedAt` AS `CreatedAt0`, `d`.`DeletedAt` AS `DeletedAt0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`EndDate`, `d`.`IsActive` AS `IsActive0`, `d`.`ModifiedAt` AS `ModifiedAt0`, `d`.`Name` AS `Name0`, `d`.`StartDate`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE `p`.`DeletedAt` IS NULL AND (`p`.`Id` = @__id_0)
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`ProductId`
ORDER BY `t`.`Id`, `t`.`Id0`
2025-09-09 23:59:00.113 +03:00 [INF] Executing GetByIdAsync for entity SubCategory with ID: 6323
2025-09-09 23:59:00.199 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
FROM `SubCategories` AS `s`
WHERE `s`.`Id` = @__id_0
LIMIT 1
2025-09-09 23:59:00.226 +03:00 [WRN] SubCategory with ID 6323 not found or deleted
2025-09-09 23:59:00.350 +03:00 [WRN] UpdateProductAsync: SubCategory not found: 6323
2025-09-09 23:59:00.365 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-09 23:59:00.378 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.UpdateProduct (E-Commerce) in 871.7007ms
2025-09-09 23:59:00.392 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.UpdateProduct (E-Commerce)'
2025-09-09 23:59:00.400 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5069/api/Products/6 - 404 206 application/json; charset=utf-8 1092.1821ms
2025-09-09 23:59:14.462 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5069/api/Products/6 - application/json 204
2025-09-09 23:59:14.470 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 23:59:14.630 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-09 23:59:14.641 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.UpdateProduct (E-Commerce)'
2025-09-09 23:59:14.647 +03:00 [INF] Route matched with {action = "UpdateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]] UpdateProduct(Int32, E_Commerce.DtoModels.ProductDtos.UpdateProductDto) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-09 23:59:14.658 +03:00 [INF] Executing UpdateProduct for ID: 6
2025-09-09 23:59:14.663 +03:00 [INF] Updating product: 6
2025-09-09 23:59:14.970 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `t`.`Id0`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`CustomerId`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t`.`CategoryId`, `t`.`CreatedAt0`, `t`.`DeletedAt0`, `t`.`Description0`, `t`.`DiscountPercent`, `t`.`EndDate`, `t`.`IsActive0`, `t`.`ModifiedAt0`, `t`.`Name0`, `t`.`StartDate`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`, `d`.`Id` AS `Id0`, `d`.`CategoryId`, `d`.`CreatedAt` AS `CreatedAt0`, `d`.`DeletedAt` AS `DeletedAt0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`EndDate`, `d`.`IsActive` AS `IsActive0`, `d`.`ModifiedAt` AS `ModifiedAt0`, `d`.`Name` AS `Name0`, `d`.`StartDate`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE `p`.`DeletedAt` IS NULL AND (`p`.`Id` = @__id_0)
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`ProductId`
ORDER BY `t`.`Id`, `t`.`Id0`
2025-09-09 23:59:14.994 +03:00 [INF] Executing GetByIdAsync for entity SubCategory with ID: 1
2025-09-09 23:59:15.074 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
FROM `SubCategories` AS `s`
WHERE `s`.`Id` = @__id_0
LIMIT 1
2025-09-09 23:59:15.157 +03:00 [INF] Execute AddAdminOpreationAsync
2025-09-09 23:59:15.171 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-09-09 23:59:15.243 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-09-09 23:59:17.482 +03:00 [INF] Removing cache by tag: CollectionWithProduct
2025-09-09 23:59:18.162 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 50), @p1='?' (DbType = Int32), @p2='?' (Size = 20), @p3='?' (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p7='?' (Size = 255), @p8='?' (DbType = DateTime), @p9='?' (DbType = DateTime), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Products` SET `Description` = @p0, `Gender` = @p1, `Name` = @p2, `Price` = @p3, `SubCategoryId` = @p4, `fitType` = @p5
WHERE `Id` = @p6;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-09 23:59:18.369 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-09 23:59:18.403 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.UpdateProduct (E-Commerce) in 3746.5017ms
2025-09-09 23:59:18.530 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.UpdateProduct (E-Commerce)'
2025-09-09 23:59:18.534 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5069/api/Products/6 - 200 851 application/json; charset=utf-8 4071.9998ms
2025-09-09 23:59:18.765 +03:00 [INF] Removed 4 cache entries for tag: CollectionWithProduct
2025-09-09 23:59:19.631 +03:00 [INF] Removing cache by tag: subcategorywithdata
2025-09-09 23:59:20.268 +03:00 [INF] Removed 1 cache entries for tag: subcategorywithdata
2025-09-09 23:59:21.926 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-09-09 23:59:22.829 +03:00 [INF] Removed 1 cache entries for tags: [Product, Productwithdata]
2025-09-09 23:59:45.726 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/3799?id=6 - null null
2025-09-09 23:59:45.738 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-09 23:59:45.888 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-09 23:59:45.897 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-09 23:59:45.903 +03:00 [INF] Route matched with {action = "GetProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDetailDto]]] GetProduct(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-09 23:59:45.914 +03:00 [INF] Executing GetProduct for ID: 3799
2025-09-09 23:59:45.920 +03:00 [INF] Fetching product details for Product ID: 3799, IsActive: , DeletedOnly: 
2025-09-09 23:59:45.922 +03:00 [INF] Retrieving product by id: 3799, isActive: , deletedOnly: 
2025-09-09 23:59:45.925 +03:00 [INF] Getting cache for key: Product:3799_active:_deleted:
2025-09-09 23:59:46.138 +03:00 [WRN] Cache miss for key: Product:3799_active:_deleted:
2025-09-09 23:59:46.144 +03:00 [INF] Execute GetAll for entity Product
2025-09-09 23:59:46.292 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE `p`.`Id` = @__id_0)
2025-09-09 23:59:46.327 +03:00 [WRN] Product with id: 3799 not found in database
2025-09-09 23:59:46.345 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDetailDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-09 23:59:46.355 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProduct (E-Commerce) in 441.7738ms
2025-09-09 23:59:46.361 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-09 23:59:46.366 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/3799?id=6 - 404 196 application/json; charset=utf-8 639.8145ms
