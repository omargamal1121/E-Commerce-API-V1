2025-08-25 00:54:51.377 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Products - application/json-patch+json 136
2025-08-25 00:54:51.434 +03:00 [INF] CORS policy execution successful.
2025-08-25 00:54:51.451 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 00:54:51.766 +03:00 [INF] Executed DbCommand (158ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 00:54:51.775 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-08-25 00:54:51.807 +03:00 [INF] Route matched with {action = "CreateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]] CreateProduct(E_Commerce.DtoModels.ProductDtos.CreateProductDto) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-08-25 00:54:51.912 +03:00 [INF] Executing CreateProduct
2025-08-25 00:54:51.922 +03:00 [INF] Creating new product: zV4Ok4bWzFGA6KsVb3uZ
2025-08-25 00:54:52.503 +03:00 [INF] Executed DbCommand (150ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL)
2025-08-25 00:54:52.756 +03:00 [INF] Executed DbCommand (238ms) [Parameters=[@__name_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE `p`.`Name` = @__name_0)
2025-08-25 00:54:52.766 +03:00 [INF] Executing CreateAsync for entity Product
2025-08-25 00:54:52.834 +03:00 [INF] Product added successfully (pending save)
2025-08-25 00:54:52.836 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-25 00:54:52.838 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-25 00:54:52.839 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-25 00:54:53.227 +03:00 [INF] Executed DbCommand (190ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (Size = 20), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (Size = 255), @p13='?' (DbType = DateTime), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (Size = 4000), @p17='?' (DbType = DateTime), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Products` (`CreatedAt`, `DeletedAt`, `Description`, `DiscountId`, `Gender`, `IsActive`, `ModifiedAt`, `Name`, `Price`, `Quantity`, `SubCategoryId`, `fitType`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
SELECT `Id`
FROM `Products`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-25 00:54:55.246 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 00:54:55.269 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce) in 3456.3227ms
2025-08-25 00:54:55.272 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-08-25 00:54:55.275 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Products - 201 455 application/json; charset=utf-8 3899.8487ms
2025-08-25 00:54:58.764 +03:00 [INF] Removing cache by tags: [product_search, categorywithdata, productwithvariantdata, CollectionWithProduct, cart]
2025-08-25 00:55:01.281 +03:00 [INF] Removed 6 cache entries for tags: [product_search, categorywithdata, productwithvariantdata, CollectionWithProduct, cart]
2025-08-25 00:55:03.930 +03:00 [INF] Execution Worker recovered from the Faulted state after 00:03:15.1324859 and is in the Running state now
2025-08-25 00:55:34.204 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Products/1/Variants - application/json-patch+json 87
2025-08-25 00:55:34.211 +03:00 [INF] CORS policy execution successful.
2025-08-25 00:55:34.221 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 00:55:34.501 +03:00 [INF] Executed DbCommand (138ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 00:55:34.513 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.CreateVariant (E-Commerce)'
2025-08-25 00:55:34.525 +03:00 [INF] Route matched with {action = "CreateVariant", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]] CreateVariant(Int32, E_Commerce.DtoModels.ProductDtos.CreateProductVariantDto) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-08-25 00:55:34.550 +03:00 [INF] Adding variant to product: 1
2025-08-25 00:55:34.833 +03:00 [INF] Executed DbCommand (139ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL)
2025-08-25 00:55:34.845 +03:00 [INF] Checking if variant with color=string, size=S, waist=100, length=200 already exists for product 1
2025-08-25 00:55:35.163 +03:00 [INF] Executed DbCommand (149ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `ProductVariants` AS `p`
    WHERE `p`.`ProductId` = @__productid_0)
2025-08-25 00:55:35.590 +03:00 [INF] Executing CreateAsync for entity ProductVariant
2025-08-25 00:55:35.621 +03:00 [INF] ProductVariant added successfully (pending save)
2025-08-25 00:55:35.624 +03:00 [INF] Updating product 1 quantity after adding variant
2025-08-25 00:55:35.700 +03:00 [INF] Recording admin operation for adding variant to product 1 by user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 00:55:35.704 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-25 00:55:35.705 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-25 00:55:35.708 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-25 00:55:35.709 +03:00 [INF] Committing transaction for adding variant to product 1
2025-08-25 00:55:35.765 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'E_Commerce.Context.AppDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-25 00:55:35.775 +03:00 [ERR] Error in AddVariantAsync for productId: 1. Rolling back transaction.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at UnitOfWork.CommitAsync() in D:\project_fashion\E-Commerce-API-main\UOW\UnitOfWork.cs:line 64
   at E_Commerce.Services.ProductServices.ProductVariantService.AddVariantAsync(Int32 productId, CreateProductVariantDto dto, String userId) in D:\project_fashion\E-Commerce-API-main\Services\ProductServices\ProductVariantService.cs:line 355
2025-08-25 00:55:35.823 +03:00 [ERR] An error occurred using a transaction.
2025-08-25 00:55:35.829 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.CreateVariant (E-Commerce) in 1297.4313ms
2025-08-25 00:55:35.834 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.CreateVariant (E-Commerce)'
2025-08-25 00:55:35.842 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: This MySqlConnection is already in use. See https://fl.vu/mysql-conn-reuse
   at MySqlConnector.Core.ServerSession.StartQuerying(ICancellableCommand command) in /_/src/MySqlConnector/Core/ServerSession.cs:line 289
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken)
   at MySqlConnector.MySqlCommand.ExecuteNonQueryAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 309
   at MySqlConnector.MySqlTransaction.DoRollback(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlTransaction.cs:line 269
   at MySqlConnector.MySqlTransaction.RollbackAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlTransaction.cs:line 67
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.RollbackAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.RollbackAsync(CancellationToken cancellationToken)
   at E_Commerce.Services.ProductServices.ProductVariantService.AddVariantAsync(Int32 productId, CreateProductVariantDto dto, String userId) in D:\project_fashion\E-Commerce-API-main\Services\ProductServices\ProductVariantService.cs:line 385
   at E_Commerce.Controllers.ProductVariantController.CreateVariant(Int32 productId, CreateProductVariantDto dto) in D:\project_fashion\E-Commerce-API-main\Controllers\ProductVariantController.cs:line 93
   at lambda_method1380(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at SecurityStampMiddleware.Invoke(HttpContext context) in D:\project_fashion\E-Commerce-API-main\MiddleWares\SecurityStampMiddleware.cs:line 75
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context) in D:\project_fashion\E-Commerce-API-main\Middleware\UserAuthenticationMiddleware.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-25 00:55:35.842 +03:00 [INF] Executed DbCommand (142ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-08-25 00:55:35.906 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Products/1/Variants - 500 null text/plain; charset=utf-8 1702.4994ms
2025-08-25 00:59:34.136 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Products/1/Variants - application/json-patch+json 87
2025-08-25 00:59:34.144 +03:00 [INF] CORS policy execution successful.
2025-08-25 00:59:34.152 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 00:59:34.433 +03:00 [INF] Executed DbCommand (137ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 00:59:34.439 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.CreateVariant (E-Commerce)'
2025-08-25 00:59:34.442 +03:00 [INF] Route matched with {action = "CreateVariant", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]] CreateVariant(Int32, E_Commerce.DtoModels.ProductDtos.CreateProductVariantDto) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-08-25 00:59:34.452 +03:00 [INF] Adding variant to product: 1
2025-08-25 00:59:34.730 +03:00 [INF] Executed DbCommand (138ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL)
2025-08-25 00:59:34.737 +03:00 [INF] Checking if variant with color=string, size=S, waist=100, length=200 already exists for product 1
2025-08-25 00:59:35.014 +03:00 [INF] Executed DbCommand (138ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `ProductVariants` AS `p`
    WHERE `p`.`ProductId` = @__productid_0)
2025-08-25 00:59:35.434 +03:00 [INF] Executing CreateAsync for entity ProductVariant
2025-08-25 00:59:35.438 +03:00 [INF] ProductVariant added successfully (pending save)
2025-08-25 00:59:35.440 +03:00 [INF] Updating product 1 quantity after adding variant
2025-08-25 00:59:35.442 +03:00 [INF] Recording admin operation for adding variant to product 1 by user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 00:59:35.445 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-25 00:59:35.449 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-25 00:59:35.454 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-25 00:59:35.457 +03:00 [INF] Committing transaction for adding variant to product 1
2025-08-25 00:59:35.466 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'E_Commerce.Context.AppDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-25 00:59:35.476 +03:00 [ERR] Error in AddVariantAsync for productId: 1. Rolling back transaction.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at UnitOfWork.CommitAsync() in D:\project_fashion\E-Commerce-API-main\UOW\UnitOfWork.cs:line 64
   at E_Commerce.Services.ProductServices.ProductVariantService.AddVariantAsync(Int32 productId, CreateProductVariantDto dto, String userId) in D:\project_fashion\E-Commerce-API-main\Services\ProductServices\ProductVariantService.cs:line 355
2025-08-25 00:59:35.487 +03:00 [ERR] An error occurred using a transaction.
2025-08-25 00:59:35.490 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.CreateVariant (E-Commerce) in 1040.2585ms
2025-08-25 00:59:35.492 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.CreateVariant (E-Commerce)'
2025-08-25 00:59:35.496 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: This MySqlConnection is already in use. See https://fl.vu/mysql-conn-reuse
   at MySqlConnector.Core.ServerSession.StartQuerying(ICancellableCommand command) in /_/src/MySqlConnector/Core/ServerSession.cs:line 289
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken)
   at MySqlConnector.MySqlCommand.ExecuteNonQueryAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 309
   at MySqlConnector.MySqlTransaction.DoRollback(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlTransaction.cs:line 269
   at MySqlConnector.MySqlTransaction.RollbackAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlTransaction.cs:line 67
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.RollbackAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.RollbackAsync(CancellationToken cancellationToken)
   at E_Commerce.Services.ProductServices.ProductVariantService.AddVariantAsync(Int32 productId, CreateProductVariantDto dto, String userId) in D:\project_fashion\E-Commerce-API-main\Services\ProductServices\ProductVariantService.cs:line 385
   at E_Commerce.Controllers.ProductVariantController.CreateVariant(Int32 productId, CreateProductVariantDto dto) in D:\project_fashion\E-Commerce-API-main\Controllers\ProductVariantController.cs:line 93
   at lambda_method1380(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at SecurityStampMiddleware.Invoke(HttpContext context) in D:\project_fashion\E-Commerce-API-main\MiddleWares\SecurityStampMiddleware.cs:line 75
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context) in D:\project_fashion\E-Commerce-API-main\Middleware\UserAuthenticationMiddleware.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-25 00:59:35.522 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Products/1/Variants - 500 null text/plain; charset=utf-8 1385.3021ms
2025-08-25 00:59:35.598 +03:00 [ERR] Failed executing DbCommand (151ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-08-25 00:59:35.605 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'E_Commerce.Context.AppDbContext'.
System.NullReferenceException: Object reference not set to an instance of an object.
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 117
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.NullReferenceException: Object reference not set to an instance of an object.
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 117
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-08-25 01:13:16.037 +03:00 [INF] DB tables already exist. Exit install
2025-08-25 01:13:18.831 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-25 01:13:20.867 +03:00 [INF] Executed DbCommand (163ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-25 01:13:22.299 +03:00 [INF] Executed DbCommand (147ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-25 01:13:22.663 +03:00 [INF] Executed DbCommand (205ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-25 01:13:22.689 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-25 01:13:22.720 +03:00 [INF] Starting data seeding...
2025-08-25 01:13:22.770 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-25 01:13:23.795 +03:00 [INF] Executed DbCommand (262ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-25 01:13:23.922 +03:00 [INF] Role 'Admin' already exists.
2025-08-25 01:13:24.302 +03:00 [INF] Executed DbCommand (204ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-25 01:13:24.309 +03:00 [INF] Role 'User' already exists.
2025-08-25 01:13:24.712 +03:00 [INF] Executed DbCommand (205ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-25 01:13:24.860 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-25 01:13:24.861 +03:00 [INF] Data seeding completed successfully.
2025-08-25 01:13:27.263 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-25 01:13:27.500 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-25 01:13:27.508 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-25 01:13:27.586 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-25 01:13:27.595 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-25 01:13:27.754 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-25 01:13:28.048 +03:00 [INF] Hosting environment: Development
2025-08-25 01:13:28.113 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-25 01:13:28.131 +03:00 [INF] Server mrrobot:14260:16e938f4 successfully announced in 328.1373 ms
2025-08-25 01:13:28.176 +03:00 [INF] Server mrrobot:14260:16e938f4 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-25 01:13:28.970 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-25 01:13:29.579 +03:00 [INF] Server mrrobot:14260:16e938f4 all the dispatchers started
2025-08-25 01:13:30.160 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 1437.922ms
2025-08-25 01:13:30.227 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 01:13:30.195 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-25 01:13:30.369 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 01:13:30.390 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 194.7309ms
2025-08-25 01:13:30.452 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 83.4096ms
2025-08-25 01:13:30.556 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 329.0507ms
2025-08-25 01:13:30.628 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-25 01:13:31.151 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 523.5378ms
2025-08-25 01:14:29.448 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Products/1/Variants - application/json-patch+json 87
2025-08-25 01:14:29.511 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:14:29.517 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-25 01:14:30.018 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:14:30.294 +03:00 [INF] Executed DbCommand (109ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 01:14:30.328 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Products/1/Variants - 401 null application/json 880.3042ms
2025-08-25 01:15:15.722 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Products/1/Variants - application/json-patch+json 87
2025-08-25 01:15:15.731 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:15:15.805 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:15:16.470 +03:00 [INF] Executed DbCommand (307ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 01:15:16.563 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.CreateVariant (E-Commerce)'
2025-08-25 01:15:16.629 +03:00 [INF] Route matched with {action = "CreateVariant", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]] CreateVariant(Int32, E_Commerce.DtoModels.ProductDtos.CreateProductVariantDto) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-08-25 01:15:17.273 +03:00 [INF] Adding variant to product: 1
2025-08-25 01:15:17.600 +03:00 [INF] Executed DbCommand (204ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL)
2025-08-25 01:15:17.614 +03:00 [INF] Checking if variant with color=string, size=S, waist=100, length=200 already exists for product 1
2025-08-25 01:15:18.006 +03:00 [INF] Executed DbCommand (204ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `ProductVariants` AS `p`
    WHERE `p`.`ProductId` = @__productid_0)
2025-08-25 01:15:18.772 +03:00 [INF] Executing CreateAsync for entity ProductVariant
2025-08-25 01:15:18.978 +03:00 [INF] ProductVariant added successfully (pending save)
2025-08-25 01:15:29.387 +03:00 [INF] Updating product 1 quantity after adding variant
2025-08-25 01:15:38.076 +03:00 [INF] Executed DbCommand (1,122ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-08-25 01:15:39.423 +03:00 [INF] Recording admin operation for adding variant to product 1 by user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:15:42.716 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-25 01:16:05.503 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-25 01:16:07.136 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-25 01:16:23.027 +03:00 [INF] Committing transaction for adding variant to product 1
2025-08-25 01:16:26.392 +03:00 [INF] Executed DbCommand (99ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p12='?' (Size = 255), @p13='?' (DbType = DateTime), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (Size = 4000), @p17='?' (DbType = DateTime), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ProductVariants` (`Color`, `CreatedAt`, `DeletedAt`, `IsActive`, `Length`, `ModifiedAt`, `ProductId`, `Quantity`, `Size`, `Waist`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT `Id`
FROM `ProductVariants`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

UPDATE `Products` SET `Quantity` = @p10
WHERE `Id` = @p11;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-25 01:16:30.243 +03:00 [INF] Successfully added variant to product 1
2025-08-25 01:16:46.071 +03:00 [INF] Removing product caches after adding variant to product 1
2025-08-25 01:16:53.269 +03:00 [INF] Successfully completed adding variant (ID: 1) to product 1
2025-08-25 01:16:56.767 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 01:16:56.849 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.CreateVariant (E-Commerce) in 100186.3404ms
2025-08-25 01:16:56.855 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.CreateVariant (E-Commerce)'
2025-08-25 01:16:56.866 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Products/1/Variants - 201 306 application/json; charset=utf-8 101125.3658ms
2025-08-25 01:16:58.394 +03:00 [INF] Removing cache by tags: [productwithvariantdata, product_search, variantdata]
2025-08-25 01:16:59.098 +03:00 [WRN] No cache entries found for tags: [productwithvariantdata, product_search, variantdata]
2025-08-25 01:18:14.810 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-25 01:18:14.856 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 46.7131ms
2025-08-25 01:18:14.921 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-25 01:18:14.928 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 6.6257ms
2025-08-25 01:18:14.948 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 01:18:14.963 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 01:18:14.998 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 49.9876ms
2025-08-25 01:18:15.093 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 130.0793ms
2025-08-25 01:18:15.732 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-25 01:18:16.049 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 316.5514ms
2025-08-25 01:18:29.302 +03:00 [INF] 1 servers were removed due to timeout
2025-08-25 01:18:47.717 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json-patch+json 62
2025-08-25 01:18:47.733 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:18:47.753 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:18:47.762 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-08-25 01:18:47.775 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-08-25 01:18:47.783 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 401 0 null 65.9358ms
2025-08-25 01:19:06.602 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json-patch+json 62
2025-08-25 01:19:06.610 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:19:06.619 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:19:06.633 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-08-25 01:19:06.637 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-08-25 01:19:06.643 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 401 0 null 41.0493ms
2025-08-25 01:19:20.920 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json-patch+json 62
2025-08-25 01:19:20.924 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:19:20.925 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:19:21.105 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 01:19:21.113 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-08-25 01:19:21.138 +03:00 [INF] Route matched with {action = "AddItemToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] AddItemToCart(E_Commerce.DtoModels.CartDtos.CreateCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-08-25 01:19:21.173 +03:00 [INF] Executing AddItemToCart for product ID: 1
2025-08-25 01:19:21.193 +03:00 [INF] Adding item to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 1
2025-08-25 01:19:21.592 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-08-25 01:19:21.605 +03:00 [INF] Execute GetAll for entity Product
2025-08-25 01:19:21.848 +03:00 [INF] Executed DbCommand (117ms) [Parameters=[@__itemDto_ProductId_0='?' (DbType = Int32), @__itemDto_ProductVariantId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Price`, `t`.`c`, `t`.`EndDate`, `t`.`StartDate`, `t`.`DiscountPercent`, `t`.`DeletedAt`, `t`.`IsActive`, `t0`.`Id`, `t0`.`Quantity`, `t0`.`c`
FROM (
    SELECT `p`.`Id`, `p`.`Price`, `d`.`Id` IS NOT NULL AS `c`, `d`.`EndDate`, `d`.`StartDate`, `d`.`DiscountPercent`, `d`.`DeletedAt`, `d`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__itemDto_ProductId_0) AND `p`.`DeletedAt` IS NULL) AND `p`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Quantity`, `t1`.`c`, `t1`.`ProductId`
    FROM (
        SELECT `p0`.`Id`, `p0`.`Quantity`, 1 AS `c`, `p0`.`ProductId`, ROW_NUMBER() OVER(PARTITION BY `p0`.`ProductId` ORDER BY `p0`.`Id`) AS `row`
        FROM `ProductVariants` AS `p0`
        WHERE (`p0`.`Id` = @__itemDto_ProductVariantId_1) AND `p0`.`IsActive`
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
2025-08-25 01:19:21.990 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 01:19:22.013 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce) in 865.1124ms
2025-08-25 01:19:22.016 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-08-25 01:19:22.020 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 404 227 application/json; charset=utf-8 1099.7599ms
2025-08-25 01:20:05.766 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Products/1/main-image - multipart/form-data; boundary=----WebKitFormBoundaryYdjDAaeHKkfs0dmf 318245
2025-08-25 01:20:05.776 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:20:05.822 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:20:06.246 +03:00 [INF] Executed DbCommand (195ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 01:20:06.253 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.UploadAndSetMainImage (E-Commerce)'
2025-08-25 01:20:06.264 +03:00 [INF] Route matched with {action = "UploadAndSetMainImage", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]] UploadAndSetMainImage(Int32, E_Commerce.DtoModels.ImagesDtos.CreateImageDto) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-08-25 01:20:06.359 +03:00 [INF] Setting new main image for product: 1
2025-08-25 01:20:06.882 +03:00 [INF] Executed DbCommand (229ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL)
2025-08-25 01:20:11.734 +03:00 [INF]  Saving main image to ProductPhotos
2025-08-25 01:20:15.805 +03:00 [INF] Executing CreateAsync for entity Image
2025-08-25 01:20:15.884 +03:00 [INF] Image added successfully (pending save)
2025-08-25 01:20:16.114 +03:00 [INF] Executed DbCommand (108ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int64), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime), @p16='?' (Size = 4000), @p17='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `CustomerId`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-25 01:20:16.236 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-25 01:20:16.242 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-25 01:20:16.258 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-25 01:20:16.268 +03:00 [INF]  Main image saved: https://res.cloudinary.com/dud4kxeix/image/upload/v1756074015/ProductPhotos/2f4649ba-76e1-45f9-b017-52affdea8f81.png
2025-08-25 01:20:16.274 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-25 01:20:16.293 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-25 01:20:16.303 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-25 01:20:16.487 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime), @p8='?' (Size = 255), @p9='?' (DbType = DateTime), @p10='?' (DbType = DateTime), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-25 01:20:16.669 +03:00 [INF] Main image set successfully for product 1
2025-08-25 01:20:17.962 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 01:20:17.977 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.UploadAndSetMainImage (E-Commerce) in 11704.2063ms
2025-08-25 01:20:17.982 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.UploadAndSetMainImage (E-Commerce)'
2025-08-25 01:20:17.987 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Products/1/main-image - 200 264 application/json; charset=utf-8 12218.7633ms
2025-08-25 01:20:23.599 +03:00 [INF] Removing cache by tags: [product_search, categorywithdata, productwithvariantdata]
2025-08-25 01:20:24.435 +03:00 [WRN] No cache entries found for tags: [product_search, categorywithdata, productwithvariantdata]
2025-08-25 01:20:42.563 +03:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5069/api/Products/1/activate - null null
2025-08-25 01:20:42.577 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:20:42.588 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:20:42.753 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 01:20:42.767 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.ActiveProduct (E-Commerce)'
2025-08-25 01:20:42.785 +03:00 [INF] Route matched with {action = "ActiveProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] ActiveProduct(Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-08-25 01:20:43.070 +03:00 [INF] Execute GetAll for entity Product
2025-08-25 01:20:43.169 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__productId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`IsActive`, `p`.`DeletedAt` IS NOT NULL AS `isdeleted`, EXISTS (
    SELECT 1
    FROM `Images` AS `i`
    WHERE (`p`.`Id` = `i`.`ProductId`) AND `i`.`DeletedAt` IS NULL) AS `HasImages`, EXISTS (
    SELECT 1
    FROM `ProductVariants` AS `p0`
    WHERE (`p`.`Id` = `p0`.`ProductId`) AND (`p0`.`IsActive` AND (`p0`.`DeletedAt` IS NULL))) AS `HasActiveVariants`
FROM `Products` AS `p`
WHERE `p`.`Id` = @__productId_0
LIMIT 1
2025-08-25 01:20:43.305 +03:00 [INF] Executed DbCommand (108ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
FROM `Products` AS `p`
WHERE ((`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL) AND NOT (`p`.`IsActive`)
LIMIT 1
2025-08-25 01:20:43.395 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-25 01:20:43.402 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-25 01:20:43.408 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-25 01:20:43.574 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p2='?' (Size = 255), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Products` SET `IsActive` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-25 01:20:44.716 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 01:20:44.723 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.ActiveProduct (E-Commerce) in 1930.357ms
2025-08-25 01:20:44.731 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.ActiveProduct (E-Commerce)'
2025-08-25 01:20:44.741 +03:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5069/api/Products/1/activate - 200 133 application/json; charset=utf-8 2178.0533ms
2025-08-25 01:20:48.294 +03:00 [INF] Removing cache by tags: [product_search, categorywithdata, productwithvariantdata, CollectionWithProduct, cart]
2025-08-25 01:20:49.622 +03:00 [WRN] No cache entries found for tags: [product_search, categorywithdata, productwithvariantdata, CollectionWithProduct, cart]
2025-08-25 01:20:55.506 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json-patch+json 62
2025-08-25 01:20:55.512 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:20:55.514 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:20:55.691 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 01:20:55.707 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-08-25 01:20:55.709 +03:00 [INF] Route matched with {action = "AddItemToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] AddItemToCart(E_Commerce.DtoModels.CartDtos.CreateCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-08-25 01:20:55.717 +03:00 [INF] Executing AddItemToCart for product ID: 1
2025-08-25 01:20:55.724 +03:00 [INF] Adding item to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 1
2025-08-25 01:20:56.040 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-08-25 01:20:56.050 +03:00 [INF] Execute GetAll for entity Product
2025-08-25 01:20:56.147 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__itemDto_ProductId_0='?' (DbType = Int32), @__itemDto_ProductVariantId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Price`, `t`.`c`, `t`.`EndDate`, `t`.`StartDate`, `t`.`DiscountPercent`, `t`.`DeletedAt`, `t`.`IsActive`, `t0`.`Id`, `t0`.`Quantity`, `t0`.`c`
FROM (
    SELECT `p`.`Id`, `p`.`Price`, `d`.`Id` IS NOT NULL AS `c`, `d`.`EndDate`, `d`.`StartDate`, `d`.`DiscountPercent`, `d`.`DeletedAt`, `d`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__itemDto_ProductId_0) AND `p`.`DeletedAt` IS NULL) AND `p`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Quantity`, `t1`.`c`, `t1`.`ProductId`
    FROM (
        SELECT `p0`.`Id`, `p0`.`Quantity`, 1 AS `c`, `p0`.`ProductId`, ROW_NUMBER() OVER(PARTITION BY `p0`.`ProductId` ORDER BY `p0`.`Id`) AS `row`
        FROM `ProductVariants` AS `p0`
        WHERE (`p0`.`Id` = @__itemDto_ProductVariantId_1) AND `p0`.`IsActive`
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
2025-08-25 01:20:56.179 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:20:56.296 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-08-25 01:20:56.317 +03:00 [INF] Executing CreateAsync for entity Cart
2025-08-25 01:20:56.368 +03:00 [INF] Cart added successfully (pending save)
2025-08-25 01:20:56.589 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 255), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Cart` (`CheckoutDate`, `CreatedAt`, `CustomerId`, `DeletedAt`, `ModifiedAt`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT `Id`
FROM `Cart`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-25 01:20:56.693 +03:00 [INF] Executing CreateAsync for entity CartItem
2025-08-25 01:20:56.732 +03:00 [INF] CartItem added successfully (pending save)
2025-08-25 01:20:56.737 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-25 01:20:56.741 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-25 01:20:56.748 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-25 01:20:56.929 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (Size = 255), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `CartItems` (`AddedAt`, `CartId`, `CreatedAt`, `DeletedAt`, `ModifiedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `UnitPrice`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `CartItems`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-25 01:20:57.121 +03:00 [INF] Removing cache for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:20:57.612 +03:00 [INF] Cache removed successfully for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:20:57.616 +03:00 [INF] Item added to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 1
2025-08-25 01:20:57.621 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 01:20:57.626 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce) in 1910.6077ms
2025-08-25 01:20:57.629 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-08-25 01:20:57.633 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 200 134 application/json; charset=utf-8 2126.7863ms
2025-08-25 01:21:04.297 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - null 0
2025-08-25 01:21:04.334 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:21:04.337 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:21:04.510 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 01:21:04.535 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-08-25 01:21:04.561 +03:00 [INF] Route matched with {action = "CheckOut", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] CheckOut() on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-08-25 01:21:04.611 +03:00 [INF] Executing CheckOut
2025-08-25 01:21:04.617 +03:00 [INF] Checkout of cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:21:04.619 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:21:04.789 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-08-25 01:21:04.965 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Cart` SET `CheckoutDate` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-08-25 01:21:05.009 +03:00 [INF] Removing cache by tag: cart
2025-08-25 01:21:05.292 +03:00 [WRN] No cache entries found for tag: cart
2025-08-25 01:21:05.297 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 01:21:05.302 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.CheckOut (E-Commerce) in 735.6708ms
2025-08-25 01:21:05.333 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-08-25 01:21:05.335 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - 200 122 application/json; charset=utf-8 1038.5662ms
2025-08-25 01:22:05.063 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/CustomerAddress - application/json-patch+json 218
2025-08-25 01:22:05.097 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:22:05.115 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:22:05.297 +03:00 [INF] Executed DbCommand (89ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 01:22:05.312 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CustomerAddressController.CreateAddress (E-Commerce)'
2025-08-25 01:22:05.325 +03:00 [INF] Route matched with {action = "CreateAddress", controller = "CustomerAddress"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CustomerAddressDtos.CustomerAddressDto]]] CreateAddress(E_Commerce.DtoModels.CustomerAddressDtos.CreateCustomerAddressDto) on controller E_Commerce.Controllers.CustomerAddressController (E-Commerce).
2025-08-25 01:22:05.387 +03:00 [INF] Executing CreateAddress
2025-08-25 01:22:05.397 +03:00 [INF] Creating new address for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:22:05.671 +03:00 [INF] Getting address count for customer: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:22:05.798 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[@__customerId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM `CustomerAddresses` AS `c`
WHERE (`c`.`CustomerId` = @__customerId_0) AND `c`.`DeletedAt` IS NULL
2025-08-25 01:22:05.837 +03:00 [INF] Executing CreateAsync for entity CustomerAddress
2025-08-25 01:22:05.899 +03:00 [INF] CustomerAddress added successfully (pending save)
2025-08-25 01:22:05.909 +03:00 [INF] Removing default from other addresses for customer: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:22:06.018 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__customerId_0='?' (Size = 255), @__excludeAddressId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AdditionalNotes`, `c`.`AddressType`, `c`.`City`, `c`.`Country`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`IsDefault`, `c`.`ModifiedAt`, `c`.`PhoneNumber`, `c`.`PostalCode`, `c`.`State`, `c`.`StreetAddress`
FROM `CustomerAddresses` AS `c`
WHERE (((`c`.`CustomerId` = @__customerId_0) AND (`c`.`Id` <> @__excludeAddressId_1)) AND `c`.`IsDefault`) AND `c`.`DeletedAt` IS NULL
2025-08-25 01:22:06.030 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-25 01:22:06.033 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-25 01:22:06.039 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-25 01:22:06.240 +03:00 [INF] Executed DbCommand (92ms) [Parameters=[@p0='?' (Size = 500), @p1='?' (Size = 20), @p2='?' (Size = 50), @p3='?' (Size = 50), @p4='?' (DbType = DateTime), @p5='?' (Size = 255), @p6='?' (DbType = DateTime), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?' (Size = 20), @p10='?' (Size = 20), @p11='?' (Size = 50), @p12='?' (Size = 200), @p13='?' (Size = 255), @p14='?' (DbType = DateTime), @p15='?' (DbType = DateTime), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime), @p19='?' (DbType = Int32), @p20='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `CustomerAddresses` (`AdditionalNotes`, `AddressType`, `City`, `Country`, `CreatedAt`, `CustomerId`, `DeletedAt`, `IsDefault`, `ModifiedAt`, `PhoneNumber`, `PostalCode`, `State`, `StreetAddress`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
SELECT `Id`
FROM `CustomerAddresses`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-25 01:22:06.423 +03:00 [INF] Removing cache by tag: customer_address
2025-08-25 01:22:06.743 +03:00 [WRN] No cache entries found for tag: customer_address
2025-08-25 01:22:06.788 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CustomerAddressDtos.CustomerAddressDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 01:22:06.820 +03:00 [INF] Executed action E_Commerce.Controllers.CustomerAddressController.CreateAddress (E-Commerce) in 1482.5802ms
2025-08-25 01:22:06.825 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CustomerAddressController.CreateAddress (E-Commerce)'
2025-08-25 01:22:06.829 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/CustomerAddress - 201 559 application/json; charset=utf-8 1765.4827ms
2025-08-25 01:22:26.445 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order/create-from-cart - application/json-patch+json 41
2025-08-25 01:22:26.451 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:22:26.460 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:22:26.731 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 01:22:26.741 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 01:22:26.748 +03:00 [INF] Route matched with {action = "CreateOrderFromCart", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto]]] CreateOrderFromCart(E_Commerce.DtoModels.OrderDtos.CreateOrderDto) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-08-25 01:22:26.779 +03:00 [INF] Executing CreateOrderFromCart
2025-08-25 01:22:26.799 +03:00 [INF] Creating order from cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:22:27.159 +03:00 [INF] Executed DbCommand (88ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-08-25 01:22:27.265 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-08-25 01:22:27.284 +03:00 [INF] Checking if address 1 exists for customer: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:22:27.378 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__addressId_0='?' (DbType = Int32), @__customerId_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `CustomerAddresses` AS `c`
    WHERE ((`c`.`Id` = @__addressId_0) AND (`c`.`CustomerId` = @__customerId_1)) AND `c`.`DeletedAt` IS NULL)
2025-08-25 01:22:27.399 +03:00 [INF] Getting cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:22:27.410 +03:00 [INF] Getting cache for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:22:27.747 +03:00 [WRN] Cache miss for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:22:27.841 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-08-25 01:22:27.851 +03:00 [INF] Execute GetAll for entity Cart
2025-08-25 01:22:28.093 +03:00 [INF] Executed DbCommand (106ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-08-25 01:22:28.196 +03:00 [INF] Setting cache for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:22:28.560 +03:00 [INF] Cache set successfully for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5 with tags: [cart]
2025-08-25 01:22:28.571 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-08-25 01:22:28.687 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = 1
2025-08-25 01:22:28.703 +03:00 [INF] Execute Update for entity ProductVariant
2025-08-25 01:22:28.709 +03:00 [INF] ProductVariant marked for update (pending save)
2025-08-25 01:22:28.811 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE `o`.`OrderNumber` = @__orderNumber_0)
2025-08-25 01:22:28.830 +03:00 [INF] Executing CreateAsync for entity Order
2025-08-25 01:22:28.906 +03:00 [INF] Order added successfully (pending save)
2025-08-25 01:22:29.109 +03:00 [INF] Executed DbCommand (92ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime), @p8='?' (Size = 500), @p9='?' (Size = 50), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal), @p27='?' (DbType = Int32), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime), @p19='?' (DbType = DateTime), @p20='?' (DbType = Boolean), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Orders` (`CancelledAt`, `CreatedAt`, `CustomerAddressId`, `CustomerId`, `DeletedAt`, `DeliveredAt`, `DiscountAmount`, `ModifiedAt`, `Notes`, `OrderNumber`, `RestockedAt`, `ShippedAt`, `ShippingCost`, `Status`, `Subtotal`, `TaxAmount`, `Total`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Orders`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

UPDATE `ProductVariants` SET `Color` = @p17, `CreatedAt` = @p18, `DeletedAt` = @p19, `IsActive` = @p20, `Length` = @p21, `ModifiedAt` = @p22, `ProductId` = @p23, `Quantity` = @p24, `Size` = @p25, `Waist` = @p26
WHERE `Id` = @p27;
SELECT ROW_COUNT();
2025-08-25 01:22:29.251 +03:00 [INF] Executing CreateRangeAsync for entity OrderItem
2025-08-25 01:22:29.302 +03:00 [INF] 1 OrderItem entities added successfully (pending save)
2025-08-25 01:22:29.311 +03:00 [INF] Clearing cart: 1
2025-08-25 01:22:29.409 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__cartId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE `c`.`CartId` = @__cartId_0
2025-08-25 01:22:29.442 +03:00 [INF] Cart 1 cleared successfully
2025-08-25 01:22:29.644 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Decimal), @p10='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM `CartItems`
WHERE `Id` = @p0;
SELECT ROW_COUNT();

INSERT INTO `OrderItem` (`CreatedAt`, `DeletedAt`, `ModifiedAt`, `OrderId`, `OrderedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `TotalPrice`, `UnitPrice`)
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
SELECT `Id`
FROM `OrderItem`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-25 01:22:29.869 +03:00 [INF] Execute AddUserOpreationAsync
2025-08-25 01:22:29.883 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-08-25 01:22:29.938 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-08-25 01:22:29.946 +03:00 [INF] Execute GetAll for entity Order
2025-08-25 01:22:30.210 +03:00 [INF] Executed DbCommand (94ms) [Parameters=[@__createdOrder_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`ModifiedAt`, `t0`.`OrderNumber`, `t0`.`Status`, `t0`.`Subtotal`, `t0`.`TaxAmount`, `t0`.`ShippingCost`, `t0`.`DiscountAmount`, `t0`.`Total`, `t0`.`Notes`, `t0`.`DeletedAt`, `t0`.`ShippedAt`, `t0`.`DeliveredAt`, `t0`.`CancelledAt`, `t0`.`c`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Email`, `t0`.`PhoneNumber`, `t1`.`Id`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`Quantity`, `t1`.`UnitPrice`, `t1`.`TotalPrice`, `t1`.`OrderedAt`, `t1`.`Id0`, `t1`.`Name`, `t1`.`Price`, `t1`.`IsActive`, `t1`.`FinalPrice`, `t1`.`DiscountPrecentage`, `t1`.`MainImageUrl`, `t1`.`Id1`, `t1`.`Color`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`Size`, `t1`.`DeletedAt`, `t1`.`Length`, `t1`.`Waist`, `t1`.`Id2`, `t1`.`Id3`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`ModifiedAt`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`ShippingCost`, `o`.`DiscountAmount`, `o`.`Total`, `o`.`Notes`, `o`.`DeletedAt`, `o`.`ShippedAt`, `o`.`DeliveredAt`, `o`.`CancelledAt`, FALSE AS `c`, `t`.`Id` AS `Id0`, `t`.`Name`, `t`.`Email`, `t`.`PhoneNumber`
    FROM `Orders` AS `o`
    INNER JOIN (
        SELECT `a`.`Id`, `a`.`Email`, `a`.`PhoneNumber`, `a`.`Name`
        FROM `AspNetUsers` AS `a`
        WHERE `a`.`Discriminator` = 'Customer'
    ) AS `t` ON `o`.`CustomerId` = `t`.`Id`
    WHERE `o`.`Id` = @__createdOrder_Id_0
    LIMIT 1
) AS `t0`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`CreatedAt`, `o0`.`ModifiedAt`, `o0`.`Quantity`, `o0`.`UnitPrice`, `o0`.`TotalPrice`, `o0`.`OrderedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND `i`.`DeletedAt` IS NULL
        LIMIT 1), '') AS `MainImageUrl`, `o0`.`ProductVariantId` AS `Id1`, `p0`.`Color`, COALESCE(`p0`.`CreatedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `CreatedAt0`, COALESCE(`p0`.`ModifiedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `ModifiedAt0`, `p0`.`Size`, `p0`.`DeletedAt`, COALESCE(`p0`.`Length`, 0) AS `Length`, COALESCE(`p0`.`Waist`, 0) AS `Waist`, `d`.`Id` AS `Id2`, `p0`.`Id` AS `Id3`, `o0`.`OrderId`
    FROM `OrderItem` AS `o0`
    INNER JOIN `Products` AS `p` ON `o0`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    INNER JOIN `ProductVariants` AS `p0` ON `o0`.`ProductVariantId` = `p0`.`Id`
) AS `t1` ON `t0`.`Id` = `t1`.`OrderId`
ORDER BY `t0`.`Id`, `t0`.`Id0`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id2`
2025-08-25 01:22:30.254 +03:00 [INF] Removing cache by tag: order
2025-08-25 01:22:30.895 +03:00 [INF] Removed 1 cache entries for tag: order
2025-08-25 01:22:31.884 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 01:22:31.952 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce) in 5198.1072ms
2025-08-25 01:22:31.979 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 01:22:31.983 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order/create-from-cart - 201 1436 application/json; charset=utf-8 5537.6177ms
2025-08-25 01:23:15.452 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/1 - null null
2025-08-25 01:23:15.462 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:23:15.762 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 01:23:15.779 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-08-25 01:23:15.794 +03:00 [INF] Route matched with {action = "GetProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDetailDto]]] GetProduct(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-08-25 01:23:15.831 +03:00 [INF] Executing GetProduct for ID: 1
2025-08-25 01:23:15.845 +03:00 [INF] Retrieving product by id: 1, isActive: , deletedOnly: 
2025-08-25 01:23:15.853 +03:00 [INF] Getting cache for key: product_detail:1:isActive=:deletedOnly=
2025-08-25 01:23:16.073 +03:00 [WRN] Cache miss for key: product_detail:1:isActive=:deletedOnly=
2025-08-25 01:23:16.079 +03:00 [INF] Execute GetAll for entity Product
2025-08-25 01:23:16.107 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-25 01:23:16.302 +03:00 [INF] Executed DbCommand (88ms) [Parameters=[@__8__locals1_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`IsActive`, `t`.`Price`, `t`.`c`, `t`.`fitType`, `t`.`SubCategoryId`, `t`.`c0`, `t`.`Id0`, `t`.`DiscountPercent`, `t`.`IsActive0`, `t`.`StartDate`, `t`.`EndDate`, `t`.`Name0`, `t`.`Description0`, `t0`.`Id`, `t0`.`Url`, `t1`.`Id`, `t1`.`IsActive`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`Color`, `t1`.`Size`, `t1`.`Waist`, `t1`.`Length`, `t1`.`Quantity`, `t1`.`ProductId`
FROM (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`IsActive`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `c`, `p`.`fitType`, `p`.`SubCategoryId`, ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) AS `c0`, `d`.`Id` AS `Id0`, `d`.`DiscountPercent`, `d`.`IsActive` AS `IsActive0`, `d`.`StartDate`, `d`.`EndDate`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE `p`.`Id` = @__8__locals1_id_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
LEFT JOIN (
    SELECT `p0`.`Id`, `p0`.`IsActive`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`Color`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity`, `p0`.`ProductId`
    FROM `ProductVariants` AS `p0`
    WHERE (`p0`.`DeletedAt` IS NULL AND `p0`.`IsActive`) AND (`p0`.`Quantity` <> 0)
) AS `t1` ON `t`.`Id` = `t1`.`ProductId`
ORDER BY `t`.`Id`, `t`.`Id0`, `t0`.`Id`
2025-08-25 01:23:16.335 +03:00 [INF] Product found: zV4Ok4bWzFGA6KsVb3uZ (ID: 1)
2025-08-25 01:23:17.319 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDetailDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 01:23:17.361 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProduct (E-Commerce) in 1562.1566ms
2025-08-25 01:23:17.371 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-08-25 01:23:17.378 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/1 - 200 754 application/json; charset=utf-8 1924.9906ms
2025-08-25 01:23:19.222 +03:00 [INF] Setting cache for key: product_detail:1:isActive=:deletedOnly=
2025-08-25 01:23:19.563 +03:00 [INF] Cache set successfully for key: product_detail:1:isActive=:deletedOnly= with tags: [productwithvariantdata]
2025-08-25 01:23:44.081 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products?page=1&pageSize=10 - null null
2025-08-25 01:23:44.089 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:23:44.245 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 01:23:44.256 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProducts (E-Commerce)'
2025-08-25 01:23:44.265 +03:00 [INF] Route matched with {action = "GetProducts", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] GetProducts(System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-08-25 01:23:44.333 +03:00 [INF] Getting cache for key: advsearch__________False_1_10__
2025-08-25 01:23:44.657 +03:00 [WRN] Cache miss for key: advsearch__________False_1_10__
2025-08-25 01:23:44.662 +03:00 [INF] Execute GetAll for entity Product
2025-08-25 01:23:44.864 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`SubCategoryId`, `t`.`Price`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`fitType`, `t`.`IsActive`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `t`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `t`.`Price`)
    ELSE `t`.`Price`
END, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`EndDate`
    ELSE NULL
END, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
    ELSE NULL
END, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
    ELSE 0.0
END, `d`.`Id`, `i`.`Id`, `i`.`Url`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    ORDER BY `p`.`Name`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Discount` AS `d` ON `t`.`DiscountId` = `d`.`Id`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`ProductId`
ORDER BY `t`.`Name`, `t`.`Id`, `d`.`Id`
2025-08-25 01:23:45.851 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 01:23:45.866 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProducts (E-Commerce) in 1589.6202ms
2025-08-25 01:23:45.875 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProducts (E-Commerce)'
2025-08-25 01:23:45.878 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products?page=1&pageSize=10 - 200 623 application/json; charset=utf-8 1796.847ms
2025-08-25 01:23:48.260 +03:00 [INF] Setting cache for key: advsearch__________False_1_10__
2025-08-25 01:23:48.547 +03:00 [INF] Cache set successfully for key: advsearch__________False_1_10__ with tags: [product_search]
2025-08-25 01:24:06.273 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 1
2025-08-25 01:24:06.365 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-08-25 01:24:06.532 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Orders` SET `Status` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-08-25 01:24:08.534 +03:00 [INF] Order 1 auto-expired and restock scheduled
2025-08-25 01:24:10.939 +03:00 [INF] Removing cache by tag: order
2025-08-25 01:24:11.079 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 1
2025-08-25 01:24:11.157 +03:00 [WRN] No cache entries found for tag: order
2025-08-25 01:24:11.163 +03:00 [INF] Successfully invalidated order cache
2025-08-25 01:24:11.166 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-08-25 01:24:11.182 +03:00 [INF] Execute GetAll for entity OrderItem
2025-08-25 01:24:11.279 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`ProductVariantId`, `o`.`Quantity`
FROM `OrderItem` AS `o`
WHERE `o`.`OrderId` = @__orderId_0
2025-08-25 01:24:11.323 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-08-25 01:24:11.415 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = 1
2025-08-25 01:24:11.455 +03:00 [INF] Execute Update for entity ProductVariant
2025-08-25 01:24:11.458 +03:00 [INF] ProductVariant marked for update (pending save)
2025-08-25 01:24:11.618 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p12='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Orders` SET `RestockedAt` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

UPDATE `ProductVariants` SET `Color` = @p2, `CreatedAt` = @p3, `DeletedAt` = @p4, `IsActive` = @p5, `Length` = @p6, `ModifiedAt` = @p7, `ProductId` = @p8, `Quantity` = @p9, `Size` = @p10, `Waist` = @p11
WHERE `Id` = @p12;
SELECT ROW_COUNT();
2025-08-25 01:24:11.782 +03:00 [INF] Removing cache by tag: product_search
2025-08-25 01:24:12.427 +03:00 [INF] Removed 1 cache entries for tag: product_search
2025-08-25 01:24:12.435 +03:00 [INF] Restocked inventory for order 1
2025-08-25 01:24:59.541 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants/1 - null null
2025-08-25 01:24:59.555 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:24:59.718 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 01:24:59.727 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.GetVariantById (E-Commerce)'
2025-08-25 01:24:59.736 +03:00 [INF] Route matched with {action = "GetVariantById", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]] GetVariantById(Int32, Int32) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-08-25 01:24:59.783 +03:00 [INF] Getting variant by id: 1
2025-08-25 01:24:59.791 +03:00 [INF] Getting cache for key: variant:1
2025-08-25 01:25:00.036 +03:00 [WRN] Cache miss for key: variant:1
2025-08-25 01:25:00.052 +03:00 [INF] Getting variant by ID: 1
2025-08-25 01:25:00.232 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`, `p0`.`Id`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`Description`, `p0`.`DiscountId`, `p0`.`Gender`, `p0`.`IsActive`, `p0`.`ModifiedAt`, `p0`.`Name`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`SubCategoryId`, `p0`.`fitType`
FROM `ProductVariants` AS `p`
INNER JOIN `Products` AS `p0` ON `p`.`ProductId` = `p0`.`Id`
WHERE (`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL
LIMIT 1
2025-08-25 01:25:00.243 +03:00 [INF] Caching variant 1 data
2025-08-25 01:25:01.199 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 01:25:01.204 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.GetVariantById (E-Commerce) in 1439.0832ms
2025-08-25 01:25:01.210 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.GetVariantById (E-Commerce)'
2025-08-25 01:25:01.212 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants/1 - 200 308 application/json; charset=utf-8 1670.9306ms
2025-08-25 01:25:02.598 +03:00 [INF] Setting cache for key: variant:1
2025-08-25 01:25:02.835 +03:00 [INF] Cache set successfully for key: variant:1 with tags: [product:1, variantdata]
2025-08-25 01:30:16.584 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire - null null
2025-08-25 01:30:19.321 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire - 200 null text/html 2736.4787ms
2025-08-25 01:30:19.362 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/css-dark181801843943785 - null null
2025-08-25 01:30:19.362 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/js181802051951642 - null null
2025-08-25 01:30:19.362 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 01:30:19.367 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/css18180990951637 - null null
2025-08-25 01:30:19.388 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/css-dark181801843943785 - 200 null text/css 25.9684ms
2025-08-25 01:30:19.402 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 01:30:19.391 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 28.9005ms
2025-08-25 01:30:19.468 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/css18180990951637 - 200 null text/css 100.6563ms
2025-08-25 01:30:19.474 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/js181802051951642 - 200 null application/javascript 112.5446ms
2025-08-25 01:30:19.508 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 105.5659ms
2025-08-25 01:30:21.690 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 258
2025-08-25 01:30:21.705 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:30:22.336 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - null null
2025-08-25 01:30:23.085 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1395.6161ms
2025-08-25 01:30:23.990 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - 200 null text/html 1653.6813ms
2025-08-25 01:30:24.020 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 01:30:24.026 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 01:30:24.083 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 56.608ms
2025-08-25 01:30:24.090 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 70.1712ms
2025-08-25 01:30:25.926 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/servers - null null
2025-08-25 01:30:26.101 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:30:26.125 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:30:27.607 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1506.0972ms
2025-08-25 01:30:27.726 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/servers - 200 null text/html 1799.8414ms
2025-08-25 01:30:27.775 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 01:30:27.750 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 01:30:27.808 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 35.1266ms
2025-08-25 01:30:27.835 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 84.7157ms
2025-08-25 01:30:28.723 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - null null
2025-08-25 01:30:29.832 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 01:30:29.844 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:30:30.330 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - 200 null text/html 1606.9897ms
2025-08-25 01:30:30.356 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 01:30:30.356 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 01:30:30.370 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 14.0641ms
2025-08-25 01:30:30.408 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 52.0028ms
2025-08-25 01:30:31.154 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1321.7001ms
2025-08-25 01:30:32.082 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - null null
2025-08-25 01:30:32.398 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:30:32.412 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:30:33.856 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1457.5618ms
2025-08-25 01:30:34.534 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - 200 null text/html 2451.1095ms
2025-08-25 01:30:34.571 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 01:30:34.563 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 01:30:34.591 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 19.9555ms
2025-08-25 01:30:34.652 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 89.7824ms
2025-08-25 01:30:36.648 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:30:36.661 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:30:38.123 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1474.4657ms
2025-08-25 01:30:40.154 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:30:40.177 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:30:41.655 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1500.7623ms
2025-08-25 01:30:43.676 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:30:43.689 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:30:44.654 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/details/11 - null null
2025-08-25 01:30:45.151 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1474.8105ms
2025-08-25 01:30:46.644 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/details/11 - 200 null text/html 1989.9066ms
2025-08-25 01:30:46.668 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 01:30:46.674 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 01:30:46.698 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 29.8092ms
2025-08-25 01:30:46.771 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 96.7657ms
2025-08-25 01:30:48.769 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:30:48.783 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:30:50.220 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1450.6854ms
2025-08-25 01:30:52.240 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:30:52.257 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:30:53.723 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1482.8081ms
2025-08-25 01:30:55.741 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:30:55.757 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:30:57.226 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1485.123ms
2025-08-25 01:30:59.256 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:30:59.283 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:31:00.745 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1488.8091ms
2025-08-25 01:31:02.766 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:31:02.775 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:31:04.245 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1479.1576ms
2025-08-25 01:31:07.220 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:31:07.232 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:31:08.713 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1493.2041ms
2025-08-25 01:31:11.214 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:31:11.223 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:31:12.672 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1457.6158ms
2025-08-25 01:31:15.290 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:31:15.300 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:31:16.778 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1487.9695ms
2025-08-25 01:31:19.222 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:31:19.231 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:31:20.698 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1475.69ms
2025-08-25 01:31:23.285 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:31:23.294 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:31:24.773 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1487.1465ms
2025-08-25 01:31:27.226 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:31:27.237 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:31:28.698 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1471.8068ms
2025-08-25 01:31:31.231 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:31:31.238 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:31:32.814 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1583.0038ms
2025-08-25 01:31:35.230 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:31:35.237 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:31:36.710 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1480.4257ms
2025-08-25 01:31:39.226 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:31:39.230 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:31:40.688 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1462.4017ms
2025-08-25 01:31:43.232 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:31:43.240 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:31:44.716 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1484.4983ms
2025-08-25 01:31:47.236 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:31:47.257 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:31:48.726 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1489.2637ms
2025-08-25 01:31:51.230 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:31:51.245 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:31:52.695 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1464.4234ms
2025-08-25 01:31:55.224 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:31:55.237 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:31:56.706 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1481.9965ms
2025-08-25 01:31:59.231 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:31:59.239 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:31:59.678 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/1 - null null
2025-08-25 01:31:59.691 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:31:59.857 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 01:31:59.873 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-08-25 01:31:59.882 +03:00 [INF] Route matched with {action = "GetProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDetailDto]]] GetProduct(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-08-25 01:31:59.904 +03:00 [INF] Executing GetProduct for ID: 1
2025-08-25 01:31:59.907 +03:00 [INF] Retrieving product by id: 1, isActive: , deletedOnly: 
2025-08-25 01:31:59.914 +03:00 [INF] Getting cache for key: product_detail:1:isActive=:deletedOnly=
2025-08-25 01:32:00.139 +03:00 [INF] Cache hit for key: product_detail:1:isActive=:deletedOnly=
2025-08-25 01:32:00.170 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDetailDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 01:32:00.173 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProduct (E-Commerce) in 270.7308ms
2025-08-25 01:32:00.182 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-08-25 01:32:00.184 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/1 - 200 752 application/json; charset=utf-8 506.9205ms
2025-08-25 01:32:00.732 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1501.1318ms
2025-08-25 01:32:03.230 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:32:03.239 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:32:04.673 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1442.8441ms
2025-08-25 01:32:07.229 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:32:07.243 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:32:08.704 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1474.5051ms
2025-08-25 01:32:11.231 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:32:11.247 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:32:12.686 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1455.0237ms
2025-08-25 01:32:15.233 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:32:15.240 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:32:16.710 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1476.5369ms
2025-08-25 01:32:19.228 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:32:19.241 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:32:20.710 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1481.2945ms
2025-08-25 01:32:22.103 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants/1 - null null
2025-08-25 01:32:22.111 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:32:22.302 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 01:32:22.308 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.GetVariantById (E-Commerce)'
2025-08-25 01:32:22.311 +03:00 [INF] Route matched with {action = "GetVariantById", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]] GetVariantById(Int32, Int32) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-08-25 01:32:22.320 +03:00 [INF] Getting variant by id: 1
2025-08-25 01:32:22.322 +03:00 [INF] Getting cache for key: variant:1
2025-08-25 01:32:22.573 +03:00 [INF] Cache hit for key: variant:1
2025-08-25 01:32:22.578 +03:00 [INF] Retrieved variant 1 from cache
2025-08-25 01:32:22.581 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 01:32:22.585 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.GetVariantById (E-Commerce) in 266.1785ms
2025-08-25 01:32:22.593 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.GetVariantById (E-Commerce)'
2025-08-25 01:32:22.601 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants/1 - 200 306 application/json; charset=utf-8 498.2889ms
2025-08-25 01:32:23.235 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:32:23.245 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:32:24.718 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1482.8093ms
2025-08-25 01:32:27.239 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:32:27.247 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:32:28.721 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1482.0063ms
2025-08-25 01:32:31.239 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:32:31.243 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:32:32.741 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1502.1564ms
2025-08-25 01:32:35.236 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:32:35.250 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:32:36.718 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1482.6697ms
2025-08-25 01:32:39.227 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:32:39.231 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:32:39.618 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants - null null
2025-08-25 01:32:39.634 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:32:39.827 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 01:32:39.835 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.GetProductVariants (E-Commerce)'
2025-08-25 01:32:39.849 +03:00 [INF] Route matched with {action = "GetProductVariants", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]]] GetProductVariants(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-08-25 01:32:39.873 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-08-25 01:32:40.040 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__productId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`Size`, `p`.`Waist`, `p`.`Length`, `p`.`Quantity`, `p`.`ProductId`, `p`.`IsActive`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`ModifiedAt`
FROM `ProductVariants` AS `p`
WHERE (`p`.`ProductId` = @__productId_0) AND `p`.`DeletedAt` IS NULL
2025-08-25 01:32:40.054 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 01:32:40.062 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.GetProductVariants (E-Commerce) in 202.8981ms
2025-08-25 01:32:40.090 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.GetProductVariants (E-Commerce)'
2025-08-25 01:32:40.093 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants - 200 319 application/json; charset=utf-8 475.2265ms
2025-08-25 01:32:40.705 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1477.3352ms
2025-08-25 01:32:43.255 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:32:43.277 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:32:44.760 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1504.992ms
2025-08-25 01:32:47.243 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:32:47.255 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:32:48.733 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1489.168ms
2025-08-25 01:32:51.231 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:32:51.243 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:32:52.725 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1493.7126ms
2025-08-25 01:32:55.238 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:32:55.255 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:32:56.725 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1486.0558ms
2025-08-25 01:32:59.238 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:32:59.245 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:32:59.677 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json-patch+json 62
2025-08-25 01:32:59.684 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:32:59.686 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:32:59.841 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 01:32:59.850 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-08-25 01:32:59.855 +03:00 [INF] Route matched with {action = "AddItemToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] AddItemToCart(E_Commerce.DtoModels.CartDtos.CreateCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-08-25 01:32:59.915 +03:00 [INF] Executing AddItemToCart for product ID: 1
2025-08-25 01:32:59.917 +03:00 [INF] Adding item to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 1
2025-08-25 01:33:00.242 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-08-25 01:33:00.259 +03:00 [INF] Execute GetAll for entity Product
2025-08-25 01:33:00.345 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__itemDto_ProductId_0='?' (DbType = Int32), @__itemDto_ProductVariantId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Price`, `t`.`c`, `t`.`EndDate`, `t`.`StartDate`, `t`.`DiscountPercent`, `t`.`DeletedAt`, `t`.`IsActive`, `t0`.`Id`, `t0`.`Quantity`, `t0`.`c`
FROM (
    SELECT `p`.`Id`, `p`.`Price`, `d`.`Id` IS NOT NULL AS `c`, `d`.`EndDate`, `d`.`StartDate`, `d`.`DiscountPercent`, `d`.`DeletedAt`, `d`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__itemDto_ProductId_0) AND `p`.`DeletedAt` IS NULL) AND `p`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Quantity`, `t1`.`c`, `t1`.`ProductId`
    FROM (
        SELECT `p0`.`Id`, `p0`.`Quantity`, 1 AS `c`, `p0`.`ProductId`, ROW_NUMBER() OVER(PARTITION BY `p0`.`ProductId` ORDER BY `p0`.`Id`) AS `row`
        FROM `ProductVariants` AS `p0`
        WHERE (`p0`.`Id` = @__itemDto_ProductVariantId_1) AND `p0`.`IsActive`
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
2025-08-25 01:33:00.358 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:33:00.443 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-08-25 01:33:00.450 +03:00 [INF] Executing CreateAsync for entity CartItem
2025-08-25 01:33:00.453 +03:00 [INF] CartItem added successfully (pending save)
2025-08-25 01:33:00.456 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-25 01:33:00.457 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-25 01:33:00.460 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-25 01:33:00.626 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (Size = 255), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `CartItems` (`AddedAt`, `CartId`, `CreatedAt`, `DeletedAt`, `ModifiedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `UnitPrice`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `CartItems`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-25 01:33:00.765 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1527.6221ms
2025-08-25 01:33:00.787 +03:00 [INF] Removing cache for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:33:01.295 +03:00 [INF] Cache removed successfully for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:33:01.303 +03:00 [INF] Item added to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 1
2025-08-25 01:33:01.311 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 01:33:01.323 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce) in 1459.8348ms
2025-08-25 01:33:01.334 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-08-25 01:33:01.350 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 200 134 application/json; charset=utf-8 1672.0201ms
2025-08-25 01:33:03.247 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:33:03.262 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:33:04.743 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1495.2898ms
2025-08-25 01:33:07.237 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:33:07.246 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:33:08.714 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1476.3126ms
2025-08-25 01:33:11.243 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:33:11.260 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:33:12.729 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1486.0069ms
2025-08-25 01:33:15.244 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:33:15.261 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:33:16.729 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1484.7111ms
2025-08-25 01:33:19.249 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:33:19.259 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:33:20.724 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1475.5447ms
2025-08-25 01:33:23.303 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:33:23.345 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:33:23.379 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order/create-from-cart - application/json-patch+json 41
2025-08-25 01:33:23.556 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:33:23.564 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:33:23.738 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 01:33:23.749 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 01:33:23.752 +03:00 [INF] Route matched with {action = "CreateOrderFromCart", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto]]] CreateOrderFromCart(E_Commerce.DtoModels.OrderDtos.CreateOrderDto) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-08-25 01:33:23.761 +03:00 [INF] Executing CreateOrderFromCart
2025-08-25 01:33:23.765 +03:00 [INF] Creating order from cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:33:24.081 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-08-25 01:33:24.180 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-08-25 01:33:24.188 +03:00 [INF] Checking if address 1 exists for customer: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:33:24.270 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__addressId_0='?' (DbType = Int32), @__customerId_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `CustomerAddresses` AS `c`
    WHERE ((`c`.`Id` = @__addressId_0) AND (`c`.`CustomerId` = @__customerId_1)) AND `c`.`DeletedAt` IS NULL)
2025-08-25 01:33:24.280 +03:00 [INF] Getting cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:33:24.281 +03:00 [INF] Getting cache for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:33:24.497 +03:00 [WRN] Cache miss for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:33:24.579 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-08-25 01:33:24.591 +03:00 [INF] Execute GetAll for entity Cart
2025-08-25 01:33:24.684 +03:00 [INF] Executed DbCommand (88ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-08-25 01:33:24.697 +03:00 [INF] Setting cache for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:33:24.868 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1565.3883ms
2025-08-25 01:33:24.926 +03:00 [INF] Cache set successfully for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5 with tags: [cart]
2025-08-25 01:33:24.931 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-08-25 01:33:25.015 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = 1
2025-08-25 01:33:28.266 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:33:32.985 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:34:05.081 +03:00 [INF] Execute Update for entity ProductVariant
2025-08-25 01:34:08.036 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 39765.1406ms
2025-08-25 01:34:08.037 +03:00 [INF] ProductVariant marked for update (pending save)
2025-08-25 01:34:34.504 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:34:47.349 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:34:47.360 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE `o`.`OrderNumber` = @__orderNumber_0)
2025-08-25 01:34:47.371 +03:00 [INF] Executing CreateAsync for entity Order
2025-08-25 01:34:47.378 +03:00 [INF] Order added successfully (pending save)
2025-08-25 01:35:05.496 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime), @p8='?' (Size = 500), @p9='?' (Size = 50), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal), @p27='?' (DbType = Int32), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime), @p19='?' (DbType = DateTime), @p20='?' (DbType = Boolean), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Orders` (`CancelledAt`, `CreatedAt`, `CustomerAddressId`, `CustomerId`, `DeletedAt`, `DeliveredAt`, `DiscountAmount`, `ModifiedAt`, `Notes`, `OrderNumber`, `RestockedAt`, `ShippedAt`, `ShippingCost`, `Status`, `Subtotal`, `TaxAmount`, `Total`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Orders`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

UPDATE `ProductVariants` SET `Color` = @p17, `CreatedAt` = @p18, `DeletedAt` = @p19, `IsActive` = @p20, `Length` = @p21, `ModifiedAt` = @p22, `ProductId` = @p23, `Quantity` = @p24, `Size` = @p25, `Waist` = @p26
WHERE `Id` = @p27;
SELECT ROW_COUNT();
2025-08-25 01:35:05.583 +03:00 [INF] Executing CreateRangeAsync for entity OrderItem
2025-08-25 01:35:05.588 +03:00 [INF] 1 OrderItem entities added successfully (pending save)
2025-08-25 01:35:05.593 +03:00 [INF] Clearing cart: 1
2025-08-25 01:35:05.682 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__cartId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE `c`.`CartId` = @__cartId_0
2025-08-25 01:35:05.688 +03:00 [INF] Cart 1 cleared successfully
2025-08-25 01:35:05.850 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Decimal), @p10='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM `CartItems`
WHERE `Id` = @p0;
SELECT ROW_COUNT();

INSERT INTO `OrderItem` (`CreatedAt`, `DeletedAt`, `ModifiedAt`, `OrderId`, `OrderedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `TotalPrice`, `UnitPrice`)
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
SELECT `Id`
FROM `OrderItem`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-25 01:35:06.014 +03:00 [INF] Execute AddUserOpreationAsync
2025-08-25 01:35:06.016 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-08-25 01:35:06.019 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-08-25 01:35:06.020 +03:00 [INF] Execute GetAll for entity Order
2025-08-25 01:35:06.190 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__createdOrder_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`ModifiedAt`, `t0`.`OrderNumber`, `t0`.`Status`, `t0`.`Subtotal`, `t0`.`TaxAmount`, `t0`.`ShippingCost`, `t0`.`DiscountAmount`, `t0`.`Total`, `t0`.`Notes`, `t0`.`DeletedAt`, `t0`.`ShippedAt`, `t0`.`DeliveredAt`, `t0`.`CancelledAt`, `t0`.`c`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Email`, `t0`.`PhoneNumber`, `t1`.`Id`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`Quantity`, `t1`.`UnitPrice`, `t1`.`TotalPrice`, `t1`.`OrderedAt`, `t1`.`Id0`, `t1`.`Name`, `t1`.`Price`, `t1`.`IsActive`, `t1`.`FinalPrice`, `t1`.`DiscountPrecentage`, `t1`.`MainImageUrl`, `t1`.`Id1`, `t1`.`Color`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`Size`, `t1`.`DeletedAt`, `t1`.`Length`, `t1`.`Waist`, `t1`.`Id2`, `t1`.`Id3`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`ModifiedAt`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`ShippingCost`, `o`.`DiscountAmount`, `o`.`Total`, `o`.`Notes`, `o`.`DeletedAt`, `o`.`ShippedAt`, `o`.`DeliveredAt`, `o`.`CancelledAt`, FALSE AS `c`, `t`.`Id` AS `Id0`, `t`.`Name`, `t`.`Email`, `t`.`PhoneNumber`
    FROM `Orders` AS `o`
    INNER JOIN (
        SELECT `a`.`Id`, `a`.`Email`, `a`.`PhoneNumber`, `a`.`Name`
        FROM `AspNetUsers` AS `a`
        WHERE `a`.`Discriminator` = 'Customer'
    ) AS `t` ON `o`.`CustomerId` = `t`.`Id`
    WHERE `o`.`Id` = @__createdOrder_Id_0
    LIMIT 1
) AS `t0`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`CreatedAt`, `o0`.`ModifiedAt`, `o0`.`Quantity`, `o0`.`UnitPrice`, `o0`.`TotalPrice`, `o0`.`OrderedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND `i`.`DeletedAt` IS NULL
        LIMIT 1), '') AS `MainImageUrl`, `o0`.`ProductVariantId` AS `Id1`, `p0`.`Color`, COALESCE(`p0`.`CreatedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `CreatedAt0`, COALESCE(`p0`.`ModifiedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `ModifiedAt0`, `p0`.`Size`, `p0`.`DeletedAt`, COALESCE(`p0`.`Length`, 0) AS `Length`, COALESCE(`p0`.`Waist`, 0) AS `Waist`, `d`.`Id` AS `Id2`, `p0`.`Id` AS `Id3`, `o0`.`OrderId`
    FROM `OrderItem` AS `o0`
    INNER JOIN `Products` AS `p` ON `o0`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    INNER JOIN `ProductVariants` AS `p0` ON `o0`.`ProductVariantId` = `p0`.`Id`
) AS `t1` ON `t0`.`Id` = `t1`.`OrderId`
ORDER BY `t0`.`Id`, `t0`.`Id0`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id2`
2025-08-25 01:35:06.239 +03:00 [INF] Removing cache by tag: order
2025-08-25 01:35:06.459 +03:00 [WRN] No cache entries found for tag: order
2025-08-25 01:35:11.038 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 36530.0977ms
2025-08-25 01:35:16.233 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:35:16.233 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 01:35:16.248 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce) in 112473.1568ms
2025-08-25 01:35:16.240 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:35:16.261 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 01:35:16.265 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order/create-from-cart - 201 1437 application/json; charset=utf-8 112870.7505ms
2025-08-25 01:35:17.707 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1473.6403ms
2025-08-25 01:35:20.259 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:35:20.268 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:35:21.749 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1489.4091ms
2025-08-25 01:35:24.266 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:35:24.288 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:35:25.754 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1487.5153ms
2025-08-25 01:35:28.258 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:35:28.266 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:35:29.737 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1478.7892ms
2025-08-25 01:35:32.258 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:35:32.272 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:35:33.726 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1468.2594ms
2025-08-25 01:35:36.426 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:35:36.456 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:35:37.979 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1552.745ms
2025-08-25 01:35:40.263 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:35:40.268 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:35:41.803 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1539.3405ms
2025-08-25 01:35:44.271 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:35:44.307 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:35:45.839 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1567.1962ms
2025-08-25 01:35:48.292 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:35:48.327 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:35:49.870 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1577.7968ms
2025-08-25 01:35:52.295 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:35:52.301 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:35:53.817 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1522.2533ms
2025-08-25 01:35:56.268 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:35:56.303 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:35:57.829 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1560.7207ms
2025-08-25 01:36:00.283 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:36:00.319 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:36:01.845 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1562.5303ms
2025-08-25 01:36:04.255 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:36:04.266 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:36:05.770 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1513.9614ms
2025-08-25 01:36:08.271 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:36:08.277 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:36:09.801 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1529.3403ms
2025-08-25 01:36:12.286 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:36:12.295 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:36:13.761 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1475.9428ms
2025-08-25 01:36:16.264 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:36:16.288 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:36:17.761 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1496.1317ms
2025-08-25 01:36:20.265 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:36:20.270 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:36:21.744 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1478.3914ms
2025-08-25 01:36:24.258 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:36:24.265 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:36:25.715 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1456.1207ms
2025-08-25 01:36:28.263 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:36:28.272 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:36:29.748 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1484.3184ms
2025-08-25 01:36:32.267 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:36:32.277 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:36:33.727 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1459.7565ms
2025-08-25 01:36:36.269 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:36:36.276 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:36:37.743 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1473.1419ms
2025-08-25 01:36:40.263 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:36:40.268 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:36:41.756 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1493.2067ms
2025-08-25 01:36:44.269 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:36:44.279 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:36:45.746 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1476.5322ms
2025-08-25 01:36:48.290 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:36:48.382 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:36:49.926 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1635.4138ms
2025-08-25 01:36:52.274 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:36:52.282 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:36:53.742 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1467.404ms
2025-08-25 01:36:56.284 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:36:56.330 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:36:57.994 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1709.5107ms
2025-08-25 01:37:01.274 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:37:01.286 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:37:01.787 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 2
2025-08-25 01:37:01.869 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-08-25 01:37:02.043 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Orders` SET `Status` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-08-25 01:37:02.589 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1314.8278ms
2025-08-25 01:37:04.074 +03:00 [INF] Order 2 auto-expired and restock scheduled
2025-08-25 01:37:05.264 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:37:05.274 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:37:06.771 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1507.1777ms
2025-08-25 01:37:07.482 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 2
2025-08-25 01:37:07.587 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-08-25 01:37:07.591 +03:00 [INF] Execute GetAll for entity OrderItem
2025-08-25 01:37:07.687 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`ProductVariantId`, `o`.`Quantity`
FROM `OrderItem` AS `o`
WHERE `o`.`OrderId` = @__orderId_0
2025-08-25 01:37:07.696 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-08-25 01:37:07.783 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = 1
2025-08-25 01:37:07.788 +03:00 [INF] Execute Update for entity ProductVariant
2025-08-25 01:37:07.790 +03:00 [INF] ProductVariant marked for update (pending save)
2025-08-25 01:37:08.037 +03:00 [INF] Executed DbCommand (137ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p12='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Orders` SET `RestockedAt` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

UPDATE `ProductVariants` SET `Color` = @p2, `CreatedAt` = @p3, `DeletedAt` = @p4, `IsActive` = @p5, `Length` = @p6, `ModifiedAt` = @p7, `ProductId` = @p8, `Quantity` = @p9, `Size` = @p10, `Waist` = @p11
WHERE `Id` = @p12;
SELECT ROW_COUNT();
2025-08-25 01:37:08.748 +03:00 [INF] Removing cache by tag: product_search
2025-08-25 01:37:09.335 +03:00 [WRN] No cache entries found for tag: product_search
2025-08-25 01:37:09.591 +03:00 [INF] Restocked inventory for order 2
2025-08-25 01:37:10.270 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:37:10.280 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:37:11.591 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1321.1714ms
2025-08-25 01:37:11.885 +03:00 [INF] Removing cache by tag: order
2025-08-25 01:37:12.262 +03:00 [WRN] No cache entries found for tag: order
2025-08-25 01:37:12.272 +03:00 [INF] Successfully invalidated order cache
2025-08-25 01:37:13.722 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:37:13.727 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:37:15.180 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1457.5243ms
2025-08-25 01:37:17.279 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:37:17.288 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:37:18.783 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1503.4583ms
2025-08-25 01:37:21.279 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:37:21.283 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:37:22.820 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1541.4669ms
2025-08-25 01:37:25.283 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:37:25.300 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:37:26.854 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1570.9931ms
2025-08-25 01:37:29.922 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:37:30.155 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:37:32.079 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2156.5374ms
2025-08-25 01:37:35.296 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:37:35.301 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:37:36.792 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1495.283ms
2025-08-25 01:37:39.280 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:37:39.291 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:37:40.799 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1518.9149ms
2025-08-25 01:37:43.532 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:37:43.553 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:37:45.060 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1527.7901ms
2025-08-25 01:37:47.267 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:37:47.274 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:37:48.743 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1475.5506ms
2025-08-25 01:37:51.274 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:37:51.278 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:37:52.801 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1526.8744ms
2025-08-25 01:37:55.279 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:37:55.283 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:37:56.745 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1466.1225ms
2025-08-25 01:37:59.271 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:37:59.275 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:38:00.796 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1525.3109ms
2025-08-25 01:38:03.277 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:38:03.283 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:38:04.772 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1495.1541ms
2025-08-25 01:38:07.373 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:38:07.400 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:38:08.889 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1515.9514ms
2025-08-25 01:38:11.288 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:38:11.314 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:38:12.824 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1535.5458ms
2025-08-25 01:39:00.713 +03:00 [INF] DB tables already exist. Exit install
2025-08-25 01:39:02.268 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-25 01:39:03.373 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-25 01:39:04.117 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-25 01:39:04.303 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-25 01:39:04.330 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-25 01:39:04.350 +03:00 [INF] Starting data seeding...
2025-08-25 01:39:04.387 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-25 01:39:04.974 +03:00 [INF] Executed DbCommand (118ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-25 01:39:05.048 +03:00 [INF] Role 'Admin' already exists.
2025-08-25 01:39:05.208 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-25 01:39:05.217 +03:00 [INF] Role 'User' already exists.
2025-08-25 01:39:05.855 +03:00 [INF] Executed DbCommand (94ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-25 01:39:06.061 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-25 01:39:06.063 +03:00 [INF] Data seeding completed successfully.
2025-08-25 01:39:07.658 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-25 01:39:07.769 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-25 01:39:07.893 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-25 01:39:08.259 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-25 01:39:08.318 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-25 01:39:08.326 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-25 01:39:08.410 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-25 01:39:08.433 +03:00 [INF] Hosting environment: Development
2025-08-25 01:39:08.435 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-25 01:39:08.622 +03:00 [INF] Server mrrobot:22212:7dc4d982 successfully announced in 194.6551 ms
2025-08-25 01:39:08.638 +03:00 [INF] Server mrrobot:22212:7dc4d982 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-25 01:39:08.743 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 01:39:08.750 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 449.7058ms
2025-08-25 01:39:08.750 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-25 01:39:08.772 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 64.3468ms
2025-08-25 01:39:08.859 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 01:39:08.874 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 163.3123ms
2025-08-25 01:39:08.970 +03:00 [INF] Server mrrobot:22212:7dc4d982 all the dispatchers started
2025-08-25 01:39:09.352 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 492.7376ms
2025-08-25 01:39:09.657 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-25 01:39:10.168 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 510.754ms
2025-08-25 01:40:32.421 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire - null null
2025-08-25 01:40:32.447 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-25 01:40:35.038 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire - 200 null text/html 2617.3845ms
2025-08-25 01:40:35.100 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/css-dark18180970311228 - null null
2025-08-25 01:40:35.101 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/css18180150543068 - null null
2025-08-25 01:40:35.102 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/js181801272473279 - null null
2025-08-25 01:40:35.101 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 01:40:35.116 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/css-dark18180970311228 - 200 null text/css 16.1598ms
2025-08-25 01:40:35.126 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 23.995ms
2025-08-25 01:40:35.126 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 01:40:35.141 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/css18180150543068 - 200 null text/css 38.9778ms
2025-08-25 01:40:35.161 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/js181801272473279 - 200 null application/javascript 58.5666ms
2025-08-25 01:40:35.198 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 72.7787ms
2025-08-25 01:40:37.320 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 258
2025-08-25 01:40:37.333 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:40:38.241 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - null null
2025-08-25 01:40:38.767 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1446.4925ms
2025-08-25 01:40:39.903 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - 200 null text/html 1661.7661ms
2025-08-25 01:40:39.963 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 01:40:39.975 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 01:40:40.032 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 68.5167ms
2025-08-25 01:40:40.051 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 75.4454ms
2025-08-25 01:40:41.556 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - null null
2025-08-25 01:40:42.067 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:40:42.086 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:40:43.551 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1484.4001ms
2025-08-25 01:40:44.238 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - 200 null text/html 2681.5228ms
2025-08-25 01:40:44.263 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 01:40:44.266 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 01:40:44.281 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 17.87ms
2025-08-25 01:40:44.355 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 88.8782ms
2025-08-25 01:40:46.336 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:40:46.359 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:40:47.312 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/details/15 - null null
2025-08-25 01:40:47.808 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1472.0284ms
2025-08-25 01:40:49.339 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/details/15 - 200 null text/html 2026.9398ms
2025-08-25 01:40:49.380 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 01:40:49.389 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 01:40:49.401 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 11.8082ms
2025-08-25 01:40:49.410 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.6102ms
2025-08-25 01:40:51.445 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:40:51.455 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:40:52.927 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1481.9206ms
2025-08-25 01:40:55.307 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:40:55.323 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:40:56.810 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1502.853ms
2025-08-25 01:40:59.303 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:40:59.320 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:41:00.832 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1529.0078ms
2025-08-25 01:41:03.294 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:41:03.307 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:41:04.914 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1620.2464ms
2025-08-25 01:41:07.303 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:41:07.312 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:41:08.793 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1489.1691ms
2025-08-25 01:41:11.294 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:41:11.304 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:41:12.766 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1471.5789ms
2025-08-25 01:41:14.190 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order/1 - null null
2025-08-25 01:41:14.417 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:41:14.718 +03:00 [INF] Executed DbCommand (153ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 01:41:14.751 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.GetOrderById (E-Commerce)'
2025-08-25 01:41:14.799 +03:00 [INF] Route matched with {action = "GetOrderById", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderDto]]] GetOrderById(Int32) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-08-25 01:41:15.304 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:41:15.312 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:41:15.323 +03:00 [INF] Executing GetOrderById for ID: 1
2025-08-25 01:41:15.336 +03:00 [INF] Getting order by ID: 1 for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, IsAdmin: false
2025-08-25 01:41:15.346 +03:00 [INF] Getting cache for key: order_id_1_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin_False
2025-08-25 01:41:15.568 +03:00 [WRN] Cache miss for key: order_id_1_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin_False
2025-08-25 01:41:15.577 +03:00 [INF] Checking if order 1 exists for user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:41:15.753 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__orderid_0='?' (DbType = Int32), @__userid_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE ((`o`.`Id` = @__orderid_0) AND (`o`.`CustomerId` = @__userid_1)) AND `o`.`DeletedAt` IS NULL)
2025-08-25 01:41:15.762 +03:00 [INF] Execute GetAll for entity Order
2025-08-25 01:41:16.360 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[@__8__locals1_orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`ModifiedAt`, `t0`.`OrderNumber`, `t0`.`Status`, `t0`.`Subtotal`, `t0`.`TaxAmount`, `t0`.`ShippingCost`, `t0`.`DiscountAmount`, `t0`.`Total`, `t0`.`Notes`, `t0`.`DeletedAt`, `t0`.`ShippedAt`, `t0`.`DeliveredAt`, `t0`.`CancelledAt`, `t0`.`c`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Email`, `t0`.`PhoneNumber`, `t1`.`Id`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`Quantity`, `t1`.`UnitPrice`, `t1`.`TotalPrice`, `t1`.`OrderedAt`, `t1`.`Id0`, `t1`.`Name`, `t1`.`Price`, `t1`.`IsActive`, `t1`.`FinalPrice`, `t1`.`DiscountPrecentage`, `t1`.`MainImageUrl`, `t1`.`Id1`, `t1`.`Color`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`Size`, `t1`.`DeletedAt`, `t1`.`Length`, `t1`.`Waist`, `t1`.`Id2`, `t1`.`Id3`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`ModifiedAt`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`ShippingCost`, `o`.`DiscountAmount`, `o`.`Total`, `o`.`Notes`, `o`.`DeletedAt`, `o`.`ShippedAt`, `o`.`DeliveredAt`, `o`.`CancelledAt`, FALSE AS `c`, `t`.`Id` AS `Id0`, `t`.`Name`, `t`.`Email`, `t`.`PhoneNumber`
    FROM `Orders` AS `o`
    INNER JOIN (
        SELECT `a`.`Id`, `a`.`Email`, `a`.`PhoneNumber`, `a`.`Name`
        FROM `AspNetUsers` AS `a`
        WHERE `a`.`Discriminator` = 'Customer'
    ) AS `t` ON `o`.`CustomerId` = `t`.`Id`
    WHERE `o`.`Id` = @__8__locals1_orderId_0
    LIMIT 1
) AS `t0`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`CreatedAt`, `o0`.`ModifiedAt`, `o0`.`Quantity`, `o0`.`UnitPrice`, `o0`.`TotalPrice`, `o0`.`OrderedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND `i`.`DeletedAt` IS NULL
        LIMIT 1), '') AS `MainImageUrl`, `o0`.`ProductVariantId` AS `Id1`, `p0`.`Color`, COALESCE(`p0`.`CreatedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `CreatedAt0`, COALESCE(`p0`.`ModifiedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `ModifiedAt0`, `p0`.`Size`, `p0`.`DeletedAt`, COALESCE(`p0`.`Length`, 0) AS `Length`, COALESCE(`p0`.`Waist`, 0) AS `Waist`, `d`.`Id` AS `Id2`, `p0`.`Id` AS `Id3`, `o0`.`OrderId`
    FROM `OrderItem` AS `o0`
    INNER JOIN `Products` AS `p` ON `o0`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    INNER JOIN `ProductVariants` AS `p0` ON `o0`.`ProductVariantId` = `p0`.`Id`
) AS `t1` ON `t0`.`Id` = `t1`.`OrderId`
ORDER BY `t0`.`Id`, `t0`.`Id0`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id2`
2025-08-25 01:41:16.754 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1449.0596ms
2025-08-25 01:41:17.539 +03:00 [INF] Order 1 retrieved successfully for user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:41:17.569 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 01:41:17.690 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.GetOrderById (E-Commerce) in 2880.0279ms
2025-08-25 01:41:17.697 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.GetOrderById (E-Commerce)'
2025-08-25 01:41:17.705 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order/1 - 200 1411 application/json; charset=utf-8 3513.9555ms
2025-08-25 01:41:19.296 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:41:19.316 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:41:20.804 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1507.9863ms
2025-08-25 01:41:23.326 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:41:23.351 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:41:24.725 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1399.1287ms
2025-08-25 01:41:25.363 +03:00 [INF] Setting cache for key: order_id_1_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin_False
2025-08-25 01:41:25.687 +03:00 [INF] Cache set successfully for key: order_id_1_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin_False with tags: [order]
2025-08-25 01:41:25.695 +03:00 [INF] Successfully cached order with key: order_id_1_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin_False
2025-08-25 01:41:27.302 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:41:27.319 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:41:28.773 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1470.5704ms
2025-08-25 01:41:31.304 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:41:31.315 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:41:32.799 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1494.8292ms
2025-08-25 01:41:35.305 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:41:35.321 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:41:36.770 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1464.7847ms
2025-08-25 01:41:39.304 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:41:39.314 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:41:40.759 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1455.4878ms
2025-08-25 01:41:43.300 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:41:43.310 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:41:44.158 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order/2 - null null
2025-08-25 01:41:44.175 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:41:44.396 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 01:41:44.407 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.GetOrderById (E-Commerce)'
2025-08-25 01:41:44.411 +03:00 [INF] Route matched with {action = "GetOrderById", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderDto]]] GetOrderById(Int32) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-08-25 01:41:44.427 +03:00 [INF] Executing GetOrderById for ID: 2
2025-08-25 01:41:44.430 +03:00 [INF] Getting order by ID: 2 for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, IsAdmin: false
2025-08-25 01:41:44.436 +03:00 [INF] Getting cache for key: order_id_2_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin_False
2025-08-25 01:41:44.651 +03:00 [WRN] Cache miss for key: order_id_2_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin_False
2025-08-25 01:41:44.657 +03:00 [INF] Checking if order 2 exists for user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:41:44.760 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1460.1638ms
2025-08-25 01:41:44.810 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__orderid_0='?' (DbType = Int32), @__userid_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE ((`o`.`Id` = @__orderid_0) AND (`o`.`CustomerId` = @__userid_1)) AND `o`.`DeletedAt` IS NULL)
2025-08-25 01:41:44.822 +03:00 [INF] Execute GetAll for entity Order
2025-08-25 01:41:44.994 +03:00 [INF] Executed DbCommand (88ms) [Parameters=[@__8__locals1_orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`ModifiedAt`, `t0`.`OrderNumber`, `t0`.`Status`, `t0`.`Subtotal`, `t0`.`TaxAmount`, `t0`.`ShippingCost`, `t0`.`DiscountAmount`, `t0`.`Total`, `t0`.`Notes`, `t0`.`DeletedAt`, `t0`.`ShippedAt`, `t0`.`DeliveredAt`, `t0`.`CancelledAt`, `t0`.`c`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Email`, `t0`.`PhoneNumber`, `t1`.`Id`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`Quantity`, `t1`.`UnitPrice`, `t1`.`TotalPrice`, `t1`.`OrderedAt`, `t1`.`Id0`, `t1`.`Name`, `t1`.`Price`, `t1`.`IsActive`, `t1`.`FinalPrice`, `t1`.`DiscountPrecentage`, `t1`.`MainImageUrl`, `t1`.`Id1`, `t1`.`Color`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`Size`, `t1`.`DeletedAt`, `t1`.`Length`, `t1`.`Waist`, `t1`.`Id2`, `t1`.`Id3`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`ModifiedAt`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`ShippingCost`, `o`.`DiscountAmount`, `o`.`Total`, `o`.`Notes`, `o`.`DeletedAt`, `o`.`ShippedAt`, `o`.`DeliveredAt`, `o`.`CancelledAt`, FALSE AS `c`, `t`.`Id` AS `Id0`, `t`.`Name`, `t`.`Email`, `t`.`PhoneNumber`
    FROM `Orders` AS `o`
    INNER JOIN (
        SELECT `a`.`Id`, `a`.`Email`, `a`.`PhoneNumber`, `a`.`Name`
        FROM `AspNetUsers` AS `a`
        WHERE `a`.`Discriminator` = 'Customer'
    ) AS `t` ON `o`.`CustomerId` = `t`.`Id`
    WHERE `o`.`Id` = @__8__locals1_orderId_0
    LIMIT 1
) AS `t0`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`CreatedAt`, `o0`.`ModifiedAt`, `o0`.`Quantity`, `o0`.`UnitPrice`, `o0`.`TotalPrice`, `o0`.`OrderedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND `i`.`DeletedAt` IS NULL
        LIMIT 1), '') AS `MainImageUrl`, `o0`.`ProductVariantId` AS `Id1`, `p0`.`Color`, COALESCE(`p0`.`CreatedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `CreatedAt0`, COALESCE(`p0`.`ModifiedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `ModifiedAt0`, `p0`.`Size`, `p0`.`DeletedAt`, COALESCE(`p0`.`Length`, 0) AS `Length`, COALESCE(`p0`.`Waist`, 0) AS `Waist`, `d`.`Id` AS `Id2`, `p0`.`Id` AS `Id3`, `o0`.`OrderId`
    FROM `OrderItem` AS `o0`
    INNER JOIN `Products` AS `p` ON `o0`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    INNER JOIN `ProductVariants` AS `p0` ON `o0`.`ProductVariantId` = `p0`.`Id`
) AS `t1` ON `t0`.`Id` = `t1`.`OrderId`
ORDER BY `t0`.`Id`, `t0`.`Id0`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id2`
2025-08-25 01:41:45.937 +03:00 [INF] Order 2 retrieved successfully for user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:41:45.944 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 01:41:45.956 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.GetOrderById (E-Commerce) in 1530.2962ms
2025-08-25 01:41:45.968 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.GetOrderById (E-Commerce)'
2025-08-25 01:41:45.980 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order/2 - 200 1412 application/json; charset=utf-8 1821.7776ms
2025-08-25 01:41:47.313 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:41:47.340 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:41:48.781 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1468.3069ms
2025-08-25 01:41:49.402 +03:00 [INF] Setting cache for key: order_id_2_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin_False
2025-08-25 01:41:49.745 +03:00 [INF] Cache set successfully for key: order_id_2_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin_False with tags: [order]
2025-08-25 01:41:49.751 +03:00 [INF] Successfully cached order with key: order_id_2_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin_False
2025-08-25 01:41:51.306 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:41:51.319 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:41:52.644 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1337.6537ms
2025-08-25 01:41:55.301 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:41:55.310 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:41:56.785 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1483.9851ms
2025-08-25 01:41:59.310 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:41:59.323 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:42:00.787 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1477.0804ms
2025-08-25 01:42:03.311 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:42:03.321 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:42:04.809 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1497.5514ms
2025-08-25 01:42:07.305 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:42:07.322 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:42:08.788 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1483.3099ms
2025-08-25 01:42:11.306 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:42:11.323 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:42:12.768 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1462.5314ms
2025-08-25 01:42:15.326 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:42:15.352 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:42:16.849 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1523.2496ms
2025-08-25 01:42:19.308 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:42:19.327 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:42:20.784 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1475.6473ms
2025-08-25 01:42:22.952 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json-patch+json 63
2025-08-25 01:42:22.958 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:42:22.969 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:42:23.141 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 01:42:23.153 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-08-25 01:42:23.169 +03:00 [INF] Route matched with {action = "AddItemToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] AddItemToCart(E_Commerce.DtoModels.CartDtos.CreateCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-08-25 01:42:23.218 +03:00 [INF] Executing AddItemToCart for product ID: 1
2025-08-25 01:42:23.234 +03:00 [INF] Adding item to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 1
2025-08-25 01:42:23.305 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:42:23.312 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:42:23.601 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-08-25 01:42:23.612 +03:00 [INF] Execute GetAll for entity Product
2025-08-25 01:42:23.727 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__itemDto_ProductId_0='?' (DbType = Int32), @__itemDto_ProductVariantId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Price`, `t`.`c`, `t`.`EndDate`, `t`.`StartDate`, `t`.`DiscountPercent`, `t`.`DeletedAt`, `t`.`IsActive`, `t0`.`Id`, `t0`.`Quantity`, `t0`.`c`
FROM (
    SELECT `p`.`Id`, `p`.`Price`, `d`.`Id` IS NOT NULL AS `c`, `d`.`EndDate`, `d`.`StartDate`, `d`.`DiscountPercent`, `d`.`DeletedAt`, `d`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__itemDto_ProductId_0) AND `p`.`DeletedAt` IS NULL) AND `p`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Quantity`, `t1`.`c`, `t1`.`ProductId`
    FROM (
        SELECT `p0`.`Id`, `p0`.`Quantity`, 1 AS `c`, `p0`.`ProductId`, ROW_NUMBER() OVER(PARTITION BY `p0`.`ProductId` ORDER BY `p0`.`Id`) AS `row`
        FROM `ProductVariants` AS `p0`
        WHERE (`p0`.`Id` = @__itemDto_ProductVariantId_1) AND `p0`.`IsActive`
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
2025-08-25 01:42:23.749 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:42:23.882 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-08-25 01:42:23.941 +03:00 [INF] Executing CreateAsync for entity CartItem
2025-08-25 01:42:24.039 +03:00 [INF] CartItem added successfully (pending save)
2025-08-25 01:42:24.044 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-25 01:42:24.048 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-25 01:42:24.104 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-25 01:42:24.464 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (Size = 255), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `CartItems` (`AddedAt`, `CartId`, `CreatedAt`, `DeletedAt`, `ModifiedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `UnitPrice`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `CartItems`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-25 01:42:24.670 +03:00 [INF] Removing cache for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:42:24.765 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1459.6155ms
2025-08-25 01:42:25.101 +03:00 [INF] Cache removed successfully for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:42:25.103 +03:00 [INF] Item added to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 1
2025-08-25 01:42:25.108 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 01:42:25.116 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce) in 1941.9451ms
2025-08-25 01:42:25.201 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-08-25 01:42:25.202 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 200 134 application/json; charset=utf-8 2249.5809ms
2025-08-25 01:42:27.319 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:42:27.332 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:42:28.789 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1469.5033ms
2025-08-25 01:42:31.305 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:42:31.313 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:42:32.751 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1446.3489ms
2025-08-25 01:42:33.647 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - null 0
2025-08-25 01:42:33.655 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:42:33.658 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:42:33.825 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 01:42:33.843 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-08-25 01:42:33.868 +03:00 [INF] Route matched with {action = "CheckOut", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] CheckOut() on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-08-25 01:42:33.890 +03:00 [INF] Executing CheckOut
2025-08-25 01:42:33.903 +03:00 [INF] Checkout of cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:42:33.909 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:42:34.077 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-08-25 01:42:34.249 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Cart` SET `CheckoutDate` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-08-25 01:42:34.265 +03:00 [INF] Removing cache by tag: cart
2025-08-25 01:42:34.499 +03:00 [WRN] No cache entries found for tag: cart
2025-08-25 01:42:34.504 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 01:42:34.514 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.CheckOut (E-Commerce) in 626.377ms
2025-08-25 01:42:34.519 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-08-25 01:42:34.533 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - 200 122 application/json; charset=utf-8 885.8601ms
2025-08-25 01:42:35.315 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:42:35.339 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:42:36.786 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1471.0584ms
2025-08-25 01:42:39.321 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:42:39.337 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:42:40.783 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1461.1075ms
2025-08-25 01:42:43.328 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:42:43.338 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:42:44.793 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1464.2661ms
2025-08-25 01:42:47.316 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:42:47.334 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:42:48.809 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1492.37ms
2025-08-25 01:42:51.311 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:42:51.324 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:42:52.765 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1453.7426ms
2025-08-25 01:42:55.328 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:42:55.340 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:42:56.819 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1490.6873ms
2025-08-25 01:42:58.273 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order/create-from-cart - application/json-patch+json 41
2025-08-25 01:42:58.280 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:42:58.283 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:42:58.440 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 01:42:58.456 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 01:42:58.471 +03:00 [INF] Route matched with {action = "CreateOrderFromCart", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto]]] CreateOrderFromCart(E_Commerce.DtoModels.OrderDtos.CreateOrderDto) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-08-25 01:42:58.490 +03:00 [INF] Executing CreateOrderFromCart
2025-08-25 01:42:58.504 +03:00 [INF] Creating order from cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:42:58.830 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-08-25 01:42:58.946 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-08-25 01:42:58.955 +03:00 [INF] Checking if address 1 exists for customer: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:42:59.040 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__addressId_0='?' (DbType = Int32), @__customerId_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `CustomerAddresses` AS `c`
    WHERE ((`c`.`Id` = @__addressId_0) AND (`c`.`CustomerId` = @__customerId_1)) AND `c`.`DeletedAt` IS NULL)
2025-08-25 01:42:59.061 +03:00 [INF] Getting cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:42:59.067 +03:00 [INF] Getting cache for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:42:59.284 +03:00 [WRN] Cache miss for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:42:59.314 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:42:59.324 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:42:59.367 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-08-25 01:42:59.376 +03:00 [INF] Execute GetAll for entity Cart
2025-08-25 01:42:59.526 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-08-25 01:42:59.553 +03:00 [INF] Setting cache for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 01:42:59.779 +03:00 [INF] Cache set successfully for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5 with tags: [cart]
2025-08-25 01:42:59.793 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-08-25 01:42:59.911 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = 1
2025-08-25 01:42:59.969 +03:00 [INF] Execute Update for entity ProductVariant
2025-08-25 01:42:59.972 +03:00 [INF] ProductVariant marked for update (pending save)
2025-08-25 01:43:00.787 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1473.4396ms
2025-08-25 01:43:00.972 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE `o`.`OrderNumber` = @__orderNumber_0)
2025-08-25 01:43:00.982 +03:00 [INF] Executing CreateAsync for entity Order
2025-08-25 01:43:01.056 +03:00 [INF] Order added successfully (pending save)
2025-08-25 01:43:01.260 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime), @p8='?' (Size = 500), @p9='?' (Size = 50), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal), @p27='?' (DbType = Int32), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime), @p19='?' (DbType = DateTime), @p20='?' (DbType = Boolean), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Orders` (`CancelledAt`, `CreatedAt`, `CustomerAddressId`, `CustomerId`, `DeletedAt`, `DeliveredAt`, `DiscountAmount`, `ModifiedAt`, `Notes`, `OrderNumber`, `RestockedAt`, `ShippedAt`, `ShippingCost`, `Status`, `Subtotal`, `TaxAmount`, `Total`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Orders`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

UPDATE `ProductVariants` SET `Color` = @p17, `CreatedAt` = @p18, `DeletedAt` = @p19, `IsActive` = @p20, `Length` = @p21, `ModifiedAt` = @p22, `ProductId` = @p23, `Quantity` = @p24, `Size` = @p25, `Waist` = @p26
WHERE `Id` = @p27;
SELECT ROW_COUNT();
2025-08-25 01:43:01.388 +03:00 [INF] Executing CreateRangeAsync for entity OrderItem
2025-08-25 01:43:01.435 +03:00 [INF] 1 OrderItem entities added successfully (pending save)
2025-08-25 01:43:01.440 +03:00 [INF] Clearing cart: 1
2025-08-25 01:43:01.527 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__cartId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE `c`.`CartId` = @__cartId_0
2025-08-25 01:43:01.542 +03:00 [INF] Cart 1 cleared successfully
2025-08-25 01:43:01.720 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Decimal), @p10='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM `CartItems`
WHERE `Id` = @p0;
SELECT ROW_COUNT();

INSERT INTO `OrderItem` (`CreatedAt`, `DeletedAt`, `ModifiedAt`, `OrderId`, `OrderedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `TotalPrice`, `UnitPrice`)
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
SELECT `Id`
FROM `OrderItem`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-25 01:43:01.895 +03:00 [INF] Execute AddUserOpreationAsync
2025-08-25 01:43:01.903 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-08-25 01:43:01.945 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-08-25 01:43:01.953 +03:00 [INF] Execute GetAll for entity Order
2025-08-25 01:43:02.161 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__createdOrder_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`ModifiedAt`, `t0`.`OrderNumber`, `t0`.`Status`, `t0`.`Subtotal`, `t0`.`TaxAmount`, `t0`.`ShippingCost`, `t0`.`DiscountAmount`, `t0`.`Total`, `t0`.`Notes`, `t0`.`DeletedAt`, `t0`.`ShippedAt`, `t0`.`DeliveredAt`, `t0`.`CancelledAt`, `t0`.`c`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Email`, `t0`.`PhoneNumber`, `t1`.`Id`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`Quantity`, `t1`.`UnitPrice`, `t1`.`TotalPrice`, `t1`.`OrderedAt`, `t1`.`Id0`, `t1`.`Name`, `t1`.`Price`, `t1`.`IsActive`, `t1`.`FinalPrice`, `t1`.`DiscountPrecentage`, `t1`.`MainImageUrl`, `t1`.`Id1`, `t1`.`Color`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`Size`, `t1`.`DeletedAt`, `t1`.`Length`, `t1`.`Waist`, `t1`.`Id2`, `t1`.`Id3`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`ModifiedAt`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`ShippingCost`, `o`.`DiscountAmount`, `o`.`Total`, `o`.`Notes`, `o`.`DeletedAt`, `o`.`ShippedAt`, `o`.`DeliveredAt`, `o`.`CancelledAt`, FALSE AS `c`, `t`.`Id` AS `Id0`, `t`.`Name`, `t`.`Email`, `t`.`PhoneNumber`
    FROM `Orders` AS `o`
    INNER JOIN (
        SELECT `a`.`Id`, `a`.`Email`, `a`.`PhoneNumber`, `a`.`Name`
        FROM `AspNetUsers` AS `a`
        WHERE `a`.`Discriminator` = 'Customer'
    ) AS `t` ON `o`.`CustomerId` = `t`.`Id`
    WHERE `o`.`Id` = @__createdOrder_Id_0
    LIMIT 1
) AS `t0`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`CreatedAt`, `o0`.`ModifiedAt`, `o0`.`Quantity`, `o0`.`UnitPrice`, `o0`.`TotalPrice`, `o0`.`OrderedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND `i`.`DeletedAt` IS NULL
        LIMIT 1), '') AS `MainImageUrl`, `o0`.`ProductVariantId` AS `Id1`, `p0`.`Color`, COALESCE(`p0`.`CreatedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `CreatedAt0`, COALESCE(`p0`.`ModifiedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `ModifiedAt0`, `p0`.`Size`, `p0`.`DeletedAt`, COALESCE(`p0`.`Length`, 0) AS `Length`, COALESCE(`p0`.`Waist`, 0) AS `Waist`, `d`.`Id` AS `Id2`, `p0`.`Id` AS `Id3`, `o0`.`OrderId`
    FROM `OrderItem` AS `o0`
    INNER JOIN `Products` AS `p` ON `o0`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    INNER JOIN `ProductVariants` AS `p0` ON `o0`.`ProductVariantId` = `p0`.`Id`
) AS `t1` ON `t0`.`Id` = `t1`.`OrderId`
ORDER BY `t0`.`Id`, `t0`.`Id0`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id2`
2025-08-25 01:43:02.174 +03:00 [INF] Removing cache by tag: order
2025-08-25 01:43:03.190 +03:00 [INF] Removed 2 cache entries for tag: order
2025-08-25 01:43:03.322 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:43:03.340 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:43:04.123 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 01:43:04.129 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce) in 5649.7509ms
2025-08-25 01:43:04.135 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 01:43:04.141 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order/create-from-cart - 201 1442 application/json; charset=utf-8 5867.3112ms
2025-08-25 01:43:04.812 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1489.7ms
2025-08-25 01:43:04.964 +03:00 [INF] Removing cache by tags: [productwithvariantdata, product_search, variantdata]
2025-08-25 01:43:06.470 +03:00 [INF] Removed 2 cache entries for tags: [productwithvariantdata, product_search, variantdata]
2025-08-25 01:43:07.313 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:43:07.326 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:43:08.656 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1342.7371ms
2025-08-25 01:43:11.314 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:43:11.322 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:43:12.782 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1467.4116ms
2025-08-25 01:43:15.320 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:43:15.333 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:43:16.797 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1476.9113ms
2025-08-25 01:43:19.312 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:43:19.322 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:43:20.769 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1457.2023ms
2025-08-25 01:43:23.318 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:43:23.329 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:43:24.779 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1460.4277ms
2025-08-25 01:43:27.324 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:43:27.338 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:43:28.809 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1484.4817ms
2025-08-25 01:43:31.316 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:43:31.327 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:43:32.791 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1474.8716ms
2025-08-25 01:43:35.329 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:43:35.340 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:43:36.779 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1449.5522ms
2025-08-25 01:43:39.040 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants - null null
2025-08-25 01:43:39.048 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:43:39.207 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 01:43:39.215 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.GetProductVariants (E-Commerce)'
2025-08-25 01:43:39.234 +03:00 [INF] Route matched with {action = "GetProductVariants", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]]] GetProductVariants(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-08-25 01:43:39.278 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-08-25 01:43:39.332 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:43:39.344 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:43:39.448 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__productId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`Size`, `p`.`Waist`, `p`.`Length`, `p`.`Quantity`, `p`.`ProductId`, `p`.`IsActive`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`ModifiedAt`
FROM `ProductVariants` AS `p`
WHERE (`p`.`ProductId` = @__productId_0) AND `p`.`DeletedAt` IS NULL
2025-08-25 01:43:39.462 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 01:43:39.476 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.GetProductVariants (E-Commerce) in 232.5439ms
2025-08-25 01:43:39.485 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.GetProductVariants (E-Commerce)'
2025-08-25 01:43:39.488 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants - 200 318 application/json; charset=utf-8 447.8492ms
2025-08-25 01:43:40.843 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1511.5116ms
2025-08-25 01:43:43.320 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:43:43.333 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:43:44.805 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1484.9702ms
2025-08-25 01:43:47.329 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:43:47.341 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:43:48.915 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1586.3894ms
2025-08-25 01:43:51.330 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:43:51.346 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:43:52.795 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1465.1668ms
2025-08-25 01:43:55.333 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:43:55.345 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:43:56.786 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1452.548ms
2025-08-25 01:43:59.322 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:43:59.329 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:43:59.692 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/1 - null null
2025-08-25 01:43:59.701 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:43:59.866 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 01:43:59.877 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-08-25 01:43:59.886 +03:00 [INF] Route matched with {action = "GetProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDetailDto]]] GetProduct(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-08-25 01:43:59.911 +03:00 [INF] Executing GetProduct for ID: 1
2025-08-25 01:43:59.920 +03:00 [INF] Retrieving product by id: 1, isActive: , deletedOnly: 
2025-08-25 01:43:59.923 +03:00 [INF] Getting cache for key: product_detail:1:isActive=:deletedOnly=
2025-08-25 01:44:00.147 +03:00 [WRN] Cache miss for key: product_detail:1:isActive=:deletedOnly=
2025-08-25 01:44:00.205 +03:00 [INF] Execute GetAll for entity Product
2025-08-25 01:44:00.282 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-25 01:44:00.465 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__8__locals1_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`IsActive`, `t`.`Price`, `t`.`c`, `t`.`fitType`, `t`.`SubCategoryId`, `t`.`c0`, `t`.`Id0`, `t`.`DiscountPercent`, `t`.`IsActive0`, `t`.`StartDate`, `t`.`EndDate`, `t`.`Name0`, `t`.`Description0`, `t0`.`Id`, `t0`.`Url`, `t1`.`Id`, `t1`.`IsActive`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`Color`, `t1`.`Size`, `t1`.`Waist`, `t1`.`Length`, `t1`.`Quantity`, `t1`.`ProductId`
FROM (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`IsActive`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `c`, `p`.`fitType`, `p`.`SubCategoryId`, ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) AS `c0`, `d`.`Id` AS `Id0`, `d`.`DiscountPercent`, `d`.`IsActive` AS `IsActive0`, `d`.`StartDate`, `d`.`EndDate`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE `p`.`Id` = @__8__locals1_id_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
LEFT JOIN (
    SELECT `p0`.`Id`, `p0`.`IsActive`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`Color`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity`, `p0`.`ProductId`
    FROM `ProductVariants` AS `p0`
    WHERE (`p0`.`DeletedAt` IS NULL AND `p0`.`IsActive`) AND (`p0`.`Quantity` <> 0)
) AS `t1` ON `t`.`Id` = `t1`.`ProductId`
ORDER BY `t`.`Id`, `t`.`Id0`, `t0`.`Id`
2025-08-25 01:44:00.483 +03:00 [INF] Product found: zV4Ok4bWzFGA6KsVb3uZ (ID: 1)
2025-08-25 01:44:00.800 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1478.2481ms
2025-08-25 01:44:01.445 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDetailDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 01:44:01.463 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProduct (E-Commerce) in 1566.3223ms
2025-08-25 01:44:01.474 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-08-25 01:44:01.486 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/1 - 200 753 application/json; charset=utf-8 1794.0623ms
2025-08-25 01:44:03.332 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:44:03.353 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:44:04.825 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1492.943ms
2025-08-25 01:44:07.325 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:44:07.338 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:44:08.657 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1331.5895ms
2025-08-25 01:44:09.131 +03:00 [INF] 1 servers were removed due to timeout
2025-08-25 01:44:10.541 +03:00 [INF] Setting cache for key: product_detail:1:isActive=:deletedOnly=
2025-08-25 01:44:10.780 +03:00 [INF] Cache set successfully for key: product_detail:1:isActive=:deletedOnly= with tags: [productwithvariantdata]
2025-08-25 01:44:11.347 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:44:11.362 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:44:12.830 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1482.7537ms
2025-08-25 01:44:15.336 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:44:15.357 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:44:16.806 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1469.9422ms
2025-08-25 01:44:19.499 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:44:19.506 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:44:21.066 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1566.2161ms
2025-08-25 01:44:25.230 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:44:25.236 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:44:27.265 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2034.8392ms
2025-08-25 01:44:30.324 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:44:30.331 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:44:31.841 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1517.0215ms
2025-08-25 01:44:34.338 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:44:34.360 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:44:35.953 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1614.7414ms
2025-08-25 01:44:38.701 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:44:38.719 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:44:40.209 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1508.4084ms
2025-08-25 01:44:42.873 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:44:42.959 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:44:44.641 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1767.5858ms
2025-08-25 01:44:48.673 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:44:48.678 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:44:50.514 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1840.8233ms
2025-08-25 01:44:57.532 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:44:57.545 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:44:59.042 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1510.0088ms
2025-08-25 01:45:01.333 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:45:01.338 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:45:02.818 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1485.1619ms
2025-08-25 01:45:05.485 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:45:05.502 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:45:06.972 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1487.1738ms
2025-08-25 01:45:09.338 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:45:09.352 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:45:10.830 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1491.9344ms
2025-08-25 01:45:13.336 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:45:13.347 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:45:14.850 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1514.4005ms
2025-08-25 01:45:17.361 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:45:17.373 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:45:18.918 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1556.5224ms
2025-08-25 01:45:21.331 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:45:21.336 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:45:22.811 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1480.5462ms
2025-08-25 01:45:25.332 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:45:25.379 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:45:26.969 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1637.3041ms
2025-08-25 01:45:29.534 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:45:29.568 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:45:31.096 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1561.8527ms
2025-08-25 01:45:33.336 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:45:33.341 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:45:34.794 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1458.0475ms
2025-08-25 01:45:37.327 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:45:37.364 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:45:38.869 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1541.3083ms
2025-08-25 01:45:41.334 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:45:41.345 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:45:42.716 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1381.4962ms
2025-08-25 01:45:43.820 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 3
2025-08-25 01:45:43.912 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-08-25 01:45:44.087 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Orders` SET `Status` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-08-25 01:45:45.340 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:45:45.365 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:45:46.067 +03:00 [INF] Order 3 auto-expired and restock scheduled
2025-08-25 01:45:46.816 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1475.5765ms
2025-08-25 01:45:47.188 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 3
2025-08-25 01:45:47.268 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-08-25 01:45:47.289 +03:00 [INF] Execute GetAll for entity OrderItem
2025-08-25 01:45:47.392 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`ProductVariantId`, `o`.`Quantity`
FROM `OrderItem` AS `o`
WHERE `o`.`OrderId` = @__orderId_0
2025-08-25 01:45:47.408 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-08-25 01:45:47.505 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = 1
2025-08-25 01:45:47.510 +03:00 [INF] Execute Update for entity ProductVariant
2025-08-25 01:45:47.511 +03:00 [INF] ProductVariant marked for update (pending save)
2025-08-25 01:45:47.666 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p12='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Orders` SET `RestockedAt` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

UPDATE `ProductVariants` SET `Color` = @p2, `CreatedAt` = @p3, `DeletedAt` = @p4, `IsActive` = @p5, `Length` = @p6, `ModifiedAt` = @p7, `ProductId` = @p8, `Quantity` = @p9, `Size` = @p10, `Waist` = @p11
WHERE `Id` = @p12;
SELECT ROW_COUNT();
2025-08-25 01:45:47.825 +03:00 [INF] Removing cache by tag: product_search
2025-08-25 01:45:48.040 +03:00 [WRN] No cache entries found for tag: product_search
2025-08-25 01:45:48.066 +03:00 [INF] Restocked inventory for order 3
2025-08-25 01:45:49.079 +03:00 [INF] Removing cache by tag: order
2025-08-25 01:45:49.305 +03:00 [WRN] No cache entries found for tag: order
2025-08-25 01:45:49.309 +03:00 [INF] Successfully invalidated order cache
2025-08-25 01:45:49.339 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:45:49.346 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:45:50.644 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1304.4362ms
2025-08-25 01:45:53.327 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:45:53.334 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:45:54.780 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1453.2677ms
2025-08-25 01:45:57.341 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:45:57.353 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:45:58.808 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1466.7884ms
2025-08-25 01:46:01.346 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:46:01.367 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:46:02.832 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1485.8499ms
2025-08-25 01:46:05.345 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:46:05.356 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:46:06.804 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1458.7071ms
2025-08-25 01:46:09.347 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:46:09.355 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:46:10.799 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1452.2208ms
2025-08-25 01:46:13.336 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:46:13.344 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:46:14.836 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1499.6635ms
2025-08-25 01:46:17.341 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:46:17.346 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:46:18.815 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1473.9749ms
2025-08-25 01:46:21.331 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:46:21.336 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:46:22.820 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1488.9962ms
2025-08-25 01:46:25.337 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:46:25.352 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:46:26.817 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1479.9391ms
2025-08-25 01:46:29.339 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:46:29.348 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:46:30.870 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1530.7794ms
2025-08-25 01:46:33.343 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:46:33.350 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:46:34.816 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1472.9582ms
2025-08-25 01:46:37.348 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:46:37.357 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:46:38.827 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1479.1763ms
2025-08-25 01:46:41.344 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:46:41.542 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:46:43.067 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1722.6817ms
2025-08-25 01:46:45.363 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:46:45.367 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:46:46.857 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1494.0898ms
2025-08-25 01:46:49.353 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:46:49.369 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:46:51.084 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1730.4374ms
2025-08-25 01:46:53.777 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:46:53.783 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:46:55.308 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1530.9362ms
2025-08-25 01:46:58.396 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:46:58.414 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:46:59.917 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1520.5651ms
2025-08-25 01:47:03.333 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:47:03.338 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:47:04.834 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1500.0524ms
2025-08-25 01:47:07.361 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:47:07.374 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:47:08.852 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1490.9428ms
2025-08-25 01:47:11.462 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:47:11.486 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:47:12.988 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1525.6001ms
2025-08-25 01:47:15.339 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:47:15.349 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:47:16.881 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1542.3835ms
2025-08-25 01:47:19.350 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:47:19.358 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:47:20.888 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1537.8657ms
2025-08-25 01:47:23.345 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:47:23.353 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:47:24.824 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1478.4368ms
2025-08-25 01:47:27.357 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:47:27.424 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:47:28.973 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1616.0158ms
2025-08-25 01:47:32.348 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:47:32.355 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:47:33.799 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1451.4214ms
2025-08-25 01:47:36.352 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:47:36.362 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:47:37.842 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1490.0346ms
2025-08-25 01:47:40.352 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:47:40.356 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:47:41.927 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1575.3618ms
2025-08-25 01:47:48.210 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:47:48.776 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:47:50.347 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2136.5974ms
2025-08-25 01:47:51.386 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/details/15 - null null
2025-08-25 01:47:53.628 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/details/15 - 200 null text/html 2242.2924ms
2025-08-25 01:47:53.898 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:47:53.933 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:47:54.227 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 01:47:54.311 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 01:47:54.419 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 191.7005ms
2025-08-25 01:47:54.498 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 186.8262ms
2025-08-25 01:47:55.567 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1668.4332ms
2025-08-25 01:48:01.351 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:48:01.356 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:48:02.851 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1499.6571ms
2025-08-25 01:48:05.386 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:48:05.394 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:48:06.975 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1589.0767ms
2025-08-25 01:48:09.953 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:48:09.973 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:48:11.439 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1485.4194ms
2025-08-25 01:48:14.410 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:48:14.413 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:48:15.897 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1486.337ms
2025-08-25 01:48:18.356 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:48:18.361 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:48:19.841 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1485.2627ms
2025-08-25 01:48:22.343 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:48:22.348 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:48:23.787 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1443.6178ms
2025-08-25 01:48:26.349 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:48:26.361 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:48:27.804 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1455.4445ms
2025-08-25 01:48:30.354 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:48:30.358 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:48:31.819 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1465.3474ms
2025-08-25 01:48:34.401 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 01:48:34.406 +03:00 [INF] CORS policy execution successful.
2025-08-25 01:48:35.914 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1512.8577ms
2025-08-25 01:51:32.690 +03:00 [INF] DB tables already exist. Exit install
2025-08-25 01:51:34.381 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-25 01:51:35.524 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-25 01:51:36.242 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-25 01:51:36.447 +03:00 [INF] Executed DbCommand (106ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-25 01:51:36.474 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-25 01:51:36.499 +03:00 [INF] Starting data seeding...
2025-08-25 01:51:36.530 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-25 01:51:37.038 +03:00 [INF] Executed DbCommand (118ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-25 01:51:37.140 +03:00 [INF] Role 'Admin' already exists.
2025-08-25 01:51:37.316 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-25 01:51:37.329 +03:00 [INF] Role 'User' already exists.
2025-08-25 01:51:37.552 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-25 01:51:37.641 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-25 01:51:37.646 +03:00 [INF] Data seeding completed successfully.
2025-08-25 01:51:39.375 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-25 01:51:39.503 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-25 01:51:39.542 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-25 01:51:39.587 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-25 01:51:39.589 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-25 01:51:39.603 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-25 01:51:39.607 +03:00 [INF] Hosting environment: Development
2025-08-25 01:51:39.610 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-25 01:51:39.799 +03:00 [INF] Server mrrobot:5768:9598c831 successfully announced in 188.1787 ms
2025-08-25 01:51:39.943 +03:00 [INF] Server mrrobot:5768:9598c831 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-25 01:51:39.973 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-25 01:51:40.057 +03:00 [INF] Server mrrobot:5768:9598c831 all the dispatchers started
2025-08-25 01:51:40.597 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 01:51:40.599 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 627.461ms
2025-08-25 01:51:40.599 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-25 01:51:40.871 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 272.8201ms
2025-08-25 01:51:40.890 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 01:51:40.896 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 296.1715ms
2025-08-25 01:51:41.296 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 405.0315ms
2025-08-25 01:51:41.367 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-25 01:51:41.919 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 551.4343ms
2025-08-25 01:54:56.899 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants - null null
2025-08-25 01:54:56.909 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-25 01:54:57.174 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:54:57.418 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 01:54:57.449 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants - 401 null application/json 549.9825ms
2025-08-25 01:55:17.244 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants - null null
2025-08-25 01:55:17.315 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:55:17.577 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 01:55:17.598 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.GetProductVariants (E-Commerce)'
2025-08-25 01:55:17.643 +03:00 [INF] Route matched with {action = "GetProductVariants", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]]] GetProductVariants(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-08-25 01:55:18.137 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-08-25 01:55:18.414 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__productId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`Size`, `p`.`Waist`, `p`.`Length`, `p`.`Quantity`, `p`.`ProductId`, `p`.`IsActive`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`ModifiedAt`
FROM `ProductVariants` AS `p`
WHERE (`p`.`ProductId` = @__productId_0) AND `p`.`DeletedAt` IS NULL
2025-08-25 01:55:18.439 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 01:55:18.482 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.GetProductVariants (E-Commerce) in 826.6465ms
2025-08-25 01:55:18.486 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.GetProductVariants (E-Commerce)'
2025-08-25 01:55:18.493 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants - 200 319 application/json; charset=utf-8 1249.0989ms
2025-08-25 01:55:56.565 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/1 - null null
2025-08-25 01:55:56.583 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 01:55:56.745 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 01:55:56.762 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-08-25 01:55:56.791 +03:00 [INF] Route matched with {action = "GetProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDetailDto]]] GetProduct(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-08-25 01:55:56.832 +03:00 [INF] Executing GetProduct for ID: 1
2025-08-25 01:55:56.852 +03:00 [INF] Retrieving product by id: 1, isActive: , deletedOnly: 
2025-08-25 01:55:56.865 +03:00 [INF] Getting cache for key: product_detail:1:isActive=:deletedOnly=
2025-08-25 01:55:57.204 +03:00 [INF] Cache hit for key: product_detail:1:isActive=:deletedOnly=
2025-08-25 01:55:57.368 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDetailDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 01:55:57.427 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProduct (E-Commerce) in 615.5852ms
2025-08-25 01:55:57.443 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-08-25 01:55:57.449 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/1 - 200 751 application/json; charset=utf-8 883.2186ms
2025-08-25 01:56:40.346 +03:00 [INF] 1 servers were removed due to timeout
2025-08-25 01:58:12.042 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-25 01:58:12.055 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 13.0135ms
2025-08-25 01:58:12.207 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-25 01:58:12.219 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 12.5081ms
2025-08-25 01:58:12.238 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 01:58:12.241 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 01:58:12.255 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 13.463ms
2025-08-25 01:58:12.260 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 21.9186ms
2025-08-25 01:58:12.633 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-25 01:58:12.842 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 209.0981ms
2025-08-25 01:59:05.081 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-25 01:59:05.326 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 244.5222ms
2025-08-25 01:59:06.844 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-25 01:59:06.849 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 5.7885ms
2025-08-25 01:59:07.155 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 01:59:07.157 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 01:59:07.221 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 65.5484ms
2025-08-25 01:59:07.231 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 74.0219ms
2025-08-25 01:59:09.091 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-25 01:59:09.748 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 656.6408ms
2025-08-25 01:59:24.031 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-25 01:59:24.125 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 93.693ms
2025-08-25 01:59:24.442 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-25 01:59:24.476 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 33.9999ms
2025-08-25 01:59:24.478 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 01:59:24.495 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 01:59:24.526 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 47.981ms
2025-08-25 01:59:24.560 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 64.6377ms
2025-08-25 01:59:25.113 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-25 01:59:25.367 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 254.0154ms
2025-08-25 02:00:03.107 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - null null
2025-08-25 02:00:03.115 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 02:00:03.272 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 02:00:03.298 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.ListOrders (E-Commerce)'
2025-08-25 02:00:03.314 +03:00 [INF] Route matched with {action = "ListOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.OrderDtos.OrderListDto]]]] ListOrders(System.String, System.Nullable`1[System.Boolean], Int32, Int32, System.Nullable`1[E_Commerce.Enums.OrderStatus]) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-08-25 02:00:03.345 +03:00 [INF] Executing ListOrders: role: Admin, userId: , deleted: , page: 1, size: 10, status: 
2025-08-25 02:00:03.357 +03:00 [INF] Filtering orders - UserId: null, Deleted: null, Page: 1, PageSize: 10, Status: null
2025-08-25 02:00:03.370 +03:00 [INF] Getting cache for key: order_filter_user_all_deleted_all_page_1_size_10_status_all
2025-08-25 02:00:03.694 +03:00 [WRN] Cache miss for key: order_filter_user_all_deleted_all_page_1_size_10_status_all
2025-08-25 02:00:03.698 +03:00 [INF] Execute GetAll for entity Order
2025-08-25 02:00:03.978 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`OrderNumber`, `t0`.`Name`, `t`.`Status`, `t`.`Total`, `t`.`CreatedAt`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`CustomerId`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Total`
    FROM `Orders` AS `o`
    ORDER BY `o`.`CreatedAt` DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
INNER JOIN (
    SELECT `a`.`Id`, `a`.`Name`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Discriminator` = 'Customer'
) AS `t0` ON `t`.`CustomerId` = `t0`.`Id`
ORDER BY `t`.`CreatedAt` DESC
2025-08-25 02:00:05.029 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.OrderDtos.OrderListDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 02:00:05.045 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.ListOrders (E-Commerce) in 1722.9146ms
2025-08-25 02:00:05.051 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.ListOrders (E-Commerce)'
2025-08-25 02:00:05.058 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - 200 615 application/json; charset=utf-8 1951.0578ms
2025-08-25 02:00:07.935 +03:00 [INF] Setting cache for key: order_filter_user_all_deleted_all_page_1_size_10_status_all
2025-08-25 02:00:08.202 +03:00 [INF] Cache set successfully for key: order_filter_user_all_deleted_all_page_1_size_10_status_all with tags: [order]
2025-08-25 02:00:08.208 +03:00 [INF] Successfully cached order list with key: order_filter_user_all_deleted_all_page_1_size_10_status_all
2025-08-25 02:01:22.667 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-25 02:01:23.100 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 432.7714ms
2025-08-25 02:01:23.209 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-25 02:01:23.217 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 02:01:24.004 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 02:01:24.027 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 818.637ms
2025-08-25 02:01:24.481 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 476.3948ms
2025-08-25 02:01:24.507 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 1289.5423ms
2025-08-25 02:01:25.094 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-25 02:01:25.454 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 359.8724ms
2025-08-25 02:07:51.161 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-25 02:07:51.269 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 108.5774ms
2025-08-25 02:07:51.404 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-25 02:07:51.416 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 12.0359ms
2025-08-25 02:07:51.487 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 02:07:51.493 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 5.7534ms
2025-08-25 02:07:51.530 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 02:07:51.562 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 31.9438ms
2025-08-25 02:07:52.218 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-25 02:07:52.409 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 191.344ms
2025-08-25 02:17:00.799 +03:00 [INF] DB tables already exist. Exit install
2025-08-25 02:17:02.347 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-25 02:17:03.526 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-25 02:17:04.404 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-25 02:17:04.782 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-25 02:17:04.950 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-25 02:17:04.991 +03:00 [INF] Starting data seeding...
2025-08-25 02:17:05.068 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-25 02:17:06.762 +03:00 [INF] Executed DbCommand (172ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-25 02:17:06.868 +03:00 [INF] Role 'Admin' already exists.
2025-08-25 02:17:07.033 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-25 02:17:07.039 +03:00 [INF] Role 'User' already exists.
2025-08-25 02:17:07.230 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-25 02:17:07.423 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-25 02:17:07.428 +03:00 [INF] Data seeding completed successfully.
2025-08-25 02:17:09.459 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-25 02:17:10.029 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-25 02:17:10.361 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-25 02:17:10.376 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-25 02:17:10.633 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-25 02:17:10.645 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-25 02:17:10.760 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-25 02:17:10.848 +03:00 [INF] Hosting environment: Development
2025-08-25 02:17:10.919 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-25 02:17:10.978 +03:00 [INF] Server mrrobot:25236:ba7556cf successfully announced in 191.9591 ms
2025-08-25 02:17:10.989 +03:00 [INF] Server mrrobot:25236:ba7556cf is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-25 02:17:11.157 +03:00 [INF] 1 servers were removed due to timeout
2025-08-25 02:17:11.660 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 1026.2849ms
2025-08-25 02:17:11.930 +03:00 [INF] Server mrrobot:25236:ba7556cf all the dispatchers started
2025-08-25 02:17:12.785 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-25 02:17:12.951 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 162.224ms
2025-08-25 02:17:12.974 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 02:17:13.277 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 303.5657ms
2025-08-25 02:17:13.450 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 02:17:13.470 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 20.3952ms
2025-08-25 02:17:15.287 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-25 02:17:15.702 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 414.1669ms
2025-08-25 02:19:33.128 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json-patch+json 62
2025-08-25 02:19:33.269 +03:00 [INF] CORS policy execution successful.
2025-08-25 02:19:33.431 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-25 02:19:34.011 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 02:19:34.351 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 02:19:34.393 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-08-25 02:19:34.446 +03:00 [INF] Route matched with {action = "AddItemToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] AddItemToCart(E_Commerce.DtoModels.CartDtos.CreateCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-08-25 02:19:35.062 +03:00 [INF] Executing AddItemToCart for product ID: 1
2025-08-25 02:19:35.085 +03:00 [INF] Adding item to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 1
2025-08-25 02:19:35.515 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-08-25 02:19:35.558 +03:00 [INF] Execute GetAll for entity Product
2025-08-25 02:19:35.932 +03:00 [INF] Executed DbCommand (102ms) [Parameters=[@__itemDto_ProductId_0='?' (DbType = Int32), @__itemDto_ProductVariantId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Price`, `t`.`c`, `t`.`EndDate`, `t`.`StartDate`, `t`.`DiscountPercent`, `t`.`DeletedAt`, `t`.`IsActive`, `t0`.`Id`, `t0`.`Quantity`, `t0`.`c`
FROM (
    SELECT `p`.`Id`, `p`.`Price`, `d`.`Id` IS NOT NULL AS `c`, `d`.`EndDate`, `d`.`StartDate`, `d`.`DiscountPercent`, `d`.`DeletedAt`, `d`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__itemDto_ProductId_0) AND `p`.`DeletedAt` IS NULL) AND `p`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Quantity`, `t1`.`c`, `t1`.`ProductId`
    FROM (
        SELECT `p0`.`Id`, `p0`.`Quantity`, 1 AS `c`, `p0`.`ProductId`, ROW_NUMBER() OVER(PARTITION BY `p0`.`ProductId` ORDER BY `p0`.`Id`) AS `row`
        FROM `ProductVariants` AS `p0`
        WHERE (`p0`.`Id` = @__itemDto_ProductVariantId_1) AND `p0`.`IsActive`
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
2025-08-25 02:19:35.964 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:19:36.140 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-08-25 02:19:36.266 +03:00 [INF] Executing CreateAsync for entity CartItem
2025-08-25 02:19:36.448 +03:00 [INF] CartItem added successfully (pending save)
2025-08-25 02:19:36.459 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-25 02:19:36.464 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-25 02:19:36.536 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-25 02:19:37.131 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (Size = 255), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `CartItems` (`AddedAt`, `CartId`, `CreatedAt`, `DeletedAt`, `ModifiedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `UnitPrice`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `CartItems`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-25 02:19:37.429 +03:00 [INF] Removing cache for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:19:37.917 +03:00 [INF] Cache removed successfully for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:19:37.921 +03:00 [INF] Item added to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 1
2025-08-25 02:19:37.960 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 02:19:38.029 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce) in 3557.6123ms
2025-08-25 02:19:38.042 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-08-25 02:19:38.066 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 200 134 application/json; charset=utf-8 4937.8686ms
2025-08-25 02:19:56.632 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - null 0
2025-08-25 02:19:56.845 +03:00 [INF] CORS policy execution successful.
2025-08-25 02:19:56.903 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 02:19:57.086 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 02:19:57.114 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-08-25 02:19:57.167 +03:00 [INF] Route matched with {action = "CheckOut", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] CheckOut() on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-08-25 02:19:57.319 +03:00 [INF] Executing CheckOut
2025-08-25 02:19:57.349 +03:00 [INF] Checkout of cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:19:57.366 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:19:57.529 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-08-25 02:19:57.731 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Cart` SET `CheckoutDate` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-08-25 02:19:57.764 +03:00 [INF] Removing cache by tag: cart
2025-08-25 02:19:58.602 +03:00 [INF] Removed 1 cache entries for tag: cart
2025-08-25 02:19:58.627 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 02:19:58.649 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.CheckOut (E-Commerce) in 1429.0321ms
2025-08-25 02:19:59.019 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-08-25 02:19:59.031 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - 200 122 application/json; charset=utf-8 2398.6348ms
2025-08-25 02:20:18.969 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order/create-from-cart - application/json-patch+json 41
2025-08-25 02:20:19.516 +03:00 [INF] CORS policy execution successful.
2025-08-25 02:20:19.540 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 02:20:19.706 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 02:20:19.735 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 02:20:19.766 +03:00 [INF] Route matched with {action = "CreateOrderFromCart", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto]]] CreateOrderFromCart(E_Commerce.DtoModels.OrderDtos.CreateOrderDto) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-08-25 02:20:19.871 +03:00 [INF] Executing CreateOrderFromCart
2025-08-25 02:20:19.902 +03:00 [INF] Creating order from cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:20:20.520 +03:00 [INF] Executed DbCommand (102ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-08-25 02:20:20.647 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-08-25 02:20:20.671 +03:00 [INF] Checking if address 1 exists for customer: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:20:20.836 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__addressId_0='?' (DbType = Int32), @__customerId_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `CustomerAddresses` AS `c`
    WHERE ((`c`.`Id` = @__addressId_0) AND (`c`.`CustomerId` = @__customerId_1)) AND `c`.`DeletedAt` IS NULL)
2025-08-25 02:20:20.861 +03:00 [INF] Getting cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:20:20.873 +03:00 [INF] Getting cache for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:20:21.250 +03:00 [WRN] Cache miss for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:20:21.385 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-08-25 02:20:21.467 +03:00 [INF] Execute GetAll for entity Cart
2025-08-25 02:20:21.927 +03:00 [INF] Executed DbCommand (108ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-08-25 02:20:21.974 +03:00 [INF] Setting cache for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:20:22.477 +03:00 [INF] Cache set successfully for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5 with tags: [cart]
2025-08-25 02:20:22.489 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-08-25 02:20:22.678 +03:00 [INF] Executed DbCommand (89ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = 1
2025-08-25 02:20:24.083 +03:00 [INF] Execute Update for entity ProductVariant
2025-08-25 02:20:24.168 +03:00 [INF] ProductVariant marked for update (pending save)
2025-08-25 02:20:26.806 +03:00 [INF] Executed DbCommand (101ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE `o`.`OrderNumber` = @__orderNumber_0)
2025-08-25 02:20:28.391 +03:00 [INF] Executing CreateAsync for entity Order
2025-08-25 02:20:29.113 +03:00 [INF] Order added successfully (pending save)
2025-08-25 02:20:29.372 +03:00 [INF] Executed DbCommand (89ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime), @p8='?' (Size = 500), @p9='?' (Size = 50), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal), @p27='?' (DbType = Int32), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime), @p19='?' (DbType = DateTime), @p20='?' (DbType = Boolean), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Orders` (`CancelledAt`, `CreatedAt`, `CustomerAddressId`, `CustomerId`, `DeletedAt`, `DeliveredAt`, `DiscountAmount`, `ModifiedAt`, `Notes`, `OrderNumber`, `RestockedAt`, `ShippedAt`, `ShippingCost`, `Status`, `Subtotal`, `TaxAmount`, `Total`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Orders`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

UPDATE `ProductVariants` SET `Color` = @p17, `CreatedAt` = @p18, `DeletedAt` = @p19, `IsActive` = @p20, `Length` = @p21, `ModifiedAt` = @p22, `ProductId` = @p23, `Quantity` = @p24, `Size` = @p25, `Waist` = @p26
WHERE `Id` = @p27;
SELECT ROW_COUNT();
2025-08-25 02:20:29.557 +03:00 [INF] Executing CreateRangeAsync for entity OrderItem
2025-08-25 02:20:29.627 +03:00 [INF] 1 OrderItem entities added successfully (pending save)
2025-08-25 02:20:29.632 +03:00 [INF] Clearing cart: 1
2025-08-25 02:20:29.717 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__cartId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE `c`.`CartId` = @__cartId_0
2025-08-25 02:20:29.732 +03:00 [INF] Cart 1 cleared successfully
2025-08-25 02:20:29.822 +03:00 [INF] Removing cache by tags: [productwithvariantdata, product_search, variantdata]
2025-08-25 02:20:29.924 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Decimal), @p10='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM `CartItems`
WHERE `Id` = @p0;
SELECT ROW_COUNT();

INSERT INTO `OrderItem` (`CreatedAt`, `DeletedAt`, `ModifiedAt`, `OrderId`, `OrderedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `TotalPrice`, `UnitPrice`)
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
SELECT `Id`
FROM `OrderItem`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-25 02:20:29.989 +03:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-08-25 02:20:30.131 +03:00 [INF] Execute AddUserOpreationAsync
2025-08-25 02:20:30.196 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-08-25 02:20:30.330 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'E_Commerce.Context.AppDbContext'.
System.InvalidOperationException: Connection must be Open; current state is Closed
   at MySqlConnector.MySqlConnection.get_Session() in /_/src/MySqlConnector/MySqlConnection.cs:line 733
   at MySqlConnector.Core.ICancellableCommandExtensions.ResetCommandTimeout(ICancellableCommand command) in /_/src/MySqlConnector/Core/ICancellableCommand.cs:line 42
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 355
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: Connection must be Open; current state is Closed
   at MySqlConnector.MySqlConnection.get_Session() in /_/src/MySqlConnector/MySqlConnection.cs:line 733
   at MySqlConnector.Core.ICancellableCommandExtensions.ResetCommandTimeout(ICancellableCommand command) in /_/src/MySqlConnector/Core/ICancellableCommand.cs:line 42
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 355
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-08-25 02:20:30.523 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-08-25 02:20:30.536 +03:00 [INF] Execute GetAll for entity Order
2025-08-25 02:20:30.772 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[@__createdOrder_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`ModifiedAt`, `t0`.`OrderNumber`, `t0`.`Status`, `t0`.`Subtotal`, `t0`.`TaxAmount`, `t0`.`ShippingCost`, `t0`.`DiscountAmount`, `t0`.`Total`, `t0`.`Notes`, `t0`.`DeletedAt`, `t0`.`ShippedAt`, `t0`.`DeliveredAt`, `t0`.`CancelledAt`, `t0`.`c`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Email`, `t0`.`PhoneNumber`, `t1`.`Id`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`Quantity`, `t1`.`UnitPrice`, `t1`.`TotalPrice`, `t1`.`OrderedAt`, `t1`.`Id0`, `t1`.`Name`, `t1`.`Price`, `t1`.`IsActive`, `t1`.`FinalPrice`, `t1`.`DiscountPrecentage`, `t1`.`MainImageUrl`, `t1`.`Id1`, `t1`.`Color`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`Size`, `t1`.`DeletedAt`, `t1`.`Length`, `t1`.`Waist`, `t1`.`Id2`, `t1`.`Id3`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`ModifiedAt`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`ShippingCost`, `o`.`DiscountAmount`, `o`.`Total`, `o`.`Notes`, `o`.`DeletedAt`, `o`.`ShippedAt`, `o`.`DeliveredAt`, `o`.`CancelledAt`, FALSE AS `c`, `t`.`Id` AS `Id0`, `t`.`Name`, `t`.`Email`, `t`.`PhoneNumber`
    FROM `Orders` AS `o`
    INNER JOIN (
        SELECT `a`.`Id`, `a`.`Email`, `a`.`PhoneNumber`, `a`.`Name`
        FROM `AspNetUsers` AS `a`
        WHERE `a`.`Discriminator` = 'Customer'
    ) AS `t` ON `o`.`CustomerId` = `t`.`Id`
    WHERE `o`.`Id` = @__createdOrder_Id_0
    LIMIT 1
) AS `t0`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`CreatedAt`, `o0`.`ModifiedAt`, `o0`.`Quantity`, `o0`.`UnitPrice`, `o0`.`TotalPrice`, `o0`.`OrderedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND `i`.`DeletedAt` IS NULL
        LIMIT 1), '') AS `MainImageUrl`, `o0`.`ProductVariantId` AS `Id1`, `p0`.`Color`, COALESCE(`p0`.`CreatedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `CreatedAt0`, COALESCE(`p0`.`ModifiedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `ModifiedAt0`, `p0`.`Size`, `p0`.`DeletedAt`, COALESCE(`p0`.`Length`, 0) AS `Length`, COALESCE(`p0`.`Waist`, 0) AS `Waist`, `d`.`Id` AS `Id2`, `p0`.`Id` AS `Id3`, `o0`.`OrderId`
    FROM `OrderItem` AS `o0`
    INNER JOIN `Products` AS `p` ON `o0`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    INNER JOIN `ProductVariants` AS `p0` ON `o0`.`ProductVariantId` = `p0`.`Id`
) AS `t1` ON `t0`.`Id` = `t1`.`OrderId`
ORDER BY `t0`.`Id`, `t0`.`Id0`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id2`
2025-08-25 02:20:30.824 +03:00 [INF] Removing cache by tag: order
2025-08-25 02:20:31.262 +03:00 [INF] Removed 1 cache entries for tags: [productwithvariantdata, product_search, variantdata]
2025-08-25 02:20:31.516 +03:00 [INF] Removed 1 cache entries for tag: order
2025-08-25 02:20:32.480 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 02:20:32.556 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce) in 12774.1346ms
2025-08-25 02:20:32.568 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 02:20:32.581 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order/create-from-cart - 201 1437 application/json; charset=utf-8 13611.434ms
2025-08-25 02:22:58.374 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Enums/PaymentMethods - null null
2025-08-25 02:22:58.381 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 02:22:58.543 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 02:22:58.549 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.EnumsController.GetPaymentMethod (E-Commerce)'
2025-08-25 02:22:58.553 +03:00 [INF] Route matched with {action = "GetPaymentMethod", controller = "Enums"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.EnumDtos.EnumDto]]] GetPaymentMethod() on controller E_Commerce.Controllers.EnumsController (E-Commerce).
2025-08-25 02:22:58.568 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.EnumDtos.EnumDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 02:22:58.579 +03:00 [INF] Executed action E_Commerce.Controllers.EnumsController.GetPaymentMethod (E-Commerce) in 21.331ms
2025-08-25 02:22:58.584 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.EnumsController.GetPaymentMethod (E-Commerce)'
2025-08-25 02:22:58.588 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Enums/PaymentMethods - 200 221 application/json; charset=utf-8 214.3062ms
2025-08-25 02:23:50.987 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order/4/Payment - application/json-patch+json 104
2025-08-25 02:23:51.114 +03:00 [INF] CORS policy execution successful.
2025-08-25 02:23:51.122 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 02:23:51.294 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 02:23:51.303 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 02:23:51.326 +03:00 [INF] Route matched with {action = "CreateOrderFromCart", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto]]] CreateOrderFromCart(Int32, E_Commerce.DtoModels.PaymentDtos.CreatePaymentOfCustomer) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-08-25 02:23:51.337 +03:00 [INF] Executing CreateOrderFromCart
2025-08-25 02:23:51.346 +03:00 [INF] Starting CreatePaymentMethod for user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:23:51.350 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 4
2025-08-25 02:23:51.516 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-08-25 02:23:51.535 +03:00 [INF] Getting payment method ID for enum "Wallet"
2025-08-25 02:23:51.539 +03:00 [INF] Execute GetAll for entity PaymentMethod
2025-08-25 02:23:51.723 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__methodEnum_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`
FROM `PaymentMethods` AS `p`
WHERE ((`p`.`Method` = @__methodEnum_0) AND `p`.`IsActive`) AND `p`.`DeletedAt` IS NULL
LIMIT 1
2025-08-25 02:23:51.734 +03:00 [WRN] Payment method not found for enum "Wallet"
2025-08-25 02:23:51.746 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 02:23:51.755 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce) in 425.8833ms
2025-08-25 02:23:51.761 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 02:23:51.766 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order/4/Payment - 400 208 application/json; charset=utf-8 778.2948ms
2025-08-25 02:24:04.847 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order/4/Payment - application/json-patch+json 104
2025-08-25 02:24:04.850 +03:00 [INF] CORS policy execution successful.
2025-08-25 02:24:04.852 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 02:24:05.015 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 02:24:05.023 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 02:24:05.029 +03:00 [INF] Route matched with {action = "CreateOrderFromCart", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto]]] CreateOrderFromCart(Int32, E_Commerce.DtoModels.PaymentDtos.CreatePaymentOfCustomer) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-08-25 02:24:05.049 +03:00 [INF] Executing CreateOrderFromCart
2025-08-25 02:24:05.051 +03:00 [INF] Starting CreatePaymentMethod for user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:24:05.053 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 4
2025-08-25 02:24:05.210 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-08-25 02:24:05.217 +03:00 [INF] Getting payment method ID for enum "Visa"
2025-08-25 02:24:05.219 +03:00 [INF] Execute GetAll for entity PaymentMethod
2025-08-25 02:24:05.373 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__methodEnum_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`
FROM `PaymentMethods` AS `p`
WHERE ((`p`.`Method` = @__methodEnum_0) AND `p`.`IsActive`) AND `p`.`DeletedAt` IS NULL
LIMIT 1
2025-08-25 02:24:05.382 +03:00 [INF] Found payment method ID 1 for enum "Visa"
2025-08-25 02:24:05.387 +03:00 [INF] Executing GetByIdAsync for entity PaymentMethod with ID: 1
2025-08-25 02:24:05.549 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IntegrationId`, `p`.`IsActive`, `p`.`Method`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`PaymentProviderId`
FROM `PaymentMethods` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-08-25 02:24:05.601 +03:00 [INF] Execute GetAll for entity PaymentProvider
2025-08-25 02:24:05.762 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`PublicKey`
FROM `PaymentProviders` AS `p`
WHERE `p`.`Provider` = 1
LIMIT 1
2025-08-25 02:24:05.776 +03:00 [INF] Executing GetTokenAsync
2025-08-25 02:24:06.514 +03:00 [INF] Successfully retrieved PayMob token
2025-08-25 02:24:06.673 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-08-25 02:24:06.695 +03:00 [INF] Getting address by ID: 0
2025-08-25 02:24:06.869 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__addressId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AdditionalNotes`, `c`.`AddressType`, `c`.`City`, `c`.`Country`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`IsDefault`, `c`.`ModifiedAt`, `c`.`PhoneNumber`, `c`.`PostalCode`, `c`.`State`, `c`.`StreetAddress`, `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Discriminator`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `t`.`Age`, `t`.`CreateAt`, `t`.`DeletedAt`, `t`.`Gender`, `t`.`ImageId`, `t`.`ImageId1`, `t`.`LastVisit`, `t`.`Name`
FROM `CustomerAddresses` AS `c`
INNER JOIN (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Discriminator` = 'Customer'
) AS `t` ON `c`.`CustomerId` = `t`.`Id`
WHERE (`c`.`Id` = @__addressId_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-08-25 02:24:06.878 +03:00 [WRN] Address not found for payment: 0
2025-08-25 02:24:06.880 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 02:24:06.883 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce) in 1851.8333ms
2025-08-25 02:24:06.888 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 02:24:06.890 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order/4/Payment - 400 196 application/json; charset=utf-8 2042.9781ms
2025-08-25 02:25:38.641 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-25 02:25:38.686 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 44.3256ms
2025-08-25 02:25:38.728 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-25 02:25:38.735 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 6.6136ms
2025-08-25 02:25:38.778 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 02:25:38.786 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 8.0022ms
2025-08-25 02:25:38.798 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 02:25:38.815 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 16.6628ms
2025-08-25 02:25:39.180 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-25 02:25:39.356 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 176.7532ms
2025-08-25 02:26:25.221 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order/4/Payment - application/json-patch+json 104
2025-08-25 02:26:25.231 +03:00 [INF] CORS policy execution successful.
2025-08-25 02:26:25.233 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 02:26:25.417 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 02:26:25.424 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 02:26:25.430 +03:00 [INF] Route matched with {action = "CreateOrderFromCart", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto]]] CreateOrderFromCart(Int32, E_Commerce.DtoModels.PaymentDtos.CreatePaymentOfCustomer) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-08-25 02:26:25.439 +03:00 [INF] Executing CreateOrderFromCart
2025-08-25 02:26:25.446 +03:00 [INF] Starting CreatePaymentMethod for user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:26:25.448 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 4
2025-08-25 02:26:25.604 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-08-25 02:26:25.609 +03:00 [INF] Getting payment method ID for enum "Wallet"
2025-08-25 02:26:25.611 +03:00 [INF] Execute GetAll for entity PaymentMethod
2025-08-25 02:26:25.768 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__methodEnum_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`
FROM `PaymentMethods` AS `p`
WHERE ((`p`.`Method` = @__methodEnum_0) AND `p`.`IsActive`) AND `p`.`DeletedAt` IS NULL
LIMIT 1
2025-08-25 02:26:25.776 +03:00 [WRN] Payment method not found for enum "Wallet"
2025-08-25 02:26:25.778 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 02:26:25.781 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce) in 347.7074ms
2025-08-25 02:26:25.791 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 02:26:25.794 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order/4/Payment - 400 208 application/json; charset=utf-8 572.8805ms
2025-08-25 02:26:51.823 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order/4/Payment - application/json-patch+json 104
2025-08-25 02:26:51.829 +03:00 [INF] CORS policy execution successful.
2025-08-25 02:26:51.846 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 02:26:52.004 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 02:26:52.008 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 02:26:52.010 +03:00 [INF] Route matched with {action = "CreateOrderFromCart", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto]]] CreateOrderFromCart(Int32, E_Commerce.DtoModels.PaymentDtos.CreatePaymentOfCustomer) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-08-25 02:26:52.017 +03:00 [INF] Executing CreateOrderFromCart
2025-08-25 02:26:52.018 +03:00 [INF] Starting CreatePaymentMethod for user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:26:52.020 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 4
2025-08-25 02:26:52.176 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-08-25 02:26:52.182 +03:00 [INF] Getting payment method ID for enum "Meeza"
2025-08-25 02:26:52.183 +03:00 [INF] Execute GetAll for entity PaymentMethod
2025-08-25 02:26:52.336 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__methodEnum_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`
FROM `PaymentMethods` AS `p`
WHERE ((`p`.`Method` = @__methodEnum_0) AND `p`.`IsActive`) AND `p`.`DeletedAt` IS NULL
LIMIT 1
2025-08-25 02:26:52.347 +03:00 [WRN] Payment method not found for enum "Meeza"
2025-08-25 02:26:52.349 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 02:26:52.352 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce) in 335.885ms
2025-08-25 02:26:52.357 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 02:26:52.361 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order/4/Payment - 400 208 application/json; charset=utf-8 537.9789ms
2025-08-25 02:27:03.418 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order/4/Payment - application/json-patch+json 104
2025-08-25 02:27:03.429 +03:00 [INF] CORS policy execution successful.
2025-08-25 02:27:03.529 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 02:27:03.697 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 02:27:03.702 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 02:27:03.706 +03:00 [INF] Route matched with {action = "CreateOrderFromCart", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto]]] CreateOrderFromCart(Int32, E_Commerce.DtoModels.PaymentDtos.CreatePaymentOfCustomer) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-08-25 02:27:03.710 +03:00 [INF] Executing CreateOrderFromCart
2025-08-25 02:27:03.718 +03:00 [INF] Starting CreatePaymentMethod for user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:27:03.719 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 4
2025-08-25 02:27:03.874 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-08-25 02:27:03.878 +03:00 [INF] Getting payment method ID for enum "Visa"
2025-08-25 02:27:03.880 +03:00 [INF] Execute GetAll for entity PaymentMethod
2025-08-25 02:27:04.036 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__methodEnum_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`
FROM `PaymentMethods` AS `p`
WHERE ((`p`.`Method` = @__methodEnum_0) AND `p`.`IsActive`) AND `p`.`DeletedAt` IS NULL
LIMIT 1
2025-08-25 02:27:04.045 +03:00 [INF] Found payment method ID 1 for enum "Visa"
2025-08-25 02:27:04.047 +03:00 [INF] Executing GetByIdAsync for entity PaymentMethod with ID: 1
2025-08-25 02:27:04.201 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IntegrationId`, `p`.`IsActive`, `p`.`Method`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`PaymentProviderId`
FROM `PaymentMethods` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-08-25 02:27:04.208 +03:00 [INF] Execute GetAll for entity PaymentProvider
2025-08-25 02:27:04.364 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`PublicKey`
FROM `PaymentProviders` AS `p`
WHERE `p`.`Provider` = 1
LIMIT 1
2025-08-25 02:27:04.370 +03:00 [INF] Executing GetTokenAsync
2025-08-25 02:27:05.072 +03:00 [INF] Successfully retrieved PayMob token
2025-08-25 02:27:05.233 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-08-25 02:27:05.240 +03:00 [INF] Getting address by ID: 1
2025-08-25 02:27:05.405 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__addressId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AdditionalNotes`, `c`.`AddressType`, `c`.`City`, `c`.`Country`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`IsDefault`, `c`.`ModifiedAt`, `c`.`PhoneNumber`, `c`.`PostalCode`, `c`.`State`, `c`.`StreetAddress`, `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Discriminator`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `t`.`Age`, `t`.`CreateAt`, `t`.`DeletedAt`, `t`.`Gender`, `t`.`ImageId`, `t`.`ImageId1`, `t`.`LastVisit`, `t`.`Name`
FROM `CustomerAddresses` AS `c`
INNER JOIN (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Discriminator` = 'Customer'
) AS `t` ON `c`.`CustomerId` = `t`.`Id`
WHERE (`c`.`Id` = @__addressId_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-08-25 02:27:06.880 +03:00 [ERR] Failed to create order in PayMob. Status: "UnprocessableEntity", Error: {"message":"duplicate"}
2025-08-25 02:27:06.886 +03:00 [ERR] Failed to create order in PayMob for OrderId: 4
2025-08-25 02:27:06.889 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 02:27:06.893 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce) in 3183.911ms
2025-08-25 02:27:06.897 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 02:27:06.899 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order/4/Payment - 400 222 application/json; charset=utf-8 3480.6112ms
2025-08-25 02:30:12.308 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order/4/Payment - application/json-patch+json 104
2025-08-25 02:30:12.316 +03:00 [INF] CORS policy execution successful.
2025-08-25 02:30:12.320 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 02:30:12.481 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 02:30:12.488 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 02:30:12.492 +03:00 [INF] Route matched with {action = "CreateOrderFromCart", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto]]] CreateOrderFromCart(Int32, E_Commerce.DtoModels.PaymentDtos.CreatePaymentOfCustomer) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-08-25 02:30:12.497 +03:00 [INF] Executing CreateOrderFromCart
2025-08-25 02:30:12.499 +03:00 [INF] Starting CreatePaymentMethod for user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:30:12.501 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 4
2025-08-25 02:30:12.659 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-08-25 02:30:12.666 +03:00 [INF] Getting payment method ID for enum "Visa"
2025-08-25 02:30:12.668 +03:00 [INF] Execute GetAll for entity PaymentMethod
2025-08-25 02:30:12.828 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__methodEnum_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`
FROM `PaymentMethods` AS `p`
WHERE ((`p`.`Method` = @__methodEnum_0) AND `p`.`IsActive`) AND `p`.`DeletedAt` IS NULL
LIMIT 1
2025-08-25 02:30:12.833 +03:00 [INF] Found payment method ID 1 for enum "Visa"
2025-08-25 02:30:12.835 +03:00 [INF] Executing GetByIdAsync for entity PaymentMethod with ID: 1
2025-08-25 02:30:12.990 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IntegrationId`, `p`.`IsActive`, `p`.`Method`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`PaymentProviderId`
FROM `PaymentMethods` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-08-25 02:30:12.994 +03:00 [INF] Execute GetAll for entity PaymentProvider
2025-08-25 02:30:13.149 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`PublicKey`
FROM `PaymentProviders` AS `p`
WHERE `p`.`Provider` = 1
LIMIT 1
2025-08-25 02:30:13.159 +03:00 [INF] Executing GetTokenAsync
2025-08-25 02:30:13.715 +03:00 [INF] Successfully retrieved PayMob token
2025-08-25 02:30:13.877 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-08-25 02:30:13.882 +03:00 [INF] Getting address by ID: 1
2025-08-25 02:30:14.042 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__addressId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AdditionalNotes`, `c`.`AddressType`, `c`.`City`, `c`.`Country`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`IsDefault`, `c`.`ModifiedAt`, `c`.`PhoneNumber`, `c`.`PostalCode`, `c`.`State`, `c`.`StreetAddress`, `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Discriminator`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `t`.`Age`, `t`.`CreateAt`, `t`.`DeletedAt`, `t`.`Gender`, `t`.`ImageId`, `t`.`ImageId1`, `t`.`LastVisit`, `t`.`Name`
FROM `CustomerAddresses` AS `c`
INNER JOIN (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Discriminator` = 'Customer'
) AS `t` ON `c`.`CustomerId` = `t`.`Id`
WHERE (`c`.`Id` = @__addressId_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-08-25 02:30:15.495 +03:00 [ERR] Failed to create order in PayMob. Status: "UnprocessableEntity", Error: {"message":"duplicate"}
2025-08-25 02:30:15.501 +03:00 [ERR] Failed to create order in PayMob for OrderId: 4
2025-08-25 02:30:15.505 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 02:30:15.508 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce) in 3012.1439ms
2025-08-25 02:30:15.511 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 02:30:15.515 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order/4/Payment - 400 222 application/json; charset=utf-8 3207.0356ms
2025-08-25 02:30:32.105 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - null null
2025-08-25 02:30:32.112 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 02:30:32.269 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 02:30:32.281 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.ListOrders (E-Commerce)'
2025-08-25 02:30:32.291 +03:00 [INF] Route matched with {action = "ListOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.OrderDtos.OrderListDto]]]] ListOrders(System.String, System.Nullable`1[System.Boolean], Int32, Int32, System.Nullable`1[E_Commerce.Enums.OrderStatus]) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-08-25 02:30:32.311 +03:00 [INF] Executing ListOrders: role: Admin, userId: , deleted: , page: 1, size: 10, status: 
2025-08-25 02:30:32.318 +03:00 [INF] Filtering orders - UserId: null, Deleted: null, Page: 1, PageSize: 10, Status: null
2025-08-25 02:30:32.329 +03:00 [INF] Getting cache for key: order_filter_user_all_deleted_all_page_1_size_10_status_all
2025-08-25 02:30:32.540 +03:00 [WRN] Cache miss for key: order_filter_user_all_deleted_all_page_1_size_10_status_all
2025-08-25 02:30:32.545 +03:00 [INF] Execute GetAll for entity Order
2025-08-25 02:30:32.737 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`OrderNumber`, `t0`.`Name`, `t`.`Status`, `t`.`Total`, `t`.`CreatedAt`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`CustomerId`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Total`
    FROM `Orders` AS `o`
    ORDER BY `o`.`CreatedAt` DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
INNER JOIN (
    SELECT `a`.`Id`, `a`.`Name`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Discriminator` = 'Customer'
) AS `t0` ON `t`.`CustomerId` = `t0`.`Id`
ORDER BY `t`.`CreatedAt` DESC
2025-08-25 02:30:33.693 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.OrderDtos.OrderListDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 02:30:33.708 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.ListOrders (E-Commerce) in 1411.5151ms
2025-08-25 02:30:33.713 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.ListOrders (E-Commerce)'
2025-08-25 02:30:33.716 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - 200 774 application/json; charset=utf-8 1610.5062ms
2025-08-25 02:30:38.708 +03:00 [INF] Setting cache for key: order_filter_user_all_deleted_all_page_1_size_10_status_all
2025-08-25 02:30:38.941 +03:00 [INF] Cache set successfully for key: order_filter_user_all_deleted_all_page_1_size_10_status_all with tags: [order]
2025-08-25 02:30:38.946 +03:00 [INF] Successfully cached order list with key: order_filter_user_all_deleted_all_page_1_size_10_status_all
2025-08-25 02:31:05.625 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json-patch+json 62
2025-08-25 02:31:05.631 +03:00 [INF] CORS policy execution successful.
2025-08-25 02:31:05.634 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 02:31:05.797 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 02:31:05.803 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-08-25 02:31:05.820 +03:00 [INF] Route matched with {action = "AddItemToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] AddItemToCart(E_Commerce.DtoModels.CartDtos.CreateCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-08-25 02:31:05.839 +03:00 [INF] Executing AddItemToCart for product ID: 1
2025-08-25 02:31:05.844 +03:00 [INF] Adding item to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 1
2025-08-25 02:31:06.175 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-08-25 02:31:06.181 +03:00 [INF] Execute GetAll for entity Product
2025-08-25 02:31:06.264 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__itemDto_ProductId_0='?' (DbType = Int32), @__itemDto_ProductVariantId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Price`, `t`.`c`, `t`.`EndDate`, `t`.`StartDate`, `t`.`DiscountPercent`, `t`.`DeletedAt`, `t`.`IsActive`, `t0`.`Id`, `t0`.`Quantity`, `t0`.`c`
FROM (
    SELECT `p`.`Id`, `p`.`Price`, `d`.`Id` IS NOT NULL AS `c`, `d`.`EndDate`, `d`.`StartDate`, `d`.`DiscountPercent`, `d`.`DeletedAt`, `d`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__itemDto_ProductId_0) AND `p`.`DeletedAt` IS NULL) AND `p`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Quantity`, `t1`.`c`, `t1`.`ProductId`
    FROM (
        SELECT `p0`.`Id`, `p0`.`Quantity`, 1 AS `c`, `p0`.`ProductId`, ROW_NUMBER() OVER(PARTITION BY `p0`.`ProductId` ORDER BY `p0`.`Id`) AS `row`
        FROM `ProductVariants` AS `p0`
        WHERE (`p0`.`Id` = @__itemDto_ProductVariantId_1) AND `p0`.`IsActive`
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
2025-08-25 02:31:06.270 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:31:06.352 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-08-25 02:31:06.363 +03:00 [INF] Executing CreateAsync for entity CartItem
2025-08-25 02:31:06.367 +03:00 [INF] CartItem added successfully (pending save)
2025-08-25 02:31:06.369 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-25 02:31:06.370 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-25 02:31:06.373 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-25 02:31:06.538 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (Size = 255), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `CartItems` (`AddedAt`, `CartId`, `CreatedAt`, `DeletedAt`, `ModifiedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `UnitPrice`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `CartItems`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-25 02:31:06.700 +03:00 [INF] Removing cache for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:31:07.126 +03:00 [INF] Cache removed successfully for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:31:07.130 +03:00 [INF] Item added to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 1
2025-08-25 02:31:07.133 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 02:31:07.137 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce) in 1301.292ms
2025-08-25 02:31:07.140 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-08-25 02:31:07.149 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 200 134 application/json; charset=utf-8 1523.7501ms
2025-08-25 02:31:19.052 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - null 0
2025-08-25 02:31:19.061 +03:00 [INF] CORS policy execution successful.
2025-08-25 02:31:19.066 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 02:31:19.281 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 02:31:19.288 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-08-25 02:31:19.296 +03:00 [INF] Route matched with {action = "CheckOut", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] CheckOut() on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-08-25 02:31:19.302 +03:00 [INF] Executing CheckOut
2025-08-25 02:31:19.304 +03:00 [INF] Checkout of cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:31:19.310 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:31:19.468 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-08-25 02:31:19.627 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Cart` SET `CheckoutDate` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-08-25 02:31:19.632 +03:00 [INF] Removing cache by tag: cart
2025-08-25 02:31:19.843 +03:00 [WRN] No cache entries found for tag: cart
2025-08-25 02:31:19.847 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 02:31:19.851 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.CheckOut (E-Commerce) in 549.9749ms
2025-08-25 02:31:19.855 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-08-25 02:31:19.859 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - 200 122 application/json; charset=utf-8 807.3963ms
2025-08-25 02:31:40.401 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order/create-from-cart - application/json-patch+json 41
2025-08-25 02:31:40.409 +03:00 [INF] CORS policy execution successful.
2025-08-25 02:31:40.411 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 02:31:40.568 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 02:31:40.579 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 02:31:40.584 +03:00 [INF] Route matched with {action = "CreateOrderFromCart", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto]]] CreateOrderFromCart(E_Commerce.DtoModels.OrderDtos.CreateOrderDto) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-08-25 02:31:40.591 +03:00 [INF] Executing CreateOrderFromCart
2025-08-25 02:31:40.596 +03:00 [INF] Creating order from cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:31:40.904 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-08-25 02:31:40.988 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-08-25 02:31:40.993 +03:00 [INF] Checking if address 1 exists for customer: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:31:41.081 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__addressId_0='?' (DbType = Int32), @__customerId_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `CustomerAddresses` AS `c`
    WHERE ((`c`.`Id` = @__addressId_0) AND (`c`.`CustomerId` = @__customerId_1)) AND `c`.`DeletedAt` IS NULL)
2025-08-25 02:31:41.088 +03:00 [INF] Getting cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:31:41.090 +03:00 [INF] Getting cache for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:31:41.304 +03:00 [WRN] Cache miss for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:31:41.384 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-08-25 02:31:41.390 +03:00 [INF] Execute GetAll for entity Cart
2025-08-25 02:31:41.482 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-08-25 02:31:41.498 +03:00 [INF] Setting cache for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:31:41.727 +03:00 [INF] Cache set successfully for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5 with tags: [cart]
2025-08-25 02:31:41.734 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-08-25 02:31:41.812 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = 1
2025-08-25 02:31:42.745 +03:00 [INF] Execute Update for entity ProductVariant
2025-08-25 02:31:42.748 +03:00 [INF] ProductVariant marked for update (pending save)
2025-08-25 02:31:43.754 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE `o`.`OrderNumber` = @__orderNumber_0)
2025-08-25 02:31:43.763 +03:00 [INF] Executing CreateAsync for entity Order
2025-08-25 02:31:43.766 +03:00 [INF] Order added successfully (pending save)
2025-08-25 02:31:43.925 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime), @p8='?' (Size = 500), @p9='?' (Size = 50), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal), @p27='?' (DbType = Int32), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime), @p19='?' (DbType = DateTime), @p20='?' (DbType = Boolean), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Orders` (`CancelledAt`, `CreatedAt`, `CustomerAddressId`, `CustomerId`, `DeletedAt`, `DeliveredAt`, `DiscountAmount`, `ModifiedAt`, `Notes`, `OrderNumber`, `RestockedAt`, `ShippedAt`, `ShippingCost`, `Status`, `Subtotal`, `TaxAmount`, `Total`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Orders`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

UPDATE `ProductVariants` SET `Color` = @p17, `CreatedAt` = @p18, `DeletedAt` = @p19, `IsActive` = @p20, `Length` = @p21, `ModifiedAt` = @p22, `ProductId` = @p23, `Quantity` = @p24, `Size` = @p25, `Waist` = @p26
WHERE `Id` = @p27;
SELECT ROW_COUNT();
2025-08-25 02:31:44.014 +03:00 [INF] Executing CreateRangeAsync for entity OrderItem
2025-08-25 02:31:44.018 +03:00 [INF] 1 OrderItem entities added successfully (pending save)
2025-08-25 02:31:44.020 +03:00 [INF] Clearing cart: 1
2025-08-25 02:31:44.100 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__cartId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE `c`.`CartId` = @__cartId_0
2025-08-25 02:31:44.107 +03:00 [INF] Cart 1 cleared successfully
2025-08-25 02:31:44.277 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Decimal), @p10='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM `CartItems`
WHERE `Id` = @p0;
SELECT ROW_COUNT();

INSERT INTO `OrderItem` (`CreatedAt`, `DeletedAt`, `ModifiedAt`, `OrderId`, `OrderedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `TotalPrice`, `UnitPrice`)
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
SELECT `Id`
FROM `OrderItem`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-25 02:31:44.437 +03:00 [INF] Execute AddUserOpreationAsync
2025-08-25 02:31:44.441 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-08-25 02:31:44.445 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-08-25 02:31:44.448 +03:00 [INF] Execute GetAll for entity Order
2025-08-25 02:31:44.630 +03:00 [INF] Executed DbCommand (101ms) [Parameters=[@__createdOrder_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`ModifiedAt`, `t0`.`OrderNumber`, `t0`.`Status`, `t0`.`Subtotal`, `t0`.`TaxAmount`, `t0`.`ShippingCost`, `t0`.`DiscountAmount`, `t0`.`Total`, `t0`.`Notes`, `t0`.`DeletedAt`, `t0`.`ShippedAt`, `t0`.`DeliveredAt`, `t0`.`CancelledAt`, `t0`.`c`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Email`, `t0`.`PhoneNumber`, `t1`.`Id`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`Quantity`, `t1`.`UnitPrice`, `t1`.`TotalPrice`, `t1`.`OrderedAt`, `t1`.`Id0`, `t1`.`Name`, `t1`.`Price`, `t1`.`IsActive`, `t1`.`FinalPrice`, `t1`.`DiscountPrecentage`, `t1`.`MainImageUrl`, `t1`.`Id1`, `t1`.`Color`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`Size`, `t1`.`DeletedAt`, `t1`.`Length`, `t1`.`Waist`, `t1`.`Id2`, `t1`.`Id3`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`ModifiedAt`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`ShippingCost`, `o`.`DiscountAmount`, `o`.`Total`, `o`.`Notes`, `o`.`DeletedAt`, `o`.`ShippedAt`, `o`.`DeliveredAt`, `o`.`CancelledAt`, FALSE AS `c`, `t`.`Id` AS `Id0`, `t`.`Name`, `t`.`Email`, `t`.`PhoneNumber`
    FROM `Orders` AS `o`
    INNER JOIN (
        SELECT `a`.`Id`, `a`.`Email`, `a`.`PhoneNumber`, `a`.`Name`
        FROM `AspNetUsers` AS `a`
        WHERE `a`.`Discriminator` = 'Customer'
    ) AS `t` ON `o`.`CustomerId` = `t`.`Id`
    WHERE `o`.`Id` = @__createdOrder_Id_0
    LIMIT 1
) AS `t0`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`CreatedAt`, `o0`.`ModifiedAt`, `o0`.`Quantity`, `o0`.`UnitPrice`, `o0`.`TotalPrice`, `o0`.`OrderedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND `i`.`DeletedAt` IS NULL
        LIMIT 1), '') AS `MainImageUrl`, `o0`.`ProductVariantId` AS `Id1`, `p0`.`Color`, COALESCE(`p0`.`CreatedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `CreatedAt0`, COALESCE(`p0`.`ModifiedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `ModifiedAt0`, `p0`.`Size`, `p0`.`DeletedAt`, COALESCE(`p0`.`Length`, 0) AS `Length`, COALESCE(`p0`.`Waist`, 0) AS `Waist`, `d`.`Id` AS `Id2`, `p0`.`Id` AS `Id3`, `o0`.`OrderId`
    FROM `OrderItem` AS `o0`
    INNER JOIN `Products` AS `p` ON `o0`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    INNER JOIN `ProductVariants` AS `p0` ON `o0`.`ProductVariantId` = `p0`.`Id`
) AS `t1` ON `t0`.`Id` = `t1`.`OrderId`
ORDER BY `t0`.`Id`, `t0`.`Id0`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id2`
2025-08-25 02:31:44.639 +03:00 [INF] Removing cache by tag: order
2025-08-25 02:31:44.686 +03:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-08-25 02:31:44.703 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'E_Commerce.Context.AppDbContext'.
System.InvalidOperationException: Connection must be Open; current state is Closed
   at MySqlConnector.MySqlConnection.get_Session() in /_/src/MySqlConnector/MySqlConnection.cs:line 733
   at MySqlConnector.Core.ICancellableCommandExtensions.ResetCommandTimeout(ICancellableCommand command) in /_/src/MySqlConnector/Core/ICancellableCommand.cs:line 42
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 355
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: Connection must be Open; current state is Closed
   at MySqlConnector.MySqlConnection.get_Session() in /_/src/MySqlConnector/MySqlConnection.cs:line 733
   at MySqlConnector.Core.ICancellableCommandExtensions.ResetCommandTimeout(ICancellableCommand command) in /_/src/MySqlConnector/Core/ICancellableCommand.cs:line 42
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 355
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-08-25 02:31:45.104 +03:00 [INF] Removing cache by tags: [productwithvariantdata, product_search, variantdata]
2025-08-25 02:31:45.273 +03:00 [INF] Removed 1 cache entries for tag: order
2025-08-25 02:31:45.738 +03:00 [WRN] No cache entries found for tags: [productwithvariantdata, product_search, variantdata]
2025-08-25 02:31:46.187 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 02:31:46.192 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce) in 5602.5788ms
2025-08-25 02:31:46.198 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 02:31:46.200 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order/create-from-cart - 201 1437 application/json; charset=utf-8 5798.8503ms
2025-08-25 02:31:58.530 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order/5/Payment - application/json-patch+json 104
2025-08-25 02:31:58.535 +03:00 [INF] CORS policy execution successful.
2025-08-25 02:31:58.538 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 02:31:58.699 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 02:31:58.705 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 02:31:58.707 +03:00 [INF] Route matched with {action = "CreateOrderFromCart", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto]]] CreateOrderFromCart(Int32, E_Commerce.DtoModels.PaymentDtos.CreatePaymentOfCustomer) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-08-25 02:31:58.714 +03:00 [INF] Executing CreateOrderFromCart
2025-08-25 02:31:58.717 +03:00 [INF] Starting CreatePaymentMethod for user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:31:58.719 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 5
2025-08-25 02:31:58.873 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-08-25 02:31:58.896 +03:00 [INF] Getting payment method ID for enum "Visa"
2025-08-25 02:31:58.899 +03:00 [INF] Execute GetAll for entity PaymentMethod
2025-08-25 02:31:59.051 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__methodEnum_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`
FROM `PaymentMethods` AS `p`
WHERE ((`p`.`Method` = @__methodEnum_0) AND `p`.`IsActive`) AND `p`.`DeletedAt` IS NULL
LIMIT 1
2025-08-25 02:31:59.057 +03:00 [INF] Found payment method ID 1 for enum "Visa"
2025-08-25 02:31:59.060 +03:00 [INF] Executing GetByIdAsync for entity PaymentMethod with ID: 1
2025-08-25 02:31:59.213 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IntegrationId`, `p`.`IsActive`, `p`.`Method`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`PaymentProviderId`
FROM `PaymentMethods` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-08-25 02:31:59.222 +03:00 [INF] Execute GetAll for entity PaymentProvider
2025-08-25 02:31:59.376 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`PublicKey`
FROM `PaymentProviders` AS `p`
WHERE `p`.`Provider` = 1
LIMIT 1
2025-08-25 02:31:59.385 +03:00 [INF] Executing GetTokenAsync
2025-08-25 02:32:00.345 +03:00 [INF] Successfully retrieved PayMob token
2025-08-25 02:32:00.503 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-08-25 02:32:00.509 +03:00 [INF] Getting address by ID: 1
2025-08-25 02:32:00.670 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__addressId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AdditionalNotes`, `c`.`AddressType`, `c`.`City`, `c`.`Country`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`IsDefault`, `c`.`ModifiedAt`, `c`.`PhoneNumber`, `c`.`PostalCode`, `c`.`State`, `c`.`StreetAddress`, `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Discriminator`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `t`.`Age`, `t`.`CreateAt`, `t`.`DeletedAt`, `t`.`Gender`, `t`.`ImageId`, `t`.`ImageId1`, `t`.`LastVisit`, `t`.`Name`
FROM `CustomerAddresses` AS `c`
INNER JOIN (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Discriminator` = 'Customer'
) AS `t` ON `c`.`CustomerId` = `t`.`Id`
WHERE (`c`.`Id` = @__addressId_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-08-25 02:32:02.072 +03:00 [ERR] Failed to create order in PayMob. Status: "UnprocessableEntity", Error: {"message":"duplicate"}
2025-08-25 02:32:02.079 +03:00 [ERR] Failed to create order in PayMob for OrderId: 5
2025-08-25 02:32:02.083 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 02:32:02.086 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce) in 3373.4747ms
2025-08-25 02:32:02.092 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 02:32:02.100 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order/5/Payment - 400 222 application/json; charset=utf-8 3570.2522ms
2025-08-25 02:35:23.136 +03:00 [INF] DB tables already exist. Exit install
2025-08-25 02:35:25.628 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-25 02:35:26.719 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-25 02:35:27.457 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-25 02:35:27.650 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-25 02:35:27.684 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-25 02:35:27.712 +03:00 [INF] Starting data seeding...
2025-08-25 02:35:27.763 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-25 02:35:28.488 +03:00 [INF] Executed DbCommand (141ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-25 02:35:28.565 +03:00 [INF] Role 'Admin' already exists.
2025-08-25 02:35:28.723 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-25 02:35:28.732 +03:00 [INF] Role 'User' already exists.
2025-08-25 02:35:28.923 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-25 02:35:29.051 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-25 02:35:29.062 +03:00 [INF] Data seeding completed successfully.
2025-08-25 02:35:33.733 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-25 02:35:33.963 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-25 02:35:34.381 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-25 02:35:35.086 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-25 02:35:35.108 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-25 02:35:35.371 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-25 02:35:35.519 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-25 02:35:35.573 +03:00 [INF] Hosting environment: Development
2025-08-25 02:35:35.580 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-25 02:35:35.778 +03:00 [INF] Server mrrobot:17516:baa6ffc5 successfully announced in 206.9862 ms
2025-08-25 02:35:35.823 +03:00 [INF] Server mrrobot:17516:baa6ffc5 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-25 02:35:36.290 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 1156.6304ms
2025-08-25 02:35:36.440 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-25 02:35:36.705 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 02:35:36.441 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 02:35:36.823 +03:00 [INF] Server mrrobot:17516:baa6ffc5 all the dispatchers started
2025-08-25 02:35:36.838 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 398.0507ms
2025-08-25 02:35:37.017 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 311.4442ms
2025-08-25 02:35:37.105 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 663.9637ms
2025-08-25 02:35:37.264 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-25 02:35:37.599 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 335.3173ms
2025-08-25 02:39:07.512 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json-patch+json 62
2025-08-25 02:39:07.610 +03:00 [INF] CORS policy execution successful.
2025-08-25 02:39:07.670 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-25 02:39:09.961 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 02:39:10.273 +03:00 [INF] Executed DbCommand (102ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 02:39:10.346 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-08-25 02:39:10.415 +03:00 [INF] Route matched with {action = "AddItemToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] AddItemToCart(E_Commerce.DtoModels.CartDtos.CreateCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-08-25 02:39:10.988 +03:00 [INF] Executing AddItemToCart for product ID: 1
2025-08-25 02:39:11.004 +03:00 [INF] Adding item to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 1
2025-08-25 02:39:11.411 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-08-25 02:39:11.429 +03:00 [INF] Execute GetAll for entity Product
2025-08-25 02:39:11.694 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__itemDto_ProductId_0='?' (DbType = Int32), @__itemDto_ProductVariantId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Price`, `t`.`c`, `t`.`EndDate`, `t`.`StartDate`, `t`.`DiscountPercent`, `t`.`DeletedAt`, `t`.`IsActive`, `t0`.`Id`, `t0`.`Quantity`, `t0`.`c`
FROM (
    SELECT `p`.`Id`, `p`.`Price`, `d`.`Id` IS NOT NULL AS `c`, `d`.`EndDate`, `d`.`StartDate`, `d`.`DiscountPercent`, `d`.`DeletedAt`, `d`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__itemDto_ProductId_0) AND `p`.`DeletedAt` IS NULL) AND `p`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Quantity`, `t1`.`c`, `t1`.`ProductId`
    FROM (
        SELECT `p0`.`Id`, `p0`.`Quantity`, 1 AS `c`, `p0`.`ProductId`, ROW_NUMBER() OVER(PARTITION BY `p0`.`ProductId` ORDER BY `p0`.`Id`) AS `row`
        FROM `ProductVariants` AS `p0`
        WHERE (`p0`.`Id` = @__itemDto_ProductVariantId_1) AND `p0`.`IsActive`
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
2025-08-25 02:39:11.715 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:39:11.863 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-08-25 02:39:11.919 +03:00 [INF] Executing CreateAsync for entity CartItem
2025-08-25 02:39:12.021 +03:00 [INF] CartItem added successfully (pending save)
2025-08-25 02:39:12.029 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-25 02:39:12.033 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-25 02:39:12.087 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-25 02:39:12.585 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (Size = 255), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `CartItems` (`AddedAt`, `CartId`, `CreatedAt`, `DeletedAt`, `ModifiedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `UnitPrice`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `CartItems`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-25 02:39:12.861 +03:00 [INF] Removing cache for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:39:13.331 +03:00 [INF] Cache removed successfully for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:39:13.333 +03:00 [INF] Item added to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 1
2025-08-25 02:39:13.366 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 02:39:13.450 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce) in 3015.4682ms
2025-08-25 02:39:13.464 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-08-25 02:39:13.470 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 200 134 application/json; charset=utf-8 5958.4598ms
2025-08-25 02:39:21.567 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - null 0
2025-08-25 02:39:21.572 +03:00 [INF] CORS policy execution successful.
2025-08-25 02:39:21.667 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 02:39:21.848 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 02:39:21.853 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-08-25 02:39:21.871 +03:00 [INF] Route matched with {action = "CheckOut", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] CheckOut() on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-08-25 02:39:21.886 +03:00 [INF] Executing CheckOut
2025-08-25 02:39:21.889 +03:00 [INF] Checkout of cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:39:21.891 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:39:22.060 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-08-25 02:39:22.261 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Cart` SET `CheckoutDate` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-08-25 02:39:22.273 +03:00 [INF] Removing cache by tag: cart
2025-08-25 02:39:22.495 +03:00 [WRN] No cache entries found for tag: cart
2025-08-25 02:39:22.499 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 02:39:22.503 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.CheckOut (E-Commerce) in 621.6397ms
2025-08-25 02:39:22.506 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-08-25 02:39:22.511 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - 200 122 application/json; charset=utf-8 943.4074ms
2025-08-25 02:39:42.462 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order/create-from-cart - application/json-patch+json 41
2025-08-25 02:39:42.469 +03:00 [INF] CORS policy execution successful.
2025-08-25 02:39:42.500 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 02:39:42.657 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 02:39:42.670 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 02:39:42.679 +03:00 [INF] Route matched with {action = "CreateOrderFromCart", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto]]] CreateOrderFromCart(E_Commerce.DtoModels.OrderDtos.CreateOrderDto) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-08-25 02:39:42.725 +03:00 [INF] Executing CreateOrderFromCart
2025-08-25 02:39:42.736 +03:00 [INF] Creating order from cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:39:43.074 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-08-25 02:39:43.178 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-08-25 02:39:43.186 +03:00 [INF] Checking if address 1 exists for customer: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:39:43.269 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__addressId_0='?' (DbType = Int32), @__customerId_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `CustomerAddresses` AS `c`
    WHERE ((`c`.`Id` = @__addressId_0) AND (`c`.`CustomerId` = @__customerId_1)) AND `c`.`DeletedAt` IS NULL)
2025-08-25 02:39:43.298 +03:00 [INF] Getting cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:39:43.301 +03:00 [INF] Getting cache for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:39:43.519 +03:00 [WRN] Cache miss for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:39:43.596 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-08-25 02:39:43.601 +03:00 [INF] Execute GetAll for entity Cart
2025-08-25 02:39:43.788 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-08-25 02:39:43.816 +03:00 [INF] Setting cache for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:39:44.108 +03:00 [INF] Cache set successfully for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5 with tags: [cart]
2025-08-25 02:39:44.119 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-08-25 02:39:44.234 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = 1
2025-08-25 02:39:48.598 +03:00 [INF] Execute Update for entity ProductVariant
2025-08-25 02:39:48.673 +03:00 [INF] ProductVariant marked for update (pending save)
2025-08-25 02:39:49.996 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE `o`.`OrderNumber` = @__orderNumber_0)
2025-08-25 02:39:50.001 +03:00 [INF] Executing CreateAsync for entity Order
2025-08-25 02:39:50.052 +03:00 [INF] Order added successfully (pending save)
2025-08-25 02:39:56.227 +03:00 [INF] Executed DbCommand (827ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime), @p8='?' (Size = 500), @p9='?' (Size = 50), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal), @p27='?' (DbType = Int32), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime), @p19='?' (DbType = DateTime), @p20='?' (DbType = Boolean), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Orders` (`CancelledAt`, `CreatedAt`, `CustomerAddressId`, `CustomerId`, `DeletedAt`, `DeliveredAt`, `DiscountAmount`, `ModifiedAt`, `Notes`, `OrderNumber`, `RestockedAt`, `ShippedAt`, `ShippingCost`, `Status`, `Subtotal`, `TaxAmount`, `Total`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Orders`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

UPDATE `ProductVariants` SET `Color` = @p17, `CreatedAt` = @p18, `DeletedAt` = @p19, `IsActive` = @p20, `Length` = @p21, `ModifiedAt` = @p22, `ProductId` = @p23, `Quantity` = @p24, `Size` = @p25, `Waist` = @p26
WHERE `Id` = @p27;
SELECT ROW_COUNT();
2025-08-25 02:39:56.237 +03:00 [ERR] Failed executing DbCommand (7ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-08-25 02:39:56.338 +03:00 [INF] Executing CreateRangeAsync for entity OrderItem
2025-08-25 02:39:56.354 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'E_Commerce.Context.AppDbContext'.
System.InvalidOperationException: Connection must be Open; current state is Closed
   at MySqlConnector.MySqlConnection.get_Session() in /_/src/MySqlConnector/MySqlConnection.cs:line 733
   at MySqlConnector.Core.ICancellableCommandExtensions.ResetCommandTimeout(ICancellableCommand command) in /_/src/MySqlConnector/Core/ICancellableCommand.cs:line 42
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 355
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: Connection must be Open; current state is Closed
   at MySqlConnector.MySqlConnection.get_Session() in /_/src/MySqlConnector/MySqlConnection.cs:line 733
   at MySqlConnector.Core.ICancellableCommandExtensions.ResetCommandTimeout(ICancellableCommand command) in /_/src/MySqlConnector/Core/ICancellableCommand.cs:line 42
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 355
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-08-25 02:39:56.800 +03:00 [INF] 1 OrderItem entities added successfully (pending save)
2025-08-25 02:39:56.823 +03:00 [INF] Clearing cart: 1
2025-08-25 02:39:56.938 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__cartId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE `c`.`CartId` = @__cartId_0
2025-08-25 02:39:56.970 +03:00 [INF] Cart 1 cleared successfully
2025-08-25 02:39:57.187 +03:00 [INF] Executed DbCommand (93ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Decimal), @p10='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM `CartItems`
WHERE `Id` = @p0;
SELECT ROW_COUNT();

INSERT INTO `OrderItem` (`CreatedAt`, `DeletedAt`, `ModifiedAt`, `OrderId`, `OrderedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `TotalPrice`, `UnitPrice`)
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
SELECT `Id`
FROM `OrderItem`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-25 02:39:57.534 +03:00 [INF] Execute AddUserOpreationAsync
2025-08-25 02:39:57.542 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-08-25 02:39:57.654 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-08-25 02:39:57.752 +03:00 [INF] Execute GetAll for entity Order
2025-08-25 02:39:58.337 +03:00 [INF] Executed DbCommand (99ms) [Parameters=[@__createdOrder_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`ModifiedAt`, `t0`.`OrderNumber`, `t0`.`Status`, `t0`.`Subtotal`, `t0`.`TaxAmount`, `t0`.`ShippingCost`, `t0`.`DiscountAmount`, `t0`.`Total`, `t0`.`Notes`, `t0`.`DeletedAt`, `t0`.`ShippedAt`, `t0`.`DeliveredAt`, `t0`.`CancelledAt`, `t0`.`c`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Email`, `t0`.`PhoneNumber`, `t1`.`Id`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`Quantity`, `t1`.`UnitPrice`, `t1`.`TotalPrice`, `t1`.`OrderedAt`, `t1`.`Id0`, `t1`.`Name`, `t1`.`Price`, `t1`.`IsActive`, `t1`.`FinalPrice`, `t1`.`DiscountPrecentage`, `t1`.`MainImageUrl`, `t1`.`Id1`, `t1`.`Color`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`Size`, `t1`.`DeletedAt`, `t1`.`Length`, `t1`.`Waist`, `t1`.`Id2`, `t1`.`Id3`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`ModifiedAt`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`ShippingCost`, `o`.`DiscountAmount`, `o`.`Total`, `o`.`Notes`, `o`.`DeletedAt`, `o`.`ShippedAt`, `o`.`DeliveredAt`, `o`.`CancelledAt`, FALSE AS `c`, `t`.`Id` AS `Id0`, `t`.`Name`, `t`.`Email`, `t`.`PhoneNumber`
    FROM `Orders` AS `o`
    INNER JOIN (
        SELECT `a`.`Id`, `a`.`Email`, `a`.`PhoneNumber`, `a`.`Name`
        FROM `AspNetUsers` AS `a`
        WHERE `a`.`Discriminator` = 'Customer'
    ) AS `t` ON `o`.`CustomerId` = `t`.`Id`
    WHERE `o`.`Id` = @__createdOrder_Id_0
    LIMIT 1
) AS `t0`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`CreatedAt`, `o0`.`ModifiedAt`, `o0`.`Quantity`, `o0`.`UnitPrice`, `o0`.`TotalPrice`, `o0`.`OrderedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND `i`.`DeletedAt` IS NULL
        LIMIT 1), '') AS `MainImageUrl`, `o0`.`ProductVariantId` AS `Id1`, `p0`.`Color`, COALESCE(`p0`.`CreatedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `CreatedAt0`, COALESCE(`p0`.`ModifiedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `ModifiedAt0`, `p0`.`Size`, `p0`.`DeletedAt`, COALESCE(`p0`.`Length`, 0) AS `Length`, COALESCE(`p0`.`Waist`, 0) AS `Waist`, `d`.`Id` AS `Id2`, `p0`.`Id` AS `Id3`, `o0`.`OrderId`
    FROM `OrderItem` AS `o0`
    INNER JOIN `Products` AS `p` ON `o0`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    INNER JOIN `ProductVariants` AS `p0` ON `o0`.`ProductVariantId` = `p0`.`Id`
) AS `t1` ON `t0`.`Id` = `t1`.`OrderId`
ORDER BY `t0`.`Id`, `t0`.`Id0`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id2`
2025-08-25 02:39:58.503 +03:00 [INF] Removing cache by tag: order
2025-08-25 02:39:58.726 +03:00 [WRN] No cache entries found for tag: order
2025-08-25 02:39:59.672 +03:00 [INF] Removing cache by tags: [productwithvariantdata, product_search, variantdata]
2025-08-25 02:39:59.689 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 02:39:59.737 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce) in 17053.7973ms
2025-08-25 02:39:59.755 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 02:39:59.758 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order/create-from-cart - 201 1436 application/json; charset=utf-8 17295.3617ms
2025-08-25 02:40:00.346 +03:00 [WRN] No cache entries found for tags: [productwithvariantdata, product_search, variantdata]
2025-08-25 02:40:23.842 +03:00 [WRN] Stopping the server due to DomainUnload or ProcessExit event...
2025-08-25 02:40:23.846 +03:00 [INF] Server mrrobot:17516:baa6ffc5 caught stopping signal...
2025-08-25 02:40:23.852 +03:00 [INF] Server mrrobot:17516:baa6ffc5 caught stopped signal...
2025-08-25 02:40:23.859 +03:00 [WRN] Server mrrobot:17516:baa6ffc5 caught shutdown signal...
2025-08-25 02:40:23.863 +03:00 [INF] Server mrrobot:17516:baa6ffc5 All dispatchers stopped
2025-08-25 02:40:24.623 +03:00 [INF] Server mrrobot:17516:baa6ffc5 successfully reported itself as stopped in 753.617 ms
2025-08-25 02:40:24.624 +03:00 [INF] Server mrrobot:17516:baa6ffc5 has been stopped in total 772.8837 ms
2025-08-25 02:40:40.832 +03:00 [INF] DB tables already exist. Exit install
2025-08-25 02:40:42.401 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-25 02:40:43.553 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-25 02:40:44.255 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-25 02:40:44.448 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-25 02:40:44.470 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-25 02:40:44.498 +03:00 [INF] Starting data seeding...
2025-08-25 02:40:44.544 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-25 02:40:45.172 +03:00 [INF] Executed DbCommand (133ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-25 02:40:45.282 +03:00 [INF] Role 'Admin' already exists.
2025-08-25 02:40:45.468 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-25 02:40:45.498 +03:00 [INF] Role 'User' already exists.
2025-08-25 02:40:45.689 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-25 02:40:45.818 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-25 02:40:45.820 +03:00 [INF] Data seeding completed successfully.
2025-08-25 02:40:47.590 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-25 02:40:47.727 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-25 02:40:47.745 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-25 02:40:47.748 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-25 02:40:47.756 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-25 02:40:47.849 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-25 02:40:47.874 +03:00 [INF] Hosting environment: Development
2025-08-25 02:40:47.879 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-25 02:40:48.031 +03:00 [INF] Server mrrobot:16264:482c5499 successfully announced in 167.832 ms
2025-08-25 02:40:48.048 +03:00 [INF] Server mrrobot:16264:482c5499 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-25 02:40:48.249 +03:00 [INF] 1 servers were removed due to timeout
2025-08-25 02:40:48.819 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-25 02:40:49.892 +03:00 [INF] Server mrrobot:16264:482c5499 all the dispatchers started
2025-08-25 02:40:50.006 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 1209.8855ms
2025-08-25 02:40:50.091 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 02:40:50.090 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-25 02:40:50.223 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 02:40:50.380 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 288.9122ms
2025-08-25 02:40:50.312 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 222.7797ms
2025-08-25 02:40:50.494 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 271.3396ms
2025-08-25 02:40:50.613 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-25 02:40:50.940 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 327.6218ms
2025-08-25 02:41:38.351 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order/6/Payment - application/json-patch+json 104
2025-08-25 02:41:38.415 +03:00 [INF] CORS policy execution successful.
2025-08-25 02:41:38.465 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-25 02:41:38.825 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 02:41:39.031 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 02:41:39.081 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 02:41:39.145 +03:00 [INF] Route matched with {action = "CreateOrderFromCart", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto]]] CreateOrderFromCart(Int32, E_Commerce.DtoModels.PaymentDtos.CreatePaymentOfCustomer) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-08-25 02:41:39.773 +03:00 [INF] Executing CreateOrderFromCart
2025-08-25 02:41:39.785 +03:00 [INF] Starting CreatePaymentMethod for user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:41:39.805 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 6
2025-08-25 02:41:39.993 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-08-25 02:41:40.074 +03:00 [INF] Getting payment method ID for enum "Visa"
2025-08-25 02:41:40.076 +03:00 [INF] Execute GetAll for entity PaymentMethod
2025-08-25 02:41:40.262 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__methodEnum_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`
FROM `PaymentMethods` AS `p`
WHERE ((`p`.`Method` = @__methodEnum_0) AND `p`.`IsActive`) AND `p`.`DeletedAt` IS NULL
LIMIT 1
2025-08-25 02:41:40.270 +03:00 [INF] Found payment method ID 1 for enum "Visa"
2025-08-25 02:41:40.273 +03:00 [INF] Executing GetByIdAsync for entity PaymentMethod with ID: 1
2025-08-25 02:41:40.460 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IntegrationId`, `p`.`IsActive`, `p`.`Method`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`PaymentProviderId`
FROM `PaymentMethods` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-08-25 02:42:11.780 +03:00 [INF] Execute GetAll for entity PaymentProvider
2025-08-25 02:42:14.846 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`PublicKey`
FROM `PaymentProviders` AS `p`
WHERE `p`.`Provider` = 1
LIMIT 1
2025-08-25 02:42:23.515 +03:00 [INF] Executing GetTokenAsync
2025-08-25 02:42:44.686 +03:00 [INF] Successfully retrieved PayMob token
2025-08-25 02:42:49.766 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-08-25 02:42:54.192 +03:00 [INF] Getting address by ID: 1
2025-08-25 02:42:55.169 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__addressId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AdditionalNotes`, `c`.`AddressType`, `c`.`City`, `c`.`Country`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`IsDefault`, `c`.`ModifiedAt`, `c`.`PhoneNumber`, `c`.`PostalCode`, `c`.`State`, `c`.`StreetAddress`, `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Discriminator`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `t`.`Age`, `t`.`CreateAt`, `t`.`DeletedAt`, `t`.`Gender`, `t`.`ImageId`, `t`.`ImageId1`, `t`.`LastVisit`, `t`.`Name`
FROM `CustomerAddresses` AS `c`
INNER JOIN (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Discriminator` = 'Customer'
) AS `t` ON `c`.`CustomerId` = `t`.`Id`
WHERE (`c`.`Id` = @__addressId_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-08-25 02:44:02.756 +03:00 [ERR] Failed to create order in PayMob. Status: "UnprocessableEntity", Error: {"message":"duplicate"}
2025-08-25 02:44:09.868 +03:00 [ERR] Failed to create order in PayMob for OrderId: 6
2025-08-25 02:44:13.588 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 02:44:13.620 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce) in 154452.7974ms
2025-08-25 02:44:13.638 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 02:44:13.646 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order/6/Payment - 400 222 application/json; charset=utf-8 155295.5861ms
2025-08-25 02:55:46.471 +03:00 [INF] DB tables already exist. Exit install
2025-08-25 02:55:47.732 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-25 02:55:48.747 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-25 02:55:49.454 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-25 02:55:49.631 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-25 02:55:49.655 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-25 02:55:49.669 +03:00 [INF] Starting data seeding...
2025-08-25 02:55:49.704 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-25 02:55:50.196 +03:00 [INF] Executed DbCommand (117ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-25 02:55:50.262 +03:00 [INF] Role 'Admin' already exists.
2025-08-25 02:55:50.425 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-25 02:55:50.432 +03:00 [INF] Role 'User' already exists.
2025-08-25 02:55:50.617 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-25 02:55:50.753 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-25 02:55:50.755 +03:00 [INF] Data seeding completed successfully.
2025-08-25 02:55:52.302 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-25 02:55:52.467 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-25 02:55:52.977 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-25 02:55:52.976 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-25 02:55:52.981 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-25 02:55:52.994 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-25 02:55:53.021 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-25 02:55:53.029 +03:00 [INF] Hosting environment: Development
2025-08-25 02:55:53.041 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-25 02:55:53.207 +03:00 [INF] Server mrrobot:25340:3d10f84b successfully announced in 173.3591 ms
2025-08-25 02:55:53.238 +03:00 [INF] Server mrrobot:25340:3d10f84b is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-25 02:55:53.401 +03:00 [INF] 1 servers were removed due to timeout
2025-08-25 02:55:53.572 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 02:55:53.583 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 606.6111ms
2025-08-25 02:55:53.591 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 02:55:53.707 +03:00 [INF] Server mrrobot:25340:3d10f84b all the dispatchers started
2025-08-25 02:55:53.748 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-25 02:55:53.765 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 174.3148ms
2025-08-25 02:55:53.821 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 72.2986ms
2025-08-25 02:55:53.861 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 290.0876ms
2025-08-25 02:55:54.063 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-25 02:55:54.628 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 564.8733ms
2025-08-25 02:56:16.427 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - null null
2025-08-25 02:56:16.435 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-25 02:56:16.685 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 02:56:16.923 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 02:56:16.956 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.ListOrders (E-Commerce)'
2025-08-25 02:56:17.003 +03:00 [INF] Route matched with {action = "ListOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.OrderDtos.OrderListDto]]]] ListOrders(System.String, System.Nullable`1[System.Boolean], Int32, Int32, System.Nullable`1[E_Commerce.Enums.OrderStatus]) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-08-25 02:56:17.411 +03:00 [INF] Executing ListOrders: role: Admin, userId: , deleted: , page: 1, size: 10, status: 
2025-08-25 02:56:17.416 +03:00 [INF] Filtering orders - UserId: null, Deleted: null, Page: 1, PageSize: 10, Status: null
2025-08-25 02:56:17.424 +03:00 [INF] Getting cache for key: order_filter_user_all_deleted_all_page_1_size_10_status_all
2025-08-25 02:56:17.659 +03:00 [WRN] Cache miss for key: order_filter_user_all_deleted_all_page_1_size_10_status_all
2025-08-25 02:56:17.663 +03:00 [INF] Execute GetAll for entity Order
2025-08-25 02:56:17.953 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`OrderNumber`, `t0`.`Name`, `t`.`Status`, `t`.`Total`, `t`.`CreatedAt`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`CustomerId`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Total`
    FROM `Orders` AS `o`
    ORDER BY `o`.`CreatedAt` DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
INNER JOIN (
    SELECT `a`.`Id`, `a`.`Name`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Discriminator` = 'Customer'
) AS `t0` ON `t`.`CustomerId` = `t0`.`Id`
ORDER BY `t`.`CreatedAt` DESC
2025-08-25 02:56:19.012 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.OrderDtos.OrderListDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 02:56:19.049 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.ListOrders (E-Commerce) in 2036.6429ms
2025-08-25 02:56:19.059 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.ListOrders (E-Commerce)'
2025-08-25 02:56:19.065 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - 200 1092 application/json; charset=utf-8 2638.0752ms
2025-08-25 02:56:27.964 +03:00 [INF] Setting cache for key: order_filter_user_all_deleted_all_page_1_size_10_status_all
2025-08-25 02:56:28.211 +03:00 [INF] Cache set successfully for key: order_filter_user_all_deleted_all_page_1_size_10_status_all with tags: [order]
2025-08-25 02:56:28.214 +03:00 [INF] Successfully cached order list with key: order_filter_user_all_deleted_all_page_1_size_10_status_all
2025-08-25 02:56:55.230 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order/ORD-20250824233949-4598/Payment - application/json-patch+json 68
2025-08-25 02:56:55.251 +03:00 [INF] CORS policy execution successful.
2025-08-25 02:56:55.270 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 02:56:55.448 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 02:56:55.459 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 02:56:55.532 +03:00 [INF] Route matched with {action = "CreateOrderFromCart", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto]]] CreateOrderFromCart(System.String, E_Commerce.DtoModels.PaymentDtos.CreatePaymentOfCustomer) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-08-25 02:56:55.567 +03:00 [INF] Executing CreateOrderFromCart
2025-08-25 02:56:55.579 +03:00 [INF] Starting CreatePaymentMethod for user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 02:56:55.584 +03:00 [INF] Getting order by number: ORD-20250824233949-4598
2025-08-25 02:56:55.753 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`OrderNumber` = @__orderNumber_0
LIMIT 1
2025-08-25 02:56:55.863 +03:00 [INF] Getting payment method ID for enum "Visa"
2025-08-25 02:56:55.865 +03:00 [INF] Execute GetAll for entity PaymentMethod
2025-08-25 02:56:56.042 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__methodEnum_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`
FROM `PaymentMethods` AS `p`
WHERE ((`p`.`Method` = @__methodEnum_0) AND `p`.`IsActive`) AND `p`.`DeletedAt` IS NULL
LIMIT 1
2025-08-25 02:56:56.051 +03:00 [INF] Found payment method ID 1 for enum "Visa"
2025-08-25 02:56:56.058 +03:00 [INF] Executing GetByIdAsync for entity PaymentMethod with ID: 1
2025-08-25 02:56:56.220 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IntegrationId`, `p`.`IsActive`, `p`.`Method`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`PaymentProviderId`
FROM `PaymentMethods` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-08-25 02:56:56.271 +03:00 [INF] Execute GetAll for entity PaymentProvider
2025-08-25 02:56:56.434 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`PublicKey`
FROM `PaymentProviders` AS `p`
WHERE `p`.`Provider` = 1
LIMIT 1
2025-08-25 02:56:56.449 +03:00 [INF] Executing GetTokenAsync
2025-08-25 02:56:57.176 +03:00 [INF] Successfully retrieved PayMob token
2025-08-25 02:56:57.353 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-08-25 02:56:57.390 +03:00 [INF] Getting address by ID: 1
2025-08-25 02:56:57.580 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__addressId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AdditionalNotes`, `c`.`AddressType`, `c`.`City`, `c`.`Country`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`IsDefault`, `c`.`ModifiedAt`, `c`.`PhoneNumber`, `c`.`PostalCode`, `c`.`State`, `c`.`StreetAddress`, `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Discriminator`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `t`.`Age`, `t`.`CreateAt`, `t`.`DeletedAt`, `t`.`Gender`, `t`.`ImageId`, `t`.`ImageId1`, `t`.`LastVisit`, `t`.`Name`
FROM `CustomerAddresses` AS `c`
INNER JOIN (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Discriminator` = 'Customer'
) AS `t` ON `c`.`CustomerId` = `t`.`Id`
WHERE (`c`.`Id` = @__addressId_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-08-25 02:56:58.120 +03:00 [INF] Successfully created PayMob order: 375299257 for local order: ORD-20250824233949-4598
2025-08-25 02:56:58.126 +03:00 [INF] Execute GetAll for entity PaymentMethod
2025-08-25 02:56:58.285 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__dto_PaymentMethod_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`IntegrationId`
FROM `PaymentMethods` AS `p`
INNER JOIN `PaymentProviders` AS `p0` ON `p`.`PaymentProviderId` = `p0`.`Id`
WHERE ((`p`.`Method` = @__dto_PaymentMethod_0) AND `p`.`IsActive`) AND (`p0`.`Provider` = 1)
LIMIT 1
2025-08-25 02:56:58.294 +03:00 [INF] Using integration ID: 5221967 for payment method: "Visa"
2025-08-25 02:56:58.300 +03:00 [INF] Starting GeneratePaymentKeyAsync for Order ID: 375299257, Amount: 20000
2025-08-25 02:56:58.826 +03:00 [INF] Request sent to Paymob payment_keys endpoint
2025-08-25 02:56:58.828 +03:00 [INF] Received response from Paymob payment_keys endpoint
2025-08-25 02:56:58.830 +03:00 [INF] Payment key generated successfully for Order ID: 375299257
2025-08-25 02:56:58.833 +03:00 [INF] Successfully generated payment key for order: ORD-20250824233949-4598
2025-08-25 02:56:58.836 +03:00 [INF] Execute GetAll for entity PaymentProvider
2025-08-25 02:56:58.996 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__paymentProvider_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`IframeId`
FROM `PaymentProviders` AS `p`
WHERE `p`.`Provider` = @__paymentProvider_0
LIMIT 1
2025-08-25 02:56:59.002 +03:00 [INF] Executing CreateAsync for entity Payment
2025-08-25 02:56:59.092 +03:00 [INF] Payment added successfully (pending save)
2025-08-25 02:57:00.038 +03:00 [INF] Execute AddUserOpreationAsync
2025-08-25 02:57:00.042 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-08-25 02:57:00.069 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-08-25 02:57:00.590 +03:00 [INF] Executed DbCommand (88ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?' (Size = 255), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int64), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime), @p17='?' (DbType = Int32), @p18='?' (DbType = DateTime), @p19='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Payments` (`Amount`, `CreatedAt`, `CustomerId`, `DeletedAt`, `ModifiedAt`, `OrderId`, `PaymentDate`, `PaymentMethodId`, `PaymentProviderId`, `ProviderOrderId`, `Status`, `TransactionId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
SELECT `Id`
FROM `Payments`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `userOperationsLogs` (`CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`, `UserId`)
VALUES (@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
SELECT `Id`
FROM `userOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-25 02:57:00.708 +03:00 [INF] Payment created successfully with ID 1
2025-08-25 02:57:00.712 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 02:57:00.718 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce) in 5182.307ms
2025-08-25 02:57:00.725 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 02:57:00.730 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order/ORD-20250824233949-4598/Payment - 200 1379 application/json; charset=utf-8 5499.8865ms
2025-08-25 02:59:26.974 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire - null null
2025-08-25 02:59:29.623 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire - 200 null text/html 2648.7755ms
2025-08-25 02:59:29.665 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/css18180892770844 - null null
2025-08-25 02:59:29.665 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/js18180855882731 - null null
2025-08-25 02:59:29.666 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 02:59:29.665 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/css-dark18180293717222 - null null
2025-08-25 02:59:29.694 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 02:59:29.700 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 34.269ms
2025-08-25 02:59:29.704 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/css18180892770844 - 200 null text/css 38.5839ms
2025-08-25 02:59:29.760 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/js18180855882731 - 200 null application/javascript 94.0125ms
2025-08-25 02:59:29.758 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 62.9526ms
2025-08-25 02:59:29.708 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/css-dark18180293717222 - 200 null text/css 43.0439ms
2025-08-25 02:59:31.939 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 258
2025-08-25 02:59:31.949 +03:00 [INF] CORS policy execution successful.
2025-08-25 02:59:32.574 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - null null
2025-08-25 02:59:33.283 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1343.685ms
2025-08-25 02:59:34.184 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - 200 null text/html 1610.6943ms
2025-08-25 02:59:34.217 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 02:59:34.222 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 02:59:34.262 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 44.9217ms
2025-08-25 02:59:34.288 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 66.513ms
2025-08-25 02:59:35.726 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-08-25 02:59:36.285 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 02:59:36.291 +03:00 [INF] CORS policy execution successful.
2025-08-25 02:59:37.724 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1439.6204ms
2025-08-25 02:59:38.120 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2393.7425ms
2025-08-25 02:59:38.143 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 02:59:38.148 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 02:59:38.168 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 25.4222ms
2025-08-25 02:59:38.206 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 58.2408ms
2025-08-25 02:59:40.214 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 02:59:40.220 +03:00 [INF] CORS policy execution successful.
2025-08-25 02:59:41.660 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1446.3291ms
2025-08-25 02:59:43.682 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 02:59:43.688 +03:00 [INF] CORS policy execution successful.
2025-08-25 02:59:45.119 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1437.2704ms
2025-08-25 02:59:47.137 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 02:59:47.142 +03:00 [INF] CORS policy execution successful.
2025-08-25 02:59:48.600 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1462.7412ms
2025-08-25 02:59:50.611 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 02:59:50.620 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - application/x-www-form-urlencoded; charset=UTF-8 13
2025-08-25 02:59:50.621 +03:00 [INF] CORS policy execution successful.
2025-08-25 02:59:50.628 +03:00 [INF] CORS policy execution successful.
2025-08-25 02:59:51.789 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - 204 null null 1169.2559ms
2025-08-25 02:59:51.822 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-08-25 02:59:52.087 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1476.2526ms
2025-08-25 02:59:54.015 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2192.1561ms
2025-08-25 02:59:54.043 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 02:59:54.045 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 02:59:54.087 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 43.8566ms
2025-08-25 02:59:54.127 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 81.1817ms
2025-08-25 02:59:54.127 +03:00 [INF] Executing GetByIdAsync for entity Payment with ID: 0
2025-08-25 02:59:54.398 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Amount`, `p`.`CreatedAt`, `p`.`CustomerId`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`OrderId`, `p`.`PaymentDate`, `p`.`PaymentMethodId`, `p`.`PaymentProviderId`, `p`.`ProviderOrderId`, `p`.`Status`, `p`.`TransactionId`
FROM `Payments` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-08-25 02:59:54.415 +03:00 [WRN] Payment with ID 0 not found or deleted
2025-08-25 02:59:56.111 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 02:59:56.119 +03:00 [INF] CORS policy execution successful.
2025-08-25 02:59:56.529 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - null null
2025-08-25 02:59:57.578 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1466.8993ms
2025-08-25 02:59:59.014 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - 200 null text/html 2485.427ms
2025-08-25 02:59:59.044 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 02:59:59.044 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 02:59:59.057 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 12.6704ms
2025-08-25 02:59:59.107 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 62.9057ms
2025-08-25 03:00:01.120 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:00:01.128 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:00:02.186 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/details/40 - null null
2025-08-25 03:00:02.761 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1640.735ms
2025-08-25 03:00:04.240 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/details/40 - 200 null text/html 2053.9358ms
2025-08-25 03:00:04.261 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 03:00:04.261 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 03:00:04.276 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 14.3319ms
2025-08-25 03:00:04.292 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 31.094ms
2025-08-25 03:00:05.759 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE `c`.`DeletedAt` IS NOT NULL
2025-08-25 03:00:06.377 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:00:06.384 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:00:07.826 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1448.2295ms
2025-08-25 03:00:09.839 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:00:09.844 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:00:11.322 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1482.8674ms
2025-08-25 03:00:13.592 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:00:13.600 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:00:15.040 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1447.8945ms
2025-08-25 03:00:17.590 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:00:17.598 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:00:19.077 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1486.6619ms
2025-08-25 03:00:21.586 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:00:21.591 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:00:23.045 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1459.1201ms
2025-08-25 03:00:25.579 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:00:25.588 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:00:27.048 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1468.8052ms
2025-08-25 03:00:29.578 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:00:29.586 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:00:31.035 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1457.6641ms
2025-08-25 03:00:33.587 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:00:33.594 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:00:35.028 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1440.9341ms
2025-08-25 03:00:37.583 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:00:37.588 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:00:39.035 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1451.5023ms
2025-08-25 03:00:41.583 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:00:41.589 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:00:43.086 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1502.3488ms
2025-08-25 03:00:43.914 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order/number/ORD-20250824233949-4598 - null null
2025-08-25 03:00:43.932 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 03:00:44.165 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 03:00:44.179 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.GetOrderByNumber (E-Commerce)'
2025-08-25 03:00:44.190 +03:00 [INF] Route matched with {action = "GetOrderByNumber", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderDto]]] GetOrderByNumber(System.String) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-08-25 03:00:44.207 +03:00 [INF] Executing GetOrderByNumber for number: ORD-20250824233949-4598
2025-08-25 03:00:44.212 +03:00 [INF] Getting order by number: ORD-20250824233949-4598 for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, IsAdmin: false
2025-08-25 03:00:44.222 +03:00 [INF] Getting cache for key: order_orderNumber_ORD-20250824233949-4598_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin_False
2025-08-25 03:00:44.436 +03:00 [WRN] Cache miss for key: order_orderNumber_ORD-20250824233949-4598_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin_False
2025-08-25 03:00:44.448 +03:00 [INF] Checking if order ORD-20250824233949-4598 exists for user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 03:00:44.607 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__ordernumber_0='?' (Size = 50), @__userid_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE ((`o`.`OrderNumber` = @__ordernumber_0) AND (`o`.`CustomerId` = @__userid_1)) AND `o`.`DeletedAt` IS NULL)
2025-08-25 03:00:44.613 +03:00 [INF] Execute GetAll for entity Order
2025-08-25 03:00:44.904 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__8__locals1_orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`ModifiedAt`, `t0`.`OrderNumber`, `t0`.`Status`, `t0`.`Subtotal`, `t0`.`TaxAmount`, `t0`.`ShippingCost`, `t0`.`DiscountAmount`, `t0`.`Total`, `t0`.`Notes`, `t0`.`DeletedAt`, `t0`.`ShippedAt`, `t0`.`DeliveredAt`, `t0`.`CancelledAt`, `t0`.`c`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Email`, `t0`.`PhoneNumber`, `t1`.`Id`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`Quantity`, `t1`.`UnitPrice`, `t1`.`TotalPrice`, `t1`.`OrderedAt`, `t1`.`Id0`, `t1`.`Name`, `t1`.`Price`, `t1`.`IsActive`, `t1`.`FinalPrice`, `t1`.`DiscountPrecentage`, `t1`.`MainImageUrl`, `t1`.`Id1`, `t1`.`Color`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`Size`, `t1`.`DeletedAt`, `t1`.`Length`, `t1`.`Waist`, `t1`.`Id2`, `t1`.`Id3`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`ModifiedAt`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`ShippingCost`, `o`.`DiscountAmount`, `o`.`Total`, `o`.`Notes`, `o`.`DeletedAt`, `o`.`ShippedAt`, `o`.`DeliveredAt`, `o`.`CancelledAt`, FALSE AS `c`, `t`.`Id` AS `Id0`, `t`.`Name`, `t`.`Email`, `t`.`PhoneNumber`
    FROM `Orders` AS `o`
    INNER JOIN (
        SELECT `a`.`Id`, `a`.`Email`, `a`.`PhoneNumber`, `a`.`Name`
        FROM `AspNetUsers` AS `a`
        WHERE `a`.`Discriminator` = 'Customer'
    ) AS `t` ON `o`.`CustomerId` = `t`.`Id`
    WHERE `o`.`OrderNumber` = @__8__locals1_orderNumber_0
    LIMIT 1
) AS `t0`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`CreatedAt`, `o0`.`ModifiedAt`, `o0`.`Quantity`, `o0`.`UnitPrice`, `o0`.`TotalPrice`, `o0`.`OrderedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND `i`.`DeletedAt` IS NULL
        LIMIT 1), '') AS `MainImageUrl`, `o0`.`ProductVariantId` AS `Id1`, `p0`.`Color`, COALESCE(`p0`.`CreatedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `CreatedAt0`, COALESCE(`p0`.`ModifiedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `ModifiedAt0`, `p0`.`Size`, `p0`.`DeletedAt`, COALESCE(`p0`.`Length`, 0) AS `Length`, COALESCE(`p0`.`Waist`, 0) AS `Waist`, `d`.`Id` AS `Id2`, `p0`.`Id` AS `Id3`, `o0`.`OrderId`
    FROM `OrderItem` AS `o0`
    INNER JOIN `Products` AS `p` ON `o0`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    INNER JOIN `ProductVariants` AS `p0` ON `o0`.`ProductVariantId` = `p0`.`Id`
) AS `t1` ON `t0`.`Id` = `t1`.`OrderId`
ORDER BY `t0`.`Id`, `t0`.`Id0`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id2`
2025-08-25 03:00:45.594 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:00:45.603 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:00:45.901 +03:00 [INF] Order ORD-20250824233949-4598 retrieved successfully for user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 03:00:45.907 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 03:00:45.928 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.GetOrderByNumber (E-Commerce) in 1732.4807ms
2025-08-25 03:00:45.947 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.GetOrderByNumber (E-Commerce)'
2025-08-25 03:00:45.958 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order/number/ORD-20250824233949-4598 - 200 1410 application/json; charset=utf-8 2043.2158ms
2025-08-25 03:00:47.061 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1467.5285ms
2025-08-25 03:00:48.978 +03:00 [INF] Setting cache for key: order_orderNumber_ORD-20250824233949-4598_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin_False
2025-08-25 03:00:49.239 +03:00 [INF] Cache set successfully for key: order_orderNumber_ORD-20250824233949-4598_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin_False with tags: [order]
2025-08-25 03:00:49.243 +03:00 [INF] Successfully cached order with key: order_orderNumber_ORD-20250824233949-4598_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin_False
2025-08-25 03:00:49.587 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:00:49.600 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:00:50.886 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1298.8272ms
2025-08-25 03:00:53.594 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:00:53.608 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:00:55.040 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1445.7185ms
2025-08-25 03:00:57.589 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:00:57.595 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:00:59.037 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1447.4656ms
2025-08-25 03:01:01.588 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:01:01.596 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:01:03.052 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1463.8462ms
2025-08-25 03:01:05.579 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:01:05.587 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:01:07.031 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1451.7736ms
2025-08-25 03:01:09.585 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:01:09.592 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:01:11.044 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1459.6422ms
2025-08-25 03:01:13.587 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:01:13.594 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:01:15.039 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1451.2482ms
2025-08-25 03:01:17.585 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:01:17.589 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:01:19.020 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1434.9076ms
2025-08-25 03:01:21.589 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:01:21.597 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:01:23.067 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1477.611ms
2025-08-25 03:01:25.593 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:01:25.601 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:01:27.059 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1465.9199ms
2025-08-25 03:01:29.587 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:01:29.594 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:01:31.070 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1482.2865ms
2025-08-25 03:01:33.593 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:01:33.600 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:01:35.088 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1495.5139ms
2025-08-25 03:01:37.591 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:01:37.598 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:01:39.058 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1466.622ms
2025-08-25 03:01:41.593 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:01:41.602 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:01:43.074 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1480.98ms
2025-08-25 03:01:45.588 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:01:45.597 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:01:47.049 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1461.0386ms
2025-08-25 03:01:49.582 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:01:49.591 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:01:51.074 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1492.3007ms
2025-08-25 03:01:53.589 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:01:53.594 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:01:55.036 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1447.2353ms
2025-08-25 03:01:57.580 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:01:57.588 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:01:59.062 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1481.7055ms
2025-08-25 03:02:01.594 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:02:01.602 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:02:03.043 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1448.4332ms
2025-08-25 03:02:05.584 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:02:05.593 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:02:07.056 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1472.3245ms
2025-08-25 03:02:09.580 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:02:09.585 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:02:11.048 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1467.1313ms
2025-08-25 03:02:13.606 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:02:13.614 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:02:15.086 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1480.0155ms
2025-08-25 03:02:17.594 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:02:17.604 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:02:19.224 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1629.6264ms
2025-08-25 03:02:21.590 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:02:21.603 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:02:23.104 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1514.1536ms
2025-08-25 03:02:25.581 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:02:25.591 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:02:27.022 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1440.4433ms
2025-08-25 03:02:29.591 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:02:29.606 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:02:31.051 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1459.89ms
2025-08-25 03:02:33.600 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:02:33.615 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:02:35.060 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1460.1393ms
2025-08-25 03:02:37.597 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:02:37.607 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:02:39.059 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1462.3567ms
2025-08-25 03:02:41.624 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:02:41.638 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:02:43.094 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1469.8696ms
2025-08-25 03:02:45.580 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:02:45.590 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:02:47.055 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1474.4192ms
2025-08-25 03:02:49.587 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:02:49.607 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:02:51.047 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1459.6074ms
2025-08-25 03:02:53.598 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:02:53.615 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:02:55.051 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1452.5562ms
2025-08-25 03:02:57.582 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:02:57.590 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:02:59.032 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1449.6631ms
2025-08-25 03:03:01.589 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:03:01.597 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:03:03.054 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1464.3808ms
2025-08-25 03:03:05.580 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:03:05.587 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:03:07.028 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1447.817ms
2025-08-25 03:03:20.804 +03:00 [INF] DB tables already exist. Exit install
2025-08-25 03:03:22.979 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-25 03:03:24.173 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-25 03:03:24.892 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-25 03:03:25.076 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-25 03:03:25.103 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-25 03:03:25.136 +03:00 [INF] Starting data seeding...
2025-08-25 03:03:25.174 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-25 03:03:25.886 +03:00 [INF] Executed DbCommand (150ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-25 03:03:25.999 +03:00 [INF] Role 'Admin' already exists.
2025-08-25 03:03:26.164 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-25 03:03:26.170 +03:00 [INF] Role 'User' already exists.
2025-08-25 03:03:26.349 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-25 03:03:26.461 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-25 03:03:26.464 +03:00 [INF] Data seeding completed successfully.
2025-08-25 03:03:28.630 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-25 03:03:28.787 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-25 03:03:28.901 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - null null
2025-08-25 03:03:28.922 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-25 03:03:28.949 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-25 03:03:29.027 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-25 03:03:29.317 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-25 03:03:29.614 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-25 03:03:29.704 +03:00 [INF] Hosting environment: Development
2025-08-25 03:03:29.751 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-25 03:03:29.831 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-25 03:03:29.845 +03:00 [INF] Server mrrobot:25404:af0c8940 successfully announced in 178.3787 ms
2025-08-25 03:03:30.032 +03:00 [INF] Server mrrobot:25404:af0c8940 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-25 03:03:30.418 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 03:03:30.633 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 1315.3129ms
2025-08-25 03:03:30.752 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 333.8441ms
2025-08-25 03:03:30.853 +03:00 [INF] Server mrrobot:25404:af0c8940 all the dispatchers started
2025-08-25 03:03:30.911 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 03:03:30.913 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-25 03:03:31.023 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 110.085ms
2025-08-25 03:03:31.086 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 182.6488ms
2025-08-25 03:03:31.240 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-25 03:03:31.911 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 670.3473ms
2025-08-25 03:03:33.805 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - 200 null text/html 4949.4046ms
2025-08-25 03:03:33.922 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/css-dark18180678717377 - null null
2025-08-25 03:03:33.922 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/css181801735762845 - null null
2025-08-25 03:03:33.923 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/js181801235543626 - null null
2025-08-25 03:03:33.933 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/css-dark18180678717377 - 200 null text/css 11.4278ms
2025-08-25 03:03:33.965 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/js181801235543626 - 200 null application/javascript 41.7821ms
2025-08-25 03:03:33.965 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/css181801735762845 - 200 null text/css 43.1435ms
2025-08-25 03:03:33.983 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 03:03:33.989 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 5.5469ms
2025-08-25 03:03:34.474 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 03:03:34.598 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 123.9471ms
2025-08-25 03:03:36.169 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire - null null
2025-08-25 03:03:38.560 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire - 200 null text/html 2390.9116ms
2025-08-25 03:03:38.607 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 03:03:38.619 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 03:03:38.675 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 67.8872ms
2025-08-25 03:03:38.729 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 109.8232ms
2025-08-25 03:03:39.050 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:03:39.056 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:03:40.575 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1524.7879ms
2025-08-25 03:03:40.814 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 258
2025-08-25 03:03:40.822 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:03:41.221 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - null null
2025-08-25 03:03:42.114 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1300.2307ms
2025-08-25 03:03:42.863 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - 200 null text/html 1642.4325ms
2025-08-25 03:03:42.885 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 03:03:42.886 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 03:03:42.985 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 98.7728ms
2025-08-25 03:03:42.988 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 103.6747ms
2025-08-25 03:03:43.595 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:03:43.603 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:03:45.012 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:03:45.026 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:03:45.074 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1478.5355ms
2025-08-25 03:03:45.339 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - null null
2025-08-25 03:03:46.494 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1482.0547ms
2025-08-25 03:03:47.597 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:03:47.603 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:03:47.800 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - 200 null text/html 2461.1837ms
2025-08-25 03:03:47.831 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 03:03:47.854 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 03:03:47.952 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 120.4762ms
2025-08-25 03:03:47.965 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 111.4903ms
2025-08-25 03:03:49.092 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1494.8297ms
2025-08-25 03:03:50.012 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:03:50.021 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:03:51.475 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1463.0882ms
2025-08-25 03:03:51.600 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:03:51.607 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:03:53.099 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1498.7219ms
2025-08-25 03:03:53.495 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:03:53.500 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:03:54.957 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1461.7822ms
2025-08-25 03:03:55.597 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:03:55.603 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:03:56.979 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:03:56.984 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:03:57.067 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1469.7865ms
2025-08-25 03:03:58.421 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1441.508ms
2025-08-25 03:03:59.596 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:03:59.602 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:03:59.971 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-08-25 03:04:00.437 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:04:00.453 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:04:01.050 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1453.9057ms
2025-08-25 03:04:01.951 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1514.287ms
2025-08-25 03:04:02.383 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2412.7219ms
2025-08-25 03:04:02.465 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 03:04:02.566 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 03:04:02.587 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 122.1238ms
2025-08-25 03:04:02.608 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 42.0726ms
2025-08-25 03:04:03.603 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:04:03.621 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:04:04.669 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:04:04.679 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:04:04.954 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/processing - null null
2025-08-25 03:04:05.090 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1486.5726ms
2025-08-25 03:04:06.117 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1448.2288ms
2025-08-25 03:04:06.289 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - null null
2025-08-25 03:04:07.591 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:04:07.603 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:04:07.819 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/processing - 200 null text/html 2865.1287ms
2025-08-25 03:04:08.130 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:04:08.137 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:04:08.779 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - 200 null text/html 2489.778ms
2025-08-25 03:04:08.814 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 03:04:08.807 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 03:04:08.852 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 38.085ms
2025-08-25 03:04:08.953 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 145.7403ms
2025-08-25 03:04:09.107 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1516.0897ms
2025-08-25 03:04:09.676 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1545.6792ms
2025-08-25 03:04:10.906 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:04:10.917 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:04:11.596 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:04:11.611 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:04:12.378 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1471.4167ms
2025-08-25 03:04:13.069 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1473.1527ms
2025-08-25 03:04:13.985 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/jobs/succeeded/requeue - application/x-www-form-urlencoded; charset=UTF-8 13
2025-08-25 03:04:13.993 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:04:14.395 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:04:14.403 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:04:15.093 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/jobs/succeeded/requeue - 204 null null 1108.2612ms
2025-08-25 03:04:15.116 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - null null
2025-08-25 03:04:15.597 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:04:15.605 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:04:15.858 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1463.3852ms
2025-08-25 03:04:16.900 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1303.1726ms
2025-08-25 03:04:17.442 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - 200 null text/html 2325.4656ms
2025-08-25 03:04:17.483 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 03:04:17.486 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 03:04:17.498 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 11.074ms
2025-08-25 03:04:17.501 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 18.2386ms
2025-08-25 03:04:19.595 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:04:19.603 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:04:20.599 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:04:20.612 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:04:21.098 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1502.2657ms
2025-08-25 03:04:21.929 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1330.7945ms
2025-08-25 03:04:23.599 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:04:23.614 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:05:07.007 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:05:07.007 +03:00 [INF] Executing GetByIdAsync for entity Payment with ID: 0
2025-08-25 03:05:07.026 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:05:07.215 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Amount`, `p`.`CreatedAt`, `p`.`CustomerId`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`OrderId`, `p`.`PaymentDate`, `p`.`PaymentMethodId`, `p`.`PaymentProviderId`, `p`.`ProviderOrderId`, `p`.`Status`, `p`.`TransactionId`
FROM `Payments` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-08-25 03:05:07.222 +03:00 [WRN] Payment with ID 0 not found or deleted
2025-08-25 03:05:07.443 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 43842.7575ms
2025-08-25 03:05:08.044 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - null null
2025-08-25 03:05:08.357 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1350.4476ms
2025-08-25 03:05:09.663 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:05:09.687 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:05:10.352 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - 200 null text/html 2307.8223ms
2025-08-25 03:05:10.389 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 03:05:10.409 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 19.3231ms
2025-08-25 03:05:10.432 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 03:05:10.435 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 3.8261ms
2025-08-25 03:05:10.989 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1325.6877ms
2025-08-25 03:05:12.588 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:05:12.594 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:05:13.598 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:05:13.606 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:05:14.038 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1449.4397ms
2025-08-25 03:05:15.063 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1464.2249ms
2025-08-25 03:05:16.605 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:05:16.610 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:05:17.630 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:05:17.659 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:05:18.087 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1481.62ms
2025-08-25 03:05:19.124 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1493.6631ms
2025-08-25 03:05:20.590 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:05:20.611 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:05:21.587 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:05:21.594 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:05:22.093 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1503.2166ms
2025-08-25 03:05:23.087 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1499.1274ms
2025-08-25 03:05:24.116 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:05:24.119 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:05:25.585 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:05:25.594 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:05:25.625 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1509.4963ms
2025-08-25 03:05:27.035 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1450.6286ms
2025-08-25 03:05:27.635 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:05:27.647 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:05:27.672 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - null null
2025-08-25 03:05:29.086 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1450.3386ms
2025-08-25 03:05:29.601 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:05:29.608 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:05:30.133 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/succeeded - 200 null text/html 2461.2019ms
2025-08-25 03:05:30.158 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 03:05:30.214 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 03:05:30.283 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 124.8358ms
2025-08-25 03:05:30.294 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 80.4746ms
2025-08-25 03:05:31.065 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1464.2873ms
2025-08-25 03:05:32.334 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:05:32.341 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:05:32.973 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/details/40 - null null
2025-08-25 03:05:33.586 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:05:33.593 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:05:33.777 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1442.8777ms
2025-08-25 03:05:34.914 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/details/40 - 200 null text/html 1941.2566ms
2025-08-25 03:05:34.978 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 03:05:34.993 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 03:05:35.030 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 52.1022ms
2025-08-25 03:05:35.095 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1508.5739ms
2025-08-25 03:05:35.106 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 113.3869ms
2025-08-25 03:05:37.065 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:05:37.070 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:05:37.587 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:05:37.593 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:05:38.520 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1454.5339ms
2025-08-25 03:05:39.063 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1476.386ms
2025-08-25 03:05:40.536 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:05:40.545 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:05:41.589 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:05:41.596 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:05:41.986 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1449.4178ms
2025-08-25 03:05:43.032 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1443.1046ms
2025-08-25 03:05:43.868 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/jobs/actions/requeue/40 - null 0
2025-08-25 03:05:43.877 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:05:44.003 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:05:44.011 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:05:44.953 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/jobs/actions/requeue/40 - 204 null null 1085.6406ms
2025-08-25 03:05:44.977 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/details/40 - null null
2025-08-25 03:05:45.447 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1443.0752ms
2025-08-25 03:05:45.587 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:05:45.596 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:05:46.732 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/details/40 - 200 null text/html 1754.8908ms
2025-08-25 03:05:46.758 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 03:05:46.763 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 03:05:46.807 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 49.5035ms
2025-08-25 03:05:46.830 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 66.8429ms
2025-08-25 03:05:46.885 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1298.5006ms
2025-08-25 03:05:48.837 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:05:48.843 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:05:49.587 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:05:49.594 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:05:53.670 +03:00 [INF] Executing GetByIdAsync for entity Payment with ID: 0
2025-08-25 03:05:53.745 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 4909.731ms
2025-08-25 03:05:53.859 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Amount`, `p`.`CreatedAt`, `p`.`CustomerId`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`OrderId`, `p`.`PaymentDate`, `p`.`PaymentMethodId`, `p`.`PaymentProviderId`, `p`.`ProviderOrderId`, `p`.`Status`, `p`.`TransactionId`
FROM `Payments` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-08-25 03:05:53.868 +03:00 [WRN] Payment with ID 0 not found or deleted
2025-08-25 03:05:54.569 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 4982.3346ms
2025-08-25 03:05:55.762 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:05:55.768 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:05:56.596 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:05:56.609 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:05:57.072 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1310.5318ms
2025-08-25 03:05:57.270 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - null null
2025-08-25 03:05:57.918 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1322.0525ms
2025-08-25 03:05:58.951 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-08-25 03:05:59.085 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:05:59.092 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:05:59.262 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - 200 null text/html 1991.8193ms
2025-08-25 03:06:00.529 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1443.4251ms
2025-08-25 03:06:00.596 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:00.604 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:01.319 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2368.2955ms
2025-08-25 03:06:01.342 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 03:06:01.342 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 03:06:01.382 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 39.7352ms
2025-08-25 03:06:01.454 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 111.1631ms
2025-08-25 03:06:02.079 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1483.0235ms
2025-08-25 03:06:03.413 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:03.420 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:04.588 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:04.597 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:04.856 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1442.6054ms
2025-08-25 03:06:06.028 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1440.0862ms
2025-08-25 03:06:07.588 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:07.596 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:08.587 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:08.596 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:09.047 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1458.9408ms
2025-08-25 03:06:10.028 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1441.1533ms
2025-08-25 03:06:11.605 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:11.610 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:12.602 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:12.612 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:13.057 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1451.6955ms
2025-08-25 03:06:14.046 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1443.6786ms
2025-08-25 03:06:15.663 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:15.671 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:16.585 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:16.590 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:17.144 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1480.8423ms
2025-08-25 03:06:18.031 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1445.4216ms
2025-08-25 03:06:19.588 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:19.595 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:20.588 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:20.595 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:21.048 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1460.0707ms
2025-08-25 03:06:22.042 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1453.8253ms
2025-08-25 03:06:23.589 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:23.608 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:24.588 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:24.595 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:25.046 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1457.1364ms
2025-08-25 03:06:26.021 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1433.6304ms
2025-08-25 03:06:27.601 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:27.613 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:28.589 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:28.598 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:29.057 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1456.5563ms
2025-08-25 03:06:29.494 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json-patch+json 62
2025-08-25 03:06:29.506 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:29.714 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 03:06:29.731 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-08-25 03:06:29.746 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-08-25 03:06:29.748 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 401 0 null 254.0779ms
2025-08-25 03:06:30.059 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1470.0592ms
2025-08-25 03:06:31.595 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:31.604 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:32.607 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:32.615 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:33.035 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1440.1185ms
2025-08-25 03:06:34.080 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1473.0974ms
2025-08-25 03:06:35.617 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:35.630 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:36.589 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:36.596 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:37.112 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1494.9102ms
2025-08-25 03:06:38.053 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1463.9327ms
2025-08-25 03:06:39.600 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:39.605 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:40.589 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:40.598 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:41.062 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1462.2143ms
2025-08-25 03:06:42.067 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1478.2131ms
2025-08-25 03:06:43.590 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:43.603 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:44.590 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:44.597 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:45.088 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1498.0257ms
2025-08-25 03:06:46.040 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1450.3254ms
2025-08-25 03:06:47.588 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:47.596 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:48.606 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:48.615 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:49.265 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1677.0208ms
2025-08-25 03:06:50.239 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1632.2409ms
2025-08-25 03:06:51.593 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:51.601 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:53.166 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1573.2616ms
2025-08-25 03:06:55.390 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:55.395 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:56.872 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1481.7086ms
2025-08-25 03:06:57.588 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:57.595 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:06:59.053 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1465.1565ms
2025-08-25 03:06:59.595 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:06:59.602 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:01.358 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1762.5192ms
2025-08-25 03:07:01.593 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:07:01.597 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:03.133 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1540.5609ms
2025-08-25 03:07:03.598 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:07:03.605 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:04.425 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/items - application/json-patch+json 62
2025-08-25 03:07:04.431 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:04.578 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 03:07:04.780 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 03:07:04.797 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-08-25 03:07:04.846 +03:00 [INF] Route matched with {action = "AddItemToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] AddItemToCart(E_Commerce.DtoModels.CartDtos.CreateCartItemDto) on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-08-25 03:07:04.881 +03:00 [INF] Executing AddItemToCart for product ID: 1
2025-08-25 03:07:04.893 +03:00 [INF] Adding item to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 1
2025-08-25 03:07:05.063 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1464.9093ms
2025-08-25 03:07:05.257 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-08-25 03:07:05.263 +03:00 [INF] Execute GetAll for entity Product
2025-08-25 03:07:05.470 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__itemDto_ProductId_0='?' (DbType = Int32), @__itemDto_ProductVariantId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Price`, `t`.`c`, `t`.`EndDate`, `t`.`StartDate`, `t`.`DiscountPercent`, `t`.`DeletedAt`, `t`.`IsActive`, `t0`.`Id`, `t0`.`Quantity`, `t0`.`c`
FROM (
    SELECT `p`.`Id`, `p`.`Price`, `d`.`Id` IS NOT NULL AS `c`, `d`.`EndDate`, `d`.`StartDate`, `d`.`DiscountPercent`, `d`.`DeletedAt`, `d`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__itemDto_ProductId_0) AND `p`.`DeletedAt` IS NULL) AND `p`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Quantity`, `t1`.`c`, `t1`.`ProductId`
    FROM (
        SELECT `p0`.`Id`, `p0`.`Quantity`, 1 AS `c`, `p0`.`ProductId`, ROW_NUMBER() OVER(PARTITION BY `p0`.`ProductId` ORDER BY `p0`.`Id`) AS `row`
        FROM `ProductVariants` AS `p0`
        WHERE (`p0`.`Id` = @__itemDto_ProductVariantId_1) AND `p0`.`IsActive`
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
2025-08-25 03:07:05.495 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 03:07:05.639 +03:00 [INF] Executed DbCommand (95ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-08-25 03:07:05.766 +03:00 [INF] Executing CreateAsync for entity CartItem
2025-08-25 03:07:05.893 +03:00 [INF] CartItem added successfully (pending save)
2025-08-25 03:07:05.895 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-25 03:07:05.898 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-25 03:07:05.901 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:07:05.909 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:05.943 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-25 03:07:06.299 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (Size = 255), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `CartItems` (`AddedAt`, `CartId`, `CreatedAt`, `DeletedAt`, `ModifiedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `UnitPrice`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `CartItems`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-25 03:07:06.511 +03:00 [INF] Removing cache for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 03:07:06.969 +03:00 [INF] Cache removed successfully for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 03:07:06.975 +03:00 [INF] Item added to cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, product: 1
2025-08-25 03:07:07.007 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 03:07:07.089 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce) in 2229.516ms
2025-08-25 03:07:07.093 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.AddItemToCart (E-Commerce)'
2025-08-25 03:07:07.098 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/items - 200 134 application/json; charset=utf-8 2673.2089ms
2025-08-25 03:07:07.394 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1492.1808ms
2025-08-25 03:07:07.595 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:07:07.599 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:09.032 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1437.1868ms
2025-08-25 03:07:09.592 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:07:09.600 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:11.047 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1455.0356ms
2025-08-25 03:07:11.591 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:07:11.600 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:13.105 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1513.4351ms
2025-08-25 03:07:13.598 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:07:13.602 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:15.040 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1441.9496ms
2025-08-25 03:07:15.593 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:07:15.598 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:17.047 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1454.5068ms
2025-08-25 03:07:17.051 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - null 0
2025-08-25 03:07:17.060 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:17.065 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 03:07:17.228 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 03:07:17.240 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-08-25 03:07:17.246 +03:00 [INF] Route matched with {action = "CheckOut", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] CheckOut() on controller E_Commerce.Controllers.CartController (E-Commerce).
2025-08-25 03:07:17.256 +03:00 [INF] Executing CheckOut
2025-08-25 03:07:17.262 +03:00 [INF] Checkout of cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 03:07:17.265 +03:00 [INF] Retrieving cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 03:07:17.428 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`UserId`, `t0`.`Id`, `t0`.`AddedAt`, `t0`.`CartId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`ProductVariantId`, `t0`.`Quantity`, `t0`.`UnitPrice`
FROM (
    SELECT `c`.`Id`, `c`.`CheckoutDate`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`UserId`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c0`.`Id`, `c0`.`AddedAt`, `c0`.`CartId`, `c0`.`CreatedAt`, `c0`.`DeletedAt`, `c0`.`ModifiedAt`, `c0`.`ProductId`, `c0`.`ProductVariantId`, `c0`.`Quantity`, `c0`.`UnitPrice`
    FROM `CartItems` AS `c0`
    WHERE `c0`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`
2025-08-25 03:07:17.596 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:07:17.603 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:17.617 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Cart` SET `CheckoutDate` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-08-25 03:07:17.632 +03:00 [INF] Removing cache by tag: cart
2025-08-25 03:07:17.848 +03:00 [WRN] No cache entries found for tag: cart
2025-08-25 03:07:17.851 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 03:07:17.858 +03:00 [INF] Executed action E_Commerce.Controllers.CartController.CheckOut (E-Commerce) in 603.9558ms
2025-08-25 03:07:17.867 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CartController.CheckOut (E-Commerce)'
2025-08-25 03:07:17.895 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Cart/checkout - 200 122 application/json; charset=utf-8 844.4176ms
2025-08-25 03:07:19.079 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1483.5491ms
2025-08-25 03:07:19.587 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:07:19.593 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:21.608 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:07:21.616 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:21.669 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2081.3102ms
2025-08-25 03:07:23.746 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2138.3893ms
2025-08-25 03:07:24.592 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:07:24.599 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:26.042 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1449.8999ms
2025-08-25 03:07:26.592 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:07:26.601 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:28.036 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1444.0289ms
2025-08-25 03:07:28.587 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:07:28.592 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:30.028 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1440.3348ms
2025-08-25 03:07:30.608 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:07:30.612 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:32.086 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1478.391ms
2025-08-25 03:07:32.590 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:07:32.598 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:34.044 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1454.2075ms
2025-08-25 03:07:34.619 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:07:34.629 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:36.074 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1455.3871ms
2025-08-25 03:07:36.598 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:07:36.608 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:38.051 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1452.8329ms
2025-08-25 03:07:38.593 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:07:38.598 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:38.828 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order/create-from-cart - application/json-patch+json 41
2025-08-25 03:07:38.832 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:38.834 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 03:07:38.994 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 03:07:39.001 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 03:07:39.010 +03:00 [INF] Route matched with {action = "CreateOrderFromCart", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto]]] CreateOrderFromCart(E_Commerce.DtoModels.OrderDtos.CreateOrderDto) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-08-25 03:07:39.032 +03:00 [INF] Executing CreateOrderFromCart
2025-08-25 03:07:39.045 +03:00 [INF] Creating order from cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 03:07:39.362 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-08-25 03:07:39.466 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-08-25 03:07:39.477 +03:00 [INF] Checking if address 1 exists for customer: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 03:07:39.561 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__addressId_0='?' (DbType = Int32), @__customerId_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `CustomerAddresses` AS `c`
    WHERE ((`c`.`Id` = @__addressId_0) AND (`c`.`CustomerId` = @__customerId_1)) AND `c`.`DeletedAt` IS NULL)
2025-08-25 03:07:39.571 +03:00 [INF] Getting cart for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 03:07:39.577 +03:00 [INF] Getting cache for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 03:07:39.796 +03:00 [WRN] Cache miss for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 03:07:39.875 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userid_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userid_0) AND `c`.`DeletedAt` IS NULL)
2025-08-25 03:07:39.879 +03:00 [INF] Execute GetAll for entity Cart
2025-08-25 03:07:40.045 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`UserId`, `t`.`c`, `t`.`CheckoutDate`, `t`.`CreatedAt`, `t0`.`Id`, `t0`.`ProductId`, `t0`.`Quantity`, `t0`.`AddedAt`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Price`, `t0`.`FinalPrice`, `t0`.`DiscountName`, `t0`.`DiscountPrecentage`, `t0`.`MainImageUrl`, `t0`.`IsActive`, `t0`.`Color`, `t0`.`Id1`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`ModifiedAt`, `t0`.`Size`, `t0`.`Waist`, `t0`.`Length`, `t0`.`Quantity0`, `t0`.`UnitPrice`, `t0`.`Id2`
FROM (
    SELECT `c`.`Id`, `c`.`UserId`, (
        SELECT COUNT(*)
        FROM `CartItems` AS `c0`
        WHERE `c`.`Id` = `c0`.`CartId`) AS `c`, `c`.`CheckoutDate`, `c`.`CreatedAt`
    FROM `Cart` AS `c`
    WHERE (`c`.`UserId` = @__userId_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `c1`.`Id`, `c1`.`ProductId`, `c1`.`Quantity`, `c1`.`AddedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `DiscountName`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND (`i`.`IsMain` AND (`i`.`DeletedAt` IS NULL))
        LIMIT 1), (
        SELECT `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`p`.`Id` = `i0`.`ProductId`) AND `i0`.`DeletedAt` IS NULL
        LIMIT 1)) AS `MainImageUrl`, `p`.`IsActive`, `p0`.`Color`, `p0`.`Id` AS `Id1`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`ModifiedAt`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity` AS `Quantity0`, `c1`.`UnitPrice`, `d`.`Id` AS `Id2`, `c1`.`CartId`
    FROM `CartItems` AS `c1`
    INNER JOIN `Products` AS `p` ON `c1`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN `ProductVariants` AS `p0` ON `c1`.`ProductVariantId` = `p0`.`Id`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t0` ON `t`.`Id` = `t0`.`CartId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`, `t0`.`Id2`
2025-08-25 03:07:40.051 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1458.077ms
2025-08-25 03:07:40.074 +03:00 [INF] Setting cache for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 03:07:40.358 +03:00 [INF] Cache set successfully for key: cart_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5 with tags: [cart]
2025-08-25 03:07:40.365 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-08-25 03:07:40.460 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = 1
2025-08-25 03:07:43.018 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:07:43.018 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:07:43.043 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:43.047 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:43.977 +03:00 [INF] Execute Update for entity ProductVariant
2025-08-25 03:07:43.981 +03:00 [INF] ProductVariant marked for update (pending save)
2025-08-25 03:07:44.504 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1486.2279ms
2025-08-25 03:07:44.504 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1485.9901ms
2025-08-25 03:07:45.042 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE `o`.`OrderNumber` = @__orderNumber_0)
2025-08-25 03:07:45.063 +03:00 [INF] Executing CreateAsync for entity Order
2025-08-25 03:07:45.160 +03:00 [INF] Order added successfully (pending save)
2025-08-25 03:07:45.375 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime), @p8='?' (Size = 500), @p9='?' (Size = 50), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal), @p27='?' (DbType = Int32), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime), @p19='?' (DbType = DateTime), @p20='?' (DbType = Boolean), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Orders` (`CancelledAt`, `CreatedAt`, `CustomerAddressId`, `CustomerId`, `DeletedAt`, `DeliveredAt`, `DiscountAmount`, `ModifiedAt`, `Notes`, `OrderNumber`, `RestockedAt`, `ShippedAt`, `ShippingCost`, `Status`, `Subtotal`, `TaxAmount`, `Total`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Orders`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

UPDATE `ProductVariants` SET `Color` = @p17, `CreatedAt` = @p18, `DeletedAt` = @p19, `IsActive` = @p20, `Length` = @p21, `ModifiedAt` = @p22, `ProductId` = @p23, `Quantity` = @p24, `Size` = @p25, `Waist` = @p26
WHERE `Id` = @p27;
SELECT ROW_COUNT();
2025-08-25 03:07:45.465 +03:00 [INF] Executing CreateRangeAsync for entity OrderItem
2025-08-25 03:07:45.514 +03:00 [INF] 1 OrderItem entities added successfully (pending save)
2025-08-25 03:07:45.518 +03:00 [INF] Clearing cart: 1
2025-08-25 03:07:45.602 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__cartId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AddedAt`, `c`.`CartId`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`ProductId`, `c`.`ProductVariantId`, `c`.`Quantity`, `c`.`UnitPrice`
FROM `CartItems` AS `c`
WHERE `c`.`CartId` = @__cartId_0
2025-08-25 03:07:45.613 +03:00 [INF] Cart 1 cleared successfully
2025-08-25 03:07:45.794 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Decimal), @p10='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM `CartItems`
WHERE `Id` = @p0;
SELECT ROW_COUNT();

INSERT INTO `OrderItem` (`CreatedAt`, `DeletedAt`, `ModifiedAt`, `OrderId`, `OrderedAt`, `ProductId`, `ProductVariantId`, `Quantity`, `TotalPrice`, `UnitPrice`)
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
SELECT `Id`
FROM `OrderItem`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-25 03:07:45.967 +03:00 [INF] Execute AddUserOpreationAsync
2025-08-25 03:07:45.970 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-08-25 03:07:45.995 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-08-25 03:07:45.997 +03:00 [INF] Execute GetAll for entity Order
2025-08-25 03:07:46.208 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[@__createdOrder_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`ModifiedAt`, `t0`.`OrderNumber`, `t0`.`Status`, `t0`.`Subtotal`, `t0`.`TaxAmount`, `t0`.`ShippingCost`, `t0`.`DiscountAmount`, `t0`.`Total`, `t0`.`Notes`, `t0`.`DeletedAt`, `t0`.`ShippedAt`, `t0`.`DeliveredAt`, `t0`.`CancelledAt`, `t0`.`c`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Email`, `t0`.`PhoneNumber`, `t1`.`Id`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`Quantity`, `t1`.`UnitPrice`, `t1`.`TotalPrice`, `t1`.`OrderedAt`, `t1`.`Id0`, `t1`.`Name`, `t1`.`Price`, `t1`.`IsActive`, `t1`.`FinalPrice`, `t1`.`DiscountPrecentage`, `t1`.`MainImageUrl`, `t1`.`Id1`, `t1`.`Color`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`Size`, `t1`.`DeletedAt`, `t1`.`Length`, `t1`.`Waist`, `t1`.`Id2`, `t1`.`Id3`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`ModifiedAt`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`ShippingCost`, `o`.`DiscountAmount`, `o`.`Total`, `o`.`Notes`, `o`.`DeletedAt`, `o`.`ShippedAt`, `o`.`DeliveredAt`, `o`.`CancelledAt`, FALSE AS `c`, `t`.`Id` AS `Id0`, `t`.`Name`, `t`.`Email`, `t`.`PhoneNumber`
    FROM `Orders` AS `o`
    INNER JOIN (
        SELECT `a`.`Id`, `a`.`Email`, `a`.`PhoneNumber`, `a`.`Name`
        FROM `AspNetUsers` AS `a`
        WHERE `a`.`Discriminator` = 'Customer'
    ) AS `t` ON `o`.`CustomerId` = `t`.`Id`
    WHERE `o`.`Id` = @__createdOrder_Id_0
    LIMIT 1
) AS `t0`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`CreatedAt`, `o0`.`ModifiedAt`, `o0`.`Quantity`, `o0`.`UnitPrice`, `o0`.`TotalPrice`, `o0`.`OrderedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND `i`.`DeletedAt` IS NULL
        LIMIT 1), '') AS `MainImageUrl`, `o0`.`ProductVariantId` AS `Id1`, `p0`.`Color`, COALESCE(`p0`.`CreatedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `CreatedAt0`, COALESCE(`p0`.`ModifiedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `ModifiedAt0`, `p0`.`Size`, `p0`.`DeletedAt`, COALESCE(`p0`.`Length`, 0) AS `Length`, COALESCE(`p0`.`Waist`, 0) AS `Waist`, `d`.`Id` AS `Id2`, `p0`.`Id` AS `Id3`, `o0`.`OrderId`
    FROM `OrderItem` AS `o0`
    INNER JOIN `Products` AS `p` ON `o0`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    INNER JOIN `ProductVariants` AS `p0` ON `o0`.`ProductVariantId` = `p0`.`Id`
) AS `t1` ON `t0`.`Id` = `t1`.`OrderId`
ORDER BY `t0`.`Id`, `t0`.`Id0`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id2`
2025-08-25 03:07:46.217 +03:00 [INF] Removing cache by tag: order
2025-08-25 03:07:46.594 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:07:46.595 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:07:46.599 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:46.604 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:47.071 +03:00 [INF] Removed 2 cache entries for tag: order
2025-08-25 03:07:47.900 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1305.6154ms
2025-08-25 03:07:47.963 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1368.2795ms
2025-08-25 03:07:48.017 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderWithPaymentDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 03:07:48.046 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce) in 9031.2592ms
2025-08-25 03:07:48.057 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 03:07:48.059 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order/create-from-cart - 201 1436 application/json; charset=utf-8 9231.4294ms
2025-08-25 03:07:51.174 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:07:51.175 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:07:51.201 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:51.206 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:52.122 +03:00 [ERR] Failed executing DbCommand (10ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-08-25 03:07:52.310 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'E_Commerce.Context.AppDbContext'.
System.InvalidOperationException: Connection must be Open; current state is Closed
   at MySqlConnector.MySqlConnection.get_Session() in /_/src/MySqlConnector/MySqlConnection.cs:line 733
   at MySqlConnector.Core.ICancellableCommandExtensions.ResetCommandTimeout(ICancellableCommand command) in /_/src/MySqlConnector/Core/ICancellableCommand.cs:line 42
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 355
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: Connection must be Open; current state is Closed
   at MySqlConnector.MySqlConnection.get_Session() in /_/src/MySqlConnector/MySqlConnection.cs:line 733
   at MySqlConnector.Core.ICancellableCommandExtensions.ResetCommandTimeout(ICancellableCommand command) in /_/src/MySqlConnector/Core/ICancellableCommand.cs:line 42
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 355
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-08-25 03:07:53.810 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2635.5067ms
2025-08-25 03:07:53.810 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2635.786ms
2025-08-25 03:07:53.892 +03:00 [INF] Removing cache by tags: [productwithvariantdata, product_search, variantdata]
2025-08-25 03:07:54.538 +03:00 [WRN] No cache entries found for tags: [productwithvariantdata, product_search, variantdata]
2025-08-25 03:07:56.594 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:07:56.594 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:07:56.601 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:56.608 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:07:57.896 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1301.7365ms
2025-08-25 03:07:57.896 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1302.5629ms
2025-08-25 03:08:00.591 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:00.592 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:00.600 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:00.612 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:02.058 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1465.9075ms
2025-08-25 03:08:02.208 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1616.6669ms
2025-08-25 03:08:04.605 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:04.612 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:04.614 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:04.620 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:06.062 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1450.0557ms
2025-08-25 03:08:06.211 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1605.8378ms
2025-08-25 03:08:08.596 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:08.597 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:08.602 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:08.606 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:10.061 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1464.9046ms
2025-08-25 03:08:10.214 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1616.9497ms
2025-08-25 03:08:12.595 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:12.595 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:12.602 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:12.609 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:14.061 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1465.3656ms
2025-08-25 03:08:14.216 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1620.6121ms
2025-08-25 03:08:16.596 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:16.597 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:16.603 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:16.609 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:18.063 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1466.9721ms
2025-08-25 03:08:18.213 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1615.6004ms
2025-08-25 03:08:20.593 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:20.596 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:20.599 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:20.605 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:22.076 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1480.3958ms
2025-08-25 03:08:22.230 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1636.8896ms
2025-08-25 03:08:24.600 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:24.602 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:24.610 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:24.615 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:26.050 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1448.1777ms
2025-08-25 03:08:26.217 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1616.5171ms
2025-08-25 03:08:28.594 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:28.595 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:28.600 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:28.606 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:30.070 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1474.8374ms
2025-08-25 03:08:30.219 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1624.9912ms
2025-08-25 03:08:30.591 +03:00 [INF] 1 servers were removed due to timeout
2025-08-25 03:08:32.597 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:32.597 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:32.604 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:32.610 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:34.042 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1445.6612ms
2025-08-25 03:08:34.192 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1595.0243ms
2025-08-25 03:08:36.593 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:36.598 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:36.601 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:36.612 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:38.065 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1471.6139ms
2025-08-25 03:08:38.088 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Order/ORD-20250825000744-7284/Payment - application/json-patch+json 99
2025-08-25 03:08:38.097 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:38.102 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 03:08:38.231 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1629.9674ms
2025-08-25 03:08:38.255 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 03:08:38.261 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 03:08:38.275 +03:00 [INF] Route matched with {action = "CreateOrderFromCart", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto]]] CreateOrderFromCart(System.String, E_Commerce.DtoModels.PaymentDtos.CreatePaymentOfCustomer) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-08-25 03:08:38.288 +03:00 [INF] Executing CreateOrderFromCart
2025-08-25 03:08:38.298 +03:00 [INF] Starting CreatePaymentMethod for user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 03:08:38.301 +03:00 [INF] Getting order by number: ORD-20250825000744-7284
2025-08-25 03:08:38.462 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`OrderNumber` = @__orderNumber_0
LIMIT 1
2025-08-25 03:08:38.471 +03:00 [INF] Getting payment method ID for enum "Visa"
2025-08-25 03:08:38.477 +03:00 [INF] Execute GetAll for entity PaymentMethod
2025-08-25 03:08:38.647 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__methodEnum_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`
FROM `PaymentMethods` AS `p`
WHERE ((`p`.`Method` = @__methodEnum_0) AND `p`.`IsActive`) AND `p`.`DeletedAt` IS NULL
LIMIT 1
2025-08-25 03:08:38.657 +03:00 [INF] Found payment method ID 1 for enum "Visa"
2025-08-25 03:08:38.662 +03:00 [INF] Executing GetByIdAsync for entity PaymentMethod with ID: 1
2025-08-25 03:08:38.823 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IntegrationId`, `p`.`IsActive`, `p`.`Method`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`PaymentProviderId`
FROM `PaymentMethods` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-08-25 03:08:40.910 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:40.910 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:40.917 +03:00 [INF] Execute GetAll for entity PaymentProvider
2025-08-25 03:08:40.918 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:40.923 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:41.087 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`PublicKey`
FROM `PaymentProviders` AS `p`
WHERE `p`.`Provider` = 1
LIMIT 1
2025-08-25 03:08:41.102 +03:00 [INF] Executing GetTokenAsync
2025-08-25 03:08:41.860 +03:00 [INF] Successfully retrieved PayMob token
2025-08-25 03:08:42.049 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-08-25 03:08:42.067 +03:00 [INF] Getting address by ID: 1
2025-08-25 03:08:42.251 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[@__addressId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`AdditionalNotes`, `c`.`AddressType`, `c`.`City`, `c`.`Country`, `c`.`CreatedAt`, `c`.`CustomerId`, `c`.`DeletedAt`, `c`.`IsDefault`, `c`.`ModifiedAt`, `c`.`PhoneNumber`, `c`.`PostalCode`, `c`.`State`, `c`.`StreetAddress`, `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Discriminator`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `t`.`Age`, `t`.`CreateAt`, `t`.`DeletedAt`, `t`.`Gender`, `t`.`ImageId`, `t`.`ImageId1`, `t`.`LastVisit`, `t`.`Name`
FROM `CustomerAddresses` AS `c`
INNER JOIN (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Discriminator` = 'Customer'
) AS `t` ON `c`.`CustomerId` = `t`.`Id`
WHERE (`c`.`Id` = @__addressId_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-08-25 03:08:44.024 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 3113.9255ms
2025-08-25 03:08:44.178 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 3267.1728ms
2025-08-25 03:08:44.538 +03:00 [INF] Successfully created PayMob order: 375301252 for local order: ORD-20250825000744-7284
2025-08-25 03:08:44.543 +03:00 [INF] Execute GetAll for entity PaymentMethod
2025-08-25 03:08:44.702 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__dto_PaymentMethod_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`IntegrationId`
FROM `PaymentMethods` AS `p`
INNER JOIN `PaymentProviders` AS `p0` ON `p`.`PaymentProviderId` = `p0`.`Id`
WHERE ((`p`.`Method` = @__dto_PaymentMethod_0) AND `p`.`IsActive`) AND (`p0`.`Provider` = 1)
LIMIT 1
2025-08-25 03:08:44.707 +03:00 [INF] Using integration ID: 5221967 for payment method: "Visa"
2025-08-25 03:08:44.714 +03:00 [INF] Starting GeneratePaymentKeyAsync for Order ID: 375301252, Amount: 10000
2025-08-25 03:08:45.239 +03:00 [INF] Request sent to Paymob payment_keys endpoint
2025-08-25 03:08:45.241 +03:00 [INF] Received response from Paymob payment_keys endpoint
2025-08-25 03:08:45.244 +03:00 [INF] Payment key generated successfully for Order ID: 375301252
2025-08-25 03:08:45.248 +03:00 [INF] Successfully generated payment key for order: ORD-20250825000744-7284
2025-08-25 03:08:45.251 +03:00 [INF] Execute GetAll for entity PaymentProvider
2025-08-25 03:08:45.406 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__paymentProvider_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`IframeId`
FROM `PaymentProviders` AS `p`
WHERE `p`.`Provider` = @__paymentProvider_0
LIMIT 1
2025-08-25 03:08:45.413 +03:00 [INF] Executing CreateAsync for entity Payment
2025-08-25 03:08:45.458 +03:00 [INF] Payment added successfully (pending save)
2025-08-25 03:08:45.460 +03:00 [INF] Execute AddUserOpreationAsync
2025-08-25 03:08:45.462 +03:00 [INF] Executing CreateAsync for entity UserOperationsLog
2025-08-25 03:08:45.465 +03:00 [INF] UserOperationsLog added successfully (pending save)
2025-08-25 03:08:45.832 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?' (Size = 255), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int64), @p10='?' (DbType = Int32), @p11='?' (Size = 100), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime), @p17='?' (DbType = Int32), @p18='?' (DbType = DateTime), @p19='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Payments` (`Amount`, `CreatedAt`, `CustomerId`, `DeletedAt`, `ModifiedAt`, `OrderId`, `PaymentDate`, `PaymentMethodId`, `PaymentProviderId`, `ProviderOrderId`, `Status`, `TransactionId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
SELECT `Id`
FROM `Payments`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `userOperationsLogs` (`CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`, `UserId`)
VALUES (@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
SELECT `Id`
FROM `userOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-25 03:08:45.936 +03:00 [INF] Payment created successfully with ID 2
2025-08-25 03:08:46.597 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:46.598 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:46.603 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:46.614 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:46.873 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.PaymentDtos.PaymentResponseDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 03:08:46.885 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce) in 8605.2789ms
2025-08-25 03:08:46.900 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.CreateOrderFromCart (E-Commerce)'
2025-08-25 03:08:46.902 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Order/ORD-20250825000744-7284/Payment - 200 1379 application/json; charset=utf-8 8813.8844ms
2025-08-25 03:08:48.079 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1481.6364ms
2025-08-25 03:08:48.230 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1632.3017ms
2025-08-25 03:08:50.624 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:50.624 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:50.685 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:50.693 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:52.152 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1528.2124ms
2025-08-25 03:08:52.304 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1679.2887ms
2025-08-25 03:08:54.598 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:54.601 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:54.605 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:54.613 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:56.073 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1474.6308ms
2025-08-25 03:08:56.226 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1625.1602ms
2025-08-25 03:08:58.593 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:58.594 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:08:58.600 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:08:58.612 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:00.069 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1476.3233ms
2025-08-25 03:09:00.223 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1629.2088ms
2025-08-25 03:09:02.598 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:02.599 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:02.606 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:02.612 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:04.095 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1496.4686ms
2025-08-25 03:09:04.246 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1647.191ms
2025-08-25 03:09:06.596 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:06.597 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:06.603 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:06.611 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:08.080 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1483.8439ms
2025-08-25 03:09:08.230 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1633.2219ms
2025-08-25 03:09:10.594 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:10.595 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:10.601 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:10.607 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:12.249 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1654.5173ms
2025-08-25 03:09:12.407 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1812.4156ms
2025-08-25 03:09:14.602 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:14.607 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:14.607 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:14.613 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:16.063 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1461.261ms
2025-08-25 03:09:16.220 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1613.0085ms
2025-08-25 03:09:18.601 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:18.607 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:18.613 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:18.622 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:20.068 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1467.0617ms
2025-08-25 03:09:20.221 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1613.461ms
2025-08-25 03:09:22.595 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:22.598 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:22.603 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:22.611 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:24.068 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1469.2047ms
2025-08-25 03:09:24.223 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1628.5375ms
2025-08-25 03:09:26.605 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:26.606 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:26.610 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:26.615 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:28.057 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1452.328ms
2025-08-25 03:09:28.212 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1606.0956ms
2025-08-25 03:09:30.598 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:30.601 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:30.602 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:30.606 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:32.071 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1469.7971ms
2025-08-25 03:09:32.218 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1619.9082ms
2025-08-25 03:09:34.598 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:34.598 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:34.608 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:34.614 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:36.062 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1464.289ms
2025-08-25 03:09:36.210 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1611.5755ms
2025-08-25 03:09:38.543 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:38.590 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:38.604 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:38.612 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:40.050 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1507.8834ms
2025-08-25 03:09:40.209 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1604.4662ms
2025-08-25 03:09:42.059 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:42.071 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:42.592 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-08-25 03:09:42.622 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:42.628 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:43.531 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1471.7709ms
2025-08-25 03:09:44.089 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1467.5498ms
2025-08-25 03:09:45.010 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2418.172ms
2025-08-25 03:09:45.039 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 03:09:45.039 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 03:09:45.084 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 45.3897ms
2025-08-25 03:09:45.101 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 61.5059ms
2025-08-25 03:09:46.601 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:46.610 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:47.603 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:47.614 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:48.068 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1466.4545ms
2025-08-25 03:09:49.070 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1466.628ms
2025-08-25 03:09:50.608 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:50.614 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:51.599 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:51.608 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:52.124 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1516.1968ms
2025-08-25 03:09:53.063 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1464.0274ms
2025-08-25 03:09:54.601 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:54.606 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:55.070 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:55.119 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:56.094 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1493.2252ms
2025-08-25 03:09:56.582 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1512.0056ms
2025-08-25 03:09:58.587 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:58.592 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:09:58.600 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:09:58.606 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:10:00.038 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1450.7613ms
2025-08-25 03:10:00.188 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1587.3315ms
2025-08-25 03:10:01.307 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - application/x-www-form-urlencoded; charset=UTF-8 13
2025-08-25 03:10:01.316 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:10:02.045 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:10:02.057 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:10:02.465 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - 204 null null 1157.8172ms
2025-08-25 03:10:02.488 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-08-25 03:10:02.602 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:10:02.608 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:10:03.501 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1456.5473ms
2025-08-25 03:10:03.904 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1301.903ms
2025-08-25 03:10:04.685 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2196.9434ms
2025-08-25 03:10:04.715 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 03:10:04.717 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 03:10:04.752 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 35.1285ms
2025-08-25 03:10:04.754 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.1153ms
2025-08-25 03:10:06.601 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:10:06.609 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:10:07.598 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:10:07.609 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:10:07.898 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1297.3171ms
2025-08-25 03:10:09.060 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1461.349ms
2025-08-25 03:10:14.500 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:10:26.458 +03:00 [INF] Executing GetByIdAsync for entity Payment with ID: 2
2025-08-25 03:10:14.503 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:10:26.468 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:10:26.475 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:10:26.625 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Amount`, `p`.`CreatedAt`, `p`.`CustomerId`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`OrderId`, `p`.`PaymentDate`, `p`.`PaymentMethodId`, `p`.`PaymentProviderId`, `p`.`ProviderOrderId`, `p`.`Status`, `p`.`TransactionId`
FROM `Payments` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-08-25 03:10:26.634 +03:00 [INF] Execute GetAll for entity PaymentProvider
2025-08-25 03:10:26.787 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`PublicKey`
FROM `PaymentProviders` AS `p`
WHERE `p`.`Provider` = 1
LIMIT 1
2025-08-25 03:10:26.794 +03:00 [INF] Executing GetTokenAsync
2025-08-25 03:10:27.369 +03:00 [INF] Successfully retrieved PayMob token
2025-08-25 03:10:28.083 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 13579.2982ms
2025-08-25 03:10:28.083 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 13582.114ms
2025-08-25 03:10:47.582 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:10:47.590 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:10:50.155 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:10:50.161 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:10:50.782 +03:00 [WRN] Failed to process the job '46': an exception occurred. Retry attempt 1 of 10 will be performed in 00:00:24.
System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.
   at System.Text.Json.JsonElement.GetProperty(String propertyName)
   at E_Commerce.Services.PayMobServices.PayMobServices.GetPaymentStatusAsync(Int64 orderId)
   at E_Commerce.Services.PaymentServices.PaymentServices.CheckAndUpdatePaymentStatusAsync(Int32 paymentId)
   at InvokeStub_TaskAwaiter.GetResult(Object, Object, IntPtr*)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
2025-08-25 03:10:51.630 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 4047.6655ms
2025-08-25 03:10:51.954 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 4363.762ms
2025-08-25 03:10:54.607 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:10:54.607 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:10:54.617 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:10:54.622 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:10:55.947 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1339.619ms
2025-08-25 03:10:55.947 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1339.7071ms
2025-08-25 03:10:58.602 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:10:58.606 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:10:58.607 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:10:58.612 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:11:00.059 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1457.1678ms
2025-08-25 03:11:00.211 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1604.0488ms
2025-08-25 03:11:02.600 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:11:02.603 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:11:02.606 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:11:02.612 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:11:04.057 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1453.1268ms
2025-08-25 03:11:04.217 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1617.2622ms
2025-08-25 03:11:06.601 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:11:06.604 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:11:06.608 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:11:06.619 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:11:08.055 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1450.8679ms
2025-08-25 03:11:08.058 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1457.2274ms
2025-08-25 03:11:10.605 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:11:10.616 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:11:10.618 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:11:10.624 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:11:11.919 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1315.478ms
2025-08-25 03:11:11.919 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1302.907ms
2025-08-25 03:11:16.258 +03:00 [INF] Executing GetByIdAsync for entity Payment with ID: 2
2025-08-25 03:11:16.260 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:11:16.260 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:11:16.282 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:11:16.286 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:11:16.423 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Amount`, `p`.`CreatedAt`, `p`.`CustomerId`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`OrderId`, `p`.`PaymentDate`, `p`.`PaymentMethodId`, `p`.`PaymentProviderId`, `p`.`ProviderOrderId`, `p`.`Status`, `p`.`TransactionId`
FROM `Payments` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-08-25 03:11:16.432 +03:00 [INF] Execute GetAll for entity PaymentProvider
2025-08-25 03:11:16.585 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`PublicKey`
FROM `PaymentProviders` AS `p`
WHERE `p`.`Provider` = 1
LIMIT 1
2025-08-25 03:11:16.589 +03:00 [INF] Executing GetTokenAsync
2025-08-25 03:11:17.149 +03:00 [INF] Successfully retrieved PayMob token
2025-08-25 03:11:17.755 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1494.9966ms
2025-08-25 03:11:17.755 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1494.6356ms
2025-08-25 03:11:38.695 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:11:38.704 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:11:38.759 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:11:38.764 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:11:39.300 +03:00 [WRN] Failed to process the job '46': an exception occurred. Retry attempt 2 of 10 will be performed in 00:00:40.
System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.
   at System.Text.Json.JsonElement.GetProperty(String propertyName)
   at E_Commerce.Services.PayMobServices.PayMobServices.GetPaymentStatusAsync(Int64 orderId)
   at E_Commerce.Services.PaymentServices.PaymentServices.CheckAndUpdatePaymentStatusAsync(Int32 paymentId)
   at InvokeStub_TaskAwaiter.GetResult(Object, Object, IntPtr*)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
2025-08-25 03:11:39.763 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-08-25 03:11:40.217 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1522.257ms
2025-08-25 03:11:40.217 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1513.7044ms
2025-08-25 03:11:42.107 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2344.1875ms
2025-08-25 03:11:42.170 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 03:11:42.194 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.4997ms
2025-08-25 03:11:42.212 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 03:11:42.215 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 3.6494ms
2025-08-25 03:11:42.607 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:11:42.612 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:11:43.916 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1309.1298ms
2025-08-25 03:11:44.657 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:11:44.662 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:11:46.125 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1467.9331ms
2025-08-25 03:11:46.600 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:11:46.606 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:11:48.059 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1458.5355ms
2025-08-25 03:11:48.603 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:11:48.610 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:11:50.154 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1551.7295ms
2025-08-25 03:11:50.605 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:11:50.609 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:11:52.110 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1505.6768ms
2025-08-25 03:11:52.607 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:11:52.610 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:11:54.107 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1500.6666ms
2025-08-25 03:11:54.603 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:11:54.607 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:11:56.089 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1486.7409ms
2025-08-25 03:11:56.609 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:11:56.613 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:11:58.088 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1479.8828ms
2025-08-25 03:11:58.603 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:11:58.609 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:00.066 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1463.0991ms
2025-08-25 03:12:00.603 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:12:00.613 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:02.083 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1480.428ms
2025-08-25 03:12:02.618 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:12:02.640 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:04.121 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1503.1509ms
2025-08-25 03:12:04.605 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:12:04.613 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:06.093 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1487.4668ms
2025-08-25 03:12:06.603 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:12:06.608 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:08.068 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1464.1235ms
2025-08-25 03:12:08.602 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:12:08.607 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:10.074 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1471.628ms
2025-08-25 03:12:10.608 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:12:10.615 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:12.084 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:12:12.172 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1563.8097ms
2025-08-25 03:12:12.208 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:14.099 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2014.5959ms
2025-08-25 03:12:14.615 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:12:14.639 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:16.121 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:12:16.126 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:16.131 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1516.3198ms
2025-08-25 03:12:16.261 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/retries - null null
2025-08-25 03:12:17.599 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1478.2155ms
2025-08-25 03:12:18.270 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/retries - 200 null text/html 2009.0625ms
2025-08-25 03:12:18.301 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 03:12:18.314 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 03:12:18.380 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 78.5052ms
2025-08-25 03:12:18.437 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 123.8815ms
2025-08-25 03:12:18.624 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:12:18.627 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:20.098 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1473.95ms
2025-08-25 03:12:20.404 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:12:20.409 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:21.403 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - application/x-www-form-urlencoded; charset=UTF-8 13
2025-08-25 03:12:21.412 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:21.690 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1285.8887ms
2025-08-25 03:12:22.563 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - 204 null null 1159.8388ms
2025-08-25 03:12:22.585 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/retries - null null
2025-08-25 03:12:22.604 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:12:22.614 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:24.110 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/retries - 200 null text/html 1525.2612ms
2025-08-25 03:12:24.130 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1525.6733ms
2025-08-25 03:12:24.132 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 03:12:24.144 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 03:12:24.149 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 17.5448ms
2025-08-25 03:12:24.165 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 20.7664ms
2025-08-25 03:12:26.604 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:12:26.605 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:12:26.612 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:26.616 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:27.778 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1172.8773ms
2025-08-25 03:12:27.932 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1328.222ms
2025-08-25 03:12:30.599 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:12:30.600 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:12:30.608 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:30.613 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:35.357 +03:00 [INF] Executing GetByIdAsync for entity Payment with ID: 2
2025-08-25 03:12:35.358 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 4758.7553ms
2025-08-25 03:12:35.509 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 4910.4343ms
2025-08-25 03:12:35.525 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Amount`, `p`.`CreatedAt`, `p`.`CustomerId`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`OrderId`, `p`.`PaymentDate`, `p`.`PaymentMethodId`, `p`.`PaymentProviderId`, `p`.`ProviderOrderId`, `p`.`Status`, `p`.`TransactionId`
FROM `Payments` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-08-25 03:12:35.532 +03:00 [INF] Execute GetAll for entity PaymentProvider
2025-08-25 03:12:35.689 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`PublicKey`
FROM `PaymentProviders` AS `p`
WHERE `p`.`Provider` = 1
LIMIT 1
2025-08-25 03:12:35.696 +03:00 [INF] Executing GetTokenAsync
2025-08-25 03:12:36.394 +03:00 [INF] Successfully retrieved PayMob token
2025-08-25 03:12:37.036 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Payments` SET `Status` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-08-25 03:12:37.286 +03:00 [INF] Execute GetAll for entity Order
2025-08-25 03:12:37.417 +03:00 [INF] Executed DbCommand (104ms) [Parameters=[@__8__locals1_orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CancelledAt`, `t`.`CreatedAt`, `t`.`CustomerAddressId`, `t`.`CustomerId`, `t`.`DeletedAt`, `t`.`DeliveredAt`, `t`.`DiscountAmount`, `t`.`ModifiedAt`, `t`.`Notes`, `t`.`OrderNumber`, `t`.`RestockedAt`, `t`.`ShippedAt`, `t`.`ShippingCost`, `t`.`Status`, `t`.`Subtotal`, `t`.`TaxAmount`, `t`.`Total`, `o0`.`Id`, `o0`.`CreatedAt`, `o0`.`DeletedAt`, `o0`.`ModifiedAt`, `o0`.`OrderId`, `o0`.`OrderedAt`, `o0`.`ProductId`, `o0`.`ProductVariantId`, `o0`.`Quantity`, `o0`.`TotalPrice`, `o0`.`UnitPrice`
FROM (
    SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
    FROM `Orders` AS `o`
    WHERE `o`.`Id` = @__8__locals1_orderId_0
    LIMIT 1
) AS `t`
LEFT JOIN `OrderItem` AS `o0` ON `t`.`Id` = `o0`.`OrderId`
ORDER BY `t`.`Id`
2025-08-25 03:12:37.610 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:12:37.611 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:12:37.616 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:37.623 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:37.641 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Orders` SET `Status` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-08-25 03:12:38.760 +03:00 [INF] Updated order 7 to "Processing" after payment
2025-08-25 03:12:38.763 +03:00 [INF] Payment 2 updated to "Completed"
2025-08-25 03:12:38.914 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1304.1701ms
2025-08-25 03:12:39.065 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1454.3748ms
2025-08-25 03:12:41.606 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:12:41.609 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:12:41.614 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:41.619 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:41.766 +03:00 [INF] Removing cache by tag: order
2025-08-25 03:12:41.987 +03:00 [WRN] No cache entries found for tag: order
2025-08-25 03:12:41.991 +03:00 [INF] Successfully invalidated order cache
2025-08-25 03:12:42.782 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1175.9335ms
2025-08-25 03:12:42.934 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1324.8338ms
2025-08-25 03:12:45.603 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:12:45.605 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:12:45.611 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:45.619 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:46.907 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1301.5424ms
2025-08-25 03:12:47.211 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1607.6935ms
2025-08-25 03:12:49.614 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:12:49.615 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:12:49.622 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:49.629 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:50.926 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1310.3984ms
2025-08-25 03:12:51.236 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1621.7852ms
2025-08-25 03:12:53.606 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:12:53.607 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:12:53.618 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:53.614 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:54.901 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1294.3606ms
2025-08-25 03:12:55.207 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1600.7813ms
2025-08-25 03:12:57.606 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:12:57.607 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:12:57.614 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:57.620 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:12:58.933 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1326.4846ms
2025-08-25 03:12:59.241 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1634.5819ms
2025-08-25 03:13:01.601 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:13:01.602 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:13:01.613 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:01.619 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:02.909 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1306.4954ms
2025-08-25 03:13:03.226 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1624.7602ms
2025-08-25 03:13:05.607 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:13:05.607 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:13:05.615 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:05.620 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:06.947 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1339.9917ms
2025-08-25 03:13:07.250 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1643.5669ms
2025-08-25 03:13:09.606 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:13:09.611 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:09.613 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:13:09.621 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:11.059 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1446.4814ms
2025-08-25 03:13:11.060 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1453.7633ms
2025-08-25 03:13:13.565 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:13:13.581 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:13.609 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:13:13.615 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:14.911 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1346.0313ms
2025-08-25 03:13:15.222 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1612.863ms
2025-08-25 03:13:17.613 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:13:17.614 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:13:17.618 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:17.627 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:19.088 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1474.9824ms
2025-08-25 03:13:19.089 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1475.4327ms
2025-08-25 03:13:21.596 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:13:21.596 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:13:21.604 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:21.613 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:22.951 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1355.0775ms
2025-08-25 03:13:23.313 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1717.3842ms
2025-08-25 03:13:25.597 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:13:25.600 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:13:25.603 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:25.608 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:27.067 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1467.1649ms
2025-08-25 03:13:27.067 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1469.4595ms
2025-08-25 03:13:29.608 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:13:29.608 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:13:29.612 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:29.617 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:31.091 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1482.6845ms
2025-08-25 03:13:31.093 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1484.3321ms
2025-08-25 03:13:33.641 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:13:33.645 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:33.651 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:13:33.661 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:34.726 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order/number/ORD-20250825000744-7284 - null null
2025-08-25 03:13:34.735 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 03:13:34.944 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 03:13:34.950 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.GetOrderByNumber (E-Commerce)'
2025-08-25 03:13:34.960 +03:00 [INF] Route matched with {action = "GetOrderByNumber", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderDto]]] GetOrderByNumber(System.String) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-08-25 03:13:34.969 +03:00 [INF] Executing GetOrderByNumber for number: ORD-20250825000744-7284
2025-08-25 03:13:34.976 +03:00 [INF] Getting order by number: ORD-20250825000744-7284 for user: ac03a6c3-9450-420a-9e6e-ea8902c018c5, IsAdmin: false
2025-08-25 03:13:34.979 +03:00 [INF] Getting cache for key: order_orderNumber_ORD-20250825000744-7284_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin_False
2025-08-25 03:13:35.159 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1508.1278ms
2025-08-25 03:13:35.159 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1517.8556ms
2025-08-25 03:13:35.195 +03:00 [WRN] Cache miss for key: order_orderNumber_ORD-20250825000744-7284_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin_False
2025-08-25 03:13:35.200 +03:00 [INF] Checking if order ORD-20250825000744-7284 exists for user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 03:13:35.379 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__ordernumber_0='?' (Size = 50), @__userid_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Orders` AS `o`
    WHERE ((`o`.`OrderNumber` = @__ordernumber_0) AND (`o`.`CustomerId` = @__userid_1)) AND `o`.`DeletedAt` IS NULL)
2025-08-25 03:13:35.386 +03:00 [INF] Execute GetAll for entity Order
2025-08-25 03:13:35.609 +03:00 [INF] Executed DbCommand (94ms) [Parameters=[@__8__locals1_orderNumber_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`ModifiedAt`, `t0`.`OrderNumber`, `t0`.`Status`, `t0`.`Subtotal`, `t0`.`TaxAmount`, `t0`.`ShippingCost`, `t0`.`DiscountAmount`, `t0`.`Total`, `t0`.`Notes`, `t0`.`DeletedAt`, `t0`.`ShippedAt`, `t0`.`DeliveredAt`, `t0`.`CancelledAt`, `t0`.`c`, `t0`.`Id0`, `t0`.`Name`, `t0`.`Email`, `t0`.`PhoneNumber`, `t1`.`Id`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`Quantity`, `t1`.`UnitPrice`, `t1`.`TotalPrice`, `t1`.`OrderedAt`, `t1`.`Id0`, `t1`.`Name`, `t1`.`Price`, `t1`.`IsActive`, `t1`.`FinalPrice`, `t1`.`DiscountPrecentage`, `t1`.`MainImageUrl`, `t1`.`Id1`, `t1`.`Color`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`Size`, `t1`.`DeletedAt`, `t1`.`Length`, `t1`.`Waist`, `t1`.`Id2`, `t1`.`Id3`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`ModifiedAt`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`ShippingCost`, `o`.`DiscountAmount`, `o`.`Total`, `o`.`Notes`, `o`.`DeletedAt`, `o`.`ShippedAt`, `o`.`DeliveredAt`, `o`.`CancelledAt`, FALSE AS `c`, `t`.`Id` AS `Id0`, `t`.`Name`, `t`.`Email`, `t`.`PhoneNumber`
    FROM `Orders` AS `o`
    INNER JOIN (
        SELECT `a`.`Id`, `a`.`Email`, `a`.`PhoneNumber`, `a`.`Name`
        FROM `AspNetUsers` AS `a`
        WHERE `a`.`Discriminator` = 'Customer'
    ) AS `t` ON `o`.`CustomerId` = `t`.`Id`
    WHERE `o`.`OrderNumber` = @__8__locals1_orderNumber_0
    LIMIT 1
) AS `t0`
LEFT JOIN (
    SELECT `o0`.`Id`, `o0`.`CreatedAt`, `o0`.`ModifiedAt`, `o0`.`Quantity`, `o0`.`UnitPrice`, `o0`.`TotalPrice`, `o0`.`OrderedAt`, `p`.`Id` AS `Id0`, `p`.`Name`, `p`.`Price`, `p`.`IsActive`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `FinalPrice`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `DiscountPrecentage`, COALESCE((
        SELECT `i`.`Url`
        FROM `Images` AS `i`
        WHERE (`p`.`Id` = `i`.`ProductId`) AND `i`.`DeletedAt` IS NULL
        LIMIT 1), '') AS `MainImageUrl`, `o0`.`ProductVariantId` AS `Id1`, `p0`.`Color`, COALESCE(`p0`.`CreatedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `CreatedAt0`, COALESCE(`p0`.`ModifiedAt`, TIMESTAMP '0001-01-01 00:00:00') AS `ModifiedAt0`, `p0`.`Size`, `p0`.`DeletedAt`, COALESCE(`p0`.`Length`, 0) AS `Length`, COALESCE(`p0`.`Waist`, 0) AS `Waist`, `d`.`Id` AS `Id2`, `p0`.`Id` AS `Id3`, `o0`.`OrderId`
    FROM `OrderItem` AS `o0`
    INNER JOIN `Products` AS `p` ON `o0`.`ProductId` = `p`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    INNER JOIN `ProductVariants` AS `p0` ON `o0`.`ProductVariantId` = `p0`.`Id`
) AS `t1` ON `t0`.`Id` = `t1`.`OrderId`
ORDER BY `t0`.`Id`, `t0`.`Id0`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id2`
2025-08-25 03:13:36.563 +03:00 [INF] Order ORD-20250825000744-7284 retrieved successfully for user ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-25 03:13:36.567 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.OrderDtos.OrderDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 03:13:36.575 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.GetOrderByNumber (E-Commerce) in 1611.951ms
2025-08-25 03:13:36.580 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.GetOrderByNumber (E-Commerce)'
2025-08-25 03:13:36.584 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order/number/ORD-20250825000744-7284 - 200 1403 application/json; charset=utf-8 1857.653ms
2025-08-25 03:13:37.609 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:13:37.610 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:13:37.617 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:37.623 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:38.787 +03:00 [INF] Setting cache for key: order_orderNumber_ORD-20250825000744-7284_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin_False
2025-08-25 03:13:38.908 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1298.3775ms
2025-08-25 03:13:39.031 +03:00 [INF] Cache set successfully for key: order_orderNumber_ORD-20250825000744-7284_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin_False with tags: [order]
2025-08-25 03:13:39.036 +03:00 [INF] Successfully cached order with key: order_orderNumber_ORD-20250825000744-7284_user_ac03a6c3-9450-420a-9e6e-ea8902c018c5_admin_False
2025-08-25 03:13:39.055 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1445.3349ms
2025-08-25 03:13:41.610 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:13:41.611 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:13:41.626 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:41.637 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:42.789 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1178.8931ms
2025-08-25 03:13:42.944 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1332.8684ms
2025-08-25 03:13:45.608 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:13:45.609 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:13:45.624 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:45.630 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:46.919 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1310.1159ms
2025-08-25 03:13:47.236 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1627.7679ms
2025-08-25 03:13:49.608 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:13:49.608 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:13:49.615 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:49.622 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:51.067 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1458.6897ms
2025-08-25 03:13:51.067 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1459.3575ms
2025-08-25 03:13:53.598 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:13:53.602 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:13:53.603 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:53.612 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:54.924 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1325.6663ms
2025-08-25 03:13:55.229 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1627.1763ms
2025-08-25 03:13:55.942 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - null null
2025-08-25 03:13:55.951 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 03:13:56.109 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 03:13:56.116 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.ListOrders (E-Commerce)'
2025-08-25 03:13:56.127 +03:00 [INF] Route matched with {action = "ListOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.OrderDtos.OrderListDto]]]] ListOrders(System.String, System.Nullable`1[System.Boolean], Int32, Int32, System.Nullable`1[E_Commerce.Enums.OrderStatus]) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-08-25 03:13:56.147 +03:00 [INF] Executing ListOrders: role: Admin, userId: , deleted: , page: 1, size: 10, status: 
2025-08-25 03:13:56.153 +03:00 [INF] Filtering orders - UserId: null, Deleted: null, Page: 1, PageSize: 10, Status: null
2025-08-25 03:13:56.162 +03:00 [INF] Getting cache for key: order_filter_user_all_deleted_all_page_1_size_10_status_all
2025-08-25 03:13:56.377 +03:00 [WRN] Cache miss for key: order_filter_user_all_deleted_all_page_1_size_10_status_all
2025-08-25 03:13:56.381 +03:00 [INF] Execute GetAll for entity Order
2025-08-25 03:13:56.560 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`OrderNumber`, `t0`.`Name`, `t`.`Status`, `t`.`Total`, `t`.`CreatedAt`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`CustomerId`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Total`
    FROM `Orders` AS `o`
    ORDER BY `o`.`CreatedAt` DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
INNER JOIN (
    SELECT `a`.`Id`, `a`.`Name`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Discriminator` = 'Customer'
) AS `t0` ON `t`.`CustomerId` = `t0`.`Id`
ORDER BY `t`.`CreatedAt` DESC
2025-08-25 03:13:57.534 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.OrderDtos.OrderListDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 03:13:57.542 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.ListOrders (E-Commerce) in 1409.9044ms
2025-08-25 03:13:57.555 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.ListOrders (E-Commerce)'
2025-08-25 03:13:57.560 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - 200 1247 application/json; charset=utf-8 1618.4447ms
2025-08-25 03:13:57.631 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:13:57.635 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:57.637 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:13:57.646 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:13:59.009 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1371.6828ms
2025-08-25 03:13:59.178 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1546.9949ms
2025-08-25 03:14:01.595 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:14:01.602 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:01.610 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:14:01.618 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:02.642 +03:00 [INF] Setting cache for key: order_filter_user_all_deleted_all_page_1_size_10_status_all
2025-08-25 03:14:02.756 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1146.0478ms
2025-08-25 03:14:02.868 +03:00 [INF] Cache set successfully for key: order_filter_user_all_deleted_all_page_1_size_10_status_all with tags: [order]
2025-08-25 03:14:02.872 +03:00 [INF] Successfully cached order list with key: order_filter_user_all_deleted_all_page_1_size_10_status_all
2025-08-25 03:14:02.923 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1328.1672ms
2025-08-25 03:14:05.597 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:14:05.609 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:05.615 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:14:05.622 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:07.078 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1462.5699ms
2025-08-25 03:14:07.085 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1488.4907ms
2025-08-25 03:14:09.598 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:14:09.600 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:14:09.605 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:09.616 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:10.926 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1327.5162ms
2025-08-25 03:14:11.234 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1634.824ms
2025-08-25 03:14:13.373 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:14:13.390 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:13.618 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:14:13.636 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:14.695 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1321.8796ms
2025-08-25 03:14:15.047 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - null null
2025-08-25 03:14:15.069 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1451.459ms
2025-08-25 03:14:16.698 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - 200 null text/html 1651.1746ms
2025-08-25 03:14:16.704 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 167
2025-08-25 03:14:16.735 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 03:14:16.735 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 03:14:16.785 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:16.789 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 53.886ms
2025-08-25 03:14:16.805 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 69.8891ms
2025-08-25 03:14:16.833 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 499 null null 128.6129ms
2025-08-25 03:14:17.611 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:14:17.625 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:18.733 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-08-25 03:14:18.808 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:14:18.816 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:19.076 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1465.5898ms
2025-08-25 03:14:20.269 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1460.9148ms
2025-08-25 03:14:21.127 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2394.0996ms
2025-08-25 03:14:21.147 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 03:14:21.172 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 03:14:21.215 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 67.9577ms
2025-08-25 03:14:21.260 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 87.5765ms
2025-08-25 03:14:21.620 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:14:21.628 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:23.109 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1488.7572ms
2025-08-25 03:14:23.239 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:14:23.249 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:24.704 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1465.0274ms
2025-08-25 03:14:25.607 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:14:25.618 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:25.705 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - application/x-www-form-urlencoded; charset=UTF-8 55
2025-08-25 03:14:25.714 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:26.714 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:14:26.724 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:27.074 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1466.6313ms
2025-08-25 03:14:28.052 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1337.519ms
2025-08-25 03:14:28.397 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 7
2025-08-25 03:14:28.482 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-08-25 03:14:28.488 +03:00 [INF] Expire skipped: order 7 status is "Processing"
2025-08-25 03:14:29.609 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:14:29.617 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:30.059 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:14:30.066 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:30.276 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - 204 null null 4571.1883ms
2025-08-25 03:14:30.296 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-08-25 03:14:30.904 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1294.2914ms
2025-08-25 03:14:31.359 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1300.6622ms
2025-08-25 03:14:31.767 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 6
2025-08-25 03:14:31.849 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-08-25 03:14:32.006 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Orders` SET `Status` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-08-25 03:14:32.668 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2371.4667ms
2025-08-25 03:14:32.696 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 03:14:32.698 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 03:14:32.734 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 37.7541ms
2025-08-25 03:14:32.766 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 68.7451ms
2025-08-25 03:14:33.608 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:14:33.616 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:34.756 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:14:34.766 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:34.886 +03:00 [INF] Order 6 auto-expired and restock scheduled
2025-08-25 03:14:34.896 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1287.2858ms
2025-08-25 03:14:35.694 +03:00 [INF] Removing cache by tag: order
2025-08-25 03:14:35.896 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 5
2025-08-25 03:14:35.912 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 4
2025-08-25 03:14:35.928 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 6
2025-08-25 03:14:35.976 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-08-25 03:14:35.991 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-08-25 03:14:36.007 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-08-25 03:14:36.012 +03:00 [INF] Execute GetAll for entity OrderItem
2025-08-25 03:14:36.062 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1306.3655ms
2025-08-25 03:14:36.094 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__8__locals1_orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`ProductVariantId`, `o`.`Quantity`
FROM `OrderItem` AS `o`
WHERE `o`.`OrderId` = @__8__locals1_orderId_0
2025-08-25 03:14:36.101 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-08-25 03:14:36.132 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Orders` SET `Status` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-08-25 03:14:36.147 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Orders` SET `Status` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-08-25 03:14:36.180 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = 1
2025-08-25 03:14:36.247 +03:00 [INF] Removing cache by tags: [productwithvariantdata, product_search, variantdata]
2025-08-25 03:14:36.550 +03:00 [INF] Removed 2 cache entries for tag: order
2025-08-25 03:14:36.553 +03:00 [INF] Successfully invalidated order cache
2025-08-25 03:14:36.885 +03:00 [WRN] No cache entries found for tags: [productwithvariantdata, product_search, variantdata]
2025-08-25 03:14:37.105 +03:00 [INF] Execute Update for entity ProductVariant
2025-08-25 03:14:37.109 +03:00 [INF] ProductVariant marked for update (pending save)
2025-08-25 03:14:37.268 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p12='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Orders` SET `RestockedAt` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

UPDATE `ProductVariants` SET `Color` = @p2, `CreatedAt` = @p3, `DeletedAt` = @p4, `IsActive` = @p5, `Length` = @p6, `ModifiedAt` = @p7, `ProductId` = @p8, `Quantity` = @p9, `Size` = @p10, `Waist` = @p11
WHERE `Id` = @p12;
SELECT ROW_COUNT();
2025-08-25 03:14:37.610 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:14:37.620 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:38.073 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:14:38.083 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:38.345 +03:00 [INF] Restocked inventory for order 6
2025-08-25 03:14:39.028 +03:00 [INF] Order 4 auto-expired and restock scheduled
2025-08-25 03:14:39.028 +03:00 [INF] Order 5 auto-expired and restock scheduled
2025-08-25 03:14:39.062 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1452.0939ms
2025-08-25 03:14:39.401 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1327.8508ms
2025-08-25 03:14:42.333 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:14:42.333 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:14:43.195 +03:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-08-25 03:14:43.202 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:43.210 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:43.220 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'E_Commerce.Context.AppDbContext'.
System.InvalidOperationException: Connection must be Open; current state is Closed
   at MySqlConnector.MySqlConnection.get_Session() in /_/src/MySqlConnector/MySqlConnection.cs:line 733
   at MySqlConnector.Core.ICancellableCommandExtensions.ResetCommandTimeout(ICancellableCommand command) in /_/src/MySqlConnector/Core/ICancellableCommand.cs:line 42
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 355
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: Connection must be Open; current state is Closed
   at MySqlConnector.MySqlConnection.get_Session() in /_/src/MySqlConnector/MySqlConnection.cs:line 733
   at MySqlConnector.Core.ICancellableCommandExtensions.ResetCommandTimeout(ICancellableCommand command) in /_/src/MySqlConnector/Core/ICancellableCommand.cs:line 42
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 355
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-08-25 03:14:43.783 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 5
2025-08-25 03:14:43.877 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-08-25 03:14:43.884 +03:00 [INF] Execute GetAll for entity OrderItem
2025-08-25 03:14:43.969 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__8__locals1_orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`ProductVariantId`, `o`.`Quantity`
FROM `OrderItem` AS `o`
WHERE `o`.`OrderId` = @__8__locals1_orderId_0
2025-08-25 03:14:43.979 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-08-25 03:14:44.068 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = 1
2025-08-25 03:14:44.903 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2570.6929ms
2025-08-25 03:14:44.905 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 2572.531ms
2025-08-25 03:14:45.000 +03:00 [INF] Execute Update for entity ProductVariant
2025-08-25 03:14:45.014 +03:00 [INF] ProductVariant marked for update (pending save)
2025-08-25 03:14:45.172 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p12='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Orders` SET `RestockedAt` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

UPDATE `ProductVariants` SET `Color` = @p2, `CreatedAt` = @p3, `DeletedAt` = @p4, `IsActive` = @p5, `Length` = @p6, `ModifiedAt` = @p7, `ProductId` = @p8, `Quantity` = @p9, `Size` = @p10, `Waist` = @p11
WHERE `Id` = @p12;
SELECT ROW_COUNT();
2025-08-25 03:14:45.303 +03:00 [INF] Executing GetByIdAsync for entity Order with ID: 4
2025-08-25 03:14:45.383 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`Id`, `o`.`CancelledAt`, `o`.`CreatedAt`, `o`.`CustomerAddressId`, `o`.`CustomerId`, `o`.`DeletedAt`, `o`.`DeliveredAt`, `o`.`DiscountAmount`, `o`.`ModifiedAt`, `o`.`Notes`, `o`.`OrderNumber`, `o`.`RestockedAt`, `o`.`ShippedAt`, `o`.`ShippingCost`, `o`.`Status`, `o`.`Subtotal`, `o`.`TaxAmount`, `o`.`Total`
FROM `Orders` AS `o`
WHERE `o`.`Id` = @__id_0
LIMIT 1
2025-08-25 03:14:45.388 +03:00 [INF] Execute GetAll for entity OrderItem
2025-08-25 03:14:45.467 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__8__locals1_orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `o`.`ProductVariantId`, `o`.`Quantity`
FROM `OrderItem` AS `o`
WHERE `o`.`OrderId` = @__8__locals1_orderId_0
2025-08-25 03:14:45.472 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-08-25 03:14:45.551 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = 1
2025-08-25 03:14:45.702 +03:00 [INF] Removing cache by tag: order
2025-08-25 03:14:45.763 +03:00 [INF] Removing cache by tag: order
2025-08-25 03:14:45.919 +03:00 [WRN] No cache entries found for tag: order
2025-08-25 03:14:45.922 +03:00 [INF] Successfully invalidated order cache
2025-08-25 03:14:45.977 +03:00 [WRN] No cache entries found for tag: order
2025-08-25 03:14:45.982 +03:00 [INF] Successfully invalidated order cache
2025-08-25 03:14:46.037 +03:00 [INF] Removing cache by tags: [productwithvariantdata, product_search, variantdata]
2025-08-25 03:14:46.064 +03:00 [INF] Removing cache by tags: [productwithvariantdata, product_search, variantdata]
2025-08-25 03:14:46.068 +03:00 [INF] Removing cache by tags: [productwithvariantdata, product_search, variantdata]
2025-08-25 03:14:46.233 +03:00 [INF] Restocked inventory for order 5
2025-08-25 03:14:49.529 +03:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-08-25 03:14:49.529 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:14:49.530 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:14:49.542 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'E_Commerce.Context.AppDbContext'.
System.InvalidOperationException: Connection must be Open; current state is Closed
   at MySqlConnector.MySqlConnection.get_Session() in /_/src/MySqlConnector/MySqlConnection.cs:line 733
   at MySqlConnector.Core.ICancellableCommandExtensions.ResetCommandTimeout(ICancellableCommand command) in /_/src/MySqlConnector/Core/ICancellableCommand.cs:line 42
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 355
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: Connection must be Open; current state is Closed
   at MySqlConnector.MySqlConnection.get_Session() in /_/src/MySqlConnector/MySqlConnection.cs:line 733
   at MySqlConnector.Core.ICancellableCommandExtensions.ResetCommandTimeout(ICancellableCommand command) in /_/src/MySqlConnector/Core/ICancellableCommand.cs:line 42
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 355
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-08-25 03:14:49.546 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:49.550 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:49.763 +03:00 [WRN] No cache entries found for tags: [productwithvariantdata, product_search, variantdata]
2025-08-25 03:14:49.661 +03:00 [INF] Execute Update for entity ProductVariant
2025-08-25 03:14:49.765 +03:00 [WRN] No cache entries found for tags: [productwithvariantdata, product_search, variantdata]
2025-08-25 03:14:49.766 +03:00 [INF] ProductVariant marked for update (pending save)
2025-08-25 03:14:49.768 +03:00 [WRN] No cache entries found for tags: [productwithvariantdata, product_search, variantdata]
2025-08-25 03:14:49.922 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p12='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Orders` SET `RestockedAt` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

UPDATE `ProductVariants` SET `Color` = @p2, `CreatedAt` = @p3, `DeletedAt` = @p4, `IsActive` = @p5, `Length` = @p6, `ModifiedAt` = @p7, `ProductId` = @p8, `Quantity` = @p9, `Size` = @p10, `Waist` = @p11
WHERE `Id` = @p12;
SELECT ROW_COUNT();
2025-08-25 03:14:51.020 +03:00 [INF] Restocked inventory for order 4
2025-08-25 03:14:51.102 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1572.1098ms
2025-08-25 03:14:51.110 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1580.7508ms
2025-08-25 03:14:51.205 +03:00 [INF] Removing cache by tags: [productwithvariantdata, product_search, variantdata]
2025-08-25 03:14:51.843 +03:00 [WRN] No cache entries found for tags: [productwithvariantdata, product_search, variantdata]
2025-08-25 03:14:52.210 +03:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`Gender`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-08-25 03:14:52.232 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'E_Commerce.Context.AppDbContext'.
System.InvalidOperationException: Connection must be Open; current state is Closed
   at MySqlConnector.MySqlConnection.get_Session() in /_/src/MySqlConnector/MySqlConnection.cs:line 733
   at MySqlConnector.Core.ICancellableCommandExtensions.ResetCommandTimeout(ICancellableCommand command) in /_/src/MySqlConnector/Core/ICancellableCommand.cs:line 42
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 355
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: Connection must be Open; current state is Closed
   at MySqlConnector.MySqlConnection.get_Session() in /_/src/MySqlConnector/MySqlConnection.cs:line 733
   at MySqlConnector.Core.ICancellableCommandExtensions.ResetCommandTimeout(ICancellableCommand command) in /_/src/MySqlConnector/Core/ICancellableCommand.cs:line 42
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 355
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-08-25 03:14:52.507 +03:00 [INF] Removing cache by tags: [productwithvariantdata, product_search, variantdata]
2025-08-25 03:14:53.152 +03:00 [WRN] No cache entries found for tags: [productwithvariantdata, product_search, variantdata]
2025-08-25 03:14:53.598 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:14:53.599 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:14:53.603 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:53.607 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:54.901 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1302.5572ms
2025-08-25 03:14:54.910 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1311.6125ms
2025-08-25 03:14:57.595 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:14:57.596 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:14:57.600 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:57.604 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:14:59.050 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1453.4442ms
2025-08-25 03:14:59.206 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1610.6669ms
2025-08-25 03:15:01.596 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:01.598 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:01.604 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:01.608 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:03.049 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1452.6442ms
2025-08-25 03:15:03.204 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1605.9547ms
2025-08-25 03:15:05.610 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:05.610 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:05.616 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:05.621 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:07.060 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1449.1478ms
2025-08-25 03:15:07.210 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1599.9692ms
2025-08-25 03:15:09.610 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:09.614 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:09.630 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:09.642 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:11.046 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1436.373ms
2025-08-25 03:15:11.196 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1565.3317ms
2025-08-25 03:15:13.598 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:13.603 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:13.605 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:13.616 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:15.049 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1451.1312ms
2025-08-25 03:15:15.203 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1598.4286ms
2025-08-25 03:15:17.598 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:17.598 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:17.607 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:17.617 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:19.083 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1485.7312ms
2025-08-25 03:15:19.236 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1637.9339ms
2025-08-25 03:15:21.613 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:21.617 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:21.623 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:21.630 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:23.097 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1479.9944ms
2025-08-25 03:15:23.518 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1904.8319ms
2025-08-25 03:15:25.538 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:25.576 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:25.605 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:25.609 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:27.038 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1499.8545ms
2025-08-25 03:15:27.189 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1584.4999ms
2025-08-25 03:15:29.616 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:29.623 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:29.623 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:29.633 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:31.125 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1508.3521ms
2025-08-25 03:15:31.280 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1657.5493ms
2025-08-25 03:15:32.119 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - null null
2025-08-25 03:15:32.126 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 03:15:32.319 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 03:15:32.323 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.OrderController.ListOrders (E-Commerce)'
2025-08-25 03:15:32.326 +03:00 [INF] Route matched with {action = "ListOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.OrderDtos.OrderListDto]]]] ListOrders(System.String, System.Nullable`1[System.Boolean], Int32, Int32, System.Nullable`1[E_Commerce.Enums.OrderStatus]) on controller E_Commerce.Controllers.OrderController (E-Commerce).
2025-08-25 03:15:32.337 +03:00 [INF] Executing ListOrders: role: Admin, userId: , deleted: , page: 1, size: 10, status: 
2025-08-25 03:15:32.338 +03:00 [INF] Filtering orders - UserId: null, Deleted: null, Page: 1, PageSize: 10, Status: null
2025-08-25 03:15:32.342 +03:00 [INF] Getting cache for key: order_filter_user_all_deleted_all_page_1_size_10_status_all
2025-08-25 03:15:32.559 +03:00 [WRN] Cache miss for key: order_filter_user_all_deleted_all_page_1_size_10_status_all
2025-08-25 03:15:32.565 +03:00 [INF] Execute GetAll for entity Order
2025-08-25 03:15:32.726 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`OrderNumber`, `t0`.`Name`, `t`.`Status`, `t`.`Total`, `t`.`CreatedAt`
FROM (
    SELECT `o`.`Id`, `o`.`CreatedAt`, `o`.`CustomerId`, `o`.`OrderNumber`, `o`.`Status`, `o`.`Total`
    FROM `Orders` AS `o`
    ORDER BY `o`.`CreatedAt` DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
INNER JOIN (
    SELECT `a`.`Id`, `a`.`Name`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Discriminator` = 'Customer'
) AS `t0` ON `t`.`CustomerId` = `t0`.`Id`
ORDER BY `t`.`CreatedAt` DESC
2025-08-25 03:15:33.600 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:33.600 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:33.605 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:33.610 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:33.669 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.OrderDtos.OrderListDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 03:15:33.672 +03:00 [INF] Executed action E_Commerce.Controllers.OrderController.ListOrders (E-Commerce) in 1337.767ms
2025-08-25 03:15:33.686 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.OrderController.ListOrders (E-Commerce)'
2025-08-25 03:15:33.696 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Order?page=1&pageSize=10 - 200 1247 application/json; charset=utf-8 1576.5495ms
2025-08-25 03:15:35.070 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1470.3479ms
2025-08-25 03:15:35.071 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1470.7901ms
2025-08-25 03:15:35.380 +03:00 [INF] Setting cache for key: order_filter_user_all_deleted_all_page_1_size_10_status_all
2025-08-25 03:15:35.602 +03:00 [INF] Cache set successfully for key: order_filter_user_all_deleted_all_page_1_size_10_status_all with tags: [order]
2025-08-25 03:15:35.605 +03:00 [INF] Successfully cached order list with key: order_filter_user_all_deleted_all_page_1_size_10_status_all
2025-08-25 03:15:37.603 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:37.603 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:37.615 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:37.622 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:38.913 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1309.9717ms
2025-08-25 03:15:38.927 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1324.4582ms
2025-08-25 03:15:41.598 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:41.599 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:41.607 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:41.613 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:43.055 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1456.8297ms
2025-08-25 03:15:43.210 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1611.7395ms
2025-08-25 03:15:45.597 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:45.598 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:45.604 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:45.610 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:47.042 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1445.139ms
2025-08-25 03:15:47.192 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1594.1859ms
2025-08-25 03:15:49.597 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:49.597 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:49.606 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:49.612 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:51.077 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1480.6776ms
2025-08-25 03:15:51.232 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1634.4723ms
2025-08-25 03:15:53.597 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:53.600 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:53.602 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:53.609 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:55.069 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1471.3963ms
2025-08-25 03:15:55.218 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1618.1385ms
2025-08-25 03:15:57.600 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:57.601 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:15:57.606 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:57.610 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:15:59.067 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1466.8516ms
2025-08-25 03:15:59.218 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1616.8234ms
2025-08-25 03:16:01.603 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:01.606 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:01.609 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:01.615 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:03.094 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1490.3618ms
2025-08-25 03:16:03.247 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1640.7452ms
2025-08-25 03:16:05.599 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:05.599 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:05.605 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:05.610 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:07.046 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1446.3098ms
2025-08-25 03:16:07.195 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1596.1318ms
2025-08-25 03:16:09.605 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:09.606 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:09.611 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:09.619 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:11.050 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1444.0979ms
2025-08-25 03:16:11.211 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1606.6096ms
2025-08-25 03:16:13.611 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:13.611 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:13.620 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:13.625 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:15.104 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1493.1575ms
2025-08-25 03:16:15.258 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1646.8398ms
2025-08-25 03:16:17.609 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:17.630 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:17.630 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:17.642 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:19.057 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1448.3456ms
2025-08-25 03:16:19.203 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1573.296ms
2025-08-25 03:16:21.649 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:21.650 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:21.658 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:21.662 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:23.100 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1453.9ms
2025-08-25 03:16:23.255 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1604.4089ms
2025-08-25 03:16:25.628 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:25.628 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:25.638 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:25.645 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:27.099 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1470.6507ms
2025-08-25 03:16:27.250 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1621.3249ms
2025-08-25 03:16:29.662 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:29.668 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:29.673 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:29.678 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:31.158 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1489.9404ms
2025-08-25 03:16:31.307 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1644.9605ms
2025-08-25 03:16:33.643 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:33.650 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:33.652 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:33.658 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:35.137 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1485.5723ms
2025-08-25 03:16:35.294 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1651.0232ms
2025-08-25 03:16:37.600 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:37.601 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:37.609 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:37.616 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:39.097 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1496.6027ms
2025-08-25 03:16:39.250 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1650.0735ms
2025-08-25 03:16:40.236 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/1 - null null
2025-08-25 03:16:40.242 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 03:16:40.405 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 03:16:40.412 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-08-25 03:16:40.438 +03:00 [INF] Route matched with {action = "GetProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDetailDto]]] GetProduct(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-08-25 03:16:40.455 +03:00 [INF] Executing GetProduct for ID: 1
2025-08-25 03:16:40.471 +03:00 [INF] Retrieving product by id: 1, isActive: , deletedOnly: 
2025-08-25 03:16:40.473 +03:00 [INF] Getting cache for key: product_detail:1:isActive=:deletedOnly=
2025-08-25 03:16:40.691 +03:00 [WRN] Cache miss for key: product_detail:1:isActive=:deletedOnly=
2025-08-25 03:16:40.694 +03:00 [INF] Execute GetAll for entity Product
2025-08-25 03:16:40.739 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-25 03:16:40.919 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__8__locals1_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`IsActive`, `t`.`Price`, `t`.`c`, `t`.`fitType`, `t`.`SubCategoryId`, `t`.`c0`, `t`.`Id0`, `t`.`DiscountPercent`, `t`.`IsActive0`, `t`.`StartDate`, `t`.`EndDate`, `t`.`Name0`, `t`.`Description0`, `t0`.`Id`, `t0`.`Url`, `t1`.`Id`, `t1`.`IsActive`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`Color`, `t1`.`Size`, `t1`.`Waist`, `t1`.`Length`, `t1`.`Quantity`, `t1`.`ProductId`
FROM (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`IsActive`, `p`.`Price`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `c`, `p`.`fitType`, `p`.`SubCategoryId`, ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) AS `c0`, `d`.`Id` AS `Id0`, `d`.`DiscountPercent`, `d`.`IsActive` AS `IsActive0`, `d`.`StartDate`, `d`.`EndDate`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE `p`.`Id` = @__8__locals1_id_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
LEFT JOIN (
    SELECT `p0`.`Id`, `p0`.`IsActive`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`Color`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity`, `p0`.`ProductId`
    FROM `ProductVariants` AS `p0`
    WHERE (`p0`.`DeletedAt` IS NULL AND `p0`.`IsActive`) AND (`p0`.`Quantity` <> 0)
) AS `t1` ON `t`.`Id` = `t1`.`ProductId`
ORDER BY `t`.`Id`, `t`.`Id0`, `t0`.`Id`
2025-08-25 03:16:40.928 +03:00 [INF] Product found: zV4Ok4bWzFGA6KsVb3uZ (ID: 1)
2025-08-25 03:16:41.611 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:41.613 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:41.619 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:41.624 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:41.914 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDetailDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 03:16:41.938 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProduct (E-Commerce) in 1493.3541ms
2025-08-25 03:16:41.941 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-08-25 03:16:41.944 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/1 - 200 754 application/json; charset=utf-8 1707.5784ms
2025-08-25 03:16:43.119 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1507.4338ms
2025-08-25 03:16:43.119 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1506.5025ms
2025-08-25 03:16:45.600 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:45.600 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:45.607 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:45.611 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:46.137 +03:00 [INF] Setting cache for key: product_detail:1:isActive=:deletedOnly=
2025-08-25 03:16:46.376 +03:00 [INF] Cache set successfully for key: product_detail:1:isActive=:deletedOnly= with tags: [productwithvariantdata]
2025-08-25 03:16:46.894 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1293.246ms
2025-08-25 03:16:46.903 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1303.1844ms
2025-08-25 03:16:49.611 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:49.612 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:49.623 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:49.630 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:51.109 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1496.2713ms
2025-08-25 03:16:51.264 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1652.0046ms
2025-08-25 03:16:53.602 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:53.602 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:53.610 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:53.614 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:55.088 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1486.1558ms
2025-08-25 03:16:55.241 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1639.0581ms
2025-08-25 03:16:57.603 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:57.603 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:16:57.610 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:57.615 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:16:59.075 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1472.6849ms
2025-08-25 03:16:59.224 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1620.0566ms
2025-08-25 03:17:01.606 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:17:01.613 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:17:01.628 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:17:01.643 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:17:03.059 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1453.4388ms
2025-08-25 03:17:03.214 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1586.6464ms
2025-08-25 03:17:05.610 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:17:05.613 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:17:05.614 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:17:05.635 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:17:07.085 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1474.9902ms
2025-08-25 03:17:07.235 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1622.7205ms
2025-08-25 03:17:09.612 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:17:09.619 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:17:09.647 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:17:09.654 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:17:10.432 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants - null null
2025-08-25 03:17:10.439 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-25 03:17:10.722 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-25 03:17:10.727 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.GetProductVariants (E-Commerce)'
2025-08-25 03:17:10.740 +03:00 [INF] Route matched with {action = "GetProductVariants", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]]] GetProductVariants(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-08-25 03:17:10.775 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-08-25 03:17:10.934 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__productId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`Size`, `p`.`Waist`, `p`.`Length`, `p`.`Quantity`, `p`.`ProductId`, `p`.`IsActive`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`ModifiedAt`
FROM `ProductVariants` AS `p`
WHERE (`p`.`ProductId` = @__productId_0) AND `p`.`DeletedAt` IS NULL
2025-08-25 03:17:10.941 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 03:17:10.946 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.GetProductVariants (E-Commerce) in 201.1671ms
2025-08-25 03:17:10.954 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.GetProductVariants (E-Commerce)'
2025-08-25 03:17:10.962 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/1/Variants - 200 319 application/json; charset=utf-8 530.8527ms
2025-08-25 03:17:11.096 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1483.6333ms
2025-08-25 03:17:11.245 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1598.106ms
2025-08-25 03:17:13.602 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:17:13.603 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:17:13.609 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:17:13.614 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:17:15.054 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1451.5909ms
2025-08-25 03:17:15.207 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1604.4917ms
2025-08-25 03:17:17.603 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:17:17.603 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:17:17.612 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:17:17.620 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:17:19.084 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1480.9589ms
2025-08-25 03:17:19.229 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1625.4449ms
2025-08-25 03:17:21.601 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:17:21.603 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:17:21.608 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:17:21.614 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:17:23.078 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1475.3256ms
2025-08-25 03:17:23.226 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1625.3855ms
2025-08-25 03:17:25.608 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:17:25.609 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-25 03:17:25.613 +03:00 [INF] CORS policy execution successful.
2025-08-25 03:17:25.618 +03:00 [INF] CORS policy execution successful.
2025-08-25 14:25:22.206 +03:00 [INF] DB tables already exist. Exit install
2025-08-25 14:25:24.921 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-25 14:25:26.136 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-25 14:25:26.859 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-25 14:25:27.044 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-25 14:25:27.079 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-25 14:25:27.094 +03:00 [INF] Starting data seeding...
2025-08-25 14:25:27.135 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-25 14:25:27.875 +03:00 [INF] Executed DbCommand (140ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-25 14:25:27.961 +03:00 [INF] Role 'Admin' already exists.
2025-08-25 14:25:28.119 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-25 14:25:28.129 +03:00 [INF] Role 'User' already exists.
2025-08-25 14:25:28.329 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-25 14:25:28.500 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-25 14:25:28.502 +03:00 [INF] Data seeding completed successfully.
2025-08-25 14:25:30.507 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-25 14:25:30.700 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-25 14:25:30.715 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-25 14:25:30.731 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-25 14:25:30.737 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-25 14:25:30.794 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-25 14:25:30.808 +03:00 [INF] Hosting environment: Development
2025-08-25 14:25:30.842 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-25 14:25:30.989 +03:00 [INF] Server mrrobot:15776:2f472d13 successfully announced in 174.4777 ms
2025-08-25 14:25:31.099 +03:00 [INF] Server mrrobot:15776:2f472d13 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-25 14:25:31.200 +03:00 [INF] Server mrrobot:15776:2f472d13 all the dispatchers started
2025-08-25 14:25:31.263 +03:00 [INF] 1 servers were removed due to timeout
2025-08-25 14:25:33.468 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-25 14:25:34.231 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 763.8674ms
2025-08-25 14:25:34.620 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-25 14:25:34.726 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-25 14:25:35.062 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 14:25:35.068 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 448.4824ms
2025-08-25 14:25:35.098 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 36.0478ms
2025-08-25 14:25:35.207 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 481.3678ms
2025-08-25 14:25:35.380 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-25 14:25:36.145 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 766.4039ms
2025-08-25 14:32:07.160 +03:00 [INF] DB tables already exist. Exit install
2025-08-25 14:32:11.266 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-25 14:32:12.808 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-25 14:32:13.537 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-25 14:32:13.726 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-25 14:32:13.759 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-25 14:32:13.786 +03:00 [INF] Starting data seeding...
2025-08-25 14:32:13.829 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-25 14:32:14.724 +03:00 [INF] Executed DbCommand (138ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-25 14:32:14.815 +03:00 [INF] Role 'Admin' already exists.
2025-08-25 14:32:14.979 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-25 14:32:14.996 +03:00 [INF] Role 'User' already exists.
2025-08-25 14:32:15.191 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-25 14:32:15.326 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-25 14:32:15.328 +03:00 [INF] Data seeding completed successfully.
2025-08-25 14:32:16.905 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-25 14:32:17.033 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-25 14:32:17.037 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-25 14:32:17.042 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-25 14:32:17.045 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-25 14:32:17.063 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-25 14:32:17.158 +03:00 [INF] Hosting environment: Development
2025-08-25 14:32:17.171 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-25 14:32:17.329 +03:00 [INF] Server mrrobot:17048:d256e7d8 successfully announced in 168.3975 ms
2025-08-25 14:32:17.342 +03:00 [INF] Server mrrobot:17048:d256e7d8 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-25 14:32:17.443 +03:00 [INF] Server mrrobot:17048:d256e7d8 all the dispatchers started
2025-08-25 14:32:21.450 +03:00 [WRN] Stopping the server due to DomainUnload or ProcessExit event...
2025-08-25 14:32:21.577 +03:00 [INF] Server mrrobot:17048:d256e7d8 caught stopping signal...
2025-08-25 14:32:21.589 +03:00 [INF] Server mrrobot:17048:d256e7d8 caught stopped signal...
2025-08-25 14:32:21.601 +03:00 [INF] Server mrrobot:17048:d256e7d8 All dispatchers stopped
2025-08-25 14:32:21.606 +03:00 [WRN] Server mrrobot:17048:d256e7d8 caught shutdown signal...
2025-08-25 14:32:22.206 +03:00 [INF] Server mrrobot:17048:d256e7d8 successfully reported itself as stopped in 596.903 ms
2025-08-25 14:32:22.209 +03:00 [INF] Server mrrobot:17048:d256e7d8 has been stopped in total 620.3996 ms
