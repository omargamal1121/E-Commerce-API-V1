2025-08-12 04:49:19.964 +03:00 [INF] DB tables already exist. Exit install
2025-08-12 04:49:21.532 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-12 04:49:23.057 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-12 04:49:23.790 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-12 04:49:24.057 +03:00 [INF] Executed DbCommand (98ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-12 04:49:24.131 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-12 04:49:24.164 +03:00 [INF] Starting data seeding...
2025-08-12 04:49:24.229 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-12 04:49:24.883 +03:00 [INF] Executed DbCommand (186ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-12 04:49:25.075 +03:00 [INF] Role 'Admin' already exists.
2025-08-12 04:49:25.243 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-12 04:49:25.270 +03:00 [INF] Role 'User' already exists.
2025-08-12 04:49:25.475 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-12 04:49:25.757 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-12 04:49:25.762 +03:00 [INF] Data seeding completed successfully.
2025-08-12 04:49:27.496 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-12 04:49:27.653 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-12 04:49:27.689 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-12 04:49:27.696 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-12 04:49:27.698 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-12 04:49:27.721 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-12 04:49:27.730 +03:00 [INF] Hosting environment: Development
2025-08-12 04:49:27.738 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-12 04:49:27.903 +03:00 [INF] Server mrrobot:22116:f0e27517 successfully announced in 165.0884 ms
2025-08-12 04:49:27.908 +03:00 [INF] Server mrrobot:22116:f0e27517 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-12 04:49:27.938 +03:00 [INF] Server mrrobot:22116:f0e27517 all the dispatchers started
2025-08-12 04:49:28.762 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-12 04:49:29.499 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.css - null null
2025-08-12 04:49:29.516 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-12 04:49:29.516 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 713.1885ms
2025-08-12 04:49:29.527 +03:00 [WRN] Failed to process the job '5': an exception occurred. Retry attempt 9 of 10 will be performed in 01:11:13.
Newtonsoft.Json.JsonSerializationException: Error converting value "d1c4400e-e5cc-4af0-919e-8b1fded727fe" to type 'StackExchange.Redis.RedisValue'. Path '', line 1, position 38.
 ---> System.InvalidCastException: Invalid cast from 'System.String' to 'StackExchange.Redis.RedisValue'.
   at System.Convert.DefaultToType(IConvertible value, Type targetType, IFormatProvider provider)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.EnsureType(JsonReader reader, Object value, CultureInfo culture, JsonContract contract, Type targetType)
   --- End of inner exception stack trace ---
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.EnsureType(JsonReader reader, Object value, CultureInfo culture, JsonContract contract, Type targetType)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.Deserialize(JsonReader reader, Type objectType, Boolean checkAdditionalContent)
   at Newtonsoft.Json.JsonSerializer.DeserializeInternal(JsonReader reader, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Deserialize(JsonReader reader, Type objectType)
   at Newtonsoft.Json.JsonConvert.DeserializeObject(String value, Type type, JsonSerializerSettings settings)
   at Hangfire.Common.SerializationHelper.Deserialize(String value, Type type, SerializationOption option) in C:\projects\hangfire-525\src\Hangfire.Core\Common\SerializationHelper.cs:line 177
   at Hangfire.Storage.InvocationData.DeserializeArgument(String argument, Type type) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 366
--- End of stack trace from previous location ---
   at Hangfire.Storage.InvocationData.DeserializeArgument(String argument, Type type) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 400
   at Hangfire.Storage.InvocationData.DeserializeArguments(MethodInfo methodInfo, String[] arguments) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 300
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 107
2025-08-12 04:49:29.546 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-12 04:49:29.636 +03:00 [INF] The file /index.css was not modified
2025-08-12 04:49:29.640 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 123.9308ms
2025-08-12 04:49:29.718 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/swagger-ui.css - null null
2025-08-12 04:49:30.033 +03:00 [INF] The file /swagger-ui.css was not modified
2025-08-12 04:49:30.040 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/swagger-ui.css - 304 null text/css 321.992ms
2025-08-12 04:49:30.000 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-12 04:49:29.966 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 419.8424ms
2025-08-12 04:49:29.980 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.css - 304 null text/css 480.7814ms
2025-08-12 04:49:30.248 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 247.9068ms
2025-08-12 04:49:30.323 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-12 04:49:30.714 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 390.4329ms
2025-08-12 04:49:31.757 +03:00 [ERR] Failed to process the job '2': an exception occurred.
Newtonsoft.Json.JsonSerializationException: Error converting value "d1c4400e-e5cc-4af0-919e-8b1fded727fe" to type 'StackExchange.Redis.RedisValue'. Path '', line 1, position 38.
 ---> System.InvalidCastException: Invalid cast from 'System.String' to 'StackExchange.Redis.RedisValue'.
   at System.Convert.DefaultToType(IConvertible value, Type targetType, IFormatProvider provider)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.EnsureType(JsonReader reader, Object value, CultureInfo culture, JsonContract contract, Type targetType)
   --- End of inner exception stack trace ---
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.EnsureType(JsonReader reader, Object value, CultureInfo culture, JsonContract contract, Type targetType)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.Deserialize(JsonReader reader, Type objectType, Boolean checkAdditionalContent)
   at Newtonsoft.Json.JsonSerializer.DeserializeInternal(JsonReader reader, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Deserialize(JsonReader reader, Type objectType)
   at Newtonsoft.Json.JsonConvert.DeserializeObject(String value, Type type, JsonSerializerSettings settings)
   at Hangfire.Common.SerializationHelper.Deserialize(String value, Type type, SerializationOption option) in C:\projects\hangfire-525\src\Hangfire.Core\Common\SerializationHelper.cs:line 177
   at Hangfire.Storage.InvocationData.DeserializeArgument(String argument, Type type) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 366
--- End of stack trace from previous location ---
   at Hangfire.Storage.InvocationData.DeserializeArgument(String argument, Type type) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 400
   at Hangfire.Storage.InvocationData.DeserializeArguments(MethodInfo methodInfo, String[] arguments) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 300
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 107
2025-08-12 04:50:33.513 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Account/login - application/json-patch+json 70
2025-08-12 04:50:33.526 +03:00 [INF] CORS policy execution successful.
2025-08-12 04:50:33.590 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-12 04:50:33.737 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-12 04:50:33.755 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-08-12 04:50:33.799 +03:00 [INF] Route matched with {action = "LoginAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.TokenDtos.TokensDto]]] LoginAsync(E_Commerce.DtoModels.AccountDtos.LoginDTo) on controller E_Commerce.Controllers.AccountController (E-Commerce).
2025-08-12 04:50:34.178 +03:00 [INF] Executed action E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce) in 364.5151ms
2025-08-12 04:50:34.185 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-08-12 04:50:34.191 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Cloud name must be specified in Account!
   at CloudinaryDotNet.ApiShared..ctor(Account account)
   at CloudinaryDotNet.Api..ctor(Account account)
   at CloudinaryDotNet.Cloudinary..ctor(Account account)
   at E_Commerce.Program.<>c.<Main>b__0_3(IServiceProvider sp) in D:\project_fashion\E-Commerce-API-main\Program.cs:line 182
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method280(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at SecurityStampMiddleware.Invoke(HttpContext context) in D:\project_fashion\E-Commerce-API-main\MiddleWares\SecurityStampMiddleware.cs:line 75
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context) in D:\project_fashion\E-Commerce-API-main\Middleware\UserAuthenticationMiddleware.cs:line 24
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-12 04:50:34.298 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Account/login - 500 null text/plain; charset=utf-8 784.3735ms
2025-08-12 04:52:01.285 +03:00 [INF] DB tables already exist. Exit install
2025-08-12 04:52:02.529 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-12 04:52:04.034 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-12 04:52:04.787 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-12 04:52:05.022 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-12 04:52:05.080 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-12 04:52:05.101 +03:00 [INF] Starting data seeding...
2025-08-12 04:52:05.149 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-12 04:52:05.702 +03:00 [INF] Executed DbCommand (111ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-12 04:52:05.834 +03:00 [INF] Role 'Admin' already exists.
2025-08-12 04:52:05.997 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-12 04:52:06.020 +03:00 [INF] Role 'User' already exists.
2025-08-12 04:52:06.253 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-12 04:52:06.474 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-12 04:52:06.479 +03:00 [INF] Data seeding completed successfully.
2025-08-12 04:52:08.108 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-12 04:52:08.271 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-12 04:52:08.274 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-12 04:52:08.277 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-12 04:52:08.281 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-12 04:52:08.300 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-12 04:52:08.311 +03:00 [INF] Hosting environment: Development
2025-08-12 04:52:08.312 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-12 04:52:08.474 +03:00 [INF] Server mrrobot:24052:fac36ad6 successfully announced in 169.0255 ms
2025-08-12 04:52:08.497 +03:00 [INF] Server mrrobot:24052:fac36ad6 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-12 04:52:08.517 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-12 04:52:08.552 +03:00 [INF] Server mrrobot:24052:fac36ad6 all the dispatchers started
2025-08-12 04:52:09.366 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 849.3931ms
2025-08-12 04:52:10.200 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-12 04:52:10.204 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-12 04:52:10.211 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 11.0442ms
2025-08-12 04:52:10.237 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-12 04:52:10.269 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 31.6424ms
2025-08-12 04:52:10.275 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 70.6649ms
2025-08-12 04:52:10.541 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-12 04:52:10.567 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/favicon-32x32.png - null null
2025-08-12 04:52:10.600 +03:00 [INF] The file /favicon-32x32.png was not modified
2025-08-12 04:52:10.604 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/favicon-32x32.png - 304 null image/png 36.772ms
2025-08-12 04:52:10.807 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 265.9642ms
2025-08-12 04:52:28.816 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Account/login - application/json-patch+json 57
2025-08-12 04:52:28.824 +03:00 [INF] CORS policy execution successful.
2025-08-12 04:52:28.830 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-12 04:52:28.948 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-12 04:52:28.964 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-08-12 04:52:29.055 +03:00 [INF] Route matched with {action = "LoginAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.TokenDtos.TokensDto]]] LoginAsync(E_Commerce.DtoModels.AccountDtos.LoginDTo) on controller E_Commerce.Controllers.AccountController (E-Commerce).
2025-08-12 04:52:29.387 +03:00 [INF] Executed action E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce) in 321.6377ms
2025-08-12 04:52:29.394 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-08-12 04:52:29.400 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Cloud name must be specified in Account!
   at CloudinaryDotNet.ApiShared..ctor(Account account)
   at CloudinaryDotNet.Api..ctor(Account account)
   at CloudinaryDotNet.Cloudinary..ctor(Account account)
   at E_Commerce.Program.<>c.<Main>b__0_3(IServiceProvider sp) in D:\project_fashion\E-Commerce-API-main\Program.cs:line 182
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method280(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at SecurityStampMiddleware.Invoke(HttpContext context) in D:\project_fashion\E-Commerce-API-main\MiddleWares\SecurityStampMiddleware.cs:line 75
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context) in D:\project_fashion\E-Commerce-API-main\Middleware\UserAuthenticationMiddleware.cs:line 24
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-12 04:52:29.503 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Account/login - 500 null text/plain; charset=utf-8 686.0877ms
2025-08-12 04:53:43.825 +03:00 [INF] DB tables already exist. Exit install
2025-08-12 04:53:45.401 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-12 04:53:46.873 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-12 04:53:47.610 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-12 04:53:47.818 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-12 04:53:47.870 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-12 04:53:47.890 +03:00 [INF] Starting data seeding...
2025-08-12 04:53:47.935 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-12 04:53:48.659 +03:00 [INF] Executed DbCommand (150ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-12 04:53:48.737 +03:00 [INF] Role 'Admin' already exists.
2025-08-12 04:53:48.900 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-12 04:53:48.909 +03:00 [INF] Role 'User' already exists.
2025-08-12 04:53:49.087 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-12 04:53:49.244 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-12 04:53:49.247 +03:00 [INF] Data seeding completed successfully.
2025-08-12 04:53:50.962 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-12 04:53:51.131 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-12 04:53:51.135 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-12 04:53:51.139 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-12 04:53:51.142 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-12 04:53:51.169 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-12 04:53:51.171 +03:00 [INF] Hosting environment: Development
2025-08-12 04:53:51.182 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-12 04:53:51.339 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-12 04:53:51.383 +03:00 [INF] Server mrrobot:18864:56b3e395 successfully announced in 196.8938 ms
2025-08-12 04:53:51.397 +03:00 [INF] Server mrrobot:18864:56b3e395 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-12 04:53:51.612 +03:00 [INF] Server mrrobot:18864:56b3e395 all the dispatchers started
2025-08-12 04:53:51.898 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 559.3996ms
2025-08-12 04:53:52.028 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-12 04:53:52.037 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 9.0322ms
2025-08-12 04:53:52.037 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-12 04:53:52.081 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-12 04:53:52.116 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 34.7323ms
2025-08-12 04:53:52.140 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 102.5351ms
2025-08-12 04:53:52.776 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-12 04:53:53.087 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 311.3501ms
2025-08-12 04:54:18.851 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Account/login - application/json-patch+json 57
2025-08-12 04:54:18.864 +03:00 [INF] CORS policy execution successful.
2025-08-12 04:54:18.869 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-12 04:54:18.984 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-12 04:54:19.001 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-08-12 04:54:19.043 +03:00 [INF] Route matched with {action = "LoginAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.TokenDtos.TokensDto]]] LoginAsync(E_Commerce.DtoModels.AccountDtos.LoginDTo) on controller E_Commerce.Controllers.AccountController (E-Commerce).
2025-08-12 04:54:19.366 +03:00 [INF] Executed action E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce) in 311.3065ms
2025-08-12 04:54:19.376 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-08-12 04:54:19.383 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Cloud name must be specified in Account!
   at CloudinaryDotNet.ApiShared..ctor(Account account)
   at CloudinaryDotNet.Api..ctor(Account account)
   at CloudinaryDotNet.Cloudinary..ctor(Account account)
   at E_Commerce.Program.<>c.<Main>b__0_3(IServiceProvider sp) in D:\project_fashion\E-Commerce-API-main\Program.cs:line 182
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method280(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at SecurityStampMiddleware.Invoke(HttpContext context) in D:\project_fashion\E-Commerce-API-main\MiddleWares\SecurityStampMiddleware.cs:line 75
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context) in D:\project_fashion\E-Commerce-API-main\Middleware\UserAuthenticationMiddleware.cs:line 24
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-12 04:54:19.482 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Account/login - 500 null text/plain; charset=utf-8 630.3657ms
2025-08-12 04:55:28.673 +03:00 [INF] DB tables already exist. Exit install
2025-08-12 04:55:32.130 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-12 04:55:34.402 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-12 04:55:35.186 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-12 04:55:35.374 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-12 04:55:35.411 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-12 04:55:35.463 +03:00 [INF] Starting data seeding...
2025-08-12 04:55:35.523 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-12 04:55:36.877 +03:00 [INF] Executed DbCommand (299ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-12 04:55:37.068 +03:00 [INF] Role 'Admin' already exists.
2025-08-12 04:55:37.232 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-12 04:55:37.239 +03:00 [INF] Role 'User' already exists.
2025-08-12 04:55:37.442 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-12 04:55:37.671 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-12 04:55:37.675 +03:00 [INF] Data seeding completed successfully.
2025-08-12 04:55:40.036 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-12 04:55:40.292 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-12 04:55:40.332 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-12 04:55:40.334 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-12 04:55:40.412 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-12 04:55:40.482 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-12 04:55:40.537 +03:00 [INF] Hosting environment: Development
2025-08-12 04:55:40.574 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-12 04:55:40.715 +03:00 [INF] Server mrrobot:16472:a3947c3a successfully announced in 175.9904 ms
2025-08-12 04:55:41.013 +03:00 [INF] Server mrrobot:16472:a3947c3a is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-12 04:55:43.855 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-12 04:55:44.179 +03:00 [INF] Server mrrobot:16472:a3947c3a all the dispatchers started
2025-08-12 04:55:45.156 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-12 04:55:45.158 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-12 04:55:45.175 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-12 04:55:45.175 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 1612.1013ms
2025-08-12 04:55:45.250 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 92.8841ms
2025-08-12 04:55:45.337 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 178.2301ms
2025-08-12 04:55:45.449 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 274.2217ms
2025-08-12 04:55:45.556 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-12 04:55:46.119 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 563.062ms
2025-08-12 04:56:23.627 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Account/login - application/json-patch+json 57
2025-08-12 04:56:23.765 +03:00 [INF] CORS policy execution successful.
2025-08-12 04:56:23.786 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-12 04:56:24.084 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-12 04:56:24.123 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-08-12 04:56:24.210 +03:00 [INF] Route matched with {action = "LoginAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.TokenDtos.TokensDto]]] LoginAsync(E_Commerce.DtoModels.AccountDtos.LoginDTo) on controller E_Commerce.Controllers.AccountController (E-Commerce).
2025-08-12 04:57:13.283 +03:00 [INF] Executed action E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce) in 49049.5414ms
2025-08-12 04:57:13.289 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-08-12 04:57:14.393 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Cloud name must be specified in Account!
   at CloudinaryDotNet.ApiShared..ctor(Account account)
   at CloudinaryDotNet.Api..ctor(Account account)
   at CloudinaryDotNet.Cloudinary..ctor(Account account)
   at E_Commerce.Program.<>c.<Main>b__0_3(IServiceProvider sp) in D:\project_fashion\E-Commerce-API-main\Program.cs:line 182
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method280(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at SecurityStampMiddleware.Invoke(HttpContext context) in D:\project_fashion\E-Commerce-API-main\MiddleWares\SecurityStampMiddleware.cs:line 75
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context) in D:\project_fashion\E-Commerce-API-main\Middleware\UserAuthenticationMiddleware.cs:line 24
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-12 04:57:14.596 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Account/login - 500 null text/plain; charset=utf-8 50968.7358ms
2025-08-12 05:01:18.434 +03:00 [INF] DB tables already exist. Exit install
2025-08-12 05:01:24.391 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-12 05:01:27.527 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-12 05:01:28.441 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-12 05:01:28.899 +03:00 [INF] Executed DbCommand (104ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-12 05:01:29.080 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-12 05:01:29.154 +03:00 [INF] Starting data seeding...
2025-08-12 05:01:29.214 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-12 05:01:30.266 +03:00 [INF] Executed DbCommand (160ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-12 05:01:30.421 +03:00 [INF] Role 'Admin' already exists.
2025-08-12 05:01:30.580 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-12 05:01:30.588 +03:00 [INF] Role 'User' already exists.
2025-08-12 05:01:30.837 +03:00 [INF] Executed DbCommand (95ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-12 05:01:31.136 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-12 05:01:31.137 +03:00 [INF] Data seeding completed successfully.
2025-08-12 05:01:34.923 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-12 05:01:35.247 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-12 05:01:35.534 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-12 05:01:35.659 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-12 05:01:38.988 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-12 05:01:39.398 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-12 05:01:39.517 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-12 05:01:39.602 +03:00 [INF] Hosting environment: Development
2025-08-12 05:01:39.615 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-12 05:01:39.828 +03:00 [INF] Server mrrobot:15744:74bc1858 successfully announced in 240.4644 ms
2025-08-12 05:01:39.933 +03:00 [INF] Server mrrobot:15744:74bc1858 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-12 05:01:40.336 +03:00 [INF] 3 servers were removed due to timeout
2025-08-12 05:01:43.981 +03:00 [INF] Server mrrobot:15744:74bc1858 all the dispatchers started
2025-08-12 05:01:44.878 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 5537.9107ms
2025-08-12 05:01:45.024 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-12 05:01:45.101 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-12 05:01:45.106 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-12 05:01:45.427 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 402.4064ms
2025-08-12 05:01:45.462 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 361.3653ms
2025-08-12 05:01:45.790 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 684.7646ms
2025-08-12 05:01:46.086 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-12 05:01:46.877 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 791.7608ms
2025-08-12 05:02:23.366 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Account/login - application/json-patch+json 57
2025-08-12 05:02:23.537 +03:00 [INF] CORS policy execution successful.
2025-08-12 05:02:23.552 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-12 05:02:24.243 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-12 05:02:24.314 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-08-12 05:02:24.399 +03:00 [INF] Route matched with {action = "LoginAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.TokenDtos.TokensDto]]] LoginAsync(E_Commerce.DtoModels.AccountDtos.LoginDTo) on controller E_Commerce.Controllers.AccountController (E-Commerce).
2025-08-12 05:02:25.025 +03:00 [INF] In LoginAsync Method 
2025-08-12 05:02:25.191 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-12 05:02:25.207 +03:00 [WRN] Login failed: Email not found.
2025-08-12 05:02:25.328 +03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.TokenDtos.TokensDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-12 05:02:25.420 +03:00 [INF] Executed action E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce) in 1001.7877ms
2025-08-12 05:02:25.431 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-08-12 05:02:25.461 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Account/login - 401 653 application/json; charset=utf-8 2089.9516ms
2025-08-12 05:03:14.335 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Account/login - application/json-patch+json 70
2025-08-12 05:03:14.350 +03:00 [INF] CORS policy execution successful.
2025-08-12 05:03:14.372 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-12 05:03:14.380 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-08-12 05:03:14.395 +03:00 [INF] Route matched with {action = "LoginAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.TokenDtos.TokensDto]]] LoginAsync(E_Commerce.DtoModels.AccountDtos.LoginDTo) on controller E_Commerce.Controllers.AccountController (E-Commerce).
2025-08-12 05:03:14.548 +03:00 [INF] In LoginAsync Method 
2025-08-12 05:03:14.712 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-12 05:03:14.933 +03:00 [INF] 🔐 Generating Access Token for User ID: d1c4400e-e5cc-4af0-919e-8b1fded727fe
2025-08-12 05:03:14.944 +03:00 [INF] 🔐 Generating Access Token for User ID: d1c4400e-e5cc-4af0-919e-8b1fded727fe
2025-08-12 05:03:15.296 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-08-12 05:03:15.435 +03:00 [INF] ✅ Access Token generated successfully for User ID: d1c4400e-e5cc-4af0-919e-8b1fded727fe
2025-08-12 05:03:15.453 +03:00 [INF] 🔑 Generating Refresh Token for User ID: d1c4400e-e5cc-4af0-919e-8b1fded727fe
2025-08-12 05:03:16.613 +03:00 [INF] ✅ RefreshToken generated successfully for User ID: d1c4400e-e5cc-4af0-919e-8b1fded727fe
2025-08-12 05:03:16.631 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.TokenDtos.TokensDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-12 05:03:16.648 +03:00 [INF] Executed action E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce) in 2243.5079ms
2025-08-12 05:03:16.665 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-08-12 05:03:16.681 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Account/login - 200 1403 application/json; charset=utf-8 2346.8285ms
2025-08-12 05:03:49.296 +03:00 [WRN] Failed to process the job '20': an exception occurred. Retry attempt 2 of 10 will be performed in 00:00:34.
Newtonsoft.Json.JsonSerializationException: Error converting value "d1c4400e-e5cc-4af0-919e-8b1fded727fe" to type 'StackExchange.Redis.RedisValue'. Path '', line 1, position 38.
 ---> System.InvalidCastException: Invalid cast from 'System.String' to 'StackExchange.Redis.RedisValue'.
   at System.Convert.DefaultToType(IConvertible value, Type targetType, IFormatProvider provider)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.EnsureType(JsonReader reader, Object value, CultureInfo culture, JsonContract contract, Type targetType)
   --- End of inner exception stack trace ---
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.EnsureType(JsonReader reader, Object value, CultureInfo culture, JsonContract contract, Type targetType)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.Deserialize(JsonReader reader, Type objectType, Boolean checkAdditionalContent)
   at Newtonsoft.Json.JsonSerializer.DeserializeInternal(JsonReader reader, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Deserialize(JsonReader reader, Type objectType)
   at Newtonsoft.Json.JsonConvert.DeserializeObject(String value, Type type, JsonSerializerSettings settings)
   at Hangfire.Common.SerializationHelper.Deserialize(String value, Type type, SerializationOption option) in C:\projects\hangfire-525\src\Hangfire.Core\Common\SerializationHelper.cs:line 177
   at Hangfire.Storage.InvocationData.DeserializeArgument(String argument, Type type) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 366
--- End of stack trace from previous location ---
   at Hangfire.Storage.InvocationData.DeserializeArgument(String argument, Type type) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 400
   at Hangfire.Storage.InvocationData.DeserializeArguments(MethodInfo methodInfo, String[] arguments) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 300
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 107
2025-08-12 05:03:51.542 +03:00 [WRN] Failed to process the job '20': an exception occurred. Retry attempt 3 of 10 will be performed in 00:01:01.
Newtonsoft.Json.JsonSerializationException: Error converting value "d1c4400e-e5cc-4af0-919e-8b1fded727fe" to type 'StackExchange.Redis.RedisValue'. Path '', line 1, position 38.
 ---> System.InvalidCastException: Invalid cast from 'System.String' to 'StackExchange.Redis.RedisValue'.
   at System.Convert.DefaultToType(IConvertible value, Type targetType, IFormatProvider provider)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.EnsureType(JsonReader reader, Object value, CultureInfo culture, JsonContract contract, Type targetType)
   --- End of inner exception stack trace ---
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.EnsureType(JsonReader reader, Object value, CultureInfo culture, JsonContract contract, Type targetType)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.Deserialize(JsonReader reader, Type objectType, Boolean checkAdditionalContent)
   at Newtonsoft.Json.JsonSerializer.DeserializeInternal(JsonReader reader, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Deserialize(JsonReader reader, Type objectType)
   at Newtonsoft.Json.JsonConvert.DeserializeObject(String value, Type type, JsonSerializerSettings settings)
   at Hangfire.Common.SerializationHelper.Deserialize(String value, Type type, SerializationOption option) in C:\projects\hangfire-525\src\Hangfire.Core\Common\SerializationHelper.cs:line 177
   at Hangfire.Storage.InvocationData.DeserializeArgument(String argument, Type type) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 366
--- End of stack trace from previous location ---
   at Hangfire.Storage.InvocationData.DeserializeArgument(String argument, Type type) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 400
   at Hangfire.Storage.InvocationData.DeserializeArguments(MethodInfo methodInfo, String[] arguments) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 300
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 107
2025-08-12 05:04:04.438 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/categories/1/images - multipart/form-data; boundary=----WebKitFormBoundaryCysUkThJI7bfNhXW 341502
2025-08-12 05:04:04.668 +03:00 [INF] CORS policy execution successful.
2025-08-12 05:04:04.855 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-12 05:04:05.136 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-12 05:04:05.243 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-12 05:04:05.272 +03:00 [INF] Route matched with {action = "AddImagesToCategoryAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]]] AddImagesToCategoryAsync(Int32, E_Commerce.DtoModels.CategoryDtos.AddImagesDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-12 05:04:05.538 +03:00 [INF] Executing AddImagesToCategoryAsync for id: 1
2025-08-12 05:04:05.572 +03:00 [INF] Executing AddImagesToCategoryAsync for categoryId: 1
2025-08-12 05:04:05.999 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL)
2025-08-12 05:04:06.026 +03:00 [INF] 📥 Saving 1 images to CategoryPhotos
2025-08-12 05:04:06.040 +03:00 [INF] 📥 Saving image to CategoryPhotos
2025-08-12 05:04:09.369 +03:00 [ERR] ❌ Error saving image: Failed to deserialize response with status code: NotFound
2025-08-12 05:04:10.850 +03:00 [ERR] ❌ Failed to save image #1: Error saving image: Failed to deserialize response with status code: NotFound
2025-08-12 05:04:10.854 +03:00 [WRN] Some images failed to save: Image #1: Error saving image: Failed to deserialize response with status code: NotFound
2025-08-12 05:04:11.101 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-12 05:04:11.129 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce) in 5843.4421ms
2025-08-12 05:04:11.168 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-12 05:04:11.191 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/categories/1/images - 400 1076 application/json; charset=utf-8 6753.2611ms
2025-08-12 05:26:46.132 +03:00 [WRN] Server mrrobot:15744:74bc1858 encountered an exception while sending heartbeat
MySqlConnector.MySqlException (0x80004005): Connect Timeout expired.
 ---> MySqlConnector.MySqlException (0x80004005): Connect Timeout expired.
   at MySqlConnector.Core.ServerSession.OpenTcpSocketAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 1046
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 425
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 428
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, Action`4 logMessage, Int64 startingTimestamp, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 433
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 111
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 951
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Hangfire.MySql.MySqlStorage.CreateAndOpenConnection()
   at Hangfire.MySql.MySqlStorage.UseConnection[T](Func`2 func)
   at Hangfire.MySql.MySqlStorage.UseConnection(Action`1 action)
   at Hangfire.MySql.MySqlStorageConnection.Heartbeat(String serverId)
   at Hangfire.Server.ServerHeartbeatProcess.Execute(BackgroundProcessContext context) in C:\projects\hangfire-525\src\Hangfire.Core\Server\ServerHeartbeatProcess.cs:line 50
2025-08-12 05:26:55.937 +03:00 [WRN] Failed to process the job '20': an exception occurred. Retry attempt 7 of 10 will be performed in 00:23:29.
Newtonsoft.Json.JsonSerializationException: Error converting value "d1c4400e-e5cc-4af0-919e-8b1fded727fe" to type 'StackExchange.Redis.RedisValue'. Path '', line 1, position 38.
 ---> System.InvalidCastException: Invalid cast from 'System.String' to 'StackExchange.Redis.RedisValue'.
   at System.Convert.DefaultToType(IConvertible value, Type targetType, IFormatProvider provider)
   at System.Convert.ChangeType(Object value, Type conversionType, IFormatProvider provider)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.EnsureType(JsonReader reader, Object value, CultureInfo culture, JsonContract contract, Type targetType)
   --- End of inner exception stack trace ---
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.EnsureType(JsonReader reader, Object value, CultureInfo culture, JsonContract contract, Type targetType)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.Deserialize(JsonReader reader, Type objectType, Boolean checkAdditionalContent)
   at Newtonsoft.Json.JsonSerializer.DeserializeInternal(JsonReader reader, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Deserialize(JsonReader reader, Type objectType)
   at Newtonsoft.Json.JsonConvert.DeserializeObject(String value, Type type, JsonSerializerSettings settings)
   at Hangfire.Common.SerializationHelper.Deserialize(String value, Type type, SerializationOption option) in C:\projects\hangfire-525\src\Hangfire.Core\Common\SerializationHelper.cs:line 177
   at Hangfire.Storage.InvocationData.DeserializeArgument(String argument, Type type) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 366
--- End of stack trace from previous location ---
   at Hangfire.Storage.InvocationData.DeserializeArgument(String argument, Type type) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 400
   at Hangfire.Storage.InvocationData.DeserializeArguments(MethodInfo methodInfo, String[] arguments) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 300
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 107
2025-08-12 05:27:11.703 +03:00 [INF] Execution RecurringJobScheduler recovered from the Faulted state after 00:00:36.3266748 and is in the Running state now
2025-08-12 05:27:12.972 +03:00 [INF] Execution DelayedJobScheduler recovered from the Faulted state after 00:00:31.9626007 and is in the Running state now
2025-08-12 05:27:23.852 +03:00 [INF] Server mrrobot:15744:74bc1858 is now able to continue sending heartbeats
2025-08-12 05:31:07.523 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/categories/1/images - multipart/form-data; boundary=----WebKitFormBoundarysIvEOQxfRjkM6MMp 341502
2025-08-12 05:31:08.046 +03:00 [INF] CORS policy execution successful.
2025-08-12 05:31:08.151 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-12 05:31:09.081 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-12 05:31:09.114 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-12 05:31:09.139 +03:00 [INF] Route matched with {action = "AddImagesToCategoryAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]]] AddImagesToCategoryAsync(Int32, E_Commerce.DtoModels.CategoryDtos.AddImagesDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-12 05:31:09.438 +03:00 [INF] Executing AddImagesToCategoryAsync for id: 1
2025-08-12 05:31:09.449 +03:00 [INF] Executing AddImagesToCategoryAsync for categoryId: 1
2025-08-12 05:31:09.868 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL)
2025-08-12 05:31:10.374 +03:00 [INF] 📥 Saving 1 images to CategoryPhotos
2025-08-12 05:31:10.403 +03:00 [INF] 📥 Saving image to CategoryPhotos
2025-08-12 05:31:14.077 +03:00 [ERR] ❌ Error saving image: Failed to deserialize response with status code: NotFound
2025-08-12 05:31:15.146 +03:00 [ERR] ❌ Failed to save image #1: Error saving image: Failed to deserialize response with status code: NotFound
2025-08-12 05:31:15.188 +03:00 [WRN] Some images failed to save: Image #1: Error saving image: Failed to deserialize response with status code: NotFound
2025-08-12 05:31:15.362 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-12 05:31:15.385 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce) in 6088.7986ms
2025-08-12 05:31:15.685 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-12 05:31:15.698 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/categories/1/images - 400 1076 application/json; charset=utf-8 8179.4705ms
2025-08-12 05:31:21.312 +03:00 [INF] Execution Worker recovered from the Faulted state after 00:04:35.0648113 and is in the Running state now
2025-08-12 05:33:02.194 +03:00 [INF] DB tables already exist. Exit install
2025-08-12 05:33:10.473 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-12 05:33:12.881 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-12 05:33:13.858 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-12 05:33:14.296 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-12 05:33:14.519 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-12 05:33:14.741 +03:00 [INF] Starting data seeding...
2025-08-12 05:33:16.189 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-12 05:33:20.141 +03:00 [INF] Executed DbCommand (241ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-12 05:33:20.417 +03:00 [INF] Role 'Admin' already exists.
2025-08-12 05:33:20.622 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-12 05:33:20.643 +03:00 [INF] Role 'User' already exists.
2025-08-12 05:33:20.873 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-12 05:33:21.384 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-12 05:33:21.391 +03:00 [INF] Data seeding completed successfully.
2025-08-12 05:33:25.855 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-12 05:33:26.272 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-12 05:33:26.326 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-12 05:33:26.331 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-12 05:33:26.338 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-12 05:33:26.387 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-12 05:33:26.615 +03:00 [INF] Hosting environment: Development
2025-08-12 05:33:26.641 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-12 05:33:26.647 +03:00 [INF] Server mrrobot:21312:a573579a successfully announced in 186.2862 ms
2025-08-12 05:33:26.855 +03:00 [INF] Server mrrobot:21312:a573579a is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-12 05:33:27.912 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-12 05:33:29.427 +03:00 [INF] Server mrrobot:21312:a573579a all the dispatchers started
2025-08-12 05:33:29.642 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 1733.2352ms
2025-08-12 05:33:29.684 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-12 05:33:29.685 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-12 05:33:29.685 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-12 05:33:29.733 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 49.5308ms
2025-08-12 05:33:29.805 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 120.0436ms
2025-08-12 05:33:29.826 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 140.8954ms
2025-08-12 05:33:29.924 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-12 05:33:30.200 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 275.8072ms
2025-08-12 05:34:25.306 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/categories/1/images - multipart/form-data; boundary=----WebKitFormBoundaryFXxaMP24cofdJN0E 341502
2025-08-12 05:34:25.312 +03:00 [INF] CORS policy execution successful.
2025-08-12 05:34:25.315 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-12 05:34:27.454 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-12 05:34:27.729 +03:00 [INF] Executed DbCommand (121ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-12 05:34:27.756 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-12 05:34:27.787 +03:00 [INF] Route matched with {action = "AddImagesToCategoryAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]]] AddImagesToCategoryAsync(Int32, E_Commerce.DtoModels.CategoryDtos.AddImagesDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-12 05:34:28.190 +03:00 [INF] Executing AddImagesToCategoryAsync for id: 1
2025-08-12 05:34:28.194 +03:00 [INF] Executing AddImagesToCategoryAsync for categoryId: 1
2025-08-12 05:34:28.753 +03:00 [INF] Executed DbCommand (190ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL)
2025-08-12 05:34:28.761 +03:00 [INF] 📥 Saving 1 images to CategoryPhotos
2025-08-12 05:34:28.767 +03:00 [INF] 📥 Saving image to CategoryPhotos
2025-08-12 05:34:31.256 +03:00 [ERR] ❌ Error saving image: Failed to deserialize response with status code: NotFound
2025-08-12 05:34:32.317 +03:00 [ERR] ❌ Failed to save image #1: Error saving image: Failed to deserialize response with status code: NotFound
2025-08-12 05:34:32.319 +03:00 [WRN] Some images failed to save: Image #1: Error saving image: Failed to deserialize response with status code: NotFound
2025-08-12 05:34:32.464 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-12 05:34:32.546 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce) in 4739.0864ms
2025-08-12 05:34:32.555 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-12 05:34:32.561 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/categories/1/images - 400 1076 application/json; charset=utf-8 7255.3421ms
2025-08-12 05:35:13.476 +03:00 [INF] DB tables already exist. Exit install
2025-08-12 05:35:15.271 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-12 05:35:16.903 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-12 05:35:17.620 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-12 05:35:17.799 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-12 05:35:17.908 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-12 05:35:17.987 +03:00 [INF] Starting data seeding...
2025-08-12 05:35:18.062 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-12 05:35:19.008 +03:00 [INF] Executed DbCommand (134ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-12 05:35:19.198 +03:00 [INF] Role 'Admin' already exists.
2025-08-12 05:35:19.371 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-12 05:35:19.377 +03:00 [INF] Role 'User' already exists.
2025-08-12 05:35:19.684 +03:00 [INF] Executed DbCommand (136ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-12 05:35:19.974 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-12 05:35:19.977 +03:00 [INF] Data seeding completed successfully.
2025-08-12 05:35:22.137 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-12 05:35:22.747 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-12 05:35:23.156 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-12 05:35:23.161 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-12 05:35:23.179 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-12 05:35:23.188 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-12 05:35:23.307 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-12 05:35:23.310 +03:00 [INF] Hosting environment: Development
2025-08-12 05:35:23.365 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-12 05:35:23.479 +03:00 [INF] Server mrrobot:25404:c3f02575 successfully announced in 169.2427 ms
2025-08-12 05:35:23.526 +03:00 [INF] Server mrrobot:25404:c3f02575 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-12 05:35:24.674 +03:00 [INF] Server mrrobot:25404:c3f02575 all the dispatchers started
2025-08-12 05:35:24.744 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-12 05:35:24.795 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 1639.6891ms
2025-08-12 05:35:24.892 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-12 05:35:24.932 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-12 05:35:25.083 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 338.7897ms
2025-08-12 05:35:25.130 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 238.0303ms
2025-08-12 05:35:25.213 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 280.494ms
2025-08-12 05:35:25.494 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-12 05:35:25.814 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 319.7926ms
2025-08-12 05:36:06.911 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/categories/1/images - multipart/form-data; boundary=----WebKitFormBoundaryXZH2qqHFBbuQdWbW 20424
2025-08-12 05:36:06.922 +03:00 [INF] CORS policy execution successful.
2025-08-12 05:36:06.948 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-12 05:36:07.514 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-12 05:36:07.741 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-12 05:36:07.791 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-12 05:36:07.844 +03:00 [INF] Route matched with {action = "AddImagesToCategoryAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]]] AddImagesToCategoryAsync(Int32, E_Commerce.DtoModels.CategoryDtos.AddImagesDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-12 05:36:08.797 +03:00 [INF] Executing AddImagesToCategoryAsync for id: 1
2025-08-12 05:36:08.866 +03:00 [INF] Executing AddImagesToCategoryAsync for categoryId: 1
2025-08-12 05:36:09.241 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL)
2025-08-12 05:36:09.258 +03:00 [INF] 📥 Saving 1 images to CategoryPhotos
2025-08-12 05:36:09.278 +03:00 [INF] 📥 Saving image to CategoryPhotos
2025-08-12 05:36:10.670 +03:00 [ERR] ❌ Error saving image: Failed to deserialize response with status code: NotFound
2025-08-12 05:36:11.893 +03:00 [ERR] ❌ Failed to save image #1: Error saving image: Failed to deserialize response with status code: NotFound
2025-08-12 05:36:11.897 +03:00 [WRN] Some images failed to save: Image #1: Error saving image: Failed to deserialize response with status code: NotFound
2025-08-12 05:36:12.068 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-12 05:36:12.130 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce) in 4267.3768ms
2025-08-12 05:36:12.134 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-12 05:36:12.143 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/categories/1/images - 400 1076 application/json; charset=utf-8 5231.7578ms
2025-08-12 05:36:51.238 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/categories/1/images - multipart/form-data; boundary=----WebKitFormBoundaryBwWuY5kPcrblrDhA 20424
2025-08-12 05:36:51.250 +03:00 [INF] CORS policy execution successful.
2025-08-12 05:36:51.263 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-12 05:36:51.429 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-12 05:36:51.438 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-12 05:36:51.442 +03:00 [INF] Route matched with {action = "AddImagesToCategoryAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]]] AddImagesToCategoryAsync(Int32, E_Commerce.DtoModels.CategoryDtos.AddImagesDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-12 05:36:51.450 +03:00 [INF] Executing AddImagesToCategoryAsync for id: 1
2025-08-12 05:36:51.453 +03:00 [INF] Executing AddImagesToCategoryAsync for categoryId: 1
2025-08-12 05:36:51.787 +03:00 [INF] Executed DbCommand (89ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL)
2025-08-12 05:36:51.794 +03:00 [INF] 📥 Saving 1 images to CategoryPhotos
2025-08-12 05:36:51.796 +03:00 [INF] 📥 Saving image to CategoryPhotos
2025-08-12 05:36:52.230 +03:00 [ERR] ❌ Error saving image: Failed to deserialize response with status code: NotFound
2025-08-12 05:36:53.170 +03:00 [ERR] ❌ Failed to save image #1: Error saving image: Failed to deserialize response with status code: NotFound
2025-08-12 05:36:53.174 +03:00 [WRN] Some images failed to save: Image #1: Error saving image: Failed to deserialize response with status code: NotFound
2025-08-12 05:36:53.265 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-12 05:36:53.268 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce) in 1822.2496ms
2025-08-12 05:36:53.278 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-12 05:36:53.280 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/categories/1/images - 400 1076 application/json; charset=utf-8 2042.1239ms
2025-08-12 05:37:36.787 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/categories/1/images - multipart/form-data; boundary=----WebKitFormBoundaryoLRhn27hUsLglCZb 20424
2025-08-12 05:37:36.794 +03:00 [INF] CORS policy execution successful.
2025-08-12 05:37:36.798 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-12 05:37:36.956 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-12 05:37:36.977 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-12 05:37:36.980 +03:00 [INF] Route matched with {action = "AddImagesToCategoryAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]]] AddImagesToCategoryAsync(Int32, E_Commerce.DtoModels.CategoryDtos.AddImagesDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-12 05:37:36.997 +03:00 [INF] Executing AddImagesToCategoryAsync for id: 1
2025-08-12 05:37:37.000 +03:00 [INF] Executing AddImagesToCategoryAsync for categoryId: 1
2025-08-12 05:37:37.310 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL)
2025-08-12 05:37:37.318 +03:00 [INF] 📥 Saving 1 images to CategoryPhotos
2025-08-12 05:37:37.323 +03:00 [INF] 📥 Saving image to CategoryPhotos
2025-08-12 05:39:28.783 +03:00 [ERR] ❌ Error saving image: Failed to deserialize response with status code: NotFound
2025-08-12 05:39:29.733 +03:00 [ERR] ❌ Failed to save image #1: Error saving image: Failed to deserialize response with status code: NotFound
2025-08-12 05:39:29.736 +03:00 [WRN] Some images failed to save: Image #1: Error saving image: Failed to deserialize response with status code: NotFound
2025-08-12 05:39:29.819 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-12 05:39:29.821 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce) in 112838.0606ms
2025-08-12 05:39:29.980 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-12 05:39:29.989 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/categories/1/images - 400 1076 application/json; charset=utf-8 113202.0145ms
2025-08-12 05:40:12.183 +03:00 [INF] DB tables already exist. Exit install
2025-08-12 05:40:14.058 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-12 05:40:15.457 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-12 05:40:16.169 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-12 05:40:16.347 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-12 05:40:16.366 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-12 05:40:16.390 +03:00 [INF] Starting data seeding...
2025-08-12 05:40:16.416 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-12 05:40:16.901 +03:00 [INF] Executed DbCommand (110ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-12 05:40:16.965 +03:00 [INF] Role 'Admin' already exists.
2025-08-12 05:40:17.122 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-12 05:40:17.129 +03:00 [INF] Role 'User' already exists.
2025-08-12 05:40:17.309 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-12 05:40:17.395 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-12 05:40:17.399 +03:00 [INF] Data seeding completed successfully.
2025-08-12 05:40:19.116 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-12 05:40:19.348 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-12 05:40:19.371 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-12 05:40:19.381 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-12 05:40:19.433 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-12 05:40:19.447 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-12 05:40:19.452 +03:00 [INF] Hosting environment: Development
2025-08-12 05:40:19.453 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-12 05:40:19.619 +03:00 [INF] Server mrrobot:13096:47d7fbfb successfully announced in 160.8087 ms
2025-08-12 05:40:19.667 +03:00 [INF] Server mrrobot:13096:47d7fbfb is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-12 05:40:20.585 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-12 05:40:20.605 +03:00 [INF] 1 servers were removed due to timeout
2025-08-12 05:40:21.002 +03:00 [INF] Server mrrobot:13096:47d7fbfb all the dispatchers started
2025-08-12 05:40:21.313 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 729.722ms
2025-08-12 05:40:21.352 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-12 05:40:21.366 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-12 05:40:21.406 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-12 05:40:21.417 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 65.119ms
2025-08-12 05:40:21.481 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 75.1895ms
2025-08-12 05:40:21.599 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 233.6589ms
2025-08-12 05:40:21.823 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-12 05:40:22.290 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 466.7818ms
2025-08-12 05:41:04.406 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/categories/1/images/main - multipart/form-data; boundary=----WebKitFormBoundarynYIikmEnUbCv9pi1 20423
2025-08-12 05:41:04.450 +03:00 [INF] CORS policy execution successful.
2025-08-12 05:41:04.455 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-12 05:41:04.686 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-12 05:41:04.932 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-12 05:41:04.949 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.AddMainImageAsync (E-Commerce)'
2025-08-12 05:41:04.987 +03:00 [INF] Route matched with {action = "AddMainImageAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]] AddMainImageAsync(Int32, E_Commerce.DtoModels.CategoryDtos.AddMainImageDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-12 05:41:05.323 +03:00 [INF] Executing AddMainImageAsync for id: 1
2025-08-12 05:41:05.330 +03:00 [INF] Executing AddMainImageToCategoryAsync for categoryId: 1
2025-08-12 05:41:05.775 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL)
2025-08-12 05:41:05.786 +03:00 [INF] 📥 Saving main image to CategoryPhotos
2025-08-12 05:41:07.063 +03:00 [ERR] ❌ Error saving main image: Failed to deserialize response with status code: NotFound
2025-08-12 05:41:08.649 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-12 05:41:08.680 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.AddMainImageAsync (E-Commerce) in 3675.3452ms
2025-08-12 05:41:08.687 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.AddMainImageAsync (E-Commerce)'
2025-08-12 05:41:08.696 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/categories/1/images/main - 500 1238 application/json; charset=utf-8 4289.8503ms
2025-08-12 05:47:12.350 +03:00 [INF] DB tables already exist. Exit install
2025-08-12 05:47:13.588 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-12 05:47:14.946 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-12 05:47:15.646 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-12 05:47:15.822 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-12 05:47:15.870 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-12 05:47:15.893 +03:00 [INF] Starting data seeding...
2025-08-12 05:47:15.916 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-12 05:47:16.405 +03:00 [INF] Executed DbCommand (115ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-12 05:47:16.468 +03:00 [INF] Role 'Admin' already exists.
2025-08-12 05:47:16.625 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-12 05:47:16.631 +03:00 [INF] Role 'User' already exists.
2025-08-12 05:47:16.801 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-12 05:47:16.890 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-12 05:47:16.893 +03:00 [INF] Data seeding completed successfully.
2025-08-12 05:47:18.158 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-12 05:47:18.291 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-12 05:47:18.390 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-12 05:47:18.393 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-12 05:47:18.559 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-12 05:47:18.656 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-12 05:47:18.679 +03:00 [INF] Hosting environment: Development
2025-08-12 05:47:18.684 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-12 05:47:18.857 +03:00 [INF] Server mrrobot:24756:eeefc8b0 successfully announced in 195.3571 ms
2025-08-12 05:47:18.900 +03:00 [INF] Server mrrobot:24756:eeefc8b0 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-12 05:47:18.947 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-12 05:47:19.057 +03:00 [INF] Server mrrobot:24756:eeefc8b0 all the dispatchers started
2025-08-12 05:47:19.102 +03:00 [INF] 1 servers were removed due to timeout
2025-08-12 05:47:19.327 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 383.0604ms
2025-08-12 05:47:19.396 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-12 05:47:19.418 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 21.7829ms
2025-08-12 05:47:19.425 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-12 05:47:19.431 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-12 05:47:19.439 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 7.3689ms
2025-08-12 05:47:19.471 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 46.3516ms
2025-08-12 05:47:20.633 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-12 05:47:20.842 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 208.6554ms
2025-08-12 05:48:17.582 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/categories/1/images - multipart/form-data; boundary=----WebKitFormBoundary5udlLogUzTj71IB2 20424
2025-08-12 05:48:17.587 +03:00 [INF] CORS policy execution successful.
2025-08-12 05:48:17.620 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-12 05:48:17.785 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-12 05:48:18.348 +03:00 [INF] Executed DbCommand (205ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-12 05:48:18.396 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-12 05:48:18.432 +03:00 [INF] Route matched with {action = "AddImagesToCategoryAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]]] AddImagesToCategoryAsync(Int32, E_Commerce.DtoModels.CategoryDtos.AddImagesDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-12 05:48:18.757 +03:00 [INF] Executing AddImagesToCategoryAsync for id: 1
2025-08-12 05:48:18.764 +03:00 [INF] Executing AddImagesToCategoryAsync for categoryId: 1
2025-08-12 05:48:19.575 +03:00 [INF] Executed DbCommand (193ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL)
2025-08-12 05:48:19.593 +03:00 [INF] 📥 Saving 1 images to CategoryPhotos
2025-08-12 05:48:19.599 +03:00 [INF] 📥 Saving image to CategoryPhotos
2025-08-12 05:48:20.762 +03:00 [ERR] ❌ Error saving image: Failed to deserialize response with status code: NotFound
2025-08-12 05:48:21.821 +03:00 [ERR] ❌ Failed to save image #1: Error saving image: Failed to deserialize response with status code: NotFound
2025-08-12 05:48:21.831 +03:00 [WRN] Some images failed to save: Image #1: Error saving image: Failed to deserialize response with status code: NotFound
2025-08-12 05:48:21.978 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-12 05:48:22.011 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce) in 3558.5774ms
2025-08-12 05:48:22.016 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-12 05:48:22.021 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/categories/1/images - 400 1076 application/json; charset=utf-8 4439.341ms
2025-08-12 05:49:24.805 +03:00 [INF] DB tables already exist. Exit install
2025-08-12 05:49:26.777 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-12 05:49:28.231 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-12 05:49:28.955 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-12 05:49:29.145 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-12 05:49:29.168 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-12 05:49:29.204 +03:00 [INF] Starting data seeding...
2025-08-12 05:49:29.239 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-12 05:49:29.838 +03:00 [INF] Executed DbCommand (119ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-12 05:49:29.938 +03:00 [INF] Role 'Admin' already exists.
2025-08-12 05:49:30.099 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-12 05:49:30.118 +03:00 [INF] Role 'User' already exists.
2025-08-12 05:49:30.349 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-12 05:49:30.488 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-12 05:49:30.490 +03:00 [INF] Data seeding completed successfully.
2025-08-12 05:49:33.259 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-12 05:49:34.309 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-12 05:49:34.654 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-12 05:49:34.754 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-12 05:49:34.756 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-12 05:49:34.764 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-12 05:49:34.823 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-12 05:49:34.863 +03:00 [INF] Hosting environment: Development
2025-08-12 05:49:34.865 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-12 05:49:35.048 +03:00 [INF] Server mrrobot:15200:d2b0322b successfully announced in 187.3013 ms
2025-08-12 05:49:35.150 +03:00 [INF] Server mrrobot:15200:d2b0322b is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-12 05:49:35.474 +03:00 [INF] 1 servers were removed due to timeout
2025-08-12 05:49:36.055 +03:00 [INF] Server mrrobot:15200:d2b0322b all the dispatchers started
2025-08-12 05:49:36.179 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-12 05:49:36.183 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 2002.2737ms
2025-08-12 05:49:36.219 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-12 05:49:36.232 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-12 05:49:36.269 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 89.3623ms
2025-08-12 05:49:36.603 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 424.0093ms
2025-08-12 05:49:36.891 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 664.1307ms
2025-08-12 05:49:36.961 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-12 05:49:37.410 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 449.2966ms
2025-08-12 05:50:15.398 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/categories/1/images - multipart/form-data; boundary=----WebKitFormBoundarysTiMOth6oniyt9oR 20424
2025-08-12 05:50:15.466 +03:00 [INF] CORS policy execution successful.
2025-08-12 05:50:15.473 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-12 05:50:15.918 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-12 05:50:16.203 +03:00 [INF] Executed DbCommand (88ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-12 05:50:16.252 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-12 05:50:16.298 +03:00 [INF] Route matched with {action = "AddImagesToCategoryAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]]] AddImagesToCategoryAsync(Int32, E_Commerce.DtoModels.CategoryDtos.AddImagesDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-12 05:50:44.738 +03:00 [INF] Executing AddImagesToCategoryAsync for id: 1
2025-08-12 05:50:44.743 +03:00 [INF] Executing AddImagesToCategoryAsync for categoryId: 1
2025-08-12 05:50:45.094 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL)
2025-08-12 05:50:45.103 +03:00 [INF] 📥 Saving 1 images to CategoryPhotos
2025-08-12 05:50:45.110 +03:00 [INF] 📥 Saving image to CategoryPhotos
2025-08-12 05:50:47.496 +03:00 [WRN] Failed to process the job '20': an exception occurred. Retry attempt 8 of 10 will be performed in 00:42:00.
Newtonsoft.Json.JsonSerializationException: Error converting value "d1c4400e-e5cc-4af0-919e-8b1fded727fe" to type 'StackExchange.Redis.RedisValue'. Path '', line 1, position 38.
 ---> System.InvalidCastException: Invalid cast from 'System.String' to 'StackExchange.Redis.RedisValue'.
   at System.Convert.DefaultToType(IConvertible value, Type targetType, IFormatProvider provider)
   at System.Convert.ChangeType(Object value, Type conversionType, IFormatProvider provider)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.EnsureType(JsonReader reader, Object value, CultureInfo culture, JsonContract contract, Type targetType)
   --- End of inner exception stack trace ---
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.EnsureType(JsonReader reader, Object value, CultureInfo culture, JsonContract contract, Type targetType)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.Deserialize(JsonReader reader, Type objectType, Boolean checkAdditionalContent)
   at Newtonsoft.Json.JsonSerializer.DeserializeInternal(JsonReader reader, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Deserialize(JsonReader reader, Type objectType)
   at Newtonsoft.Json.JsonConvert.DeserializeObject(String value, Type type, JsonSerializerSettings settings)
   at Hangfire.Common.SerializationHelper.Deserialize(String value, Type type, SerializationOption option) in C:\projects\hangfire-525\src\Hangfire.Core\Common\SerializationHelper.cs:line 177
   at Hangfire.Storage.InvocationData.DeserializeArgument(String argument, Type type) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 366
--- End of stack trace from previous location ---
   at Hangfire.Storage.InvocationData.DeserializeArgument(String argument, Type type) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 400
   at Hangfire.Storage.InvocationData.DeserializeArguments(MethodInfo methodInfo, String[] arguments) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 300
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 107
2025-08-12 05:50:48.372 +03:00 [ERR] ❌ Error saving image: Failed to deserialize response with status code: NotFound
2025-08-12 05:50:49.343 +03:00 [ERR] ❌ Failed to save image #1: Error saving image: Failed to deserialize response with status code: NotFound
2025-08-12 05:50:49.345 +03:00 [WRN] Some images failed to save: Image #1: Error saving image: Failed to deserialize response with status code: NotFound
2025-08-12 05:50:49.498 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-12 05:50:49.557 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce) in 33251.4699ms
2025-08-12 05:50:49.561 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-12 05:50:49.573 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/categories/1/images - 400 1076 application/json; charset=utf-8 34175.0244ms
2025-08-12 05:51:46.932 +03:00 [INF] DB tables already exist. Exit install
2025-08-12 05:51:48.206 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-12 05:51:49.577 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-12 05:51:50.284 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-12 05:51:50.469 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-12 05:51:50.488 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-12 05:51:50.509 +03:00 [INF] Starting data seeding...
2025-08-12 05:51:50.535 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-12 05:51:51.181 +03:00 [INF] Executed DbCommand (127ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-12 05:51:51.254 +03:00 [INF] Role 'Admin' already exists.
2025-08-12 05:51:51.430 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-12 05:51:51.453 +03:00 [INF] Role 'User' already exists.
2025-08-12 05:51:51.625 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-12 05:51:51.813 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-12 05:51:51.815 +03:00 [INF] Data seeding completed successfully.
2025-08-12 05:51:53.108 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-12 05:51:53.246 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-12 05:51:53.248 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-12 05:51:53.252 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-12 05:51:53.253 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-12 05:51:53.273 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-12 05:51:53.275 +03:00 [INF] Hosting environment: Development
2025-08-12 05:51:53.276 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-12 05:51:53.435 +03:00 [INF] Server mrrobot:3604:530a0e39 successfully announced in 159.0302 ms
2025-08-12 05:51:53.443 +03:00 [INF] Server mrrobot:3604:530a0e39 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-12 05:51:53.492 +03:00 [INF] Server mrrobot:3604:530a0e39 all the dispatchers started
2025-08-12 05:51:53.868 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-12 05:51:54.347 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 481.9329ms
2025-08-12 05:51:54.514 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-12 05:51:54.759 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-12 05:51:55.187 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-12 05:51:55.200 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 685.0804ms
2025-08-12 05:51:55.229 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 42.0505ms
2025-08-12 05:51:55.280 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 521.2586ms
2025-08-12 05:51:55.349 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-12 05:51:55.631 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 281.2865ms
2025-08-12 05:52:18.648 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Products/1/images - multipart/form-data; boundary=----WebKitFormBoundaryqTreVPXYTh32kU0n 20424
2025-08-12 05:52:18.655 +03:00 [INF] CORS policy execution successful.
2025-08-12 05:52:18.674 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-12 05:52:18.894 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-12 05:52:19.133 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-12 05:52:19.153 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.AddProductImages (E-Commerce)'
2025-08-12 05:52:19.190 +03:00 [INF] Route matched with {action = "AddProductImages", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]]] AddProductImages(Int32, System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-08-12 05:52:19.575 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.AddProductImages (E-Commerce) in 377.9202ms
2025-08-12 05:52:19.579 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.AddProductImages (E-Commerce)'
2025-08-12 05:52:19.584 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Cloud name must be specified in Account!
   at CloudinaryDotNet.ApiShared..ctor(Account account)
   at CloudinaryDotNet.Api..ctor(Account account)
   at CloudinaryDotNet.Cloudinary..ctor(Account account)
   at E_Commerce.Program.<>c__DisplayClass0_0.<Main>b__3(IServiceProvider sp) in D:\project_fashion\E-Commerce-API-main\Program.cs:line 185
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method282(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at SecurityStampMiddleware.Invoke(HttpContext context) in D:\project_fashion\E-Commerce-API-main\MiddleWares\SecurityStampMiddleware.cs:line 75
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context) in D:\project_fashion\E-Commerce-API-main\Middleware\UserAuthenticationMiddleware.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-12 05:52:19.659 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Products/1/images - 500 null text/plain; charset=utf-8 1011.2947ms
2025-08-12 05:52:58.814 +03:00 [INF] DB tables already exist. Exit install
2025-08-12 05:53:01.142 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-12 05:53:02.717 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-12 05:53:03.430 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-12 05:53:03.613 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-12 05:53:03.635 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-12 05:53:03.662 +03:00 [INF] Starting data seeding...
2025-08-12 05:53:03.696 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-12 05:53:04.327 +03:00 [INF] Executed DbCommand (140ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-12 05:53:04.393 +03:00 [INF] Role 'Admin' already exists.
2025-08-12 05:53:04.553 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-12 05:53:04.560 +03:00 [INF] Role 'User' already exists.
2025-08-12 05:53:04.738 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-12 05:53:04.858 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-12 05:53:04.863 +03:00 [INF] Data seeding completed successfully.
2025-08-12 05:53:06.862 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-12 05:53:07.615 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-12 05:53:08.007 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-12 05:53:08.050 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-12 05:53:08.058 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-12 05:53:08.073 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-12 05:53:08.222 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-12 05:53:08.329 +03:00 [INF] Hosting environment: Development
2025-08-12 05:53:08.505 +03:00 [INF] Server mrrobot:15300:4a73b136 successfully announced in 177.2312 ms
2025-08-12 05:53:08.595 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-12 05:53:08.612 +03:00 [INF] Server mrrobot:15300:4a73b136 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-12 05:53:09.707 +03:00 [INF] Server mrrobot:15300:4a73b136 all the dispatchers started
2025-08-12 05:53:10.026 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-12 05:53:10.028 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-12 05:53:10.038 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-12 05:53:10.060 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 2065.7065ms
2025-08-12 05:53:10.143 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 117.0242ms
2025-08-12 05:53:10.157 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 128.9434ms
2025-08-12 05:53:10.277 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 238.8959ms
2025-08-12 05:53:10.476 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-12 05:53:10.833 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 357.4016ms
2025-08-12 05:53:38.081 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/categories/1/images/main - multipart/form-data; boundary=----WebKitFormBoundarynwalulB3A3HAaT4f 20423
2025-08-12 05:53:38.114 +03:00 [INF] CORS policy execution successful.
2025-08-12 05:53:38.162 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-12 05:53:38.644 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-12 05:53:39.270 +03:00 [INF] Executed DbCommand (203ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-12 05:53:39.306 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.AddMainImageAsync (E-Commerce)'
2025-08-12 05:53:39.342 +03:00 [INF] Route matched with {action = "AddMainImageAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]] AddMainImageAsync(Int32, E_Commerce.DtoModels.CategoryDtos.AddMainImageDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-12 05:54:09.397 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.AddMainImageAsync (E-Commerce) in 30044.0087ms
2025-08-12 05:54:09.407 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.AddMainImageAsync (E-Commerce)'
2025-08-12 05:54:11.551 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Cloud name must be specified in Account!
   at CloudinaryDotNet.ApiShared..ctor(Account account)
   at CloudinaryDotNet.Api..ctor(Account account)
   at CloudinaryDotNet.Cloudinary..ctor(Account account)
   at E_Commerce.Program.<>c__DisplayClass0_0.<Main>b__3(IServiceProvider sp) in D:\project_fashion\E-Commerce-API-main\Program.cs:line 185
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method282(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at SecurityStampMiddleware.Invoke(HttpContext context) in D:\project_fashion\E-Commerce-API-main\MiddleWares\SecurityStampMiddleware.cs:line 75
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context) in D:\project_fashion\E-Commerce-API-main\Middleware\UserAuthenticationMiddleware.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-12 05:54:11.669 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/categories/1/images/main - 500 null text/plain; charset=utf-8 33588.9491ms
2025-08-12 05:54:40.794 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/categories/1/images/main - multipart/form-data; boundary=----WebKitFormBoundaryJvet858RWNxisj1a 20423
2025-08-12 05:54:40.914 +03:00 [INF] CORS policy execution successful.
2025-08-12 05:54:40.955 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-12 05:54:41.323 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-12 05:54:41.480 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.AddMainImageAsync (E-Commerce)'
2025-08-12 05:54:41.493 +03:00 [INF] Route matched with {action = "AddMainImageAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]] AddMainImageAsync(Int32, E_Commerce.DtoModels.CategoryDtos.AddMainImageDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-12 05:55:07.261 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.AddMainImageAsync (E-Commerce) in 25764.5251ms
2025-08-12 05:55:07.272 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.AddMainImageAsync (E-Commerce)'
2025-08-12 05:55:14.124 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Cloud name must be specified in Account!
   at CloudinaryDotNet.ApiShared..ctor(Account account)
   at CloudinaryDotNet.Api..ctor(Account account)
   at CloudinaryDotNet.Cloudinary..ctor(Account account)
   at E_Commerce.Program.<>c__DisplayClass0_0.<Main>b__3(IServiceProvider sp) in D:\project_fashion\E-Commerce-API-main\Program.cs:line 185
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method282(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at SecurityStampMiddleware.Invoke(HttpContext context) in D:\project_fashion\E-Commerce-API-main\MiddleWares\SecurityStampMiddleware.cs:line 75
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context) in D:\project_fashion\E-Commerce-API-main\Middleware\UserAuthenticationMiddleware.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-12 05:55:14.158 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/categories/1/images/main - 500 null text/plain; charset=utf-8 33364.8142ms
2025-08-12 05:55:19.071 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/categories/1/images/main - multipart/form-data; boundary=----WebKitFormBoundaryFvioZju3SZ7FiBXL 20423
2025-08-12 05:55:19.077 +03:00 [INF] CORS policy execution successful.
2025-08-12 05:55:19.083 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-12 05:55:19.300 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-12 05:55:19.316 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.AddMainImageAsync (E-Commerce)'
2025-08-12 05:55:19.321 +03:00 [INF] Route matched with {action = "AddMainImageAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]] AddMainImageAsync(Int32, E_Commerce.DtoModels.CategoryDtos.AddMainImageDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-12 05:55:26.203 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.AddMainImageAsync (E-Commerce) in 6877.7469ms
2025-08-12 05:55:26.207 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.AddMainImageAsync (E-Commerce)'
2025-08-12 05:55:28.207 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Cloud name must be specified in Account!
   at CloudinaryDotNet.ApiShared..ctor(Account account)
   at CloudinaryDotNet.Api..ctor(Account account)
   at CloudinaryDotNet.Cloudinary..ctor(Account account)
   at E_Commerce.Program.<>c__DisplayClass0_0.<Main>b__3(IServiceProvider sp) in D:\project_fashion\E-Commerce-API-main\Program.cs:line 185
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method282(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at SecurityStampMiddleware.Invoke(HttpContext context) in D:\project_fashion\E-Commerce-API-main\MiddleWares\SecurityStampMiddleware.cs:line 75
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context) in D:\project_fashion\E-Commerce-API-main\Middleware\UserAuthenticationMiddleware.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-12 05:55:28.341 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/categories/1/images/main - 500 null text/plain; charset=utf-8 9269.5679ms
2025-08-12 05:56:24.853 +03:00 [INF] DB tables already exist. Exit install
2025-08-12 05:56:26.261 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-12 05:56:27.673 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-12 05:56:28.381 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-12 05:56:28.555 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-12 05:56:28.574 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-12 05:56:28.587 +03:00 [INF] Starting data seeding...
2025-08-12 05:56:28.613 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-12 05:56:29.125 +03:00 [INF] Executed DbCommand (118ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-12 05:56:29.200 +03:00 [INF] Role 'Admin' already exists.
2025-08-12 05:56:29.357 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-12 05:56:29.364 +03:00 [INF] Role 'User' already exists.
2025-08-12 05:56:29.551 +03:00 [INF] Executed DbCommand (92ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-12 05:56:29.647 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-12 05:56:29.650 +03:00 [INF] Data seeding completed successfully.
2025-08-12 05:56:30.967 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-12 05:56:31.120 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-12 05:56:31.126 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-12 05:56:31.128 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-12 05:56:31.129 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-12 05:56:31.160 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-12 05:56:31.304 +03:00 [INF] Hosting environment: Development
2025-08-12 05:56:31.345 +03:00 [INF] Server mrrobot:23948:55de93d0 successfully announced in 177.6709 ms
2025-08-12 05:56:31.660 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-12 05:56:31.670 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-12 05:56:31.676 +03:00 [INF] Server mrrobot:23948:55de93d0 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-12 05:56:31.839 +03:00 [INF] 2 servers were removed due to timeout
2025-08-12 05:56:31.901 +03:00 [INF] Server mrrobot:23948:55de93d0 all the dispatchers started
2025-08-12 05:56:32.243 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 509.1102ms
2025-08-12 05:56:32.244 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-12 05:56:32.251 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-12 05:56:32.275 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-12 05:56:32.279 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 34.9898ms
2025-08-12 05:56:32.384 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 132.7923ms
2025-08-12 05:56:32.399 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 123.8552ms
2025-08-12 05:56:32.660 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-12 05:56:33.030 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 369.9513ms
2025-08-12 05:56:57.599 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/categories/1/images - multipart/form-data; boundary=----WebKitFormBoundaryS8iL5HL4qwoPZcaT 20424
2025-08-12 05:56:57.629 +03:00 [INF] CORS policy execution successful.
2025-08-12 05:56:57.631 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-12 05:56:57.816 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-12 05:56:58.275 +03:00 [INF] Executed DbCommand (139ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-12 05:56:58.300 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-12 05:56:58.336 +03:00 [INF] Route matched with {action = "AddImagesToCategoryAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]]] AddImagesToCategoryAsync(Int32, E_Commerce.DtoModels.CategoryDtos.AddImagesDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-12 05:56:58.768 +03:00 [INF] Executing AddImagesToCategoryAsync for id: 1
2025-08-12 05:56:58.774 +03:00 [INF] Executing AddImagesToCategoryAsync for categoryId: 1
2025-08-12 05:56:59.364 +03:00 [INF] Executed DbCommand (115ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL)
2025-08-12 05:56:59.375 +03:00 [INF] 📥 Saving 1 images to CategoryPhotos
2025-08-12 05:56:59.381 +03:00 [INF] 📥 Saving image to CategoryPhotos
2025-08-12 05:57:00.899 +03:00 [INF] Executing CreateAsync for entity Image
2025-08-12 05:57:01.013 +03:00 [INF] Image added successfully (pending save)
2025-08-12 05:57:01.327 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int64), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime), @p16='?' (Size = 4000), @p17='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `CustomerId`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-12 05:57:01.448 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-12 05:57:01.452 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-12 05:57:01.481 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-12 05:57:01.486 +03:00 [INF] ✅ Image saved: https://res.cloudinary.com/dud4kxeix/image/upload/v1754967421/CategoryPhotos/5d41719b-b57c-4533-8033-eeca4b4d4192.webp
2025-08-12 05:57:01.491 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-12 05:57:01.496 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-12 05:57:01.500 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-12 05:57:01.693 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime), @p8='?' (Size = 255), @p9='?' (DbType = DateTime), @p10='?' (DbType = DateTime), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-12 05:57:02.945 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-12 05:57:02.978 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce) in 4628.108ms
2025-08-12 05:57:02.981 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-12 05:57:02.991 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/categories/1/images - 200 1135 application/json; charset=utf-8 5391.5921ms
2025-08-12 05:57:04.793 +03:00 [INF] Removing cache by tags: [category, categorywithdata]
2025-08-12 05:57:04.808 +03:00 [WRN] No cache entries found for tags: [category, categorywithdata]
