2025-09-20 04:15:47.526 +03:00 [INF] DB tables already exist. Exit install
2025-09-20 04:15:49.959 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-20 04:15:51.010 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-20 04:15:51.670 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-20 04:15:51.854 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-09-20 04:15:51.895 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-20 04:15:51.924 +03:00 [INF] Starting data seeding...
2025-09-20 04:15:51.973 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-20 04:15:52.573 +03:00 [INF] Executed DbCommand (124ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-20 04:15:52.651 +03:00 [INF] Role 'Admin' already exists.
2025-09-20 04:15:52.797 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-20 04:15:52.807 +03:00 [INF] Role 'User' already exists.
2025-09-20 04:15:53.009 +03:00 [INF] Executed DbCommand (101ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-20 04:15:53.110 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-09-20 04:15:53.115 +03:00 [INF] Data seeding completed successfully.
2025-09-20 04:15:55.040 +03:00 [INF] Now listening on: http://localhost:5069
2025-09-20 04:15:55.173 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-09-20 04:15:55.180 +03:00 [INF] Using the following options for SQL Server job storage:
2025-09-20 04:15:55.262 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-09-20 04:15:55.264 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-09-20 04:15:55.329 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 04:15:55.392 +03:00 [INF] Hosting environment: Development
2025-09-20 04:15:55.395 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-09-20 04:15:55.536 +03:00 [INF] Server mrrobot:19396:329658c0 successfully announced in 173.9233 ms
2025-09-20 04:15:55.549 +03:00 [INF] Server mrrobot:19396:329658c0 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-09-20 04:15:55.835 +03:00 [INF] Server mrrobot:19396:329658c0 all the dispatchers started
2025-09-20 04:15:56.263 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger - null null
2025-09-20 04:15:56.748 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger - 301 0 null 487.2633ms
2025-09-20 04:15:56.804 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-09-20 04:15:56.948 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 144.114ms
2025-09-20 04:15:56.978 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/swagger-ui-bundle.js - null null
2025-09-20 04:15:56.985 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/swagger-ui.css - null null
2025-09-20 04:15:56.971 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.css - null null
2025-09-20 04:15:56.968 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/swagger-ui-standalone-preset.js - null null
2025-09-20 04:15:56.982 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-09-20 04:15:57.029 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-20 04:15:57.037 +03:00 [INF] Sending file. Request path: '/index.css'. Physical path: 'N/A'
2025-09-20 04:15:57.062 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.css - 200 202 text/css 90.9938ms
2025-09-20 04:15:57.060 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 30.9088ms
2025-09-20 04:15:57.053 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 70.9025ms
2025-09-20 04:15:57.071 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-09-20 04:15:57.079 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-20 04:15:57.102 +03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-09-20 04:15:57.129 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/swagger-ui.css - 200 154948 text/css 144.2298ms
2025-09-20 04:15:57.156 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/swagger-ui-standalone-preset.js - 200 229223 text/javascript 188.2386ms
2025-09-20 04:15:57.161 +03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-09-20 04:15:57.252 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/swagger-ui-bundle.js - 200 1466324 text/javascript 273.5164ms
2025-09-20 04:15:57.332 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 252.5766ms
2025-09-20 04:15:57.409 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-09-20 04:15:57.465 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/favicon-32x32.png - null null
2025-09-20 04:15:57.531 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-09-20 04:15:57.540 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/favicon-32x32.png - 200 628 image/png 74.9175ms
2025-09-20 04:15:57.719 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 310.1226ms
2025-09-20 04:16:08.736 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE `c`.`DeletedAt` IS NOT NULL
2025-09-20 04:18:05.165 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Account/login - application/json-patch+json 70
2025-09-20 04:18:05.175 +03:00 [INF] CORS policy execution successful.
2025-09-20 04:18:05.180 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-20 04:18:05.435 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-20 04:18:05.462 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-09-20 04:18:05.519 +03:00 [INF] Route matched with {action = "LoginAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.TokenDtos.TokensDto]]] LoginAsync(E_Commerce.DtoModels.AccountDtos.LoginDTo) on controller E_Commerce.Controllers.AccountController (E-Commerce).
2025-09-20 04:18:06.062 +03:00 [INF] In LoginAsync Method 
2025-09-20 04:18:06.215 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-20 04:18:06.372 +03:00 [INF] 🔐 Generating Access Token for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-20 04:18:06.376 +03:00 [INF] 🔐 Generating Access Token for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-20 04:18:06.540 +03:00 [INF] Executed DbCommand (71ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedUserName` = @__normalizedUserName_0)
LIMIT 1
2025-09-20 04:18:06.697 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-20 04:18:07.084 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@p22='?' (Size = 255), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p23='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 256), @p15='?' (Size = 256), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `AspNetUsers` SET `AccessFailedCount` = @p0, `Age` = @p1, `ConcurrencyStamp` = @p2, `CreateAt` = @p3, `DeletedAt` = @p4, `Email` = @p5, `EmailConfirmed` = @p6, `Gender` = @p7, `ImageId` = @p8, `ImageId1` = @p9, `LastVisit` = @p10, `LockoutEnabled` = @p11, `LockoutEnd` = @p12, `Name` = @p13, `NormalizedEmail` = @p14, `NormalizedUserName` = @p15, `PasswordHash` = @p16, `PhoneNumber` = @p17, `PhoneNumberConfirmed` = @p18, `SecurityStamp` = @p19, `TwoFactorEnabled` = @p20, `UserName` = @p21
WHERE `Id` = @p22 AND `ConcurrencyStamp` = @p23;
SELECT ROW_COUNT();
2025-09-20 04:18:07.325 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-09-20 04:18:07.402 +03:00 [INF] ✅ Access Token generated successfully for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-20 04:18:07.411 +03:00 [INF] 🔑 Generating Refresh Token for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-20 04:18:07.640 +03:00 [INF] ✅ RefreshToken generated and stored for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-20 04:18:07.686 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.TokenDtos.TokensDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-20 04:18:07.726 +03:00 [INF] Executed action E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce) in 2182.8826ms
2025-09-20 04:18:07.732 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-09-20 04:18:07.744 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Account/login - 200 1251 application/json; charset=utf-8 2579.6851ms
2025-09-20 04:18:43.516 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products?page=1&pageSize=10 - null null
2025-09-20 04:18:43.535 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-20 04:18:43.599 +03:00 [INF] No cached response available for this request.
2025-09-20 04:18:43.602 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProducts (E-Commerce)'
2025-09-20 04:18:43.613 +03:00 [INF] Route matched with {action = "GetProducts", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] GetProducts(System.String, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-20 04:18:43.649 +03:00 [INF] Executing GetProducts
2025-09-20 04:18:43.675 +03:00 [INF] Getting cache for key: Product:list_active:True_deleted:False_search:advsearch_{"SearchTerm":null,"Subcategoryid":null,"Gender":null,"FitType":null,"MinPrice":null,"MaxPrice":null,"InStock":null,"OnSale":null,"SortBy":null,"SortDescending":false,"Color":null,"MinSize":null,"MaxSize":null}_1_10_True_False_pageSize:10_page:1_tag:AdvancedSearch_IsAdmin:False
2025-09-20 04:18:43.899 +03:00 [WRN] Cache miss for key: Product:list_active:True_deleted:False_search:advsearch_{"SearchTerm":null,"Subcategoryid":null,"Gender":null,"FitType":null,"MinPrice":null,"MaxPrice":null,"InStock":null,"OnSale":null,"SortBy":null,"SortDescending":false,"Color":null,"MinSize":null,"MaxSize":null}_1_10_True_False_pageSize:10_page:1_tag:AdvancedSearch_IsAdmin:False
2025-09-20 04:18:43.915 +03:00 [INF] Execute GetAll for entity Product
2025-09-20 04:18:44.196 +03:00 [INF] Executed DbCommand (88ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`SubCategoryId`, `t`.`Price`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`fitType`, `t`.`IsActive`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `t`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `t`.`Price`)
    ELSE `t`.`Price`
END, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`EndDate`
    ELSE NULL
END, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
    ELSE NULL
END, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
    ELSE 0.0
END, `d`.`Id`, `t0`.`Id`, `t0`.`Url`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
    ORDER BY `p`.`Name`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Discount` AS `d` ON `t`.`DiscountId` = `d`.`Id`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
ORDER BY `t`.`Name`, `t`.`Id`, `d`.`Id`
2025-09-20 04:18:45.205 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-20 04:18:45.219 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProducts (E-Commerce) in 1602.1801ms
2025-09-20 04:18:45.225 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProducts (E-Commerce)'
2025-09-20 04:18:45.228 +03:00 [INF] The response could not be cached for this request.
2025-09-20 04:18:45.231 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products?page=1&pageSize=10 - 200 8477 application/json; charset=utf-8 1715.0906ms
2025-09-20 04:18:56.361 +03:00 [INF] Setting cache for key: Product:list_active:True_deleted:False_search:advsearch_{"SearchTerm":null,"Subcategoryid":null,"Gender":null,"FitType":null,"MinPrice":null,"MaxPrice":null,"InStock":null,"OnSale":null,"SortBy":null,"SortDescending":false,"Color":null,"MinSize":null,"MaxSize":null}_1_10_True_False_pageSize:10_page:1_tag:_IsAdmin:False
2025-09-20 04:18:56.690 +03:00 [INF] Cache set successfully for key: Product:list_active:True_deleted:False_search:advsearch_{"SearchTerm":null,"Subcategoryid":null,"Gender":null,"FitType":null,"MinPrice":null,"MaxPrice":null,"InStock":null,"OnSale":null,"SortBy":null,"SortDescending":false,"Color":null,"MinSize":null,"MaxSize":null}_1_10_True_False_pageSize:10_page:1_tag:_IsAdmin:False with tags: [ProductList]
2025-09-20 04:19:40.648 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/2/Variants - null null
2025-09-20 04:19:40.661 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-20 04:19:40.663 +03:00 [INF] No cached response available for this request.
2025-09-20 04:19:40.665 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.SearchVariants (E-Commerce)'
2025-09-20 04:19:40.679 +03:00 [INF] Route matched with {action = "SearchVariants", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]]] SearchVariants(Int32, System.String, System.Nullable`1[System.Int32], System.Nullable`1[System.Int32], System.Nullable`1[E_Commerce.Enums.VariantSize], System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-09-20 04:19:40.695 +03:00 [INF] Searching variants for product 2 with filters: color=, length=, waist=, size=, isActive=True, deletedOnly=False
2025-09-20 04:19:40.699 +03:00 [INF] Getting cache for key: product:2:variants:search:color::length::waist::size::active:True:deleted:False
2025-09-20 04:19:40.918 +03:00 [WRN] Cache miss for key: product:2:variants:search:color::length::waist::size::active:True:deleted:False
2025-09-20 04:19:40.922 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-20 04:19:41.076 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__productId_0='?' (DbType = Int32), @__isActive_Value_1='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`RowVersion`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE ((`p`.`ProductId` = @__productId_0) AND (`p`.`IsActive` = @__isActive_Value_1)) AND `p`.`DeletedAt` IS NULL
2025-09-20 04:19:41.120 +03:00 [INF] Caching search results for product 2
2025-09-20 04:19:41.974 +03:00 [INF] Successfully retrieved 1 variants for product 2
2025-09-20 04:19:41.978 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-20 04:19:41.985 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.SearchVariants (E-Commerce) in 1300.9444ms
2025-09-20 04:19:42.008 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.SearchVariants (E-Commerce)'
2025-09-20 04:19:42.011 +03:00 [INF] The response could not be cached for this request.
2025-09-20 04:19:42.016 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/2/Variants - 200 310 application/json; charset=utf-8 1368.0166ms
2025-09-20 04:19:44.776 +03:00 [INF] Setting cache for key: product:2:variants:search:color::length::waist::size::active:True:deleted:False
2025-09-20 04:19:45.015 +03:00 [INF] Cache set successfully for key: product:2:variants:search:color::length::waist::size::active:True:deleted:False with tags: [product:2, variantdata]
2025-09-20 04:20:03.989 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/2/Variants - null null
2025-09-20 04:20:04.096 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-20 04:20:04.283 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-20 04:20:04.291 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.SearchVariants (E-Commerce)'
2025-09-20 04:20:04.295 +03:00 [INF] Route matched with {action = "SearchVariants", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]]] SearchVariants(Int32, System.String, System.Nullable`1[System.Int32], System.Nullable`1[System.Int32], System.Nullable`1[E_Commerce.Enums.VariantSize], System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-09-20 04:20:04.301 +03:00 [INF] Searching variants for product 2 with filters: color=, length=, waist=, size=, isActive=, deletedOnly=
2025-09-20 04:20:04.302 +03:00 [INF] Getting cache for key: product:2:variants:search:color::length::waist::size::active::deleted:
2025-09-20 04:20:04.517 +03:00 [WRN] Cache miss for key: product:2:variants:search:color::length::waist::size::active::deleted:
2025-09-20 04:20:04.519 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-09-20 04:20:04.668 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[@__productId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`RowVersion`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`ProductId` = @__productId_0
2025-09-20 04:20:04.674 +03:00 [INF] Caching search results for product 2
2025-09-20 04:20:05.886 +03:00 [INF] Successfully retrieved 2 variants for product 2
2025-09-20 04:20:05.891 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-20 04:20:05.896 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.SearchVariants (E-Commerce) in 1596.4508ms
2025-09-20 04:20:05.900 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.SearchVariants (E-Commerce)'
2025-09-20 04:20:05.902 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/2/Variants - 200 537 application/json; charset=utf-8 1913.0587ms
2025-09-20 04:20:08.284 +03:00 [INF] Setting cache for key: product:2:variants:search:color::length::waist::size::active::deleted:
2025-09-20 04:20:08.507 +03:00 [INF] Cache set successfully for key: product:2:variants:search:color::length::waist::size::active::deleted: with tags: [product:2, variantdata]
2025-09-20 05:04:12.056 +03:00 [INF] DB tables already exist. Exit install
2025-09-20 05:04:13.601 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-20 05:04:14.649 +03:00 [INF] Executed DbCommand (71ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-20 05:04:15.294 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-20 05:04:15.477 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-09-20 05:04:15.498 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-20 05:04:15.507 +03:00 [INF] Starting data seeding...
2025-09-20 05:04:15.534 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-20 05:04:16.033 +03:00 [INF] Executed DbCommand (108ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-20 05:04:16.105 +03:00 [INF] Role 'Admin' already exists.
2025-09-20 05:04:16.249 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-20 05:04:16.254 +03:00 [INF] Role 'User' already exists.
2025-09-20 05:04:16.421 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-20 05:04:16.519 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-09-20 05:04:16.523 +03:00 [INF] Data seeding completed successfully.
2025-09-20 05:04:17.795 +03:00 [INF] Now listening on: http://localhost:5069
2025-09-20 05:04:18.076 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-09-20 05:04:18.079 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-09-20 05:04:18.175 +03:00 [INF] Using the following options for SQL Server job storage:
2025-09-20 05:04:18.205 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-09-20 05:04:18.209 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-09-20 05:04:18.371 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 05:04:18.495 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 419.2624ms
2025-09-20 05:04:18.524 +03:00 [INF] Server mrrobot:18192:c622fd39 successfully announced in 149.3643 ms
2025-09-20 05:04:18.555 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-09-20 05:04:18.652 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-20 05:04:18.703 +03:00 [INF] Hosting environment: Development
2025-09-20 05:04:18.759 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-09-20 05:04:18.743 +03:00 [INF] Server mrrobot:18192:c622fd39 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-09-20 05:04:18.748 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 192.8077ms
2025-09-20 05:04:18.737 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-20 05:04:18.804 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 67.2125ms
2025-09-20 05:04:18.817 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 165.0695ms
2025-09-20 05:04:18.911 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-09-20 05:04:19.052 +03:00 [INF] Server mrrobot:18192:c622fd39 all the dispatchers started
2025-09-20 05:04:19.287 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 375.7371ms
2025-09-20 05:05:17.628 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Account/refresh-token - null null
2025-09-20 05:05:17.641 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-20 05:05:17.771 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-20 05:05:17.954 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-20 05:05:17.984 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Account/refresh-token - 401 null application/json 348.1891ms
2025-09-20 05:05:57.029 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Account/login - application/json-patch+json 70
2025-09-20 05:05:57.040 +03:00 [INF] CORS policy execution successful.
2025-09-20 05:05:57.066 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-20 05:05:57.077 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-09-20 05:05:57.106 +03:00 [INF] Route matched with {action = "LoginAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.TokenDtos.TokensDto]]] LoginAsync(E_Commerce.DtoModels.AccountDtos.LoginDTo) on controller E_Commerce.Controllers.AccountController (E-Commerce).
2025-09-20 05:05:57.419 +03:00 [INF] In LoginAsync Method 
2025-09-20 05:05:57.566 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-20 05:05:57.669 +03:00 [INF] 🔐 Generating Access Token for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-20 05:05:57.677 +03:00 [INF] 🔐 Generating Access Token for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-20 05:05:57.834 +03:00 [INF] Executed DbCommand (71ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedUserName` = @__normalizedUserName_0)
LIMIT 1
2025-09-20 05:05:57.998 +03:00 [INF] Executed DbCommand (71ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-20 05:05:58.281 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@p22='?' (Size = 255), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p23='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 256), @p15='?' (Size = 256), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `AspNetUsers` SET `AccessFailedCount` = @p0, `Age` = @p1, `ConcurrencyStamp` = @p2, `CreateAt` = @p3, `DeletedAt` = @p4, `Email` = @p5, `EmailConfirmed` = @p6, `Gender` = @p7, `ImageId` = @p8, `ImageId1` = @p9, `LastVisit` = @p10, `LockoutEnabled` = @p11, `LockoutEnd` = @p12, `Name` = @p13, `NormalizedEmail` = @p14, `NormalizedUserName` = @p15, `PasswordHash` = @p16, `PhoneNumber` = @p17, `PhoneNumberConfirmed` = @p18, `SecurityStamp` = @p19, `TwoFactorEnabled` = @p20, `UserName` = @p21
WHERE `Id` = @p22 AND `ConcurrencyStamp` = @p23;
SELECT ROW_COUNT();
2025-09-20 05:05:58.497 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-09-20 05:05:58.523 +03:00 [INF] ✅ Access Token generated successfully for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-20 05:05:58.528 +03:00 [INF] 🔑 Generating Refresh Token for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-20 05:05:58.747 +03:00 [INF] ✅ RefreshToken generated and stored for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-20 05:05:58.783 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.TokenDtos.TokensDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-20 05:05:58.808 +03:00 [INF] Executed action E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce) in 1689.7375ms
2025-09-20 05:05:58.812 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-09-20 05:05:58.819 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Account/login - 200 1251 application/json; charset=utf-8 1790.6729ms
2025-09-20 05:06:29.170 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/subcategories?page=1&pageSize=10 - null null
2025-09-20 05:06:29.183 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-20 05:06:29.329 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-20 05:06:29.339 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.Search (E-Commerce)'
2025-09-20 05:06:29.348 +03:00 [INF] Route matched with {action = "Search", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto]]]] Search(System.String, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-09-20 05:06:29.365 +03:00 [INF] Executing Search with key=, isActive=, includeDeleted=, page=1, pageSize=10
2025-09-20 05:06:29.374 +03:00 [INF] Executing FilterAsync with filters
2025-09-20 05:06:29.380 +03:00 [INF] Getting cache for key: subcategory:list_active:_deleted:_Search:_page:1_pageSize:10_IsAdmin:True
2025-09-20 05:06:29.600 +03:00 [WRN] Cache miss for key: subcategory:list_active:_deleted:_Search:_page:1_pageSize:10_IsAdmin:True
2025-09-20 05:06:29.650 +03:00 [INF] Execute GetAll for entity SubCategory
2025-09-20 05:06:29.865 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`IsActive`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`Description`, `t0`.`Id`, `t0`.`Url`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`IsActive`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`, `s`.`Description`
    FROM `SubCategories` AS `s`
    ORDER BY `s`.`Id`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-09-20 05:06:30.846 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-20 05:06:30.858 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.Search (E-Commerce) in 1501.0104ms
2025-09-20 05:06:30.870 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.Search (E-Commerce)'
2025-09-20 05:06:30.875 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/subcategories?page=1&pageSize=10 - 200 3965 application/json; charset=utf-8 1704.2792ms
2025-09-20 05:06:58.829 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5069/api/subcategories/1/images/12 - null null
2025-09-20 05:06:58.834 +03:00 [INF] CORS policy execution successful.
2025-09-20 05:06:58.891 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-20 05:06:59.034 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-20 05:06:59.044 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.RemoveImage (E-Commerce)'
2025-09-20 05:06:59.052 +03:00 [INF] Route matched with {action = "RemoveImage", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] RemoveImage(Int32, Int32) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-09-20 05:06:59.063 +03:00 [INF] Executing RemoveImage for id: 1, imageId: 12
2025-09-20 05:06:59.072 +03:00 [INF] Removing image 12 from subcategory: 1
2025-09-20 05:06:59.291 +03:00 [INF] Execute GetAll for entity SubCategory
2025-09-20 05:06:59.380 +03:00 [INF] Executed DbCommand (71ms) [Parameters=[@__imageId_1='?' (DbType = Int32), @__subCategoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`DeletedAt` IS NOT NULL AS `isdeleted`, EXISTS (
    SELECT 1
    FROM `Images` AS `i`
    WHERE (`s`.`Id` = `i`.`SubCategoryId`) AND ((`i`.`Id` = @__imageId_1) AND `i`.`DeletedAt` IS NULL)) AS `hasimage`, (
    SELECT COUNT(*)
    FROM `Images` AS `i0`
    WHERE (`s`.`Id` = `i0`.`SubCategoryId`) AND `i0`.`DeletedAt` IS NULL) AS `countimage`, `s`.`IsActive` AS `isactive`
FROM `SubCategories` AS `s`
WHERE `s`.`Id` = @__subCategoryId_0
LIMIT 1
2025-09-20 05:06:59.392 +03:00 [INF] Executing GetByIdAsync for entity Image with ID: 12
2025-09-20 05:06:59.470 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`CustomerId`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
FROM `Images` AS `i`
WHERE `i`.`Id` = @__id_0
LIMIT 1
2025-09-20 05:06:59.523 +03:00 [INF] ✅ Execute DeleteImageAsync for image ID: 12
2025-09-20 05:07:00.239 +03:00 [INF] Execute Remove for entity Image
2025-09-20 05:07:00.246 +03:00 [INF] Image marked for deletion (pending save)
2025-09-20 05:07:00.425 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
DELETE FROM `Images`
WHERE `Id` = @p0;
SELECT ROW_COUNT();
2025-09-20 05:07:00.513 +03:00 [INF] 🗑️ Image ID 12 deleted from Cloudinary and marked deleted in DB
2025-09-20 05:07:00.522 +03:00 [INF] Execute AddAdminOpreationAsync
2025-09-20 05:07:00.531 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-09-20 05:07:00.589 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-09-20 05:07:00.759 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-20 05:07:02.640 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-20 05:07:02.645 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.RemoveImage (E-Commerce) in 3586.7813ms
2025-09-20 05:07:02.660 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.RemoveImage (E-Commerce)'
2025-09-20 05:07:02.667 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5069/api/subcategories/1/images/12 - 200 907 application/json; charset=utf-8 3837.9962ms
2025-09-20 05:07:05.989 +03:00 [INF] Removing cache by tag: categorywithdata
2025-09-20 05:07:05.990 +03:00 [INF] Removing cache by tags: [subcategory, subcategorywithdata, subcategorylist]
2025-09-20 05:07:06.206 +03:00 [WRN] No cache entries found for tag: categorywithdata
2025-09-20 05:07:07.051 +03:00 [INF] Removed 1 cache entries for tags: [subcategory, subcategorywithdata, subcategorylist]
2025-09-20 05:07:10.495 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/subcategories?page=1&pageSize=10 - null null
2025-09-20 05:07:10.516 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-20 05:07:10.674 +03:00 [INF] Executed DbCommand (67ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-20 05:07:10.682 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.Search (E-Commerce)'
2025-09-20 05:07:10.684 +03:00 [INF] Route matched with {action = "Search", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto]]]] Search(System.String, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-09-20 05:07:10.715 +03:00 [INF] Executing Search with key=, isActive=, includeDeleted=, page=1, pageSize=10
2025-09-20 05:07:10.717 +03:00 [INF] Executing FilterAsync with filters
2025-09-20 05:07:10.724 +03:00 [INF] Getting cache for key: subcategory:list_active:_deleted:_Search:_page:1_pageSize:10_IsAdmin:True
2025-09-20 05:07:10.934 +03:00 [WRN] Cache miss for key: subcategory:list_active:_deleted:_Search:_page:1_pageSize:10_IsAdmin:True
2025-09-20 05:07:10.938 +03:00 [INF] Execute GetAll for entity SubCategory
2025-09-20 05:07:11.084 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`IsActive`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`Description`, `t0`.`Id`, `t0`.`Url`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`IsActive`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`, `s`.`Description`
    FROM `SubCategories` AS `s`
    ORDER BY `s`.`Id`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-09-20 05:07:12.048 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-20 05:07:12.054 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.Search (E-Commerce) in 1363.312ms
2025-09-20 05:07:12.058 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.Search (E-Commerce)'
2025-09-20 05:07:12.060 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/subcategories?page=1&pageSize=10 - 200 3810 application/json; charset=utf-8 1564.5328ms
2025-09-20 05:07:16.226 +03:00 [INF] Setting cache for key: subcategory:list_active:_deleted:_Search:_page:1_pageSize:10_IsAdmin:True
2025-09-20 05:07:16.472 +03:00 [INF] Cache set successfully for key: subcategory:list_active:_deleted:_Search:_page:1_pageSize:10_IsAdmin:True with tags: [subcategorylist]
2025-09-20 05:49:22.911 +03:00 [INF] DB tables already exist. Exit install
2025-09-20 05:49:24.133 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-20 05:49:25.083 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-20 05:49:25.726 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-20 05:49:25.904 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-09-20 05:49:25.926 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-20 05:49:25.936 +03:00 [INF] Starting data seeding...
2025-09-20 05:49:25.962 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-20 05:49:26.393 +03:00 [INF] Executed DbCommand (97ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-20 05:49:26.452 +03:00 [INF] Role 'Admin' already exists.
2025-09-20 05:49:26.608 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-20 05:49:26.619 +03:00 [INF] Role 'User' already exists.
2025-09-20 05:49:26.785 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-20 05:49:26.866 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-09-20 05:49:26.869 +03:00 [INF] Data seeding completed successfully.
2025-09-20 05:49:28.073 +03:00 [INF] Now listening on: http://localhost:5069
2025-09-20 05:49:28.165 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-09-20 05:49:28.169 +03:00 [INF] Using the following options for SQL Server job storage:
2025-09-20 05:49:28.175 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-09-20 05:49:28.178 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-09-20 05:49:28.192 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 05:49:28.199 +03:00 [INF] Hosting environment: Development
2025-09-20 05:49:28.203 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-09-20 05:49:28.381 +03:00 [INF] Server mrrobot:8136:14f89fb1 successfully announced in 182.9818 ms
2025-09-20 05:49:28.388 +03:00 [INF] Server mrrobot:8136:14f89fb1 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-09-20 05:49:28.442 +03:00 [INF] Server mrrobot:8136:14f89fb1 all the dispatchers started
2025-09-20 05:49:28.778 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-09-20 05:49:29.060 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 287.7315ms
2025-09-20 05:49:29.127 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-09-20 05:49:29.127 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-20 05:49:29.175 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-20 05:49:29.217 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 89.4872ms
2025-09-20 05:49:29.234 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 61.7719ms
2025-09-20 05:49:29.402 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 274.7446ms
2025-09-20 05:49:30.000 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-09-20 05:49:30.200 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 199.9811ms
2025-09-20 05:50:09.936 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Products/advanced-search?page=1&pageSize=10&isActive=false - application/json-patch+json 4
2025-09-20 05:50:09.946 +03:00 [INF] CORS policy execution successful.
2025-09-20 05:50:09.950 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-20 05:50:10.094 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-20 05:50:10.279 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-20 05:50:10.293 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.AdvancedSearch (E-Commerce)'
2025-09-20 05:50:10.316 +03:00 [INF] Route matched with {action = "AdvancedSearch", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] AdvancedSearch(E_Commerce.DtoModels.ProductDtos.AdvancedSearchDto, Int32, Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-20 05:50:10.661 +03:00 [INF] Getting cache for key: Product:list_active:False_deleted:_search:advsearch_{"SearchTerm":null,"Subcategoryid":null,"Gender":null,"FitType":null,"MinPrice":null,"MaxPrice":null,"InStock":null,"OnSale":null,"SortBy":null,"SortDescending":false,"Color":null,"MinSize":null,"MaxSize":null}_1_10_False__pageSize:10_page:1_tag:AdvancedSearch_IsAdmin:True
2025-09-20 05:50:10.883 +03:00 [WRN] Cache miss for key: Product:list_active:False_deleted:_search:advsearch_{"SearchTerm":null,"Subcategoryid":null,"Gender":null,"FitType":null,"MinPrice":null,"MaxPrice":null,"InStock":null,"OnSale":null,"SortBy":null,"SortDescending":false,"Color":null,"MinSize":null,"MaxSize":null}_1_10_False__pageSize:10_page:1_tag:AdvancedSearch_IsAdmin:True
2025-09-20 05:50:10.888 +03:00 [INF] Execute GetAll for entity Product
2025-09-20 05:50:11.231 +03:00 [INF] Executed DbCommand (123ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`SubCategoryId`, `t`.`Price`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`fitType`, `t`.`IsActive`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `t`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `t`.`Price`)
    ELSE `t`.`Price`
END, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`EndDate`
    ELSE NULL
END, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
    ELSE NULL
END, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
    ELSE 0.0
END, `d`.`Id`, `t0`.`Id`, `t0`.`Url`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
    ORDER BY `p`.`Name`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Discount` AS `d` ON `t`.`DiscountId` = `d`.`Id`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
ORDER BY `t`.`Name`, `t`.`Id`, `d`.`Id`
2025-09-20 05:50:12.370 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-20 05:50:12.413 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.AdvancedSearch (E-Commerce) in 2081.5337ms
2025-09-20 05:50:12.427 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.AdvancedSearch (E-Commerce)'
2025-09-20 05:50:12.440 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Products/advanced-search?page=1&pageSize=10&isActive=false - 200 8562 application/json; charset=utf-8 2504.2045ms
2025-09-20 05:53:08.274 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-09-20 05:53:08.303 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 28.8273ms
2025-09-20 05:53:08.379 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-09-20 05:53:08.392 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 13.4085ms
2025-09-20 05:53:08.405 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-20 05:53:08.411 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-20 05:53:08.419 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 8.2487ms
2025-09-20 05:53:08.420 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 15.449ms
2025-09-20 05:53:08.705 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-09-20 05:53:08.893 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 188.2069ms
2025-09-20 05:53:29.717 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/newarrivals?page=1&pageSize=10&isActive=false - null null
2025-09-20 05:53:29.730 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-20 05:53:29.918 +03:00 [INF] Executed DbCommand (68ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-20 05:53:29.926 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetNewArrivals (E-Commerce)'
2025-09-20 05:53:29.934 +03:00 [INF] Route matched with {action = "GetNewArrivals", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] GetNewArrivals(Int32, Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-20 05:53:29.964 +03:00 [INF] Getting cache for key: Product:list_active:False_deleted:_search:_pageSize:10_page:1_tag:NewArrivals_IsAdmin:True
2025-09-20 05:53:30.179 +03:00 [WRN] Cache miss for key: Product:list_active:False_deleted:_search:_pageSize:10_page:1_tag:NewArrivals_IsAdmin:True
2025-09-20 05:53:30.183 +03:00 [INF] Execute GetAll for entity Product
2025-09-20 05:53:30.345 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__thirtyDaysAgo_0='?' (DbType = DateTime), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`SubCategoryId`, `t`.`Price`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`fitType`, `t`.`IsActive`, CASE
    WHEN `d`.`Id` IS NOT NULL THEN `t`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `t`.`Price`)
    ELSE `t`.`Price`
END, `d`.`EndDate`, `d`.`Name`, `d`.`DiscountPercent`, `d`.`Id`, `t0`.`Id`, `t0`.`Url`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`CreatedAt` >= @__thirtyDaysAgo_0) AND NOT (`p`.`IsActive`)
    ORDER BY `p`.`CreatedAt` DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS `t`
LEFT JOIN `Discount` AS `d` ON `t`.`DiscountId` = `d`.`Id`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
ORDER BY `t`.`CreatedAt` DESC, `t`.`Id`, `d`.`Id`
2025-09-20 05:53:31.240 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-20 05:53:31.246 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetNewArrivals (E-Commerce) in 1305.7945ms
2025-09-20 05:53:31.250 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetNewArrivals (E-Commerce)'
2025-09-20 05:53:31.254 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/newarrivals?page=1&pageSize=10&isActive=false - 200 6093 application/json; charset=utf-8 1536.9203ms
2025-09-20 06:45:01.842 +03:00 [INF] DB tables already exist. Exit install
2025-09-20 06:45:03.209 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-20 06:45:04.733 +03:00 [INF] Executed DbCommand (136ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-20 06:45:05.599 +03:00 [INF] Executed DbCommand (71ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-09-20 06:45:05.766 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-09-20 06:45:05.818 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-20 06:45:05.833 +03:00 [INF] Starting data seeding...
2025-09-20 06:45:05.864 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-20 06:45:06.303 +03:00 [INF] Executed DbCommand (100ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-20 06:45:06.377 +03:00 [INF] Role 'Admin' already exists.
2025-09-20 06:45:06.523 +03:00 [INF] Executed DbCommand (71ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-09-20 06:45:06.530 +03:00 [INF] Role 'User' already exists.
2025-09-20 06:45:06.694 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-20 06:45:06.781 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-09-20 06:45:06.786 +03:00 [INF] Data seeding completed successfully.
2025-09-20 06:45:07.949 +03:00 [INF] Now listening on: http://localhost:5069
2025-09-20 06:45:08.028 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-09-20 06:45:08.031 +03:00 [INF] Using the following options for SQL Server job storage:
2025-09-20 06:45:08.032 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-09-20 06:45:08.034 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-09-20 06:45:08.046 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 06:45:08.049 +03:00 [INF] Hosting environment: Development
2025-09-20 06:45:08.050 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-09-20 06:45:08.242 +03:00 [INF] Server mrrobot:15344:01840369 successfully announced in 191.1991 ms
2025-09-20 06:45:08.248 +03:00 [INF] Server mrrobot:15344:01840369 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-09-20 06:45:08.272 +03:00 [INF] Server mrrobot:15344:01840369 all the dispatchers started
2025-09-20 06:45:08.579 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-09-20 06:45:08.975 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 396.6881ms
2025-09-20 06:45:09.060 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-09-20 06:45:09.060 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-20 06:45:09.553 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-20 06:45:09.563 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 502.8511ms
2025-09-20 06:45:09.651 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 590.764ms
2025-09-20 06:45:09.691 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 137.6541ms
2025-09-20 06:45:09.806 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-09-20 06:45:10.005 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 198.3055ms
2025-09-20 06:45:48.535 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Account/login - application/json-patch+json 70
2025-09-20 06:45:48.545 +03:00 [INF] CORS policy execution successful.
2025-09-20 06:45:48.548 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-20 06:45:48.630 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-20 06:45:48.640 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-09-20 06:45:48.664 +03:00 [INF] Route matched with {action = "LoginAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.TokenDtos.TokensDto]]] LoginAsync(E_Commerce.DtoModels.AccountDtos.LoginDTo) on controller E_Commerce.Controllers.AccountController (E-Commerce).
2025-09-20 06:45:48.942 +03:00 [INF] In LoginAsync Method 
2025-09-20 06:45:49.107 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-20 06:45:49.245 +03:00 [INF] 🔐 Generating Access Token for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-20 06:45:49.255 +03:00 [INF] 🔐 Generating Access Token for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-20 06:45:49.425 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedUserName` = @__normalizedUserName_0)
LIMIT 1
2025-09-20 06:45:49.588 +03:00 [INF] Executed DbCommand (71ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-20 06:45:49.877 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@p22='?' (Size = 255), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p23='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 256), @p15='?' (Size = 256), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `AspNetUsers` SET `AccessFailedCount` = @p0, `Age` = @p1, `ConcurrencyStamp` = @p2, `CreateAt` = @p3, `DeletedAt` = @p4, `Email` = @p5, `EmailConfirmed` = @p6, `Gender` = @p7, `ImageId` = @p8, `ImageId1` = @p9, `LastVisit` = @p10, `LockoutEnabled` = @p11, `LockoutEnd` = @p12, `Name` = @p13, `NormalizedEmail` = @p14, `NormalizedUserName` = @p15, `PasswordHash` = @p16, `PhoneNumber` = @p17, `PhoneNumberConfirmed` = @p18, `SecurityStamp` = @p19, `TwoFactorEnabled` = @p20, `UserName` = @p21
WHERE `Id` = @p22 AND `ConcurrencyStamp` = @p23;
SELECT ROW_COUNT();
2025-09-20 06:45:50.084 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-09-20 06:45:50.151 +03:00 [INF] ✅ Access Token generated successfully for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-20 06:45:50.157 +03:00 [INF] 🔑 Generating Refresh Token for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-20 06:45:50.376 +03:00 [INF] ✅ RefreshToken generated and stored for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-20 06:45:50.419 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.TokenDtos.TokensDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-20 06:45:50.454 +03:00 [INF] Executed action E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce) in 1775.0826ms
2025-09-20 06:45:50.462 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-09-20 06:45:50.468 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Account/login - 200 1251 application/json; charset=utf-8 1933.3087ms
2025-09-20 06:46:33.990 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Discount?includeDeleted=false&page=1&pageSize=10 - null null
2025-09-20 06:46:34.139 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-20 06:46:34.145 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-09-20 06:46:34.152 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-20 06:46:34.161 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-20 06:46:34.164 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Discount?includeDeleted=false&page=1&pageSize=10 - 401 0 null 173.0821ms
2025-09-20 06:47:01.330 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Discount?includeDeleted=false&page=1&pageSize=10 - null null
2025-09-20 06:47:01.349 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.ValidateAndGetOutputSize(String inputString, Int32 offset, Int32 length)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-09-20 06:47:01.417 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-09-20 06:47:01.423 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-20 06:47:01.427 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-20 06:47:01.431 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Discount?includeDeleted=false&page=1&pageSize=10 - 401 0 null 101.0297ms
2025-09-20 06:47:16.020 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Account/login - application/json-patch+json 70
2025-09-20 06:47:16.027 +03:00 [INF] CORS policy execution successful.
2025-09-20 06:47:16.031 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.ValidateAndGetOutputSize(String inputString, Int32 offset, Int32 length)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-09-20 06:47:16.040 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-09-20 06:47:16.092 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-20 06:47:16.096 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-09-20 06:47:16.098 +03:00 [INF] Route matched with {action = "LoginAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.TokenDtos.TokensDto]]] LoginAsync(E_Commerce.DtoModels.AccountDtos.LoginDTo) on controller E_Commerce.Controllers.AccountController (E-Commerce).
2025-09-20 06:47:16.173 +03:00 [INF] In LoginAsync Method 
2025-09-20 06:47:16.318 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-20 06:47:16.410 +03:00 [INF] 🔐 Generating Access Token for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-20 06:47:16.412 +03:00 [INF] 🔐 Generating Access Token for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-20 06:47:16.557 +03:00 [INF] Executed DbCommand (71ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedUserName` = @__normalizedUserName_0)
LIMIT 1
2025-09-20 06:47:16.733 +03:00 [INF] Executed DbCommand (71ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-09-20 06:47:16.884 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@p22='?' (Size = 255), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p23='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 256), @p15='?' (Size = 256), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `AspNetUsers` SET `AccessFailedCount` = @p0, `Age` = @p1, `ConcurrencyStamp` = @p2, `CreateAt` = @p3, `DeletedAt` = @p4, `Email` = @p5, `EmailConfirmed` = @p6, `Gender` = @p7, `ImageId` = @p8, `ImageId1` = @p9, `LastVisit` = @p10, `LockoutEnabled` = @p11, `LockoutEnd` = @p12, `Name` = @p13, `NormalizedEmail` = @p14, `NormalizedUserName` = @p15, `PasswordHash` = @p16, `PhoneNumber` = @p17, `PhoneNumberConfirmed` = @p18, `SecurityStamp` = @p19, `TwoFactorEnabled` = @p20, `UserName` = @p21
WHERE `Id` = @p22 AND `ConcurrencyStamp` = @p23;
SELECT ROW_COUNT();
2025-09-20 06:47:17.030 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-09-20 06:47:17.038 +03:00 [INF] ✅ Access Token generated successfully for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-20 06:47:17.041 +03:00 [INF] 🔑 Generating Refresh Token for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-20 06:47:17.253 +03:00 [INF] ✅ RefreshToken generated and stored for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-09-20 06:47:17.256 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.TokenDtos.TokensDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-20 06:47:17.260 +03:00 [INF] Executed action E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce) in 1155.6466ms
2025-09-20 06:47:17.264 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-09-20 06:47:17.266 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Account/login - 200 1251 application/json; charset=utf-8 1246.0401ms
2025-09-20 06:47:31.887 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Discount?includeDeleted=false&page=1&pageSize=10 - null null
2025-09-20 06:47:31.962 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-20 06:47:32.125 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-20 06:47:32.135 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.DiscountController.FilterAsync (E-Commerce)'
2025-09-20 06:47:32.145 +03:00 [INF] Route matched with {action = "FilterAsync", controller = "Discount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.DiscoutDtos.DiscountDto]]]] FilterAsync(System.String, System.Nullable`1[System.Boolean], Boolean, Int32, Int32) on controller E_Commerce.Controllers.DiscountController (E-Commerce).
2025-09-20 06:47:32.162 +03:00 [INF] Executing FilterAsync with filters
2025-09-20 06:47:32.169 +03:00 [INF] Execute GetAll for entity Discount
2025-09-20 06:47:32.344 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM `Discount` AS `d`
WHERE `d`.`DeletedAt` IS NULL
2025-09-20 06:47:32.502 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `d`.`Id`, `d`.`Name`, `d`.`Description`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `d`.`CreatedAt`, `d`.`ModifiedAt`, `d`.`DeletedAt`
FROM `Discount` AS `d`
WHERE `d`.`DeletedAt` IS NULL
ORDER BY `d`.`CreatedAt`
LIMIT @__p_1 OFFSET @__p_0
2025-09-20 06:47:32.510 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.DiscoutDtos.DiscountDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-20 06:47:32.524 +03:00 [INF] Executed action E_Commerce.Controllers.DiscountController.FilterAsync (E-Commerce) in 370.2452ms
2025-09-20 06:47:32.529 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.DiscountController.FilterAsync (E-Commerce)'
2025-09-20 06:47:32.532 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Discount?includeDeleted=false&page=1&pageSize=10 - 200 1242 application/json; charset=utf-8 644.9357ms
2025-09-20 06:48:04.668 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products?page=1&pageSize=10 - null null
2025-09-20 06:48:04.675 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-20 06:48:04.821 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-20 06:48:04.826 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProducts (E-Commerce)'
2025-09-20 06:48:04.835 +03:00 [INF] Route matched with {action = "GetProducts", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] GetProducts(System.String, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-20 06:48:04.850 +03:00 [INF] Executing GetProducts
2025-09-20 06:48:04.872 +03:00 [INF] Getting cache for key: Product:list_active:_deleted:_search:advsearch_{"SearchTerm":null,"Subcategoryid":null,"Gender":null,"FitType":null,"MinPrice":null,"MaxPrice":null,"InStock":null,"OnSale":null,"SortBy":null,"SortDescending":false,"Color":null,"MinSize":null,"MaxSize":null}_1_10___pageSize:10_page:1_tag:AdvancedSearch_IsAdmin:True
2025-09-20 06:48:05.087 +03:00 [WRN] Cache miss for key: Product:list_active:_deleted:_search:advsearch_{"SearchTerm":null,"Subcategoryid":null,"Gender":null,"FitType":null,"MinPrice":null,"MaxPrice":null,"InStock":null,"OnSale":null,"SortBy":null,"SortDescending":false,"Color":null,"MinSize":null,"MaxSize":null}_1_10___pageSize:10_page:1_tag:AdvancedSearch_IsAdmin:True
2025-09-20 06:48:05.093 +03:00 [INF] Execute GetAll for entity Product
2025-09-20 06:48:05.346 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`SubCategoryId`, `t`.`Price`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`fitType`, `t`.`IsActive`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `t`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `t`.`Price`)
    ELSE `t`.`Price`
END, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`EndDate`
    ELSE NULL
END, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
    ELSE NULL
END, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
    ELSE 0.0
END, `d`.`Id`, `t0`.`Id`, `t0`.`Url`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    ORDER BY `p`.`Name`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Discount` AS `d` ON `t`.`DiscountId` = `d`.`Id`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
ORDER BY `t`.`Name`, `t`.`Id`, `d`.`Id`
2025-09-20 06:48:06.353 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-20 06:48:06.372 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProducts (E-Commerce) in 1532.4736ms
2025-09-20 06:48:06.382 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProducts (E-Commerce)'
2025-09-20 06:48:06.384 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products?page=1&pageSize=10 - 200 9512 application/json; charset=utf-8 1716.3841ms
2025-09-20 06:48:22.088 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Products/bulk/Discount - application/json-patch+json 51
2025-09-20 06:48:22.095 +03:00 [INF] CORS policy execution successful.
2025-09-20 06:48:22.097 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-20 06:48:22.239 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-20 06:48:22.249 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.ApplyDiscountToProducts (E-Commerce)'
2025-09-20 06:48:22.253 +03:00 [INF] Route matched with {action = "ApplyDiscountToProducts", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] ApplyDiscountToProducts(E_Commerce.DtoModels.DiscoutDtos.ApplyDiscountToProductsDto) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-20 06:48:22.290 +03:00 [INF] Applying discount 5 to 1 products
2025-09-20 06:48:22.527 +03:00 [INF] Executing GetByIdAsync for entity Discount with ID: 5
2025-09-20 06:48:22.616 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `d`.`Id`, `d`.`CategoryId`, `d`.`CreatedAt`, `d`.`DeletedAt`, `d`.`Description`, `d`.`DiscountPercent`, `d`.`EndDate`, `d`.`IsActive`, `d`.`ModifiedAt`, `d`.`Name`, `d`.`StartDate`
FROM `Discount` AS `d`
WHERE `d`.`Id` = @__id_0
LIMIT 1
2025-09-20 06:48:22.657 +03:00 [INF] Discount 5 active status: False (IsActive: False, StartDate: 9/30/2025 2:39:07 AM, EndDate: 10/30/2025 2:39:07 AM, DeletedAt: )
2025-09-20 06:48:22.659 +03:00 [INF] Execute GetAll for entity Product
2025-09-20 06:48:22.747 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`RowVersion`, `p`.`SubCategoryId`, `p`.`fitType`
FROM `Products` AS `p`
WHERE (`p`.`Id` = 13) AND `p`.`DeletedAt` IS NULL
2025-09-20 06:48:22.890 +03:00 [INF] Execute Update for entity Product
2025-09-20 06:48:22.895 +03:00 [INF] Product marked for update (pending save)
2025-09-20 06:48:22.900 +03:00 [INF] Execute AddAdminOpreationAsync
2025-09-20 06:48:22.903 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-09-20 06:48:22.948 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-09-20 06:48:23.164 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (Size = 20), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p13='?' (Size = 8) (DbType = Binary), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p14='?' (Size = 255), @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = DateTime), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Products` SET `CreatedAt` = @p0, `DeletedAt` = @p1, `Description` = @p2, `DiscountId` = @p3, `Gender` = @p4, `IsActive` = @p5, `ModifiedAt` = @p6, `Name` = @p7, `Price` = @p8, `Quantity` = @p9, `SubCategoryId` = @p10, `fitType` = @p11
WHERE `Id` = @p12 AND `RowVersion` IS NULL;
SELECT `RowVersion`
FROM `Products`
WHERE ROW_COUNT() = 1 AND `Id` = @p12;

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-09-20 06:48:23.350 +03:00 [INF] Discount 5 is not active. Skipping cart and order price updates.
2025-09-20 06:48:25.692 +03:00 [INF] Removing cache by tag: CollectionWithProduct
2025-09-20 06:48:25.893 +03:00 [INF] Execute GetAll for entity Product
2025-09-20 06:48:25.917 +03:00 [WRN] No cache entries found for tag: CollectionWithProduct
2025-09-20 06:48:26.053 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `p`.`Price`, `p`.`CreatedAt`, `p`.`ModifiedAt`, `p`.`DeletedAt`, `p`.`fitType`, `p`.`IsActive`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
    ELSE `p`.`Price`
END, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`EndDate`
    ELSE NULL
END, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
    ELSE NULL
END, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
    ELSE 0.0
END, `d`.`Id`, `t`.`Id`, `t`.`Url`
FROM `Products` AS `p`
LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t` ON `p`.`Id` = `t`.`ProductId`
WHERE `p`.`Id` = 13
ORDER BY `p`.`Id`, `d`.`Id`
2025-09-20 06:48:26.061 +03:00 [INF] Successfully applied discount 5 to 1 products. Active: False
2025-09-20 06:48:26.065 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-20 06:48:26.068 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.ApplyDiscountToProducts (E-Commerce) in 3806.5757ms
2025-09-20 06:48:26.072 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.ApplyDiscountToProducts (E-Commerce)'
2025-09-20 06:48:26.076 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Products/bulk/Discount - 200 1371 application/json; charset=utf-8 3987.4823ms
2025-09-20 06:48:26.262 +03:00 [INF] Removing cache by tag: subcategorywithdata
2025-09-20 06:48:26.475 +03:00 [WRN] No cache entries found for tag: subcategorywithdata
2025-09-20 06:50:11.903 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/13/Discount - null null
2025-09-20 06:50:11.910 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-20 06:50:12.058 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-20 06:50:12.067 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProductDiscount (E-Commerce)'
2025-09-20 06:50:12.072 +03:00 [INF] Route matched with {action = "GetProductDiscount", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.DiscoutDtos.DiscountDto]]] GetProductDiscount(Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-20 06:50:12.280 +03:00 [INF] Executed DbCommand (71ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE ((`p`.`Id` = @__id_0) AND `p`.`DiscountId` IS NOT NULL) AND `p`.`DeletedAt` IS NULL)
2025-09-20 06:50:12.434 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[@__productid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `d`.`Id`, `d`.`CategoryId`, `d`.`CreatedAt`, `d`.`DeletedAt`, `d`.`Description`, `d`.`DiscountPercent`, `d`.`EndDate`, `d`.`IsActive`, `d`.`ModifiedAt`, `d`.`Name`, `d`.`StartDate`
FROM `Products` AS `p`
LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
WHERE (`p`.`Id` = @__productid_0) AND `p`.`DeletedAt` IS NULL
LIMIT 1
2025-09-20 06:50:12.445 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.DiscoutDtos.DiscountDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-20 06:50:12.453 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProductDiscount (E-Commerce) in 373.1068ms
2025-09-20 06:50:12.457 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProductDiscount (E-Commerce)'
2025-09-20 06:50:12.462 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/13/Discount - 200 392 application/json; charset=utf-8 558.312ms
2025-09-20 06:50:26.959 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products?page=1&pageSize=10 - null null
2025-09-20 06:50:26.968 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-20 06:50:27.125 +03:00 [INF] Executed DbCommand (68ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-20 06:50:27.135 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProducts (E-Commerce)'
2025-09-20 06:50:27.138 +03:00 [INF] Route matched with {action = "GetProducts", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] GetProducts(System.String, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-20 06:50:27.145 +03:00 [INF] Executing GetProducts
2025-09-20 06:50:27.149 +03:00 [INF] Getting cache for key: Product:list_active:_deleted:_search:advsearch_{"SearchTerm":null,"Subcategoryid":null,"Gender":null,"FitType":null,"MinPrice":null,"MaxPrice":null,"InStock":null,"OnSale":null,"SortBy":null,"SortDescending":false,"Color":null,"MinSize":null,"MaxSize":null}_1_10___pageSize:10_page:1_tag:AdvancedSearch_IsAdmin:True
2025-09-20 06:50:27.361 +03:00 [WRN] Cache miss for key: Product:list_active:_deleted:_search:advsearch_{"SearchTerm":null,"Subcategoryid":null,"Gender":null,"FitType":null,"MinPrice":null,"MaxPrice":null,"InStock":null,"OnSale":null,"SortBy":null,"SortDescending":false,"Color":null,"MinSize":null,"MaxSize":null}_1_10___pageSize:10_page:1_tag:AdvancedSearch_IsAdmin:True
2025-09-20 06:50:27.365 +03:00 [INF] Execute GetAll for entity Product
2025-09-20 06:50:27.517 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`SubCategoryId`, `t`.`Price`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`fitType`, `t`.`IsActive`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `t`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `t`.`Price`)
    ELSE `t`.`Price`
END, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`EndDate`
    ELSE NULL
END, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
    ELSE NULL
END, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
    ELSE 0.0
END, `d`.`Id`, `t0`.`Id`, `t0`.`Url`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    ORDER BY `p`.`Name`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Discount` AS `d` ON `t`.`DiscountId` = `d`.`Id`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
ORDER BY `t`.`Name`, `t`.`Id`, `d`.`Id`
2025-09-20 06:50:28.414 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-20 06:50:28.425 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProducts (E-Commerce) in 1282.1108ms
2025-09-20 06:50:28.437 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProducts (E-Commerce)'
2025-09-20 06:50:28.439 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products?page=1&pageSize=10 - 200 9512 application/json; charset=utf-8 1479.3651ms
2025-09-20 06:50:32.118 +03:00 [INF] Setting cache for key: Product:list_active:_deleted:_search:advsearch_{"SearchTerm":null,"Subcategoryid":null,"Gender":null,"FitType":null,"MinPrice":null,"MaxPrice":null,"InStock":null,"OnSale":null,"SortBy":null,"SortDescending":false,"Color":null,"MinSize":null,"MaxSize":null}_1_10___pageSize:10_page:1_tag:_IsAdmin:False
2025-09-20 06:50:32.368 +03:00 [INF] Cache set successfully for key: Product:list_active:_deleted:_search:advsearch_{"SearchTerm":null,"Subcategoryid":null,"Gender":null,"FitType":null,"MinPrice":null,"MaxPrice":null,"InStock":null,"OnSale":null,"SortBy":null,"SortDescending":false,"Color":null,"MinSize":null,"MaxSize":null}_1_10___pageSize:10_page:1_tag:_IsAdmin:False with tags: [ProductList]
2025-09-20 06:53:58.986 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-09-20 06:53:59.003 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 16.8982ms
2025-09-20 06:53:59.052 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-09-20 06:53:59.056 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-09-20 06:53:59.057 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 4.5722ms
2025-09-20 06:53:59.065 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.5204ms
2025-09-20 06:53:59.066 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-09-20 06:53:59.077 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 10.5627ms
2025-09-20 06:53:59.429 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-09-20 06:53:59.575 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 145.2179ms
2025-09-20 06:54:32.413 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products?page=1&pageSize=5 - null null
2025-09-20 06:54:32.423 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-20 06:54:32.568 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-20 06:54:32.577 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProducts (E-Commerce)'
2025-09-20 06:54:32.585 +03:00 [INF] Route matched with {action = "GetProducts", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] GetProducts(System.String, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-20 06:54:32.595 +03:00 [INF] Executing GetProducts
2025-09-20 06:54:32.605 +03:00 [INF] Getting cache for key: Product:list_active:_deleted:_search:advsearch_{"SearchTerm":null,"Subcategoryid":null,"Gender":null,"FitType":null,"MinPrice":null,"MaxPrice":null,"InStock":null,"OnSale":null,"SortBy":null,"SortDescending":false,"Color":null,"MinSize":null,"MaxSize":null}_1_5___pageSize:5_page:1_tag:AdvancedSearch_IsAdmin:True
2025-09-20 06:54:32.822 +03:00 [WRN] Cache miss for key: Product:list_active:_deleted:_search:advsearch_{"SearchTerm":null,"Subcategoryid":null,"Gender":null,"FitType":null,"MinPrice":null,"MaxPrice":null,"InStock":null,"OnSale":null,"SortBy":null,"SortDescending":false,"Color":null,"MinSize":null,"MaxSize":null}_1_5___pageSize:5_page:1_tag:AdvancedSearch_IsAdmin:True
2025-09-20 06:54:32.827 +03:00 [INF] Execute GetAll for entity Product
2025-09-20 06:54:32.998 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`SubCategoryId`, `t`.`Price`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`fitType`, `t`.`IsActive`, CASE
    WHEN `d`.`Id` IS NOT NULL THEN `t`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `t`.`Price`)
    ELSE `t`.`Price`
END, `d`.`EndDate`, `d`.`Name`, `d`.`DiscountPercent`, `d`.`Id`, `t0`.`Id`, `t0`.`Url`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    ORDER BY `p`.`Name`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Discount` AS `d` ON `t`.`DiscountId` = `d`.`Id`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
ORDER BY `t`.`Name`, `t`.`Id`, `d`.`Id`
2025-09-20 06:54:33.882 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-20 06:54:33.888 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProducts (E-Commerce) in 1294.3459ms
2025-09-20 06:54:33.891 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProducts (E-Commerce)'
2025-09-20 06:54:33.894 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products?page=1&pageSize=5 - 200 4661 application/json; charset=utf-8 1480.6936ms
2025-09-20 06:55:41.097 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products/13 - null null
2025-09-20 06:55:41.158 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-20 06:55:41.321 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-20 06:55:41.326 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-20 06:55:41.333 +03:00 [INF] Route matched with {action = "GetProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDetailDto]]] GetProduct(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-20 06:55:41.338 +03:00 [INF] Executing GetProduct for ID: 13
2025-09-20 06:55:41.343 +03:00 [INF] Fetching product details for Product ID: 13, IsActive: , DeletedOnly: , IsAdmin: True
2025-09-20 06:55:41.348 +03:00 [INF] Retrieving product by id: 13, isActive: , deletedOnly: , IsAdmin: True
2025-09-20 06:55:41.351 +03:00 [INF] Getting cache for key: Product:13_active:_deleted:_IsAdmin:True
2025-09-20 06:55:41.563 +03:00 [WRN] Cache miss for key: Product:13_active:_deleted:_IsAdmin:True
2025-09-20 06:55:41.568 +03:00 [INF] Execute GetAll for entity Product
2025-09-20 06:55:41.713 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE `p`.`Id` = @__id_0)
2025-09-20 06:55:41.747 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-20 06:55:41.911 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`fitType`, `t`.`IsActive`, `t`.`Price`, `t`.`SubCategoryId`, `t`.`c`, `t`.`Id0`, `t`.`CategoryId`, `t`.`CreatedAt0`, `t`.`DeletedAt0`, `t`.`Description0`, `t`.`DiscountPercent`, `t`.`EndDate`, `t`.`IsActive0`, `t`.`ModifiedAt0`, `t`.`Name0`, `t`.`StartDate`, `t0`.`Id`, `t0`.`Url`, `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity`, `p0`.`ProductId`
FROM (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`ModifiedAt`, `p`.`fitType`, `p`.`IsActive`, `p`.`Price`, `p`.`SubCategoryId`, CASE
        WHEN `d`.`Id` IS NOT NULL THEN `p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`)
        ELSE `p`.`Price`
    END AS `c`, `d`.`Id` AS `Id0`, `d`.`CategoryId`, `d`.`CreatedAt` AS `CreatedAt0`, `d`.`DeletedAt` AS `DeletedAt0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`EndDate`, `d`.`IsActive` AS `IsActive0`, `d`.`ModifiedAt` AS `ModifiedAt0`, `d`.`Name` AS `Name0`, `d`.`StartDate`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE `p`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`, `t`.`Id0`, `t0`.`Id`
2025-09-20 06:55:41.921 +03:00 [INF] Product found: search 3 (ID: 13)
2025-09-20 06:55:42.792 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDetailDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-20 06:55:42.804 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProduct (E-Commerce) in 1467.8029ms
2025-09-20 06:55:42.811 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProduct (E-Commerce)'
2025-09-20 06:55:42.813 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products/13 - 200 1609 application/json; charset=utf-8 1715.8065ms
2025-09-20 06:55:44.036 +03:00 [INF] Setting cache for key: Product:13_active:_deleted:_IsAdmin:True
2025-09-20 06:55:44.289 +03:00 [INF] Cache set successfully for key: Product:13_active:_deleted:_IsAdmin:True with tags: [Productwithdata]
2025-09-20 06:56:01.076 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Products?search=search%203&page=1&pageSize=5 - null null
2025-09-20 06:56:01.082 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-09-20 06:56:01.259 +03:00 [INF] Executed DbCommand (105ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-09-20 06:56:01.267 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProducts (E-Commerce)'
2025-09-20 06:56:01.271 +03:00 [INF] Route matched with {action = "GetProducts", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] GetProducts(System.String, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-09-20 06:56:01.277 +03:00 [INF] Executing GetProducts
2025-09-20 06:56:01.279 +03:00 [INF] Getting cache for key: Product:list_active:_deleted:_search:advsearch_{"SearchTerm":"search 3","Subcategoryid":null,"Gender":null,"FitType":null,"MinPrice":null,"MaxPrice":null,"InStock":null,"OnSale":null,"SortBy":null,"SortDescending":false,"Color":null,"MinSize":null,"MaxSize":null}_1_5___pageSize:5_page:1_tag:AdvancedSearch_IsAdmin:True
2025-09-20 06:56:01.492 +03:00 [WRN] Cache miss for key: Product:list_active:_deleted:_search:advsearch_{"SearchTerm":"search 3","Subcategoryid":null,"Gender":null,"FitType":null,"MinPrice":null,"MaxPrice":null,"InStock":null,"OnSale":null,"SortBy":null,"SortDescending":false,"Color":null,"MinSize":null,"MaxSize":null}_1_5___pageSize:5_page:1_tag:AdvancedSearch_IsAdmin:True
2025-09-20 06:56:01.496 +03:00 [INF] Execute GetAll for entity Product
2025-09-20 06:56:01.661 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__8__locals1_searchCriteria_SearchTerm_0_contains='?' (Size = 20), @__8__locals1_searchCriteria_SearchTerm_0_contains_1='?' (Size = 50), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`SubCategoryId`, `t`.`Price`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`fitType`, `t`.`IsActive`, CASE
    WHEN `d`.`Id` IS NOT NULL THEN `t`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `t`.`Price`)
    ELSE `t`.`Price`
END, `d`.`EndDate`, `d`.`Name`, `d`.`DiscountPercent`, `d`.`Id`, `t0`.`Id`, `t0`.`Url`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Name` LIKE @__8__locals1_searchCriteria_SearchTerm_0_contains) OR (`p`.`Description` LIKE @__8__locals1_searchCriteria_SearchTerm_0_contains_1)
    ORDER BY `p`.`Name`
    LIMIT @__p_2 OFFSET @__p_1
) AS `t`
LEFT JOIN `Discount` AS `d` ON `t`.`DiscountId` = `d`.`Id`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
ORDER BY `t`.`Name`, `t`.`Id`, `d`.`Id`
2025-09-20 06:56:02.538 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-20 06:56:02.544 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProducts (E-Commerce) in 1268.1906ms
2025-09-20 06:56:02.547 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProducts (E-Commerce)'
2025-09-20 06:56:02.552 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Products?search=search%203&page=1&pageSize=5 - 200 1244 application/json; charset=utf-8 1475.6491ms
