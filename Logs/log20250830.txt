2025-08-30 05:14:56.698 +03:00 [INF] DB tables already exist. Exit install
2025-08-30 05:14:59.032 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-30 05:15:00.444 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-30 05:15:01.238 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-30 05:15:01.478 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-30 05:15:01.587 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-30 05:15:01.769 +03:00 [INF] Starting data seeding...
2025-08-30 05:15:01.893 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-30 05:15:02.848 +03:00 [INF] Executed DbCommand (122ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-30 05:15:02.940 +03:00 [INF] Role 'Admin' already exists.
2025-08-30 05:15:03.097 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-30 05:15:03.209 +03:00 [INF] Role 'User' already exists.
2025-08-30 05:15:03.396 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-30 05:15:03.511 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-30 05:15:03.513 +03:00 [INF] Data seeding completed successfully.
2025-08-30 05:15:05.313 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-30 05:15:05.434 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-30 05:15:05.436 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-30 05:15:05.442 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-30 05:15:05.443 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-30 05:15:05.466 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-30 05:15:05.477 +03:00 [INF] Hosting environment: Development
2025-08-30 05:15:05.479 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-30 05:15:05.681 +03:00 [INF] Server mrrobot:17872:bccb8c84 successfully announced in 201.6515 ms
2025-08-30 05:15:05.688 +03:00 [INF] Server mrrobot:17872:bccb8c84 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-30 05:15:05.742 +03:00 [INF] Server mrrobot:17872:bccb8c84 all the dispatchers started
2025-08-30 05:15:08.929 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-30 05:15:09.348 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 419.0406ms
2025-08-30 05:15:09.398 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/swagger-ui.css - null null
2025-08-30 05:15:09.398 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.css - null null
2025-08-30 05:15:09.411 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-30 05:15:09.411 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-30 05:15:09.442 +03:00 [INF] The file /swagger-ui.css was not modified
2025-08-30 05:15:09.477 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-30 05:15:09.482 +03:00 [INF] The file /index.css was not modified
2025-08-30 05:15:09.491 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 80.0752ms
2025-08-30 05:15:09.508 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16504 application/javascript; charset=utf-8 96.7554ms
2025-08-30 05:15:09.544 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/swagger-ui.css - 304 null text/css 146.0177ms
2025-08-30 05:15:09.610 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.css - 304 null text/css 211.7826ms
2025-08-30 05:15:09.782 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 304.8764ms
2025-08-30 05:15:09.920 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-30 05:15:10.194 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 273.1057ms
2025-08-30 05:15:50.739 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Account/login - application/json-patch+json 70
2025-08-30 05:15:50.757 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:15:50.763 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-30 05:15:50.897 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-30 05:15:50.921 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-08-30 05:15:50.973 +03:00 [INF] Route matched with {action = "LoginAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.TokenDtos.TokensDto]]] LoginAsync(E_Commerce.DtoModels.AccountDtos.LoginDTo) on controller E_Commerce.Controllers.AccountController (E-Commerce).
2025-08-30 05:15:51.433 +03:00 [INF] In LoginAsync Method 
2025-08-30 05:15:51.594 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-30 05:15:51.800 +03:00 [INF] üîê Generating Access Token for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-30 05:15:51.857 +03:00 [INF] üîê Generating Access Token for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-30 05:15:52.031 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedUserName` = @__normalizedUserName_0)
LIMIT 1
2025-08-30 05:15:52.199 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-30 05:15:53.414 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@p22='?' (Size = 255), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p23='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 256), @p15='?' (Size = 256), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `AspNetUsers` SET `AccessFailedCount` = @p0, `Age` = @p1, `ConcurrencyStamp` = @p2, `CreateAt` = @p3, `DeletedAt` = @p4, `Email` = @p5, `EmailConfirmed` = @p6, `Gender` = @p7, `ImageId` = @p8, `ImageId1` = @p9, `LastVisit` = @p10, `LockoutEnabled` = @p11, `LockoutEnd` = @p12, `Name` = @p13, `NormalizedEmail` = @p14, `NormalizedUserName` = @p15, `PasswordHash` = @p16, `PhoneNumber` = @p17, `PhoneNumberConfirmed` = @p18, `SecurityStamp` = @p19, `TwoFactorEnabled` = @p20, `UserName` = @p21
WHERE `Id` = @p22 AND `ConcurrencyStamp` = @p23;
SELECT ROW_COUNT();
2025-08-30 05:15:53.670 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-08-30 05:15:53.748 +03:00 [INF] ‚úÖ Access Token generated successfully for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-30 05:15:53.755 +03:00 [INF] üîë Generating Refresh Token for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-30 05:15:53.979 +03:00 [INF] ‚úÖ RefreshToken generated and stored for User ID: ac03a6c3-9450-420a-9e6e-ea8902c018c5
2025-08-30 05:15:54.044 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.TokenDtos.TokensDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-30 05:15:54.080 +03:00 [INF] Executed action E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce) in 3095.0481ms
2025-08-30 05:15:54.091 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-08-30 05:15:54.104 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Account/login - 200 1251 application/json; charset=utf-8 3364.7243ms
2025-08-30 05:16:30.651 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/categories - application/json-patch+json 128
2025-08-30 05:16:30.657 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:16:30.760 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-30 05:16:31.035 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-30 05:16:31.049 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.CreateAsync (E-Commerce)'
2025-08-30 05:16:31.069 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategoryDto]]] CreateAsync(E_Commerce.DtoModels.CategoryDtos.CreateCategotyDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-30 05:16:31.098 +03:00 [INF] Executing CreateAsync
2025-08-30 05:16:31.113 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.CreateAsync (E-Commerce) in 36.1177ms
2025-08-30 05:16:31.118 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.CreateAsync (E-Commerce)'
2025-08-30 05:16:31.122 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at E_Commerce.Services.CategoryServcies.CategoryServices.CreateAsync(CreateCategotyDto categoty, String userid) in D:\project_fashion\E-Commerce-API-main\Services\CategoryServices\CategoryServices.cs:line 52
   at E_Commerce.Controllers.CategoriesController.CreateAsync(CreateCategotyDto categoryDto) in D:\project_fashion\E-Commerce-API-main\Controllers\CategoryController.cs:line 158
   at lambda_method432(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at SecurityStampMiddleware.Invoke(HttpContext context) in D:\project_fashion\E-Commerce-API-main\MiddleWares\SecurityStampMiddleware.cs:line 75
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context) in D:\project_fashion\E-Commerce-API-main\Middleware\UserAuthenticationMiddleware.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-30 05:16:31.176 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/categories - 500 null text/plain; charset=utf-8 525.6349ms
2025-08-30 05:18:01.533 +03:00 [INF] DB tables already exist. Exit install
2025-08-30 05:18:05.280 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-30 05:18:06.617 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-30 05:18:07.314 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-30 05:18:07.508 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-30 05:18:07.545 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-30 05:18:07.577 +03:00 [INF] Starting data seeding...
2025-08-30 05:18:07.632 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-30 05:18:08.408 +03:00 [INF] Executed DbCommand (128ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-30 05:18:08.518 +03:00 [INF] Role 'Admin' already exists.
2025-08-30 05:18:08.679 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-30 05:18:08.686 +03:00 [INF] Role 'User' already exists.
2025-08-30 05:18:08.882 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-30 05:18:09.009 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-30 05:18:09.012 +03:00 [INF] Data seeding completed successfully.
2025-08-30 05:18:11.511 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-30 05:18:11.679 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-30 05:18:11.681 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-30 05:18:11.683 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-30 05:18:11.686 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-30 05:18:11.757 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-30 05:18:11.759 +03:00 [INF] Hosting environment: Development
2025-08-30 05:18:11.775 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-30 05:18:11.964 +03:00 [INF] Server mrrobot:19152:5d2f1eae successfully announced in 185.4996 ms
2025-08-30 05:18:12.292 +03:00 [INF] Server mrrobot:19152:5d2f1eae is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-30 05:18:13.174 +03:00 [INF] Server mrrobot:19152:5d2f1eae all the dispatchers started
2025-08-30 05:18:13.269 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-30 05:18:13.818 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-30 05:18:13.837 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-30 05:18:13.868 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 49.9595ms
2025-08-30 05:18:13.865 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 674.3098ms
2025-08-30 05:18:13.849 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-30 05:18:13.878 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16504 application/javascript; charset=utf-8 60.2956ms
2025-08-30 05:18:14.027 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 177.7398ms
2025-08-30 05:18:14.158 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-30 05:18:14.503 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 345.5287ms
2025-08-30 05:18:52.512 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/categories - application/json-patch+json 128
2025-08-30 05:18:52.522 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:18:52.529 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-30 05:18:53.075 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-30 05:18:53.308 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-30 05:18:53.383 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.CreateAsync (E-Commerce)'
2025-08-30 05:18:53.445 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategoryDto]]] CreateAsync(E_Commerce.DtoModels.CategoryDtos.CreateCategotyDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-30 05:18:53.730 +03:00 [INF] Executing CreateAsync
2025-08-30 05:20:03.838 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.CreateAsync (E-Commerce) in 70365.254ms
2025-08-30 05:20:03.845 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.CreateAsync (E-Commerce)'
2025-08-30 05:20:09.194 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at E_Commerce.Services.CategoryServcies.CategoryServices.CreateAsync(CreateCategotyDto categoty, String userid)
   at E_Commerce.Controllers.CategoriesController.CreateAsync(CreateCategotyDto categoryDto)
   at lambda_method278(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at SecurityStampMiddleware.Invoke(HttpContext context)
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-30 05:20:09.321 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/categories - 500 null text/plain; charset=utf-8 76808.9881ms
2025-08-30 05:20:17.972 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/categories - application/json-patch+json 128
2025-08-30 05:20:18.079 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:20:18.087 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-30 05:20:18.280 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-30 05:20:18.284 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.CreateAsync (E-Commerce)'
2025-08-30 05:20:18.295 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategoryDto]]] CreateAsync(E_Commerce.DtoModels.CategoryDtos.CreateCategotyDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-30 05:20:18.302 +03:00 [INF] Executing CreateAsync
2025-08-30 05:20:18.307 +03:00 [INF] Execute CreateAsync
2025-08-30 05:20:18.316 +03:00 [INF] Executing IsExsistsByNameAsync for name: rXn 2uHbFHSUq79xiCgq
2025-08-30 05:20:18.490 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__name_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE `c`.`Name` = @__name_0)
2025-08-30 05:20:18.516 +03:00 [INF] Category with name: rXn 2uHbFHSUq79xiCgq does not exist
2025-08-30 05:20:18.790 +03:00 [INF] Executing CreateAsync for entity Category
2025-08-30 05:20:18.998 +03:00 [INF] Category added successfully (pending save)
2025-08-30 05:20:19.397 +03:00 [INF] Executed DbCommand (92ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime), @p6='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Categories` (`CreatedAt`, `DeletedAt`, `Description`, `DisplayOrder`, `IsActive`, `ModifiedAt`, `Name`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Categories`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-30 05:20:19.570 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-30 05:20:19.576 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-30 05:20:19.623 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-30 05:20:21.006 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-30 05:20:21.195 +03:00 [INF] Executing GetByIdAsync for entity Category with ID: 5
2025-08-30 05:20:21.355 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-08-30 05:20:21.572 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-30 05:20:21.636 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.CreateAsync (E-Commerce) in 3337.9707ms
2025-08-30 05:20:21.641 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.CreateAsync (E-Commerce)'
2025-08-30 05:20:21.655 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/categories - 201 490 application/json; charset=utf-8 3683.9709ms
2025-08-30 05:20:24.522 +03:00 [INF] Removing cache by tags: [category, categorywithdata]
2025-08-30 05:20:25.410 +03:00 [INF] Removed 1 cache entries for tags: [category, categorywithdata]
2025-08-30 05:22:17.669 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/categories/5/images - multipart/form-data; boundary=----WebKitFormBoundaryozU7i8SsXLdmoGS5 318246
2025-08-30 05:22:17.758 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:22:17.770 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-30 05:22:18.007 +03:00 [INF] Executed DbCommand (130ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-30 05:22:18.018 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-30 05:22:18.052 +03:00 [INF] Route matched with {action = "AddImagesToCategoryAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]]] AddImagesToCategoryAsync(Int32, E_Commerce.DtoModels.CategoryDtos.AddImagesDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-30 05:22:18.170 +03:00 [INF] Executing AddImagesToCategoryAsync for id: 5
2025-08-30 05:22:18.175 +03:00 [INF] Executing AddImagesToCategoryAsync for categoryId: 5
2025-08-30 05:22:18.619 +03:00 [INF] Executed DbCommand (113ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL)
2025-08-30 05:22:18.627 +03:00 [INF] üì• Saving 1 images to CategoryPhotos
2025-08-30 05:22:18.634 +03:00 [INF] üì• Saving image to CategoryPhotos
2025-08-30 05:22:28.441 +03:00 [INF] Executing CreateAsync for entity Image
2025-08-30 05:22:28.516 +03:00 [INF] Image added successfully (pending save)
2025-08-30 05:22:28.719 +03:00 [ERR] Failed executing DbCommand (98ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int64), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime), @p17='?' (Size = 4000), @p18='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `CustomerId`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `PublicId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-30 05:22:28.950 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'E_Commerce.Context.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Unknown column 'PublicId' in 'field list'
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Unknown column 'PublicId' in 'field list'
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-30 05:22:29.472 +03:00 [ERR] ‚ùå Error saving image: An error occurred while saving the entity changes. See the inner exception for details.
2025-08-30 05:22:30.419 +03:00 [ERR] ‚ùå Failed to save image #1: Error saving image: An error occurred while saving the entity changes. See the inner exception for details.
2025-08-30 05:22:30.422 +03:00 [WRN] Some images failed to save: Image #1: Error saving image: An error occurred while saving the entity changes. See the inner exception for details.
2025-08-30 05:22:30.535 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-30 05:22:30.542 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce) in 12486.9328ms
2025-08-30 05:22:30.551 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-30 05:22:30.554 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/categories/5/images - 400 1076 application/json; charset=utf-8 12885.1862ms
2025-08-30 05:23:00.640 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/categories/5/images - multipart/form-data; boundary=----WebKitFormBoundaryGfbBYvBd6Gr0vBjn 318246
2025-08-30 05:23:00.703 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:23:00.706 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-30 05:23:00.873 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-30 05:23:00.894 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-30 05:23:00.899 +03:00 [INF] Route matched with {action = "AddImagesToCategoryAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]]] AddImagesToCategoryAsync(Int32, E_Commerce.DtoModels.CategoryDtos.AddImagesDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-30 05:23:00.912 +03:00 [INF] Executing AddImagesToCategoryAsync for id: 5
2025-08-30 05:23:00.921 +03:00 [INF] Executing AddImagesToCategoryAsync for categoryId: 5
2025-08-30 05:23:01.232 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL)
2025-08-30 05:23:01.238 +03:00 [INF] üì• Saving 1 images to CategoryPhotos
2025-08-30 05:23:01.239 +03:00 [INF] üì• Saving image to CategoryPhotos
2025-08-30 05:23:03.048 +03:00 [INF] Executing CreateAsync for entity Image
2025-08-30 05:23:03.050 +03:00 [INF] Image added successfully (pending save)
2025-08-30 05:23:03.209 +03:00 [ERR] Failed executing DbCommand (80ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int64), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime), @p17='?' (Size = 4000), @p18='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `CustomerId`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `PublicId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-30 05:23:03.370 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'E_Commerce.Context.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Unknown column 'PublicId' in 'field list'
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Unknown column 'PublicId' in 'field list'
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-30 05:23:03.791 +03:00 [ERR] ‚ùå Error saving image: An error occurred while saving the entity changes. See the inner exception for details.
2025-08-30 05:23:04.747 +03:00 [ERR] ‚ùå Failed to save image #1: Error saving image: An error occurred while saving the entity changes. See the inner exception for details.
2025-08-30 05:23:04.751 +03:00 [WRN] Some images failed to save: Image #1: Error saving image: An error occurred while saving the entity changes. See the inner exception for details.
2025-08-30 05:23:04.858 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-30 05:23:04.870 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce) in 3967.7486ms
2025-08-30 05:23:04.873 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-30 05:23:04.878 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/categories/5/images - 400 1076 application/json; charset=utf-8 4237.4476ms
2025-08-30 05:23:12.780 +03:00 [INF] 1 servers were removed due to timeout
2025-08-30 05:23:13.842 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/categories/5/images - multipart/form-data; boundary=----WebKitFormBoundaryPYZ5elACqnZ3v4Mo 318246
2025-08-30 05:23:13.850 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:23:13.852 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-30 05:23:14.007 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-30 05:23:14.014 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-30 05:23:14.018 +03:00 [INF] Route matched with {action = "AddImagesToCategoryAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]]] AddImagesToCategoryAsync(Int32, E_Commerce.DtoModels.CategoryDtos.AddImagesDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-30 05:23:14.030 +03:00 [INF] Executing AddImagesToCategoryAsync for id: 5
2025-08-30 05:23:14.033 +03:00 [INF] Executing AddImagesToCategoryAsync for categoryId: 5
2025-08-30 05:23:14.345 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL)
2025-08-30 05:23:14.353 +03:00 [INF] üì• Saving 1 images to CategoryPhotos
2025-08-30 05:23:14.356 +03:00 [INF] üì• Saving image to CategoryPhotos
2025-08-30 05:23:55.597 +03:00 [INF] Executing CreateAsync for entity Image
2025-08-30 05:23:55.606 +03:00 [INF] Image added successfully (pending save)
2025-08-30 05:24:00.562 +03:00 [ERR] Failed executing DbCommand (79ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int64), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime), @p17='?' (Size = 4000), @p18='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `CustomerId`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `PublicId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-30 05:24:00.732 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'E_Commerce.Context.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Unknown column 'PublicId' in 'field list'
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Unknown column 'PublicId' in 'field list'
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-30 05:24:22.785 +03:00 [ERR] ‚ùå Error saving image: An error occurred while saving the entity changes. See the inner exception for details.
2025-08-30 05:24:23.729 +03:00 [ERR] ‚ùå Failed to save image #1: Error saving image: An error occurred while saving the entity changes. See the inner exception for details.
2025-08-30 05:24:23.732 +03:00 [WRN] Some images failed to save: Image #1: Error saving image: An error occurred while saving the entity changes. See the inner exception for details.
2025-08-30 05:24:23.862 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-30 05:24:23.866 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce) in 69843.5993ms
2025-08-30 05:24:23.880 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-30 05:24:23.882 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/categories/5/images - 400 1076 application/json; charset=utf-8 70040.5397ms
2025-08-30 05:24:36.516 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-30 05:24:36.543 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 27.4323ms
2025-08-30 05:24:36.621 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-30 05:24:36.631 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 10.6064ms
2025-08-30 05:24:36.668 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-30 05:24:36.679 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16504 application/javascript; charset=utf-8 10.6015ms
2025-08-30 05:24:36.858 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-30 05:24:36.886 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.2906ms
2025-08-30 05:24:37.272 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-30 05:24:37.355 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/favicon-32x32.png - null null
2025-08-30 05:24:37.374 +03:00 [INF] The file /favicon-32x32.png was not modified
2025-08-30 05:24:37.378 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/favicon-32x32.png - 304 null image/png 21.8768ms
2025-08-30 05:24:37.698 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 425.8364ms
2025-08-30 05:26:02.934 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-30 05:26:03.819 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-30 05:26:54.303 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-30 05:26:54.965 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-30 05:26:57.414 +03:00 [INF] Executed DbCommand (98ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-30 05:26:57.591 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-30 05:28:36.375 +03:00 [INF] DB tables already exist. Exit install
2025-08-30 05:28:37.744 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-30 05:28:38.799 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-30 05:28:39.517 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-30 05:28:39.712 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-30 05:28:39.736 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-30 05:28:39.752 +03:00 [INF] Starting data seeding...
2025-08-30 05:28:39.813 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-30 05:28:40.399 +03:00 [INF] Executed DbCommand (111ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-30 05:28:40.480 +03:00 [INF] Role 'Admin' already exists.
2025-08-30 05:28:40.637 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-30 05:28:40.642 +03:00 [INF] Role 'User' already exists.
2025-08-30 05:28:40.818 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-30 05:28:40.925 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-30 05:28:40.928 +03:00 [INF] Data seeding completed successfully.
2025-08-30 05:28:42.533 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-30 05:28:42.692 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-30 05:28:42.809 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-30 05:28:42.903 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-30 05:28:42.905 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-30 05:28:42.977 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-30 05:28:42.990 +03:00 [INF] Hosting environment: Development
2025-08-30 05:28:43.614 +03:00 [INF] Server mrrobot:24972:939b3089 successfully announced in 595.0924 ms
2025-08-30 05:28:43.733 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-30 05:28:43.779 +03:00 [INF] Server mrrobot:24972:939b3089 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-30 05:28:43.804 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-30 05:28:44.202 +03:00 [INF] Server mrrobot:24972:939b3089 all the dispatchers started
2025-08-30 05:28:44.866 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 1062.0122ms
2025-08-30 05:28:45.100 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-30 05:28:45.100 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-30 05:28:45.105 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-30 05:28:45.148 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 48.1998ms
2025-08-30 05:28:45.159 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16504 application/javascript; charset=utf-8 58.4107ms
2025-08-30 05:28:45.283 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 177.7808ms
2025-08-30 05:28:45.426 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-30 05:28:45.896 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 470.0516ms
2025-08-30 05:29:42.412 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/categories/5/images - multipart/form-data; boundary=----WebKitFormBoundary6ueCpwu2BlG6Op2h 318246
2025-08-30 05:29:42.424 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:29:42.431 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-30 05:29:42.692 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-30 05:29:43.025 +03:00 [INF] Executed DbCommand (129ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-30 05:29:43.054 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-30 05:29:43.119 +03:00 [INF] Route matched with {action = "AddImagesToCategoryAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]]] AddImagesToCategoryAsync(Int32, E_Commerce.DtoModels.CategoryDtos.AddImagesDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-30 05:29:43.317 +03:00 [INF] Executing AddImagesToCategoryAsync for id: 5
2025-08-30 05:29:43.330 +03:00 [INF] Executing AddImagesToCategoryAsync for categoryId: 5
2025-08-30 05:29:44.048 +03:00 [INF] Executed DbCommand (185ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL)
2025-08-30 05:29:44.056 +03:00 [INF] üì• Saving 1 images to CategoryPhotos
2025-08-30 05:29:44.065 +03:00 [INF] üì• Saving image to CategoryPhotos
2025-08-30 05:29:47.092 +03:00 [INF] Executing CreateAsync for entity Image
2025-08-30 05:29:47.228 +03:00 [INF] Image added successfully (pending save)
2025-08-30 05:29:47.580 +03:00 [INF] Executed DbCommand (126ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int64), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime), @p16='?' (Size = 4000), @p17='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `CustomerId`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-30 05:29:47.751 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-30 05:29:47.755 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-30 05:29:47.781 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-30 05:29:47.784 +03:00 [INF] ‚úÖ Image saved: https://res.cloudinary.com/dud4kxeix/image/upload/v1756520985/CategoryPhotos/2f18e1fa-da3e-4ac5-a9bd-85cde7879ee2.png
2025-08-30 05:29:47.786 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-30 05:29:47.788 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-30 05:29:47.792 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-30 05:29:47.990 +03:00 [INF] Executed DbCommand (88ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime), @p8='?' (Size = 255), @p9='?' (DbType = DateTime), @p10='?' (DbType = DateTime), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-30 05:29:48.231 +03:00 [ERR] An error occurred using a transaction.
2025-08-30 05:29:48.246 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce) in 5116.5989ms
2025-08-30 05:29:48.253 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-30 05:29:48.264 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Already committed or rolled back.
   at MySqlConnector.MySqlTransaction.VerifyValid() in /_/src/MySqlConnector/MySqlTransaction.cs:line 287
   at MySqlConnector.MySqlTransaction.RollbackAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlTransaction.cs:line 65
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.RollbackAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.RollbackAsync(CancellationToken cancellationToken)
   at E_Commerce.Services.CategoryServices.CategoryImageServices.AddImagesToCategoryAsync(Int32 categoryId, List`1 images, String userId) in D:\project_fashion\E-Commerce-API-main\Services\CategoryServices\CategoryImageServices.cs:line 108
   at E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync(Int32 id, AddImagesDto images) in D:\project_fashion\E-Commerce-API-main\Controllers\CategoryController.cs:line 253
   at lambda_method278(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at SecurityStampMiddleware.Invoke(HttpContext context) in D:\project_fashion\E-Commerce-API-main\MiddleWares\SecurityStampMiddleware.cs:line 75
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context) in D:\project_fashion\E-Commerce-API-main\Middleware\UserAuthenticationMiddleware.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-30 05:29:48.367 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/categories/5/images - 500 null text/plain; charset=utf-8 5955.3442ms
2025-08-30 05:31:22.703 +03:00 [INF] DB tables already exist. Exit install
2025-08-30 05:31:25.045 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-30 05:31:26.257 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-30 05:31:27.009 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-30 05:31:27.196 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-30 05:31:27.227 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-30 05:31:27.253 +03:00 [INF] Starting data seeding...
2025-08-30 05:31:27.298 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-30 05:31:28.004 +03:00 [INF] Executed DbCommand (143ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-30 05:31:28.100 +03:00 [INF] Role 'Admin' already exists.
2025-08-30 05:31:28.262 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-30 05:31:28.272 +03:00 [INF] Role 'User' already exists.
2025-08-30 05:31:28.465 +03:00 [INF] Executed DbCommand (89ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-30 05:31:28.563 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-30 05:31:28.566 +03:00 [INF] Data seeding completed successfully.
2025-08-30 05:31:30.325 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-30 05:31:30.599 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-30 05:31:30.945 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-30 05:31:31.028 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-30 05:31:31.060 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-30 05:31:31.131 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-30 05:31:31.174 +03:00 [INF] Hosting environment: Development
2025-08-30 05:31:31.438 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-30 05:31:31.485 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-30 05:31:31.500 +03:00 [INF] Server mrrobot:10316:ebb614ed successfully announced in 328.848 ms
2025-08-30 05:31:31.524 +03:00 [INF] Server mrrobot:10316:ebb614ed is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-30 05:31:31.799 +03:00 [INF] 1 servers were removed due to timeout
2025-08-30 05:31:32.118 +03:00 [INF] Server mrrobot:10316:ebb614ed all the dispatchers started
2025-08-30 05:31:32.602 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-30 05:31:32.602 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-30 05:31:32.654 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 1191.2806ms
2025-08-30 05:31:32.676 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16504 application/javascript; charset=utf-8 74.2786ms
2025-08-30 05:31:32.797 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-30 05:31:32.967 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 170.0621ms
2025-08-30 05:31:33.036 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 434.1231ms
2025-08-30 05:31:33.131 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-30 05:31:33.432 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 299.2136ms
2025-08-30 05:32:06.341 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/categories/5/images - multipart/form-data; boundary=----WebKitFormBoundaryxb4e9K9vUu0BTZMs 318246
2025-08-30 05:32:06.353 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:32:06.357 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-30 05:32:06.784 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-30 05:32:07.062 +03:00 [INF] Executed DbCommand (123ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-30 05:32:07.120 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-30 05:32:07.191 +03:00 [INF] Route matched with {action = "AddImagesToCategoryAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]]] AddImagesToCategoryAsync(Int32, E_Commerce.DtoModels.CategoryDtos.AddImagesDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-30 05:32:07.407 +03:00 [INF] Executing AddImagesToCategoryAsync for id: 5
2025-08-30 05:32:07.413 +03:00 [INF] Executing AddImagesToCategoryAsync for categoryId: 5
2025-08-30 05:32:08.103 +03:00 [INF] Executed DbCommand (203ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL)
2025-08-30 05:32:08.114 +03:00 [INF] üì• Saving 1 images to CategoryPhotos
2025-08-30 05:32:08.121 +03:00 [INF] üì• Saving image to CategoryPhotos
2025-08-30 05:32:14.519 +03:00 [INF] Executing CreateAsync for entity Image
2025-08-30 05:32:14.677 +03:00 [INF] Image added successfully (pending save)
2025-08-30 05:32:18.912 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int64), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime), @p16='?' (Size = 4000), @p17='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `CustomerId`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-30 05:32:19.046 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-30 05:32:19.051 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-30 05:32:19.089 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-30 05:32:19.094 +03:00 [INF] ‚úÖ Image saved: https://res.cloudinary.com/dud4kxeix/image/upload/v1756521133/CategoryPhotos/3cd4ada6-ca3f-4b8f-9707-4834ce348dbb.png
2025-08-30 05:32:19.097 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-30 05:32:19.101 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-30 05:32:19.105 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-30 05:32:19.305 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime), @p8='?' (Size = 255), @p9='?' (DbType = DateTime), @p10='?' (DbType = DateTime), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-30 05:32:35.216 +03:00 [ERR] An error occurred using a transaction.
2025-08-30 05:32:44.894 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce) in 37690.8598ms
2025-08-30 05:32:44.902 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-30 05:32:48.631 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Already committed or rolled back.
   at MySqlConnector.MySqlTransaction.VerifyValid() in /_/src/MySqlConnector/MySqlTransaction.cs:line 287
   at MySqlConnector.MySqlTransaction.RollbackAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlTransaction.cs:line 65
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.RollbackAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.RollbackAsync(CancellationToken cancellationToken)
   at E_Commerce.Services.CategoryServices.CategoryImageServices.AddImagesToCategoryAsync(Int32 categoryId, List`1 images, String userId) in D:\project_fashion\E-Commerce-API-main\Services\CategoryServices\CategoryImageServices.cs:line 108
   at E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync(Int32 id, AddImagesDto images) in D:\project_fashion\E-Commerce-API-main\Controllers\CategoryController.cs:line 253
   at lambda_method278(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at SecurityStampMiddleware.Invoke(HttpContext context) in D:\project_fashion\E-Commerce-API-main\MiddleWares\SecurityStampMiddleware.cs:line 75
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context) in D:\project_fashion\E-Commerce-API-main\Middleware\UserAuthenticationMiddleware.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-30 05:32:48.763 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/categories/5/images - 500 null text/plain; charset=utf-8 42422.7012ms
2025-08-30 05:35:10.789 +03:00 [INF] DB tables already exist. Exit install
2025-08-30 05:35:13.580 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-30 05:35:14.702 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-30 05:35:15.405 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-30 05:35:15.586 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-30 05:35:15.609 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-30 05:35:15.632 +03:00 [INF] Starting data seeding...
2025-08-30 05:35:15.679 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-30 05:35:16.309 +03:00 [INF] Executed DbCommand (128ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-30 05:35:16.475 +03:00 [INF] Role 'Admin' already exists.
2025-08-30 05:35:16.632 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-30 05:35:16.640 +03:00 [INF] Role 'User' already exists.
2025-08-30 05:35:16.814 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-30 05:35:16.930 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-30 05:35:16.933 +03:00 [INF] Data seeding completed successfully.
2025-08-30 05:35:18.234 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-30 05:35:18.332 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-30 05:35:18.334 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-30 05:35:18.336 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-30 05:35:18.338 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-30 05:35:18.360 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-30 05:35:18.363 +03:00 [INF] Hosting environment: Development
2025-08-30 05:35:18.365 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-30 05:35:18.538 +03:00 [INF] Server mrrobot:17636:a41c83a8 successfully announced in 165.9484 ms
2025-08-30 05:35:18.556 +03:00 [INF] Server mrrobot:17636:a41c83a8 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-30 05:35:18.908 +03:00 [INF] Server mrrobot:17636:a41c83a8 all the dispatchers started
2025-08-30 05:35:18.932 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-30 05:35:19.528 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-30 05:35:19.528 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-30 05:35:19.557 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 622.8956ms
2025-08-30 05:35:19.662 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-30 05:35:19.724 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16504 application/javascript; charset=utf-8 196.8052ms
2025-08-30 05:35:19.739 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 210.8446ms
2025-08-30 05:35:19.881 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 219.1352ms
2025-08-30 05:35:19.973 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-30 05:35:20.355 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 382.0474ms
2025-08-30 05:36:34.833 +03:00 [INF] DB tables already exist. Exit install
2025-08-30 05:36:36.405 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-30 05:36:37.803 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-30 05:36:38.533 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-30 05:36:38.736 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-30 05:36:38.761 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-30 05:36:38.784 +03:00 [INF] Starting data seeding...
2025-08-30 05:36:38.810 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-30 05:36:39.396 +03:00 [INF] Executed DbCommand (114ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-30 05:36:39.483 +03:00 [INF] Role 'Admin' already exists.
2025-08-30 05:36:39.646 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-30 05:36:39.651 +03:00 [INF] Role 'User' already exists.
2025-08-30 05:36:39.846 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-30 05:36:40.171 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-30 05:36:40.174 +03:00 [INF] Data seeding completed successfully.
2025-08-30 05:36:41.829 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-30 05:36:42.091 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-30 05:36:42.242 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-30 05:36:42.269 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-30 05:36:42.272 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-30 05:36:42.300 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-30 05:36:42.306 +03:00 [INF] Hosting environment: Development
2025-08-30 05:36:42.330 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-30 05:36:42.512 +03:00 [INF] Server mrrobot:27168:a355a249 successfully announced in 195.7864 ms
2025-08-30 05:36:42.535 +03:00 [INF] Server mrrobot:27168:a355a249 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-30 05:36:42.582 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-30 05:36:42.726 +03:00 [INF] 1 servers were removed due to timeout
2025-08-30 05:36:42.732 +03:00 [INF] Server mrrobot:27168:a355a249 all the dispatchers started
2025-08-30 05:36:43.257 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 677.0912ms
2025-08-30 05:36:43.658 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-30 05:36:43.672 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 13.8153ms
2025-08-30 05:36:43.695 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-30 05:36:43.698 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-30 05:36:43.712 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16504 application/javascript; charset=utf-8 13.5173ms
2025-08-30 05:36:43.817 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 121.881ms
2025-08-30 05:36:44.429 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-30 05:36:44.763 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 333.8296ms
2025-08-30 05:37:20.942 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/categories/5/images - multipart/form-data; boundary=----WebKitFormBoundaryn6LuetjsR43KuBLQ 318246
2025-08-30 05:37:20.952 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:37:20.957 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-30 05:37:21.176 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-30 05:37:21.431 +03:00 [INF] Executed DbCommand (123ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-30 05:37:21.490 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-30 05:37:21.535 +03:00 [INF] Route matched with {action = "AddImagesToCategoryAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]]] AddImagesToCategoryAsync(Int32, E_Commerce.DtoModels.CategoryDtos.AddImagesDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-30 05:37:21.706 +03:00 [INF] Executing AddImagesToCategoryAsync for id: 5
2025-08-30 05:37:21.713 +03:00 [INF] Executing AddImagesToCategoryAsync for categoryId: 5
2025-08-30 05:37:22.272 +03:00 [INF] Executed DbCommand (218ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL)
2025-08-30 05:37:22.316 +03:00 [INF] üì• Saving 1 images to CategoryPhotos
2025-08-30 05:37:22.328 +03:00 [INF] üì• Saving image to CategoryPhotos
2025-08-30 05:37:25.282 +03:00 [INF] Executing CreateAsync for entity Image
2025-08-30 05:37:25.403 +03:00 [INF] Image added successfully (pending save)
2025-08-30 05:37:25.734 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int64), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime), @p16='?' (Size = 4000), @p17='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `CustomerId`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-30 05:37:25.949 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-30 05:37:25.956 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-30 05:37:25.987 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-30 05:37:25.992 +03:00 [INF] ‚úÖ Image saved: https://res.cloudinary.com/dud4kxeix/image/upload/v1756521444/CategoryPhotos/6d056a1e-8b14-4a3e-9824-b078441e336c.png
2025-08-30 05:37:25.997 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-30 05:37:25.999 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-30 05:37:26.002 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-30 05:37:26.213 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime), @p8='?' (Size = 255), @p9='?' (DbType = DateTime), @p10='?' (DbType = DateTime), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-30 05:37:27.855 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-30 05:37:27.899 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce) in 6350.6466ms
2025-08-30 05:37:27.906 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.AddImagesToCategoryAsync (E-Commerce)'
2025-08-30 05:37:27.915 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/categories/5/images - 200 1135 application/json; charset=utf-8 6972.1967ms
2025-08-30 05:37:36.449 +03:00 [INF] Removing cache by tags: [category, categorywithdata]
2025-08-30 05:37:36.880 +03:00 [WRN] No cache entries found for tags: [category, categorywithdata]
2025-08-30 05:37:41.027 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/categories/1/images/main - multipart/form-data; boundary=----WebKitFormBoundarymKSHo9CJWSSgXNGG 136
2025-08-30 05:37:41.034 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:37:41.048 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-30 05:37:41.216 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-30 05:37:41.229 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.AddMainImageAsync (E-Commerce)'
2025-08-30 05:37:41.246 +03:00 [INF] Route matched with {action = "AddMainImageAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]] AddMainImageAsync(Int32, E_Commerce.DtoModels.CategoryDtos.AddMainImageDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-30 05:37:41.268 +03:00 [INF] Executing AddMainImageAsync for id: 1
2025-08-30 05:37:41.276 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-30 05:37:41.286 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.AddMainImageAsync (E-Commerce) in 34.0183ms
2025-08-30 05:37:41.291 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.AddMainImageAsync (E-Commerce)'
2025-08-30 05:37:41.295 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/categories/1/images/main - 400 207 application/json; charset=utf-8 268.1101ms
2025-08-30 05:37:52.995 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/categories/1/images/main - multipart/form-data; boundary=----WebKitFormBoundaryuyKzR6UyouDfdA1x 318245
2025-08-30 05:37:53.002 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:37:53.009 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-30 05:37:53.202 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-30 05:37:53.209 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.AddMainImageAsync (E-Commerce)'
2025-08-30 05:37:53.212 +03:00 [INF] Route matched with {action = "AddMainImageAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]] AddMainImageAsync(Int32, E_Commerce.DtoModels.CategoryDtos.AddMainImageDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-30 05:37:53.242 +03:00 [INF] Executing AddMainImageAsync for id: 1
2025-08-30 05:37:53.249 +03:00 [INF] Executing AddMainImageToCategoryAsync for categoryId: 1
2025-08-30 05:37:53.614 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL)
2025-08-30 05:37:53.624 +03:00 [INF] üì• Saving main image to CategoryPhotos
2025-08-30 05:37:55.777 +03:00 [INF] Executing CreateAsync for entity Image
2025-08-30 05:37:55.782 +03:00 [INF] Image added successfully (pending save)
2025-08-30 05:37:56.413 +03:00 [INF] Executed DbCommand (553ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int64), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime), @p16='?' (Size = 4000), @p17='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `CustomerId`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-30 05:37:56.596 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-30 05:37:56.604 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-30 05:37:56.613 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-30 05:37:56.619 +03:00 [INF] ‚úÖ Main image saved: https://res.cloudinary.com/dud4kxeix/image/upload/v1756521474/CategoryPhotos/0394ce6f-45e2-4cf9-ba39-7f57b764e3f9.png
2025-08-30 05:37:56.879 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-30 05:37:57.970 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-30 05:37:57.982 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.AddMainImageAsync (E-Commerce) in 4764.4695ms
2025-08-30 05:37:57.986 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.AddMainImageAsync (E-Commerce)'
2025-08-30 05:37:57.999 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/categories/1/images/main - 200 1134 application/json; charset=utf-8 5004.1268ms
2025-08-30 05:38:00.617 +03:00 [INF] Removing cache by tags: [category, categorywithdata]
2025-08-30 05:38:01.037 +03:00 [WRN] No cache entries found for tags: [category, categorywithdata]
2025-08-30 05:38:11.109 +03:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5069/api/categories/1/activate - null null
2025-08-30 05:38:11.114 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:38:11.120 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-30 05:38:11.279 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-30 05:38:11.285 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.ActivateCategoryAsync (E-Commerce)'
2025-08-30 05:38:11.294 +03:00 [INF] Route matched with {action = "ActivateCategoryAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] ActivateCategoryAsync(Int32) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-30 05:38:11.300 +03:00 [INF] Executing ActivateCategoryAsync for id: 1
2025-08-30 05:38:11.546 +03:00 [INF] [ActivateCategory] Start activation for id: 1
2025-08-30 05:38:11.550 +03:00 [INF] Execute GetAll for entity Category
2025-08-30 05:38:11.742 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`IsActive`, EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE (`c`.`Id` = `s`.`CategoryId`) AND (`s`.`IsActive` AND (`s`.`DeletedAt` IS NULL))) AS `HasActiveSubCategories`, EXISTS (
    SELECT 1
    FROM `Images` AS `i`
    WHERE (`c`.`Id` = `i`.`CategoryId`) AND `i`.`DeletedAt` IS NULL) AS `HasImages`
FROM `Categories` AS `c`
WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-08-30 05:38:11.758 +03:00 [WRN] [ActivateCategory] Category 1 has no active subcategories.
2025-08-30 05:38:11.850 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-30 05:38:11.860 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.ActivateCategoryAsync (E-Commerce) in 561.5555ms
2025-08-30 05:38:11.865 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.ActivateCategoryAsync (E-Commerce)'
2025-08-30 05:38:11.868 +03:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5069/api/categories/1/activate - 400 1209 application/json; charset=utf-8 758.7419ms
2025-08-30 05:38:23.868 +03:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5069/api/categories/1/deactivate - null null
2025-08-30 05:38:23.876 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:38:23.881 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-30 05:38:24.038 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-30 05:38:24.054 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.DeactivateCategoryAsync (E-Commerce)'
2025-08-30 05:38:24.074 +03:00 [INF] Route matched with {action = "DeactivateCategoryAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] DeactivateCategoryAsync(Int32) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-30 05:38:24.084 +03:00 [INF] Executing DeactivateCategoryAsync for id: 1
2025-08-30 05:38:24.330 +03:00 [INF] [DeactivateCategory] Starting deactivation process for Category ID: 1
2025-08-30 05:38:24.337 +03:00 [INF] Execute GetAll for entity Category
2025-08-30 05:38:24.445 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`IsActive`, `c`.`DeletedAt`, EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE (`c`.`Id` = `s`.`CategoryId`) AND (`s`.`IsActive` AND (`s`.`DeletedAt` IS NULL))) AS `HasActiveSubCategories`
FROM `Categories` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-08-30 05:38:24.451 +03:00 [WRN] [DeactivateCategory] Category 1 is already deactivated.
2025-08-30 05:38:24.535 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-30 05:38:24.539 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.DeactivateCategoryAsync (E-Commerce) in 457.0558ms
2025-08-30 05:38:24.544 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.DeactivateCategoryAsync (E-Commerce)'
2025-08-30 05:38:24.546 +03:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5069/api/categories/1/deactivate - 400 1167 application/json; charset=utf-8 678.1216ms
2025-08-30 05:38:42.678 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Collection - application/json-patch+json 70
2025-08-30 05:38:42.685 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:38:42.687 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-30 05:38:42.844 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-30 05:38:42.863 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CollectionController.CreateCollection (E-Commerce)'
2025-08-30 05:38:42.877 +03:00 [INF] Route matched with {action = "CreateCollection", controller = "Collection"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CollectionDtos.CollectionSummaryDto]]] CreateCollection(E_Commerce.DtoModels.CollectionDtos.CreateCollectionDto) on controller E_Commerce.Controllers.CollectionController (E-Commerce).
2025-08-30 05:38:43.212 +03:00 [INF] Executing CreateCollection: string
2025-08-30 05:38:43.219 +03:00 [INF] Creating collection: string
2025-08-30 05:38:43.536 +03:00 [INF] Method System.Func`2[System.Int32,System.Threading.Tasks.Task`1[System.Boolean]] :Name string
2025-08-30 05:38:43.642 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Collections` AS `c`
    WHERE LOWER(`c`.`Name`) = @__ToLower_0)
2025-08-30 05:38:43.648 +03:00 [INF] Executing CreateAsync for entity Collection
2025-08-30 05:38:43.682 +03:00 [INF] Collection added successfully (pending save)
2025-08-30 05:38:43.850 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Collections` (`CreatedAt`, `DeletedAt`, `Description`, `DisplayOrder`, `IsActive`, `ModifiedAt`, `Name`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Collections`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-30 05:38:43.942 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-30 05:38:43.944 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-30 05:38:43.948 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-30 05:38:44.107 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-30 05:38:45.223 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CollectionDtos.CollectionSummaryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-30 05:38:45.261 +03:00 [INF] Executed action E_Commerce.Controllers.CollectionController.CreateCollection (E-Commerce) in 2379.5016ms
2025-08-30 05:38:45.326 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CollectionController.CreateCollection (E-Commerce)'
2025-08-30 05:38:45.339 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Collection - 201 319 application/json; charset=utf-8 2660.2848ms
2025-08-30 05:38:49.261 +03:00 [INF] Removing cache by tags: [collection, CollectionWithProduct]
2025-08-30 05:38:50.346 +03:00 [INF] Removed 2 cache entries for tags: [collection, CollectionWithProduct]
2025-08-30 05:38:50.380 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Collection - application/json-patch+json 70
2025-08-30 05:38:50.391 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:38:50.394 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-30 05:38:50.551 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-30 05:38:50.556 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CollectionController.CreateCollection (E-Commerce)'
2025-08-30 05:38:50.561 +03:00 [INF] Route matched with {action = "CreateCollection", controller = "Collection"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CollectionDtos.CollectionSummaryDto]]] CreateCollection(E_Commerce.DtoModels.CollectionDtos.CreateCollectionDto) on controller E_Commerce.Controllers.CollectionController (E-Commerce).
2025-08-30 05:38:50.569 +03:00 [INF] Executing CreateCollection: string
2025-08-30 05:38:50.571 +03:00 [INF] Creating collection: string
2025-08-30 05:38:50.799 +03:00 [INF] Method System.Func`2[System.Int32,System.Threading.Tasks.Task`1[System.Boolean]] :Name string
2025-08-30 05:38:50.877 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Collections` AS `c`
    WHERE LOWER(`c`.`Name`) = @__ToLower_0)
2025-08-30 05:38:50.883 +03:00 [WRN] Collection with name 'string' already exists.
2025-08-30 05:38:50.966 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CollectionDtos.CollectionSummaryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-30 05:38:50.970 +03:00 [INF] Executed action E_Commerce.Controllers.CollectionController.CreateCollection (E-Commerce) in 404.5824ms
2025-08-30 05:38:50.976 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CollectionController.CreateCollection (E-Commerce)'
2025-08-30 05:38:50.980 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Collection - 400 242 application/json; charset=utf-8 599.6842ms
2025-08-30 05:39:25.449 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Discount - application/json-patch+json 158
2025-08-30 05:39:25.455 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:39:25.458 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-30 05:39:25.614 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-30 05:39:25.622 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.DiscountController.CreateAsync (E-Commerce)'
2025-08-30 05:39:25.640 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "Discount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.DiscoutDtos.DiscountDto]]] CreateAsync(E_Commerce.DtoModels.DiscoutDtos.CreateDiscountDto) on controller E_Commerce.Controllers.DiscountController (E-Commerce).
2025-08-30 05:39:25.672 +03:00 [INF] Executing CreateAsync
2025-08-30 05:39:25.683 +03:00 [INF] Creating new discount: string
2025-08-30 05:39:25.689 +03:00 [INF] Execute GetAll for entity Discount
2025-08-30 05:39:25.855 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__dto_Name_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT `d`.`Id`, `d`.`CategoryId`, `d`.`CreatedAt`, `d`.`DeletedAt`, `d`.`Description`, `d`.`DiscountPercent`, `d`.`EndDate`, `d`.`IsActive`, `d`.`ModifiedAt`, `d`.`Name`, `d`.`StartDate`
FROM `Discount` AS `d`
WHERE (`d`.`Name` = @__dto_Name_0) AND `d`.`DeletedAt` IS NULL
LIMIT 1
2025-08-30 05:39:26.104 +03:00 [INF] Executing CreateAsync for entity Discount
2025-08-30 05:39:26.152 +03:00 [INF] Discount added successfully (pending save)
2025-08-30 05:39:26.157 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-30 05:39:26.162 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-30 05:39:26.165 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-30 05:39:26.351 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 50), @p4='?' (DbType = Decimal), @p5='?' (DbType = DateTime), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime), @p8='?' (Size = 20), @p9='?' (DbType = DateTime), @p10='?' (Size = 255), @p11='?' (DbType = DateTime), @p12='?' (DbType = DateTime), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime), @p16='?' (DbType = Int32), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Discount` (`CategoryId`, `CreatedAt`, `DeletedAt`, `Description`, `DiscountPercent`, `EndDate`, `IsActive`, `ModifiedAt`, `Name`, `StartDate`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT `Id`
FROM `Discount`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-30 05:39:28.332 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.DiscoutDtos.DiscountDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-30 05:39:28.349 +03:00 [INF] Executed action E_Commerce.Controllers.DiscountController.CreateAsync (E-Commerce) in 2700.0106ms
2025-08-30 05:39:28.355 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.DiscountController.CreateAsync (E-Commerce)'
2025-08-30 05:39:28.360 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Discount - 201 384 application/json; charset=utf-8 2911.3465ms
2025-08-30 05:39:36.649 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire - null null
2025-08-30 05:39:39.176 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire - 200 null text/html 2526.6145ms
2025-08-30 05:39:39.203 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/css181801535906942 - null null
2025-08-30 05:39:39.210 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/css-dark181801675406326 - null null
2025-08-30 05:39:39.211 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/js18180953795036 - null null
2025-08-30 05:39:39.213 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-30 05:39:39.236 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16504 application/javascript; charset=utf-8 23.9228ms
2025-08-30 05:39:39.228 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/css-dark181801675406326 - 200 null text/css 17.5914ms
2025-08-30 05:39:39.247 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/css181801535906942 - 200 null text/css 44.0585ms
2025-08-30 05:39:39.255 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/js18180953795036 - 200 null application/javascript 43.6461ms
2025-08-30 05:39:39.290 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-30 05:39:39.317 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.6ms
2025-08-30 05:39:41.498 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 258
2025-08-30 05:39:41.504 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:39:41.511 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - null null
2025-08-30 05:39:42.834 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1335.0058ms
2025-08-30 05:39:43.153 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/enqueued - 200 null text/html 1642.3268ms
2025-08-30 05:39:43.178 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-30 05:39:43.178 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-30 05:39:43.182 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16504 application/javascript; charset=utf-8 3.8543ms
2025-08-30 05:39:43.211 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.7335ms
2025-08-30 05:39:45.255 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:39:45.264 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:39:46.253 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-08-30 05:39:46.719 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1464.0649ms
2025-08-30 05:39:48.717 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2463.9899ms
2025-08-30 05:39:48.728 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:39:48.739 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-30 05:39:48.747 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-30 05:39:48.762 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:39:48.765 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16504 application/javascript; charset=utf-8 25.9539ms
2025-08-30 05:39:48.829 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 82.6359ms
2025-08-30 05:39:48.830 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 499 null null 101.3201ms
2025-08-30 05:39:50.828 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:39:50.833 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:39:52.264 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1436.4624ms
2025-08-30 05:39:54.272 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:39:54.278 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:39:55.725 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1453.1772ms
2025-08-30 05:39:57.317 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - application/x-www-form-urlencoded; charset=UTF-8 134
2025-08-30 05:39:57.324 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:39:57.737 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:39:57.753 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:39:59.191 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1454.1514ms
2025-08-30 05:40:00.197 +03:00 [WRN] Failed to process the job '525': an exception occurred. Retry attempt 1 of 10 will be performed in 00:00:22.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:40:01.428 +03:00 [INF] Executing GetByIdAsync for entity Discount with ID: 5
2025-08-30 05:40:01.428 +03:00 [INF] Executing GetByIdAsync for entity Discount with ID: 5
2025-08-30 05:40:01.595 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `d`.`Id`, `d`.`CategoryId`, `d`.`CreatedAt`, `d`.`DeletedAt`, `d`.`Description`, `d`.`DiscountPercent`, `d`.`EndDate`, `d`.`IsActive`, `d`.`ModifiedAt`, `d`.`Name`, `d`.`StartDate`
FROM `Discount` AS `d`
WHERE `d`.`Id` = @__id_0
LIMIT 1
2025-08-30 05:40:01.605 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `d`.`Id`, `d`.`CategoryId`, `d`.`CreatedAt`, `d`.`DeletedAt`, `d`.`Description`, `d`.`DiscountPercent`, `d`.`EndDate`, `d`.`IsActive`, `d`.`ModifiedAt`, `d`.`Name`, `d`.`StartDate`
FROM `Discount` AS `d`
WHERE `d`.`Id` = @__id_0
LIMIT 1
2025-08-30 05:40:01.871 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:40:01.877 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:40:01.988 +03:00 [WRN] Failed to process the job '524': an exception occurred. Retry attempt 1 of 10 will be performed in 00:00:30.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:40:03.178 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1306.6324ms
2025-08-30 05:40:03.610 +03:00 [WRN] Failed to process the job '521': an exception occurred. Retry attempt 1 of 10 will be performed in 00:00:36.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:40:04.793 +03:00 [WRN] Failed to process the job '524': an exception occurred. Retry attempt 2 of 10 will be performed in 00:01:08.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:40:05.200 +03:00 [WRN] Failed to process the job '520': an exception occurred. Retry attempt 1 of 10 will be performed in 00:00:41.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:40:05.861 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:40:05.867 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:40:06.564 +03:00 [WRN] Failed to process the job '521': an exception occurred. Retry attempt 2 of 10 will be performed in 00:00:32.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:40:06.802 +03:00 [WRN] Failed to process the job '354': an exception occurred. Retry attempt 1 of 10 will be performed in 00:00:15.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:40:07.318 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1456.7287ms
2025-08-30 05:40:08.318 +03:00 [WRN] Failed to process the job '520': an exception occurred. Retry attempt 2 of 10 will be performed in 00:00:36.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:40:08.419 +03:00 [WRN] Failed to process the job '353': an exception occurred. Retry attempt 1 of 10 will be performed in 00:00:28.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:40:09.876 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:40:09.902 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:40:10.004 +03:00 [WRN] Failed to process the job '304': an exception occurred. Retry attempt 1 of 10 will be performed in 00:00:17.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:40:10.090 +03:00 [WRN] Failed to process the job '353': an exception occurred. Retry attempt 2 of 10 will be performed in 00:00:18.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:40:11.355 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1478.4005ms
2025-08-30 05:40:11.395 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/jobs/scheduled/enqueue - 204 null null 14078.8448ms
2025-08-30 05:40:11.417 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-08-30 05:40:11.861 +03:00 [WRN] Failed to process the job '353': an exception occurred. Retry attempt 3 of 10 will be performed in 00:00:58.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:40:13.630 +03:00 [WRN] Failed to process the job '304': an exception occurred. Retry attempt 2 of 10 will be performed in 00:00:16.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:40:13.832 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2414.9742ms
2025-08-30 05:40:13.875 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-30 05:40:13.879 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-30 05:40:13.882 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16504 application/javascript; charset=utf-8 2.8847ms
2025-08-30 05:40:13.896 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 20.58ms
2025-08-30 05:40:15.373 +03:00 [WRN] Failed to process the job '304': an exception occurred. Retry attempt 3 of 10 will be performed in 00:01:04.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:40:16.867 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:40:16.874 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:40:17.149 +03:00 [WRN] Failed to process the job '354': an exception occurred. Retry attempt 2 of 10 will be performed in 00:00:40.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:40:18.314 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1446.6866ms
2025-08-30 05:40:18.558 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Discount/5?includeDeleted=false - null null
2025-08-30 05:40:18.567 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-30 05:40:18.722 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-30 05:40:18.731 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.DiscountController.GetByIdAsync (E-Commerce)'
2025-08-30 05:40:18.743 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "Discount"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.DiscoutDtos.DiscountDto]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], Boolean) on controller E_Commerce.Controllers.DiscountController (E-Commerce).
2025-08-30 05:40:18.758 +03:00 [INF] Executing GetByIdAsync for id: 5, isActive: , includeDeleted: False
2025-08-30 05:40:18.763 +03:00 [INF] Execute GetAll for entity Discount
2025-08-30 05:40:18.917 +03:00 [WRN] Failed to process the job '354': an exception occurred. Retry attempt 3 of 10 will be performed in 00:00:49.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:40:18.930 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `d`.`Id`, `d`.`Name`, `d`.`Description`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `d`.`CreatedAt`, `d`.`ModifiedAt`, `d`.`DeletedAt`
FROM `Discount` AS `d`
WHERE (`d`.`Id` = @__id_0) AND `d`.`DeletedAt` IS NULL
LIMIT 1
2025-08-30 05:40:18.938 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.DiscoutDtos.DiscountDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-30 05:40:18.943 +03:00 [INF] Executed action E_Commerce.Controllers.DiscountController.GetByIdAsync (E-Commerce) in 194.9226ms
2025-08-30 05:40:18.948 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.DiscountController.GetByIdAsync (E-Commerce)'
2025-08-30 05:40:18.954 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Discount/5?includeDeleted=false - 200 384 application/json; charset=utf-8 396.2739ms
2025-08-30 05:40:20.657 +03:00 [WRN] Failed to process the job '520': an exception occurred. Retry attempt 3 of 10 will be performed in 00:01:13.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:40:20.863 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:40:20.872 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:40:22.317 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1454.2195ms
2025-08-30 05:40:22.394 +03:00 [WRN] Failed to process the job '521': an exception occurred. Retry attempt 3 of 10 will be performed in 00:00:40.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:40:24.149 +03:00 [WRN] Failed to process the job '521': an exception occurred. Retry attempt 4 of 10 will be performed in 00:02:56.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:40:24.900 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:40:24.907 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:40:25.934 +03:00 [WRN] Failed to process the job '525': an exception occurred. Retry attempt 2 of 10 will be performed in 00:00:38.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:40:26.369 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1468.9889ms
2025-08-30 05:40:27.727 +03:00 [WRN] Failed to process the job '525': an exception occurred. Retry attempt 3 of 10 will be performed in 00:00:34.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:40:28.864 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:40:28.874 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:40:29.487 +03:00 [WRN] Failed to process the job '525': an exception occurred. Retry attempt 4 of 10 will be performed in 00:01:48.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:40:30.325 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1461.379ms
2025-08-30 05:40:32.865 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:40:32.874 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:40:34.327 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1461.9759ms
2025-08-30 05:40:36.872 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:40:36.879 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:40:38.331 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1459.076ms
2025-08-30 05:40:40.858 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Products - application/json-patch+json 136
2025-08-30 05:40:40.862 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:40:40.864 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:40:40.870 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:40:40.872 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-30 05:40:41.029 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-30 05:40:41.034 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-08-30 05:40:41.046 +03:00 [INF] Route matched with {action = "CreateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]] CreateProduct(E_Commerce.DtoModels.ProductDtos.CreateProductDto) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-08-30 05:40:41.071 +03:00 [INF] Executing CreateProduct
2025-08-30 05:40:41.079 +03:00 [ERR] Validation Errors: Gender must be between 1 and 4
2025-08-30 05:40:41.082 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-30 05:40:41.089 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce) in 39.164ms
2025-08-30 05:40:41.096 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-08-30 05:40:41.099 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Products - 400 212 application/json; charset=utf-8 240.3055ms
2025-08-30 05:40:42.333 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1470.4989ms
2025-08-30 05:40:44.884 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:40:44.892 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:40:46.317 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1432.744ms
2025-08-30 05:40:48.873 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:40:48.880 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:40:50.221 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Products - application/json-patch+json 136
2025-08-30 05:40:50.232 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:40:50.235 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-30 05:40:50.342 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1469.2673ms
2025-08-30 05:40:50.397 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-30 05:40:50.402 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-08-30 05:40:50.405 +03:00 [INF] Route matched with {action = "CreateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]] CreateProduct(E_Commerce.DtoModels.ProductDtos.CreateProductDto) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-08-30 05:40:50.418 +03:00 [INF] Executing CreateProduct
2025-08-30 05:40:50.433 +03:00 [WRN] CreateProductAsync called with invalid Subcategoryid: 0
2025-08-30 05:40:50.437 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-30 05:40:50.440 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce) in 26.0681ms
2025-08-30 05:40:50.446 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-08-30 05:40:50.449 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Products - 400 228 application/json; charset=utf-8 227.6962ms
2025-08-30 05:40:52.865 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:40:52.870 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:40:54.326 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1460.9124ms
2025-08-30 05:40:56.866 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:40:56.891 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:40:58.373 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1506.6231ms
2025-08-30 05:40:59.558 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Products - application/json-patch+json 136
2025-08-30 05:40:59.563 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:40:59.565 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-30 05:40:59.722 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-30 05:40:59.732 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-08-30 05:40:59.734 +03:00 [INF] Route matched with {action = "CreateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]] CreateProduct(E_Commerce.DtoModels.ProductDtos.CreateProductDto) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-08-30 05:40:59.785 +03:00 [INF] Executing CreateProduct
2025-08-30 05:40:59.787 +03:00 [INF] Creating new product: ZLcUHB0twIsxretkZLCT
2025-08-30 05:41:00.115 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL)
2025-08-30 05:41:00.204 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__name_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE `p`.`Name` = @__name_0)
2025-08-30 05:41:00.213 +03:00 [INF] Executing CreateAsync for entity Product
2025-08-30 05:41:00.294 +03:00 [INF] Product added successfully (pending save)
2025-08-30 05:41:00.295 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-30 05:41:00.297 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-30 05:41:00.298 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-30 05:41:00.479 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (Size = 20), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (Size = 255), @p13='?' (DbType = DateTime), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (Size = 4000), @p17='?' (DbType = DateTime), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Products` (`CreatedAt`, `DeletedAt`, `Description`, `DiscountId`, `Gender`, `IsActive`, `ModifiedAt`, `Name`, `Price`, `Quantity`, `SubCategoryId`, `fitType`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
SELECT `Id`
FROM `Products`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-30 05:41:00.665 +03:00 [ERR] An error occurred using a transaction.
2025-08-30 05:41:00.672 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce) in 933.2595ms
2025-08-30 05:41:00.677 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-08-30 05:41:00.684 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Already committed or rolled back.
   at MySqlConnector.MySqlTransaction.VerifyValid() in /_/src/MySqlConnector/MySqlTransaction.cs:line 287
   at MySqlConnector.MySqlTransaction.RollbackAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlTransaction.cs:line 65
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.RollbackAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.RollbackAsync(CancellationToken cancellationToken)
   at E_Commerce.Services.ProductServices.ProductCatalogService.CreateProductAsync(CreateProductDto dto, String userId) in D:\project_fashion\E-Commerce-API-main\Services\ProductServices\ProductCatalogService.cs:line 212
   at E_Commerce.Services.ProductServices.ProductsServices.CreateProductAsync(CreateProductDto dto, String userId) in D:\project_fashion\E-Commerce-API-main\Services\ProductServices\ProductsServices.cs:line 54
   at E_Commerce.Controllers.ProductController.CreateProduct(CreateProductDto model) in D:\project_fashion\E-Commerce-API-main\Controllers\ProductController.cs:line 198
   at lambda_method1011(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at SecurityStampMiddleware.Invoke(HttpContext context) in D:\project_fashion\E-Commerce-API-main\MiddleWares\SecurityStampMiddleware.cs:line 75
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context) in D:\project_fashion\E-Commerce-API-main\Middleware\UserAuthenticationMiddleware.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-30 05:41:00.727 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Products - 500 null text/plain; charset=utf-8 1169.3422ms
2025-08-30 05:41:00.859 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:41:00.865 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:41:02.324 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1464.9891ms
2025-08-30 05:41:04.865 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:41:04.871 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:41:06.323 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1458.4072ms
2025-08-30 05:41:08.926 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:41:08.955 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:41:10.412 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1485.8728ms
2025-08-30 05:41:12.863 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:41:12.875 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:41:14.306 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1443.2345ms
2025-08-30 05:41:16.871 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:41:16.878 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:41:18.331 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1459.1672ms
2025-08-30 05:41:20.863 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:41:20.878 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:41:22.336 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1473.2108ms
2025-08-30 05:41:24.861 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:41:24.869 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:41:26.325 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1463.5965ms
2025-08-30 05:41:28.873 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:41:28.884 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:41:30.337 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1463.6559ms
2025-08-30 05:41:32.870 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:41:32.875 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:41:34.313 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1442.8674ms
2025-08-30 05:41:36.869 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:41:36.874 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:41:38.310 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1441.0898ms
2025-08-30 05:41:40.876 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:41:41.019 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:41:42.480 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1603.8704ms
2025-08-30 05:41:42.934 +03:00 [INF] 2 servers were removed due to timeout
2025-08-30 05:41:44.875 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:41:44.888 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:41:46.348 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1473.0989ms
2025-08-30 05:41:48.869 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:41:48.883 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:41:50.339 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1469.3021ms
2025-08-30 05:41:52.869 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:41:52.875 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:41:54.371 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1501.8414ms
2025-08-30 05:41:57.026 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:41:57.073 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:41:58.579 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1553.5957ms
2025-08-30 05:42:00.866 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:42:00.871 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:42:02.341 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1475.6403ms
2025-08-30 05:42:04.874 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:42:04.887 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:42:06.386 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1512.3802ms
2025-08-30 05:42:08.867 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:42:08.871 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:42:10.337 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1470.0108ms
2025-08-30 05:42:12.871 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:42:12.886 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:42:14.322 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1450.998ms
2025-08-30 05:42:16.903 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:42:16.908 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:42:18.378 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1474.5776ms
2025-08-30 05:42:19.343 +03:00 [WRN] Failed to process the job '304': an exception occurred. Retry attempt 4 of 10 will be performed in 00:02:24.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:42:20.876 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:42:20.881 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:42:21.210 +03:00 [WRN] Failed to process the job '353': an exception occurred. Retry attempt 4 of 10 will be performed in 00:03:20.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:42:22.376 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1500.6367ms
2025-08-30 05:42:23.041 +03:00 [WRN] Failed to process the job '354': an exception occurred. Retry attempt 4 of 10 will be performed in 00:02:40.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:42:24.844 +03:00 [WRN] Failed to process the job '520': an exception occurred. Retry attempt 4 of 10 will be performed in 00:03:12.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:42:24.875 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:42:24.880 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:42:26.355 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1479.9409ms
2025-08-30 05:42:26.628 +03:00 [WRN] Failed to process the job '524': an exception occurred. Retry attempt 3 of 10 will be performed in 00:01:10.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:42:28.468 +03:00 [WRN] Failed to process the job '525': an exception occurred. Retry attempt 5 of 10 will be performed in 00:06:21.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:42:28.867 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:42:28.874 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:42:30.368 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1500.0769ms
2025-08-30 05:42:33.126 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:42:33.138 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:42:34.600 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1473.6798ms
2025-08-30 05:42:36.906 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:42:36.912 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:42:57.283 +03:00 [INF] DB tables already exist. Exit install
2025-08-30 05:42:59.500 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-30 05:43:00.646 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-30 05:43:01.359 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-30 05:43:01.541 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-30 05:43:01.567 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-30 05:43:01.586 +03:00 [INF] Starting data seeding...
2025-08-30 05:43:01.613 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-30 05:43:02.213 +03:00 [INF] Executed DbCommand (119ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-30 05:43:02.308 +03:00 [INF] Role 'Admin' already exists.
2025-08-30 05:43:02.465 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-30 05:43:02.473 +03:00 [INF] Role 'User' already exists.
2025-08-30 05:43:02.647 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-30 05:43:02.783 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-30 05:43:02.786 +03:00 [INF] Data seeding completed successfully.
2025-08-30 05:43:04.217 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-30 05:43:04.391 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-30 05:43:04.398 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-30 05:43:04.443 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-30 05:43:04.445 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-30 05:43:04.468 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-30 05:43:04.478 +03:00 [INF] Hosting environment: Development
2025-08-30 05:43:04.485 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-30 05:43:04.642 +03:00 [INF] Server mrrobot:24856:81bf7c56 successfully announced in 167.0549 ms
2025-08-30 05:43:04.660 +03:00 [INF] Server mrrobot:24856:81bf7c56 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-30 05:43:04.737 +03:00 [INF] Server mrrobot:24856:81bf7c56 all the dispatchers started
2025-08-30 05:43:04.894 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-08-30 05:43:05.290 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-30 05:43:08.279 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 3386.3521ms
2025-08-30 05:43:08.307 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/css18180687260420 - null null
2025-08-30 05:43:08.320 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/css-dark181801071644973 - null null
2025-08-30 05:43:08.328 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/css18180687260420 - 200 null text/css 21.0927ms
2025-08-30 05:43:08.336 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/css-dark181801071644973 - 200 null text/css 15.8887ms
2025-08-30 05:43:08.339 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/js18180630830027 - null null
2025-08-30 05:43:08.358 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-30 05:43:08.362 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/js18180630830027 - 200 null application/javascript 22.5211ms
2025-08-30 05:43:08.366 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16504 application/javascript; charset=utf-8 8.5354ms
2025-08-30 05:43:08.390 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-30 05:43:08.437 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 46.7123ms
2025-08-30 05:43:10.878 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:43:10.887 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:43:12.421 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1543.4526ms
2025-08-30 05:43:14.873 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:43:14.879 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:43:16.370 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1496.5552ms
2025-08-30 05:43:18.868 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:43:18.874 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:43:20.335 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1466.288ms
2025-08-30 05:43:22.868 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:43:22.873 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:43:24.391 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1522.7933ms
2025-08-30 05:43:26.877 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:43:26.884 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:43:28.346 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1468.8956ms
2025-08-30 05:43:30.866 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:43:30.875 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:43:32.327 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1460.7985ms
2025-08-30 05:43:34.870 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:43:34.878 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:43:36.337 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1466.1363ms
2025-08-30 05:43:38.871 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:43:38.879 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:43:40.332 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1461.1604ms
2025-08-30 05:43:42.875 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:43:42.889 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:43:43.700 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Products - application/json-patch+json 136
2025-08-30 05:43:43.713 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:43:43.977 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-30 05:43:44.201 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-30 05:43:44.250 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-08-30 05:43:44.288 +03:00 [INF] Route matched with {action = "CreateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]] CreateProduct(E_Commerce.DtoModels.ProductDtos.CreateProductDto) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-08-30 05:43:44.393 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1517.4848ms
2025-08-30 05:43:44.792 +03:00 [INF] Executing CreateProduct
2025-08-30 05:43:44.801 +03:00 [INF] Creating new product: ZLcUHB0twIsxretkZLCT
2025-08-30 05:43:45.160 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL)
2025-08-30 05:43:45.252 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__name_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE `p`.`Name` = @__name_0)
2025-08-30 05:43:45.356 +03:00 [WRN] CreateProductAsync: Product with same name exists: ZLcUHB0twIsxretkZLCT
2025-08-30 05:43:45.387 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-30 05:43:45.423 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce) in 1124.6431ms
2025-08-30 05:43:45.428 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-08-30 05:43:45.440 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Products - 409 294 application/json; charset=utf-8 1740.4668ms
2025-08-30 05:43:46.868 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:43:46.873 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:43:48.321 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1453.4248ms
2025-08-30 05:43:50.865 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:43:50.881 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:43:52.336 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1470.3834ms
2025-08-30 05:43:54.866 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:43:54.872 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:43:56.315 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1448.6296ms
2025-08-30 05:43:58.868 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:43:58.874 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:44:00.308 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Products - application/json-patch+json 137
2025-08-30 05:44:00.336 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1468.6708ms
2025-08-30 05:44:00.375 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:44:00.389 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-30 05:44:00.547 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-30 05:44:00.555 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-08-30 05:44:00.557 +03:00 [INF] Route matched with {action = "CreateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]] CreateProduct(E_Commerce.DtoModels.ProductDtos.CreateProductDto) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-08-30 05:44:00.578 +03:00 [INF] Executing CreateProduct
2025-08-30 05:44:00.585 +03:00 [ERR] Validation Errors: Name must be between 5 and 20 characters.
2025-08-30 05:44:00.589 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-30 05:44:00.592 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce) in 31.4759ms
2025-08-30 05:44:00.594 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-08-30 05:44:00.596 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Products - 400 223 application/json; charset=utf-8 287.8666ms
2025-08-30 05:44:02.869 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:44:02.879 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:44:04.320 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1451.2489ms
2025-08-30 05:44:06.860 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:44:06.864 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:44:08.311 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1451.5926ms
2025-08-30 05:44:10.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Products - application/json-patch+json 125
2025-08-30 05:44:10.161 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:44:10.167 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-30 05:44:10.338 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-30 05:44:10.354 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-08-30 05:44:10.356 +03:00 [INF] Route matched with {action = "CreateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]] CreateProduct(E_Commerce.DtoModels.ProductDtos.CreateProductDto) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-08-30 05:44:10.408 +03:00 [INF] Executing CreateProduct
2025-08-30 05:44:10.410 +03:00 [INF] Creating new product: ZLckZLCqT
2025-08-30 05:44:10.728 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL)
2025-08-30 05:44:10.818 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__name_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE `p`.`Name` = @__name_0)
2025-08-30 05:44:10.836 +03:00 [INF] Executing CreateAsync for entity Product
2025-08-30 05:44:10.871 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:44:10.879 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:44:10.994 +03:00 [INF] Product added successfully (pending save)
2025-08-30 05:44:10.998 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-30 05:44:11.003 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-30 05:44:11.032 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-30 05:44:11.384 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (Size = 20), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (Size = 255), @p13='?' (DbType = DateTime), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (Size = 4000), @p17='?' (DbType = DateTime), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Products` (`CreatedAt`, `DeletedAt`, `Description`, `DiscountId`, `Gender`, `IsActive`, `ModifiedAt`, `Name`, `Price`, `Quantity`, `SubCategoryId`, `fitType`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
SELECT `Id`
FROM `Products`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-30 05:44:12.332 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1461.2439ms
2025-08-30 05:44:12.651 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-30 05:44:12.698 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce) in 2338.7234ms
2025-08-30 05:44:12.705 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-08-30 05:44:12.707 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Products - 201 445 application/json; charset=utf-8 2552.225ms
2025-08-30 05:44:14.870 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:44:14.878 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:44:16.401 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1530.5044ms
2025-08-30 05:44:18.866 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:44:18.888 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:44:18.978 +03:00 [INF] Removing cache by tags: [Product, Productwithdata]
2025-08-30 05:44:19.429 +03:00 [WRN] No cache entries found for tags: [Product, Productwithdata]
2025-08-30 05:44:20.200 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1333.9677ms
2025-08-30 05:44:22.866 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:44:22.875 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:44:23.473 +03:00 [WRN] Failed to process the job '304': an exception occurred. Retry attempt 5 of 10 will be performed in 00:05:36.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:44:24.308 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1441.6143ms
2025-08-30 05:44:25.290 +03:00 [WRN] Failed to process the job '354': an exception occurred. Retry attempt 5 of 10 will be performed in 00:04:56.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:44:26.875 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:44:26.885 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:44:27.052 +03:00 [WRN] Failed to process the job '521': an exception occurred. Retry attempt 5 of 10 will be performed in 00:06:26.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:44:28.330 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1455.5708ms
2025-08-30 05:44:28.798 +03:00 [WRN] Failed to process the job '524': an exception occurred. Retry attempt 4 of 10 will be performed in 00:03:24.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:44:30.869 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:44:30.870 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/subcategories - application/json-patch+json 126
2025-08-30 05:44:30.875 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:44:30.881 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:44:30.887 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-30 05:44:31.052 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-30 05:44:31.057 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.Create (E-Commerce)'
2025-08-30 05:44:31.063 +03:00 [INF] Route matched with {action = "Create", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto]]] Create(E_Commerce.DtoModels.SubCategorydto.CreateSubCategoryDto) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-08-30 05:44:31.080 +03:00 [INF] Executing Create
2025-08-30 05:44:31.089 +03:00 [INF] Execute CreateAsync
2025-08-30 05:44:31.246 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL)
2025-08-30 05:44:31.259 +03:00 [INF] Executing IsExsistByNameAsync for name: Sw1Y7tzTbKXrlbkIKfsG
2025-08-30 05:44:31.414 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE `s`.`Name` = @__name_0)
2025-08-30 05:44:31.425 +03:00 [INF] Category with name: Sw1Y7tzTbKXrlbkIKfsG does not exist
2025-08-30 05:44:31.663 +03:00 [INF] Executing CreateAsync for entity SubCategory
2025-08-30 05:44:31.694 +03:00 [INF] SubCategory added successfully (pending save)
2025-08-30 05:44:31.862 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 50), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `SubCategories` (`CategoryId`, `CreatedAt`, `DeletedAt`, `Description`, `IsActive`, `ModifiedAt`, `Name`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `SubCategories`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-30 05:44:31.960 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-30 05:44:31.966 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-30 05:44:31.973 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-30 05:44:32.313 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1444.6317ms
2025-08-30 05:44:32.991 +03:00 [ERR] ‚ùå Exception in CreateAsync: Object reference not set to an instance of an object.
2025-08-30 05:44:33.973 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-30 05:44:33.985 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.Create (E-Commerce) in 2911.5994ms
2025-08-30 05:44:33.990 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.Create (E-Commerce)'
2025-08-30 05:44:33.992 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/subcategories - 500 333 application/json; charset=utf-8 3121.3375ms
2025-08-30 05:44:34.868 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:44:34.875 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:44:36.329 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1460.8176ms
2025-08-30 05:44:38.867 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:44:38.876 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:44:39.522 +03:00 [INF] Removing cache by tags: [subcategory, subcategorywithdata]
2025-08-30 05:44:39.950 +03:00 [WRN] No cache entries found for tags: [subcategory, subcategorywithdata]
2025-08-30 05:44:40.174 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1306.5965ms
2025-08-30 05:44:42.892 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:44:42.900 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:44:44.334 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1441.8299ms
2025-08-30 05:44:46.864 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:44:46.872 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:44:48.303 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1439.4497ms
2025-08-30 05:44:50.862 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:44:50.869 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:44:52.303 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1440.8128ms
2025-08-30 05:44:54.862 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:44:54.869 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:44:56.325 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1462.8869ms
2025-08-30 05:44:58.866 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:44:58.875 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:45:00.334 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1467.6066ms
2025-08-30 05:45:02.862 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:45:02.876 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:45:04.341 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1478.8294ms
2025-08-30 05:45:06.865 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:45:06.885 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:45:08.341 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1476.7519ms
2025-08-30 05:45:10.872 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:45:10.879 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:45:12.328 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1456.0622ms
2025-08-30 05:45:14.876 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:45:14.880 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:45:16.325 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1448.284ms
2025-08-30 05:45:18.874 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:45:18.879 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:45:20.314 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1439.9275ms
2025-08-30 05:45:22.876 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:45:22.882 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:45:24.329 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1452.5184ms
2025-08-30 05:45:26.867 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:45:26.892 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:45:28.378 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1510.8139ms
2025-08-30 05:45:30.896 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:45:30.900 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:45:32.383 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1486.2916ms
2025-08-30 05:45:34.876 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:45:34.979 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:45:36.461 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1585.5819ms
2025-08-30 05:45:38.862 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:45:38.867 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:45:40.360 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1498.0175ms
2025-08-30 05:45:42.930 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:45:42.990 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:45:44.455 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1525.5467ms
2025-08-30 05:45:46.866 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:45:46.874 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:45:48.323 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1456.61ms
2025-08-30 05:45:50.872 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:45:50.896 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:45:52.347 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1474.2501ms
2025-08-30 05:45:54.873 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:45:54.889 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:46:18.314 +03:00 [INF] DB tables already exist. Exit install
2025-08-30 05:46:20.366 +03:00 [WRN] The foreign key property 'Customer.ImageId1' was created in shadow state because a conflicting property with the simple name 'ImageId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-08-30 05:46:21.488 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-30 05:46:22.198 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-30 05:46:22.383 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-30 05:46:22.409 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-30 05:46:22.426 +03:00 [INF] Starting data seeding...
2025-08-30 05:46:22.454 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-30 05:46:23.273 +03:00 [INF] Executed DbCommand (233ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-30 05:46:23.431 +03:00 [INF] Role 'Admin' already exists.
2025-08-30 05:46:23.589 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-30 05:46:23.595 +03:00 [INF] Role 'User' already exists.
2025-08-30 05:46:23.809 +03:00 [INF] Executed DbCommand (98ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`Gender`, `a`.`ImageId`, `a`.`ImageId1`, `a`.`LastVisit`, `a`.`Name`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-30 05:46:23.924 +03:00 [INF] Admin user already exists. Skipping provider/method creation.
2025-08-30 05:46:23.926 +03:00 [INF] Data seeding completed successfully.
2025-08-30 05:46:25.459 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-30 05:46:25.772 +03:00 [INF] Starting Hangfire Server using job storage: 'Server: mysql-3581f657-omargamal1132004-b0c1.b.aivencloud.com@Fashion_Site'
2025-08-30 05:46:25.835 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-30 05:46:25.896 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-30 05:46:25.898 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-30 05:46:25.949 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-30 05:46:25.999 +03:00 [INF] Hosting environment: Development
2025-08-30 05:46:26.030 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-30 05:46:26.157 +03:00 [INF] Server mrrobot:24512:8fa65c71 successfully announced in 180.2013 ms
2025-08-30 05:46:26.164 +03:00 [INF] Server mrrobot:24512:8fa65c71 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-30 05:46:26.272 +03:00 [INF] Server mrrobot:24512:8fa65c71 all the dispatchers started
2025-08-30 05:46:26.681 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - null null
2025-08-30 05:46:26.917 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-30 05:46:28.109 +03:00 [WRN] Failed to process the job '353': an exception occurred. Retry attempt 5 of 10 will be performed in 00:06:31.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:46:29.526 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/jobs/scheduled - 200 null text/html 2846.3359ms
2025-08-30 05:46:29.555 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/css181801734185201 - null null
2025-08-30 05:46:29.555 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/css-dark18180335907005 - null null
2025-08-30 05:46:29.598 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/css-dark18180335907005 - 200 null text/css 42.8634ms
2025-08-30 05:46:29.598 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/css181801734185201 - 200 null text/css 42.864ms
2025-08-30 05:46:29.618 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/hangfire/js18180959485668 - null null
2025-08-30 05:46:29.646 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/hangfire/js18180959485668 - 200 null application/javascript 27.6657ms
2025-08-30 05:46:29.694 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-30 05:46:29.701 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16504 application/javascript; charset=utf-8 6.9415ms
2025-08-30 05:46:29.783 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-30 05:46:29.856 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 72.4274ms
2025-08-30 05:46:29.963 +03:00 [WRN] Failed to process the job '520': an exception occurred. Retry attempt 5 of 10 will be performed in 00:04:46.
System.InvalidOperationException: The type `E_Commerce.Services.Discount.DiscountService` does not contain a method with signature `CheckOnDiscount(Int32)`
   at Hangfire.Storage.InvocationData.<>c.<CachedDeserializeMethod>b__33_0(MethodDeserializerCacheKey key) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 350
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Hangfire.Storage.InvocationData.CachedDeserializeMethod(Func`2 typeResolver, String typeName, String methodName, String parameterTypes, Type& type, MethodInfo& methodInfo) in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 335
   at Hangfire.Storage.InvocationData.DeserializeJob() in C:\projects\hangfire-525\src\Hangfire.Core\Storage\InvocationData.cs:line 100
2025-08-30 05:46:32.875 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:46:32.885 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:46:33.951 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/subcategories - application/json-patch+json 126
2025-08-30 05:46:33.960 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:46:34.273 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-30 05:46:34.410 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1535.0221ms
2025-08-30 05:46:34.490 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-30 05:46:34.520 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.Create (E-Commerce)'
2025-08-30 05:46:34.554 +03:00 [INF] Route matched with {action = "Create", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto]]] Create(E_Commerce.DtoModels.SubCategorydto.CreateSubCategoryDto) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-08-30 05:46:34.691 +03:00 [INF] Executing Create
2025-08-30 05:46:34.697 +03:00 [INF] Execute CreateAsync
2025-08-30 05:46:34.866 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL)
2025-08-30 05:46:34.880 +03:00 [INF] Executing IsExsistByNameAsync for name: Sw1Y7tzTbKXrlbkIKfsG
2025-08-30 05:46:35.037 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE `s`.`Name` = @__name_0)
2025-08-30 05:46:35.043 +03:00 [INF] Category with name: Sw1Y7tzTbKXrlbkIKfsG does not exist
2025-08-30 05:46:35.305 +03:00 [INF] Executing CreateAsync for entity SubCategory
2025-08-30 05:46:35.394 +03:00 [INF] SubCategory added successfully (pending save)
2025-08-30 05:46:35.693 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 50), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `SubCategories` (`CategoryId`, `CreatedAt`, `DeletedAt`, `Description`, `IsActive`, `ModifiedAt`, `Name`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `SubCategories`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-30 05:46:35.828 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-30 05:46:35.831 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-30 05:46:35.867 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-30 05:46:36.874 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:46:36.881 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:46:37.850 +03:00 [INF] Successfully mapped subcategory to DTO
2025-08-30 05:46:37.910 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-30 05:46:37.965 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.Create (E-Commerce) in 3399.74ms
2025-08-30 05:46:37.971 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.Create (E-Commerce)'
2025-08-30 05:46:37.982 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/subcategories - 201 395 application/json; charset=utf-8 4030.3607ms
2025-08-30 05:46:38.425 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1550.698ms
2025-08-30 05:46:38.535 +03:00 [INF] Removing cache by tags: [subcategory, subcategorywithdata]
2025-08-30 05:46:38.968 +03:00 [WRN] No cache entries found for tags: [subcategory, subcategorywithdata]
2025-08-30 05:46:39.123 +03:00 [INF] Removing cache by tag: categorywithdata
2025-08-30 05:46:39.341 +03:00 [WRN] No cache entries found for tag: categorywithdata
2025-08-30 05:46:40.873 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:46:40.881 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:46:42.166 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1292.7297ms
2025-08-30 05:46:44.859 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:46:44.864 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:46:46.293 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1433.6803ms
2025-08-30 05:46:48.873 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:46:48.874 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/subcategories?page=1&pageSize=10 - null null
2025-08-30 05:46:48.879 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:46:48.892 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-30 05:46:49.048 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-30 05:46:49.056 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.Search (E-Commerce)'
2025-08-30 05:46:49.067 +03:00 [INF] Route matched with {action = "Search", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto]]]] Search(System.String, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-08-30 05:46:49.090 +03:00 [INF] Executing Search with key=, isActive=, includeDeleted=, page=1, pageSize=10
2025-08-30 05:46:49.097 +03:00 [INF] Executing FilterAsync with filters
2025-08-30 05:46:49.102 +03:00 [INF] Getting cache for key: subcategory:list_active:_deleted:_Search:
2025-08-30 05:46:49.322 +03:00 [WRN] Cache miss for key: subcategory:list_active:_deleted:_Search:
2025-08-30 05:46:49.324 +03:00 [INF] Execute GetAll for entity SubCategory
2025-08-30 05:46:49.634 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`IsActive`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`Description`, `t0`.`Id`, `t0`.`Url`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`IsActive`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`, `s`.`Description`
    FROM `SubCategories` AS `s`
    ORDER BY `s`.`Id`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-08-30 05:46:49.649 +03:00 [INF] Setting cache for key: subcategory:list_active:_deleted:_Search:
2025-08-30 05:46:49.698 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-30 05:46:49.710 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.Search (E-Commerce) in 639.3077ms
2025-08-30 05:46:49.714 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.Search (E-Commerce)'
2025-08-30 05:46:49.716 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/subcategories?page=1&pageSize=10 - 200 3181 application/json; charset=utf-8 842.8631ms
2025-08-30 05:46:49.927 +03:00 [INF] Cache set successfully for key: subcategory:list_active:_deleted:_Search: with tags: [subcategory, subcategorywithdata]
2025-08-30 05:46:50.344 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1470.6467ms
2025-08-30 05:46:52.877 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:46:52.884 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:46:54.340 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1462.7726ms
2025-08-30 05:46:56.874 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:46:56.881 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:46:58.342 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1468.0516ms
2025-08-30 05:47:00.871 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:47:00.879 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:47:02.347 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1475.5615ms
2025-08-30 05:47:04.875 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:47:04.881 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:47:04.930 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/Wishlist?page=1&pageSize=20 - null null
2025-08-30 05:47:04.941 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-30 05:47:05.097 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-30 05:47:05.107 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.WishlistController.GetWishlist (E-Commerce)'
2025-08-30 05:47:05.119 +03:00 [INF] Route matched with {action = "GetWishlist", controller = "Wishlist"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.WishlistItemDto]]]] GetWishlist(Int32, Int32) on controller E_Commerce.Controllers.WishlistController (E-Commerce).
2025-08-30 05:47:05.144 +03:00 [INF] Getting cache for key: wishlist_ac03a6c3-9450-420a-9e6e-ea8902c018c5_page_1_size_20
2025-08-30 05:47:05.361 +03:00 [WRN] Cache miss for key: wishlist_ac03a6c3-9450-420a-9e6e-ea8902c018c5_page_1_size_20
2025-08-30 05:47:05.364 +03:00 [INF] Execute GetAll for entity WishlistItem
2025-08-30 05:47:05.590 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__8__locals1_userId_0='?' (Size = 255), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`ProductId`, `t`.`CustomerId`, `p`.`Id`, `p`.`Name`, `p`.`Price`, `p`.`IsActive`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
    ELSE 0.0
END, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
    ELSE `p`.`Price`
END, `d`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`Id`
FROM (
    SELECT `w`.`Id`, `w`.`CustomerId`, `w`.`ProductId`
    FROM `WishlistItems` AS `w`
    WHERE `w`.`CustomerId` = @__8__locals1_userId_0
    ORDER BY `w`.`Id` DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS `t`
INNER JOIN `Products` AS `p` ON `t`.`ProductId` = `p`.`Id`
LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
LEFT JOIN (
    SELECT `i`.`Url`, `i`.`IsMain`, `i`.`Id`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `p`.`Id` = `t0`.`ProductId`
ORDER BY `t`.`Id` DESC, `p`.`Id`, `d`.`Id`
2025-08-30 05:47:06.341 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1466.6465ms
2025-08-30 05:47:06.515 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.WishlistItemDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-30 05:47:06.523 +03:00 [INF] Executed action E_Commerce.Controllers.WishlistController.GetWishlist (E-Commerce) in 1393.372ms
2025-08-30 05:47:06.526 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.WishlistController.GetWishlist (E-Commerce)'
2025-08-30 05:47:06.529 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/Wishlist?page=1&pageSize=20 - 200 132 application/json; charset=utf-8 1598.5054ms
2025-08-30 05:47:08.873 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:47:08.880 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:47:09.513 +03:00 [INF] Setting cache for key: wishlist_ac03a6c3-9450-420a-9e6e-ea8902c018c5_page_1_size_20
2025-08-30 05:47:09.755 +03:00 [INF] Cache set successfully for key: wishlist_ac03a6c3-9450-420a-9e6e-ea8902c018c5_page_1_size_20 with tags: []
2025-08-30 05:47:10.316 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1443.2197ms
2025-08-30 05:47:12.860 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:47:12.867 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:47:14.149 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1288.5687ms
2025-08-30 05:47:16.861 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:47:16.868 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:47:18.302 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1440.7932ms
2025-08-30 05:47:20.860 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:47:20.865 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:47:22.288 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1427.6503ms
2025-08-30 05:47:24.874 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/hangfire/stats - application/x-www-form-urlencoded; charset=UTF-8 392
2025-08-30 05:47:24.881 +03:00 [INF] CORS policy execution successful.
2025-08-30 05:47:26.317 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/hangfire/stats - 200 null application/json 1443.2108ms
